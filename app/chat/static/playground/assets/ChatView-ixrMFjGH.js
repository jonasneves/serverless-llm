import{r as a,j as e,v as me,Z as $,w as q,x as pe,I as he,y as be,d as ge,z as Ce,T as je,U as Re}from"./react-vendor-B3RF3lZj.js";import{F as we}from"./FormattedContent-C1ywt4GL.js";import{g as Te,S as Oe,P as De,f as Be,s as $e}from"./index-CvM0QPZJ.js";import{e as Pe}from"./GestureOptions-Bcc-g8nS.js";import"./markdown-IOIbAqJG.js";import"./math-render-DqYgiYKz.js";import"./syntax-highlight-BlOvp5OR.js";function re(n,i){const L=Math.min(n.x,i.x),p=Math.min(n.y,i.y),E=Math.max(n.x,i.x),f=Math.max(n.y,i.y);return{left:L,top:p,right:E,bottom:f,width:E-L,height:f-p}}function _e(n,i){return!(n.right<i.left||n.left>i.right||n.bottom<i.top||n.top>i.bottom)}function Fe({containerRef:n,itemRefs:i,setSelectedIndices:L}){const[p,E]=a.useState(null),f=a.useRef(!1);a.useEffect(()=>{f.current=p!=null},[p]),a.useEffect(()=>{const y=l=>{if(l.button!==0||!n.current)return;const A=l.target;if(!A||A.closest('button, a, input, textarea, select, [role="button"]'))return;const r=n.current.getBoundingClientRect();if(!(l.clientX>=r.left&&l.clientX<=r.right&&l.clientY>=r.top&&l.clientY<=r.bottom))return;const b={x:l.clientX,y:l.clientY};l.preventDefault(),f.current=!0,E({origin:b,current:b,active:!1})};return window.addEventListener("mousedown",y,!0),()=>window.removeEventListener("mousedown",y,!0)},[n]),a.useEffect(()=>{if(!p||!n.current)return;const y=g=>g.preventDefault();document.addEventListener("selectstart",y);const l=g=>{const r={x:g.clientX,y:g.clientY};E(o=>{if(!o)return o;const b=re(o.origin,r),j=o.active||b.width>2||b.height>2;return{...o,current:r,active:j}})},A=g=>{f.current=!1;const r={x:g.clientX,y:g.clientY};E(o=>{if(!o)return null;const b=re(o.origin,r);if(o.active&&b.width>1&&b.height>1){const j=[];for(const[P,U]of i.current.entries()){const T=U.getBoundingClientRect();_e({left:b.left,right:b.right,top:b.top,bottom:b.bottom},{left:T.left,right:T.right,top:T.top,bottom:T.bottom})&&j.push(P)}L(new Set(j))}return null})};return window.addEventListener("mousemove",l),window.addEventListener("mouseup",A),()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",A),document.removeEventListener("selectstart",y)}},[p,n,i,L]);const d=a.useMemo(()=>{if(!p||!p.active||!n.current)return null;const y=n.current.getBoundingClientRect(),l=re(p.origin,p.current);return l.width<=0||l.height<=0?null:{left:l.left-y.left,top:l.top-y.top,width:l.width,height:l.height}},[p,n]),h=a.useCallback(()=>{E(null),f.current=!1},[]);return{selectionRect:d,isSelecting:p!=null,dragSelectionActiveRef:f,clearSelection:h}}const Ie=6e4;function He(){const n=a.useRef(new Map),i=a.useRef(null),L=d=>{const h=n.current.get(d);return h?Date.now()-h<Ie:!1};return{sortModels:d=>{const h=d.map(r=>({...r,priority:Te(r.id,r.type||"local",r.priority),isRateLimited:L(r.id),isLastSuccessful:r.id===i.current})),y=h.filter(r=>!r.isRateLimited),l=h.filter(r=>r.isRateLimited),A=y.sort((r,o)=>r.isLastSuccessful!==o.isLastSuccessful?r.isLastSuccessful?-1:1:r.priority!==o.priority?r.priority-o.priority:r.type!==o.type?r.type==="local"?-1:1:r.id.localeCompare(o.id)),g=l.sort((r,o)=>r.priority!==o.priority?r.priority-o.priority:r.id.localeCompare(o.id));return[...A,...g]},recordRateLimit:d=>{n.current.set(d,Date.now())},recordSuccess:d=>{i.current=d,n.current.delete(d)},isRecentlyRateLimited:L,getLastSuccessfulModel:()=>i.current}}const Me=a.forwardRef(({models:n,selectedModelId:i,onSelectModel:L,githubToken:p,onOpenTopics:E,messages:f,setMessages:d,autoMode:h,setAutoMode:y,autoModeScope:l,setAutoModeScope:A,currentResponse:g,setCurrentResponse:r,isGenerating:o,setIsGenerating:b,onModelUsed:j,onGestureOptionsChange:P},U)=>{const[T,ne]=a.useState(!1),[J,H]=a.useState(!1),[le,_]=a.useState(!1),[W,ye]=a.useState(!0),[Y,ve]=a.useState(!1),[ae,O]=a.useState(null),[F,D]=a.useState(new Set),[ie,K]=a.useState(!1),B=a.useRef(null),oe=a.useRef(null),v=a.useRef(null),I=a.useRef(null),M=a.useRef(null),Z=a.useRef(null),V=a.useRef(new Map),{sortModels:ce,recordRateLimit:ue,recordSuccess:Ne}=He(),Q=a.useRef(!1),Se=t=>{if(!v.current)return t;const s=v.current.scrollHeight-v.current.clientHeight;return Math.max(0,Math.min(s,t))},ke=()=>{if(!v.current)return!0;const{scrollTop:t,scrollHeight:s,clientHeight:c}=v.current;return s-t-c<100};a.useImperativeHandle(U,()=>({sendMessage:(t,s)=>{de(t,s)},setInput:t=>{I.current&&(I.current.value=t,I.current.focus())},stopGeneration:()=>{xe()},scroll:t=>{if(v.current){Q.current=!0;const s=v.current.scrollTop,c=Se(s-t);v.current.scrollTop=c}}}));const{selectionRect:Le}=Fe({containerRef:oe,itemRefs:V,setSelectedIndices:D});a.useEffect(()=>{v.current&&!Q.current&&(v.current.scrollTop=v.current.scrollHeight)},[f,g,o]),a.useEffect(()=>{const t=v.current;if(!t)return;const s=()=>{ke()&&(Q.current=!1)};return t.addEventListener("scroll",s,{passive:!0}),()=>t.removeEventListener("scroll",s)},[]),a.useEffect(()=>{const t=s=>{var m;if(s.ctrlKey||s.metaKey||s.altKey)return;const c=s.target;c.tagName==="INPUT"||c.tagName==="TEXTAREA"||s.key.length===1&&((m=I.current)==null||m.focus())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),a.useEffect(()=>{const t=s=>{if((s.metaKey||s.ctrlKey)&&s.key==="a"){const c=s.target;if(c.tagName==="INPUT"||c.tagName==="TEXTAREA")return;s.preventDefault();const m=new Set(f.map((S,k)=>k));D(m);return}if(s.key==="Delete"||s.key==="Backspace"){if(F.size>0){const c=s.target;if(c.tagName==="INPUT"||c.tagName==="TEXTAREA")return;s.preventDefault(),Ee()}}else s.key==="Escape"&&D(new Set)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[F,f]),a.useEffect(()=>{const t=s=>{M.current&&!M.current.contains(s.target)&&H(!1),Z.current&&!Z.current.contains(s.target)&&_(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),a.useEffect(()=>{if(P){const t=[...f].reverse().find(s=>s.role==="assistant"&&s.content.includes("```json"));P((t==null?void 0:t.content)||null)}},[f,P]);const G=async(t,s)=>{var c,m,S;try{const k=await Be({models:[t],messages:s.map(u=>({role:u.role,content:u.content})),max_tokens:2048,temperature:.7,github_token:p||null},(c=B.current)==null?void 0:c.signal);let C="";return await $e(k,u=>{var z;if((z=B.current)!=null&&z.signal.aborted)throw new DOMException("Aborted","AbortError");if((u.event==="token"||u.content)&&u.content)C+=u.content,r(w=>w+u.content);else if(u.event==="error"||u.error){const w=String(u.error||"Stream failed");throw(w.includes("429")||w.toLowerCase().includes("rate limit")||w.toLowerCase().includes("too many requests"))&&ue(t),new Error(w)}}),Ne(t),{success:!0,content:C}}catch(k){if(k.name==="AbortError")throw k;const C=((m=k.message)==null?void 0:m.includes("429"))||((S=k.message)==null?void 0:S.toLowerCase().includes("rate limit"));return C&&ue(t),{success:!1,content:k.message,isRateLimit:C}}},de=async(t,s=!1)=>{if(!t.trim()||o||!h&&!i)return;const c={role:"user",content:t};d(m=>[...m,c]),b(!0),r(""),B.current=new AbortController;try{let m="local";if(h)m=l==="api"?"api":"local";else if(i){const u=n.find(z=>z.id===i);m=(u==null?void 0:u.type)||"local"}const S=s?{role:"system",content:m==="api"?`User is hands-free using gesture control. Build an interactive interface to guide them.

Available gesture inputs:
- ðŸ‘ (yes/approve/like)
- ðŸ‘Ž (no/disapprove/dislike)
- ðŸ‘‹ (hi/hello/greeting)
- "ok" (okay/continue)
- "thanks" (thank you)
- "stop" (stop/wait)
- Pointing finger (select UI buttons)

Choose interaction style:
- Simple binary: "Give ðŸ‘ to continue or ðŸ‘Ž to stop" (no JSON needed)
- Complex choices: Use JSON UI buttons (3+ options, or multi-word responses needed)

For JSON UI (when appropriate):
\`\`\`json
{
  "options": [
    {"id": "opt1", "label": "Option 1", "action": "message", "value": "option 1"},
    {"id": "opt2", "label": "Option 2", "action": "message", "value": "option 2"}
  ]
}
\`\`\`

Guidelines:
- Keep response concise (2-3 sentences)
- Use simple gestures for yes/no/continue (more efficient)
- Use JSON UI for 3+ options or complex choices
- Provide 2-4 options max in JSON
- User can point at buttons with index finger`:`User is hands-free (limited input). TOTAL OUTPUT under 50 words (including any thinking). Minimize or skip thinking - just answer. End with: "Want [A] or [B]?" or "Say 'yes' for [next step]." Use single words/emojis for options.`}:null,k=[...f,c].map(u=>({role:u.role,content:u.content})),C=S?[S,...k]:k;if(h){const u=n.filter(x=>l==="local"?x.type==="local":l==="api"?x.type==="api":!0),z=n.filter(x=>l==="local"?x.type==="api":l==="api"?x.type==="local":!1),w=ce(u),te=ce(z);let X=null,fe=!1;for(const x of w){O(x.id),r("");const R=await G(x.id,C);if(R.success){d(se=>[...se,{role:"assistant",content:R.content,modelName:x.name,modelId:x.id}]),r(""),O(null),j==null||j(x.id);return}X=R.content}if(te.length>0){fe=!0;for(const x of te){O(x.id),r("");const R=await G(x.id,C);if(R.success){d(se=>[...se,{role:"assistant",content:R.content,modelName:x.name,modelId:x.id}]),r(""),O(null),j==null||j(x.id);return}X=R.content}}const Ae=fe?`All models failed to respond. Last error: ${X}`:`All ${l} models failed to respond. Last error: ${X}`;d(x=>[...x,{role:"assistant",content:Ae,error:!0}]),O(null)}else{if(!i)return;const u=n.find(w=>w.id===i),z=await G(i,C);z.success?(d(w=>[...w,{role:"assistant",content:z.content,modelName:u==null?void 0:u.name,modelId:i}]),j==null||j(i)):d(w=>[...w,{role:"assistant",content:z.content,modelName:u==null?void 0:u.name,error:!0}])}r("")}catch(m){m.name!=="AbortError"&&d(S=>[...S,{role:"assistant",content:m.message,error:!0}])}finally{b(!1),O(null),B.current=null}},xe=()=>{B.current&&(B.current.abort(),b(!1),g&&(d(t=>[...t,{role:"assistant",content:g}]),r("")))},Ee=()=>{F.size!==0&&(d(t=>t.filter((s,c)=>!F.has(c))),D(new Set))},N=n.find(t=>t.id===i),ee=h&&ae?n.find(t=>t.id===ae):N,ze={local:"Local",api:"API"};return e.jsxs("div",{ref:oe,className:"flex flex-col h-full relative isolate z-[10]",children:[e.jsx(Oe,{rect:Le}),e.jsx("div",{ref:v,className:"flex-1 overflow-y-auto p-4 pb-32 chat-scroll relative z-[10] [mask-image:linear-gradient(to_bottom,transparent_0%,black_2rem,black_calc(100%-4rem),transparent_100%)]","data-no-arena-scroll":!0,onClick:t=>{(t.target===t.currentTarget||!t.target.closest("[data-message]"))&&D(new Set)},children:e.jsxs("div",{className:"mx-auto w-full min-h-full flex flex-col space-y-6",style:{maxWidth:"600px"},children:[f.length===0&&e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-500 select-none pb-20 relative",children:[e.jsx(me,{size:48,className:"mb-4 opacity-50"}),e.jsx("div",{className:"flex items-center gap-2 mb-4",children:h?e.jsx("div",{className:"flex items-center gap-1.5",children:e.jsxs("div",{className:"relative",ref:M,onMouseEnter:()=>K(!0),onMouseLeave:()=>K(!1),children:[e.jsxs("button",{onClick:()=>H(!J),className:"h-7 px-2.5 flex items-center gap-1.5 rounded-md border bg-slate-700/40 hover:bg-slate-700/60 border-slate-600/40 transition-all active:scale-95 text-xs font-medium",children:[e.jsx($,{size:12,className:"text-yellow-400"}),e.jsxs("span",{className:"text-slate-200/60",children:[l==="local"&&"Local Models (Auto)",l==="api"&&"API Models (Auto)"]}),e.jsx(q,{size:11,className:"text-slate-200/60 transition-transform"})]}),ie&&!J&&e.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 rounded-lg bg-slate-800 border border-slate-700 text-slate-300 text-xs z-50 shadow-xl w-48",children:[l==="local"&&e.jsxs("ul",{className:"space-y-1.5",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx($,{size:11,className:"shrink-0 text-emerald-400"}),e.jsx("span",{children:"Small language models"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(pe,{size:11,className:"shrink-0 text-slate-400"}),e.jsx("span",{children:"Hosted on our servers"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{size:11,className:"shrink-0 text-blue-400"}),e.jsx("span",{children:"No quota limits"})]})]}),l==="api"&&e.jsxs("ul",{className:"space-y-1.5",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(be,{size:11,className:"shrink-0 text-blue-400"}),e.jsx("span",{children:"Cloud-based models"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(ge,{size:11,className:"shrink-0 text-yellow-400"}),e.jsx("span",{children:"Free quota available"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx($,{size:11,className:"shrink-0 text-purple-400"}),e.jsx("span",{children:"More capable models"})]})]}),e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-[6px] border-l-transparent border-r-[6px] border-r-transparent border-t-[6px] border-t-slate-700"})]}),J&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 w-48 bg-slate-800 border border-slate-700 rounded-lg shadow-xl overflow-hidden z-50",children:[["local","api"].map(t=>e.jsxs("button",{onClick:()=>{A(t),H(!1)},className:`w-full px-3 py-2 text-left text-xs font-medium transition-colors ${l===t?"bg-yellow-500/20 text-yellow-300":"text-slate-300 hover:bg-slate-700/50"}`,children:[ze[t],t==="local"&&e.jsx("span",{className:"text-[10px] text-slate-500 ml-1",children:"(no quota)"}),t==="api"&&e.jsx("span",{className:"text-[10px] text-slate-500 ml-1",children:"(cloud only)"})]},t)),e.jsx("div",{className:"border-t border-slate-700",children:e.jsx("button",{onClick:()=>{y(!1),H(!1)},className:"w-full px-3 py-2 text-left text-xs font-medium text-slate-400 hover:bg-slate-700/50 transition-colors",children:"Manual Mode"})})]})]})}):e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("div",{className:"relative",ref:Z,children:[e.jsxs("button",{onClick:()=>_(!le),className:"h-7 px-2.5 flex items-center gap-1.5 rounded-md border bg-slate-700/40 hover:bg-slate-700/60 border-slate-600/40 transition-all active:scale-95 text-xs font-medium",disabled:o,children:[N&&e.jsx("div",{className:`w-2 h-2 rounded-full ${N.type==="local"?"bg-emerald-500":"bg-blue-500"}`}),e.jsx("span",{className:"text-slate-200/60",children:N?N.name:"Select a model"}),!o&&e.jsx(q,{size:11,className:"text-slate-200/60"})]}),le&&!o&&e.jsx("div",{className:"absolute top-full left-0 mt-1 w-64 bg-slate-800 border border-slate-700 rounded-lg shadow-xl overflow-hidden z-50",children:n.length===0?e.jsx("div",{className:"px-3 py-4 text-xs text-slate-500 text-center",children:"No models available"}):e.jsxs(e.Fragment,{children:[n.filter(t=>t.type==="local").length>0&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>ye(!W),className:"w-full px-3 py-2 flex items-center justify-between text-[10px] uppercase tracking-wider text-slate-400 font-semibold hover:bg-slate-700/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsx("span",{children:"Local Models"})]}),e.jsx(q,{size:12,className:`transition-transform ${W?"":"-rotate-90"}`})]}),W&&e.jsx("div",{children:n.filter(t=>t.type==="local").map(t=>e.jsx("button",{onClick:()=>{L(t.id),_(!1)},className:`w-full px-4 py-2 text-left text-xs font-medium transition-colors ${i===t.id?"bg-emerald-500/20 text-slate-200":"text-slate-300 hover:bg-slate-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500/40"}),e.jsx("span",{children:t.name})]}),i===t.id&&e.jsx("span",{className:"text-emerald-400",children:"âœ“"})]})},t.id))})]}),n.filter(t=>t.type==="api").length>0&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>ve(!Y),className:"w-full px-3 py-2 flex items-center justify-between text-[10px] uppercase tracking-wider text-slate-400 font-semibold hover:bg-slate-700/30 transition-colors border-t border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{children:"API Models"})]}),e.jsx(q,{size:12,className:`transition-transform ${Y?"":"-rotate-90"}`})]}),Y&&e.jsx("div",{children:n.filter(t=>t.type==="api").map(t=>e.jsx("button",{onClick:()=>{L(t.id),_(!1)},className:`w-full px-4 py-2 text-left text-xs font-medium transition-colors ${i===t.id?"bg-blue-500/20 text-slate-200":"text-slate-300 hover:bg-slate-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500/40"}),e.jsx("span",{children:t.name})]}),i===t.id&&e.jsx("span",{className:"text-blue-400",children:"âœ“"})]})},t.id))})]}),e.jsx("div",{className:"border-t border-slate-700",children:e.jsxs("button",{onClick:()=>{y(!0),_(!1)},className:"w-full px-3 py-2 text-left text-xs font-medium text-yellow-400 hover:bg-slate-700/50 transition-colors flex items-center gap-2",children:[e.jsx($,{size:12}),e.jsx("span",{children:"Enable Auto Mode"})]})})]})})]}),N&&e.jsxs("div",{className:"relative",onMouseEnter:()=>K(!0),onMouseLeave:()=>K(!1),children:[e.jsx(Ce,{size:13,className:"text-slate-500/60 hover:text-slate-400/80 transition-colors cursor-help"}),ie&&e.jsxs("div",{className:"absolute left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-2 rounded-lg bg-slate-800 border border-slate-700 text-slate-300 text-xs z-50 shadow-xl w-48",children:[N.type==="local"&&e.jsxs("ul",{className:"space-y-1.5",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx($,{size:11,className:"shrink-0 text-emerald-400"}),e.jsx("span",{children:"Small language models"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(pe,{size:11,className:"shrink-0 text-slate-400"}),e.jsx("span",{children:"Hosted on our servers"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(he,{size:11,className:"shrink-0 text-blue-400"}),e.jsx("span",{children:"No quota limits"})]})]}),N.type==="api"&&e.jsxs("ul",{className:"space-y-1.5",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(be,{size:11,className:"shrink-0 text-blue-400"}),e.jsx("span",{children:"Cloud-based models"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(ge,{size:11,className:"shrink-0 text-yellow-400"}),e.jsx("span",{children:"Free quota available"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx($,{size:11,className:"shrink-0 text-purple-400"}),e.jsx("span",{children:"More capable models"})]})]})]})]})]})}),!p&&(!h&&(N==null?void 0:N.type)==="api"||h&&l==="api")&&e.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 mt-16 flex items-center gap-2 px-3 py-1.5 rounded-md bg-yellow-500/10 border border-yellow-500/20 text-yellow-200 text-xs whitespace-nowrap",children:[e.jsx(je,{size:11,className:"shrink-0 text-yellow-500"}),e.jsx("span",{children:"Add GitHub token in Settings for dedicated quota"})]})]}),f.map((t,s)=>e.jsx("div",{ref:c=>{c?V.current.set(s,c):V.current.delete(s)},className:`flex ${t.role==="user"?"justify-end":"justify-start"}`,"data-message":s,onClick:c=>{(c.target===c.currentTarget||c.target.closest("[data-message]")===c.currentTarget)&&D(m=>{const S=new Set(m);return S.has(s)?S.delete(s):S.add(s),S})},children:e.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 pt-3 pb-0 select-none transition-all cursor-pointer ${F.has(s)?"ring-2 ring-blue-500 bg-blue-500/10":""} ${t.role==="user"?"bg-blue-600/20 border border-blue-500/30 text-white rounded-tr-sm":t.error?"bg-red-500/10 border border-red-500/30 text-red-200 rounded-tl-sm":"bg-slate-800/60 border border-slate-700/60 text-slate-200 rounded-tl-sm"}`,children:[e.jsxs("div",{className:`flex items-center gap-2 mb-1 text-[10px] font-bold uppercase tracking-wider ${t.role==="user"?"text-blue-300 flex-row-reverse":"text-slate-400"}`,children:[t.role==="user"?e.jsx(Re,{size:12}):e.jsx(me,{size:12}),t.role==="user"?"You":t.modelName||"Assistant",t.error&&e.jsx(je,{size:12,className:"text-red-400"})]}),e.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:e.jsx(we,{text:t.role==="user"?t.content:Pe(t.content)})})]})},s)),o&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"max-w-[85%] rounded-2xl rounded-tl-sm px-4 pt-3 pb-0 text-slate-200 relative",style:{background:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(251, 191, 36, 0.4)",boxShadow:"0 0 20px rgba(251, 191, 36, 0.15), inset 0 0 30px rgba(251, 191, 36, 0.03)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 text-[10px] font-bold uppercase tracking-wider text-amber-400/80",children:[e.jsx("div",{className:"relative flex items-center justify-center",style:{width:"14px",height:"14px"},children:e.jsxs("svg",{width:14,height:14,viewBox:"0 0 24 24",fill:"none",style:{filter:"drop-shadow(0 0 6px rgba(251, 191, 36, 0.55))",animation:"spin 0.6s linear infinite"},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"chatSpinnerGradient",gradientUnits:"userSpaceOnUse",x1:"3",y1:"12",x2:"12",y2:"3",children:[e.jsx("stop",{offset:"0%",stopColor:"#fbbf24",stopOpacity:"1"}),e.jsx("stop",{offset:"60%",stopColor:"#fbbf24",stopOpacity:"0.5"}),e.jsx("stop",{offset:"100%",stopColor:"#fbbf24",stopOpacity:"0"})]})}),e.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"rgba(251, 191, 36, 0.15)",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M 12 3 A 9 9 0 1 1 3 12",stroke:"url(#chatSpinnerGradient)",strokeWidth:"2",strokeLinecap:"round",fill:"none"}),e.jsx("circle",{cx:"3",cy:"12",r:"1.4",fill:"#fbbf24"})]})}),(ee==null?void 0:ee.name)||"Assistant"]}),e.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:e.jsx(we,{text:g})})]})})]})}),e.jsx(De,{inputRef:I,inputFocused:T,setInputFocused:ne,onSendMessage:de,onOpenTopics:E,placeholder:h?"Message (Auto mode - will use auto-selected model)...":N?`Message ${N.name}...`:"Select a model from the dock to start chatting...",isGenerating:o,onStop:xe,className:"fixed bottom-0 left-0 right-[400px] xl:right-[480px] z-[100] pb-6 px-3 sm:px-4 flex justify-center items-end pointer-events-none transition-all duration-300",style:{paddingBottom:"calc(1.5rem + env(safe-area-inset-bottom))"}})]})});export{Me as default};
