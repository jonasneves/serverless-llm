import{r as a,j as e}from"./react-vendor-B3RF3lZj.js";import{F as X}from"./FormattedContent-C1ywt4GL.js";import{T as S}from"./index-CvM0QPZJ.js";import"./markdown-IOIbAqJG.js";import"./math-render-DqYgiYKz.js";import"./syntax-highlight-BlOvp5OR.js";function U({models:i,activeId:o,onSelect:k,onClose:_,speaking:C,mode:c,moderatorId:g,councilAggregateRankings:d,councilAnonymousReviews:x,showCouncilReviewerNames:P,discussionTurnsByModel:T,position:m="right",onTogglePosition:v}){const s=a.useMemo(()=>i.find(t=>t.id===o),[i,o]);if(!s)return null;const j=C.has(s.id),$=c==="council"&&s.id===g&&d&&d.length>0,D=c==="council"&&s.id===g&&x.length>0,N=c==="roundtable"?T[s.id]||[]:[],[y,w]=a.useState(0),l=a.useRef(!1),p=a.useRef(0),F=t=>{t.button===0&&(t.target.closest("button")||(l.current=!0,p.current=t.clientX,t.target.setPointerCapture(t.pointerId),t.preventDefault()))},M=t=>{if(!l.current)return;const r=t.clientX-p.current;w(r)},R=t=>{if(!l.current)return;l.current=!1;const r=t.clientX-p.current;let n=!1;(m==="right"&&r<-200||m==="left"&&r>200)&&(n=!0),n&&v&&v(),w(0)};return e.jsxs("aside",{"data-no-arena-scroll":!0,"data-no-background":!0,className:`fixed top-20 bottom-20 w-[min(85vw,380px)] sm:top-24 sm:bottom-24 sm:w-[420px] rounded-2xl border border-slate-700/60 bg-slate-900/85 backdrop-blur-xl shadow-2xl z-[80] flex flex-col ${m==="left"?"left-3 sm:left-6 right-auto":"right-3 sm:right-6 left-auto"}`,onClick:t=>t.stopPropagation(),style:{transform:y?`translateX(${y}px)`:"none",transition:l.current?"none":"transform 300ms cubic-bezier(0.2, 0, 0.2, 1), left 300ms, right 300ms",cursor:l.current?"grabbing":"default"},children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-2 border-b border-slate-800/60 cursor-grab active:cursor-grabbing",onPointerDown:F,onPointerMove:M,onPointerUp:R,children:[e.jsx("div",{className:"inspector-tabs flex gap-1 overflow-x-auto pb-1 no-scrollbar",onPointerDown:t=>t.stopPropagation(),children:i.map(t=>e.jsx("button",{onClick:()=>k(t.id),className:`px-3 py-2 sm:px-2 sm:py-1 text-[11px] rounded-md whitespace-nowrap transition-colors active:scale-95 ${t.id===o?"bg-slate-700 text-white":"text-slate-400 hover:text-slate-200 hover:bg-slate-800/60"}`,children:t.name},t.id))}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("button",{onClick:_,className:"min-w-[44px] min-h-[44px] w-9 h-9 sm:w-7 sm:h-7 flex items-center justify-center rounded-md text-slate-400 hover:text-white hover:bg-slate-800/60 transition-colors active:scale-95","aria-label":"Close",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]}),e.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border-b border-slate-800/60",children:[e.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${s.type==="local"?"bg-emerald-500":"bg-blue-500"}`}),e.jsx("div",{className:"text-sm font-semibold text-slate-100",children:s.name}),j&&e.jsx("div",{className:"text-xs text-slate-500 ml-auto",children:"Streaming…"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3 markdown-content",children:[D&&e.jsxs("details",{className:"mb-3 rounded-lg border border-slate-700/50 bg-slate-900/40",children:[e.jsxs("summary",{className:"cursor-pointer select-none px-3 py-2 text-xs font-semibold text-slate-300",children:["Anonymous reviews (",x.length,")"]}),e.jsx("div",{className:"px-3 pb-3 pt-1 space-y-3",children:x.map((t,r)=>e.jsxs("details",{className:"rounded-md border border-slate-700/40 bg-slate-950/20",children:[e.jsxs("summary",{className:"cursor-pointer select-none px-3 py-2 text-[11px] font-semibold text-slate-300",children:[P?t.reviewer_model_name:`Review ${r+1}`,t.error?e.jsx("span",{className:"text-slate-500",children:" · error"}):null]}),e.jsx("pre",{className:"px-3 pb-3 pt-1 text-xs text-slate-400 whitespace-pre-wrap",children:t.text})]},r))})]}),$&&e.jsxs("details",{open:!0,className:"mb-3 rounded-lg border border-slate-700/50 bg-slate-900/40",children:[e.jsx("summary",{className:"cursor-pointer select-none px-3 py-2 text-xs font-semibold text-slate-300",children:"Anonymous rankings"}),e.jsx("div",{className:"px-3 pb-3 pt-1 text-xs text-slate-400 space-y-1",children:d.map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"truncate",children:[r+1,". ",t.model_name]}),e.jsxs("div",{className:"shrink-0 text-slate-500",children:[t.votes_count," votes · avg ",t.average_rank]})]},t.model_id))})]}),N.length>0&&e.jsxs("details",{className:"mb-3 rounded-lg border border-slate-700/50 bg-slate-900/40",children:[e.jsx("summary",{className:"cursor-pointer select-none px-3 py-2 text-xs font-semibold text-slate-300",children:"Turn evaluations"}),e.jsx("div",{className:"px-3 pb-3 pt-1 text-xs text-slate-400 space-y-2",children:N.map((t,r)=>{const n=t.evaluation||{},u=typeof n.quality_score=="number"?n.quality_score:null,h=typeof n.relevance_score=="number"?n.relevance_score:null,b=typeof n.expertise_alignment=="number"?n.expertise_alignment:null,f=n.confidence_assessment;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-slate-300 font-semibold text-[11px]",children:["Turn ",t.turn_number+1]}),u!=null||h!=null||b!=null||f?e.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-[11px]",children:[u!=null&&e.jsxs("div",{children:["Quality: ",(u*100).toFixed(0),"%"]}),h!=null&&e.jsxs("div",{children:["Relevance: ",(h*100).toFixed(0),"%"]}),b!=null&&e.jsxs("div",{children:["Alignment: ",(b*100).toFixed(0),"%"]}),f&&e.jsxs("div",{children:["Confidence: ",f]})]}):e.jsx("div",{className:"text-slate-500 italic text-[11px]",children:"No evaluation."})]},`${t.turn_number}-${r}`)})})]}),j?s.response.trim().length>0?e.jsx("p",{className:"text-sm text-slate-300 whitespace-pre-wrap",children:e.jsx(S,{text:s.response,speed:20})}):s.thinking&&s.thinking.trim().length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("details",{open:!0,className:"rounded-lg border border-slate-700/50 bg-slate-900/40",children:[e.jsx("summary",{className:"cursor-pointer select-none px-3 py-2 text-xs font-semibold text-slate-300",children:"Thinking (live)"}),e.jsx("pre",{className:"px-3 pb-3 pt-1 text-xs text-slate-400 whitespace-pre-wrap",children:s.thinking})]}),e.jsx("div",{className:"text-sm text-slate-500 italic",children:"Waiting for final answer…"})]}):e.jsx("div",{className:"text-sm text-slate-500 italic",children:"Thinking…"}):s.response?e.jsx(X,{text:s.response,thinkingText:s.thinking}):e.jsx("div",{className:"text-sm text-slate-500 italic",children:"No response yet."})]})]})}export{U as default};
