import{u as kr,r as d,j as pe}from"./react-vendor-B3RF3lZj.js";import{U as Er,m as Lr,_ as Or}from"./mediapipe-YSlczgt6.js";import"./markdown-IOIbAqJG.js";import"./math-render-DqYgiYKz.js";import"./syntax-highlight-BlOvp5OR.js";var Pr={exports:{}};(function($e,xr){(function(Oe,re){$e.exports=re()})(typeof self<"u"?self:kr,function(){return function(Oe){var re={};function N(h){if(re[h])return re[h].exports;var w=re[h]={i:h,l:!1,exports:{}};return Oe[h].call(w.exports,w,w.exports,N),w.l=!0,w.exports}return N.m=Oe,N.c=re,N.d=function(h,w,g){N.o(h,w)||Object.defineProperty(h,w,{enumerable:!0,get:g})},N.r=function(h){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},N.t=function(h,w){if(1&w&&(h=N(h)),8&w||4&w&&typeof h=="object"&&h&&h.__esModule)return h;var g=Object.create(null);if(N.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:h}),2&w&&typeof h!="string")for(var A in h)N.d(g,A,(function(C){return h[C]}).bind(null,A));return g},N.n=function(h){var w=h&&h.__esModule?function(){return h.default}:function(){return h};return N.d(w,"a",w),w},N.o=function(h,w){return Object.prototype.hasOwnProperty.call(h,w)},N.p="",N(N.s=0)}([function(Oe,re,N){N.r(re);var h={};function w(n){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(n)}N.r(h),N.d(h,"VictoryGesture",function(){return Fr}),N.d(h,"ThumbsUpGesture",function(){return me});var g={Thumb:0,Index:1,Middle:2,Ring:3,Pinky:4,all:[0,1,2,3,4],nameMapping:{0:"Thumb",1:"Index",2:"Middle",3:"Ring",4:"Pinky"},pointsMapping:{0:[[0,1],[1,2],[2,3],[3,4]],1:[[0,5],[5,6],[6,7],[7,8]],2:[[0,9],[9,10],[10,11],[11,12]],3:[[0,13],[13,14],[14,15],[15,16]],4:[[0,17],[17,18],[18,19],[19,20]]},getName:function(n){return w(this.nameMapping[n])!==void 0&&this.nameMapping[n]},getPoints:function(n){return w(this.pointsMapping[n])!==void 0&&this.pointsMapping[n]}},A={NoCurl:0,HalfCurl:1,FullCurl:2,nameMapping:{0:"No Curl",1:"Half Curl",2:"Full Curl"},getName:function(n){return w(this.nameMapping[n])!==void 0&&this.nameMapping[n]}},C={VerticalUp:0,VerticalDown:1,HorizontalLeft:2,HorizontalRight:3,DiagonalUpRight:4,DiagonalUpLeft:5,DiagonalDownRight:6,DiagonalDownLeft:7,nameMapping:{0:"Vertical Up",1:"Vertical Down",2:"Horizontal Left",3:"Horizontal Right",4:"Diagonal Up Right",5:"Diagonal Up Left",6:"Diagonal Down Right",7:"Diagonal Down Left"},getName:function(n){return w(this.nameMapping[n])!==void 0&&this.nameMapping[n]}};function Ae(n,l){var i=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!i){if(Array.isArray(n)||(i=function(t,p){if(t){if(typeof t=="string")return or(t,p);var m=Object.prototype.toString.call(t).slice(8,-1);if(m==="Object"&&t.constructor&&(m=t.constructor.name),m==="Map"||m==="Set")return Array.from(t);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return or(t,p)}}(n))||l){i&&(n=i);var r=0,u=function(){};return{s:u,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(t){throw t},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,s=!0,c=!1;return{s:function(){i=i.call(n)},n:function(){var t=i.next();return s=t.done,t},e:function(t){c=!0,o=t},f:function(){try{s||i.return==null||i.return()}finally{if(c)throw o}}}}function or(n,l){(l==null||l>n.length)&&(l=n.length);for(var i=0,r=new Array(l);i<l;i++)r[i]=n[i];return r}function sr(n,l){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);l&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),i.push.apply(i,r)}return i}function cr(n){for(var l=1;l<arguments.length;l++){var i=arguments[l]!=null?arguments[l]:{};l%2?sr(Object(i),!0).forEach(function(r){dr(n,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):sr(Object(i)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r))})}return n}function dr(n,l,i){return l in n?Object.defineProperty(n,l,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[l]=i,n}function pr(n,l){for(var i=0;i<l.length;i++){var r=l[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var Dr=function(){function n(r){(function(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")})(this,n),this.options=cr(cr({},{HALF_CURL_START_LIMIT:60,NO_CURL_START_LIMIT:130,DISTANCE_VOTE_POWER:1.1,SINGLE_ANGLE_VOTE_POWER:.9,TOTAL_ANGLE_VOTE_POWER:1.6}),r)}var l,i;return l=n,(i=[{key:"estimate",value:function(r){var u,o=[],s=[],c=Ae(g.all);try{for(c.s();!(u=c.n()).done;){var t,p=u.value,m=g.getPoints(p),y=[],P=[],R=Ae(m);try{for(R.s();!(t=R.n()).done;){var V=t.value,E=r[V[0]],G=r[V[1]],_=this.getSlopes(E,G),z=_[0],q=_[1];y.push(z),P.push(q)}}catch(Z){R.e(Z)}finally{R.f()}o.push(y),s.push(P)}}catch(Z){c.e(Z)}finally{c.f()}var he,K=[],j=[],W=Ae(g.all);try{for(W.s();!(he=W.n()).done;){var J=he.value,ie=J==g.Thumb?1:0,te=g.getPoints(J),Q=r[te[ie][0]],He=r[te[ie+1][1]],_e=r[te[3][1]],Te=this.estimateFingerCurl(Q,He,_e),Ve=this.calculateFingerDirection(Q,He,_e,o[J].slice(ie));K[J]=Te,j[J]=Ve}}catch(Z){W.e(Z)}finally{W.f()}return{curls:K,directions:j}}},{key:"getSlopes",value:function(r,u){var o=this.calculateSlope(r[0],r[1],u[0],u[1]);return r.length==2?o:[o,this.calculateSlope(r[1],r[2],u[1],u[2])]}},{key:"angleOrientationAt",value:function(r){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,o=0,s=0,c=0;return r>=75&&r<=105?o=1*u:r>=25&&r<=155?s=1*u:c=1*u,[o,s,c]}},{key:"estimateFingerCurl",value:function(r,u,o){var s=r[0]-u[0],c=r[0]-o[0],t=u[0]-o[0],p=r[1]-u[1],m=r[1]-o[1],y=u[1]-o[1],P=r[2]-u[2],R=r[2]-o[2],V=u[2]-o[2],E=Math.sqrt(s*s+p*p+P*P),G=Math.sqrt(c*c+m*m+R*R),_=Math.sqrt(t*t+y*y+V*V),z=(_*_+E*E-G*G)/(2*_*E);z>1?z=1:z<-1&&(z=-1);var q=Math.acos(z);return(q=57.2958*q%180)>this.options.NO_CURL_START_LIMIT?A.NoCurl:q>this.options.HALF_CURL_START_LIMIT?A.HalfCurl:A.FullCurl}},{key:"estimateHorizontalDirection",value:function(r,u,o,s){return s==Math.abs(r)?r>0?C.HorizontalLeft:C.HorizontalRight:s==Math.abs(u)?u>0?C.HorizontalLeft:C.HorizontalRight:o>0?C.HorizontalLeft:C.HorizontalRight}},{key:"estimateVerticalDirection",value:function(r,u,o,s){return s==Math.abs(r)?r<0?C.VerticalDown:C.VerticalUp:s==Math.abs(u)?u<0?C.VerticalDown:C.VerticalUp:o<0?C.VerticalDown:C.VerticalUp}},{key:"estimateDiagonalDirection",value:function(r,u,o,s,c,t,p,m){var y=this.estimateVerticalDirection(r,u,o,s),P=this.estimateHorizontalDirection(c,t,p,m);return y==C.VerticalUp?P==C.HorizontalLeft?C.DiagonalUpLeft:C.DiagonalUpRight:P==C.HorizontalLeft?C.DiagonalDownLeft:C.DiagonalDownRight}},{key:"calculateFingerDirection",value:function(r,u,o,s){var c=r[0]-u[0],t=r[0]-o[0],p=u[0]-o[0],m=r[1]-u[1],y=r[1]-o[1],P=u[1]-o[1],R=Math.max(Math.abs(c),Math.abs(t),Math.abs(p)),V=Math.max(Math.abs(m),Math.abs(y),Math.abs(P)),E=0,G=0,_=0,z=V/(R+1e-5);z>1.5?E+=this.options.DISTANCE_VOTE_POWER:z>.66?G+=this.options.DISTANCE_VOTE_POWER:_+=this.options.DISTANCE_VOTE_POWER;var q=Math.sqrt(c*c+m*m),he=Math.sqrt(t*t+y*y),K=Math.sqrt(p*p+P*P),j=Math.max(q,he,K),W=r[0],J=r[1],ie=o[0],te=o[1];j==q?(ie=o[0],te=o[1]):j==K&&(W=u[0],J=u[1]);var Q=[W,J],He=[ie,te],_e=this.getSlopes(Q,He),Te=this.angleOrientationAt(_e,this.options.TOTAL_ANGLE_VOTE_POWER);E+=Te[0],G+=Te[1],_+=Te[2];var Ve,Z=Ae(s);try{for(Z.s();!(Ve=Z.n()).done;){var le=Ve.value,f=this.angleOrientationAt(le,this.options.SINGLE_ANGLE_VOTE_POWER);E+=f[0],G+=f[1],_+=f[2]}}catch(F){Z.e(F)}finally{Z.f()}return E==Math.max(E,G,_)?this.estimateVerticalDirection(y,m,P,V):_==Math.max(G,_)?this.estimateHorizontalDirection(t,c,p,R):this.estimateDiagonalDirection(y,m,P,V,t,c,p,R)}},{key:"calculateSlope",value:function(r,u,o,s){var c=(u-s)/(r-o),t=180*Math.atan(c)/Math.PI;return t<=0?t=-t:t>0&&(t=180-t),t}}])&&pr(l.prototype,i),n}();function yr(n,l){var i=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!i){if(Array.isArray(n)||(i=function(t,p){if(t){if(typeof t=="string")return we(t,p);var m=Object.prototype.toString.call(t).slice(8,-1);if(m==="Object"&&t.constructor&&(m=t.constructor.name),m==="Map"||m==="Set")return Array.from(t);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return we(t,p)}}(n))||l){i&&(n=i);var r=0,u=function(){};return{s:u,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(t){throw t},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,s=!0,c=!1;return{s:function(){i=i.call(n)},n:function(){var t=i.next();return s=t.done,t},e:function(t){c=!0,o=t},f:function(){try{s||i.return==null||i.return()}finally{if(c)throw o}}}}function we(n,l){(l==null||l>n.length)&&(l=n.length);for(var i=0,r=new Array(l);i<l;i++)r[i]=n[i];return r}function gr(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}function fr(n,l){for(var i=0;i<l.length;i++){var r=l[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var Cr=function(){function n(r){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gr(this,n),this.estimator=new Dr(u),this.gestures=r}var l,i;return l=n,(i=[{key:"estimate",value:function(r,u){var o,s=[],c=this.estimator.estimate(r),t=[],p=yr(g.all);try{for(p.s();!(o=p.n()).done;){var m=o.value;t.push([g.getName(m),A.getName(c.curls[m]),C.getName(c.directions[m])])}}catch(E){p.e(E)}finally{p.f()}var y,P=yr(this.gestures);try{for(P.s();!(y=P.n()).done;){var R=y.value,V=R.matchAgainst(c.curls,c.directions);V>=u&&s.push({name:R.name,score:V})}}catch(E){P.e(E)}finally{P.f()}return{poseData:t,gestures:s}}}])&&fr(l.prototype,i),n}();function Re(n,l){return function(i){if(Array.isArray(i))return i}(n)||function(i,r){var u=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(u!=null){var o,s,c=[],t=!0,p=!1;try{for(u=u.call(i);!(t=(o=u.next()).done)&&(c.push(o.value),!r||c.length!==r);t=!0);}catch(m){p=!0,s=m}finally{try{t||u.return==null||u.return()}finally{if(p)throw s}}return c}}(n,l)||H(n,l)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vr(n,l){var i=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!i){if(Array.isArray(n)||(i=H(n))||l){i&&(n=i);var r=0,u=function(){};return{s:u,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(t){throw t},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,s=!0,c=!1;return{s:function(){i=i.call(n)},n:function(){var t=i.next();return s=t.done,t},e:function(t){c=!0,o=t},f:function(){try{s||i.return==null||i.return()}finally{if(c)throw o}}}}function H(n,l){if(n){if(typeof n=="string")return Ke(n,l);var i=Object.prototype.toString.call(n).slice(8,-1);return i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set"?Array.from(n):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ke(n,l):void 0}}function Ke(n,l){(l==null||l>n.length)&&(l=n.length);for(var i=0,r=new Array(l);i<l;i++)r[i]=n[i];return r}function Mr(n,l){for(var i=0;i<l.length;i++){var r=l[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var ne=function(){function n(r){(function(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")})(this,n),this.name=r,this.curls={},this.directions={}}var l,i;return l=n,(i=[{key:"addCurl",value:function(r,u){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;this.curls[r]===void 0&&(this.curls[r]=[]),this.curls[r].push([u,o])}},{key:"addDirection",value:function(r,u){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;this.directions[r]===void 0&&(this.directions[r]=[]),this.directions[r].push([u,o])}},{key:"matchAgainst",value:function(r,u){var o=0,s=0;for(var c in r){var t=r[c],p=this.curls[c];if(p!==void 0){s++;var m,y=!1,P=0,R=vr(p);try{for(R.s();!(m=R.n()).done;){var V=Re(m.value,2),E=V[0],G=V[1];if(t==E){o+=G,P=Math.max(P,G),y=!0;break}}}catch(Q){R.e(Q)}finally{R.f()}y||(o-=P)}}for(var _ in u){var z=u[_],q=this.directions[_];if(q!==void 0){s++;var he,K=!1,j=0,W=vr(q);try{for(W.s();!(he=W.n()).done;){var J=Re(he.value,2),ie=J[0],te=J[1];if(z==ie){o+=te,j=Math.max(j,te),K=!0;break}}}catch(Q){W.e(Q)}finally{W.f()}K||(o-=j)}}return o/s*10}}])&&Mr(l.prototype,i),n}(),k=new ne("victory");k.addDirection(g.Thumb,C.VerticalUp,1),k.addDirection(g.Thumb,C.DiagonalUpLeft,1),k.addDirection(g.Thumb,C.DiagonalUpRight,1),k.addCurl(g.Index,A.NoCurl,1),k.addDirection(g.Index,C.VerticalUp,1),k.addDirection(g.Index,C.DiagonalUpLeft,1),k.addDirection(g.Index,C.DiagonalUpRight,1),k.addDirection(g.Index,C.HorizontalLeft,1),k.addDirection(g.Index,C.HorizontalRight,1),k.addCurl(g.Middle,A.NoCurl,1),k.addDirection(g.Middle,C.VerticalUp,1),k.addDirection(g.Middle,C.DiagonalUpLeft,1),k.addDirection(g.Middle,C.DiagonalUpRight,1),k.addDirection(g.Middle,C.HorizontalLeft,1),k.addDirection(g.Middle,C.HorizontalRight,1),k.addCurl(g.Ring,A.FullCurl,1),k.addCurl(g.Ring,A.HalfCurl,.9),k.addCurl(g.Pinky,A.FullCurl,1),k.addCurl(g.Pinky,A.HalfCurl,.9);var Fr=k,B=new ne("thumbs_up");B.addCurl(g.Thumb,A.NoCurl,1),B.addDirection(g.Thumb,C.VerticalUp,1),B.addDirection(g.Thumb,C.DiagonalUpLeft,.9),B.addDirection(g.Thumb,C.DiagonalUpRight,.9);for(var Ue=0,mr=[g.Index,g.Middle,g.Ring,g.Pinky];Ue<mr.length;Ue++){var Je=mr[Ue];B.addCurl(Je,A.FullCurl,1),B.addCurl(Je,A.HalfCurl,.9)}B.addDirection(g.Index,C.DiagonalUpLeft,1),B.addDirection(g.Index,C.HorizontalLeft,1),B.addDirection(g.Index,C.HorizontalRight,1),B.addDirection(g.Index,C.DiagonalUpRight,1);var me=B;re.default={GestureEstimator:Cr,GestureDescription:ne,Finger:g,FingerCurl:A,FingerDirection:C,Gestures:h}}]).default})})(Pr);var e=Pr.exports;const Me=new e.GestureDescription("A");Me.addCurl(e.Finger.Thumb,e.FingerCurl.NoCurl,1);Me.addDirection(e.Finger.Thumb,e.FingerDirection.VerticalUp,.75);Me.addCurl(e.Finger.Index,e.FingerCurl.FullCurl,1);Me.addCurl(e.Finger.Middle,e.FingerCurl.FullCurl,1);Me.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);Me.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);const oe=new e.GestureDescription("B");Me.addCurl(e.Finger.Index,e.FingerCurl.NoCurl,1);oe.addCurl(e.Finger.Index,e.FingerCurl.NoCurl,1);oe.addDirection(e.Finger.Index,e.FingerDirection.VerticalUp,.75);oe.addCurl(e.Finger.Middle,e.FingerCurl.NoCurl,1);oe.addDirection(e.Finger.Middle,e.FingerDirection.VerticalUp,.75);oe.addCurl(e.Finger.Ring,e.FingerCurl.NoCurl,1);oe.addDirection(e.Finger.Ring,e.FingerDirection.VerticalUp,.75);oe.addCurl(e.Finger.Pinky,e.FingerCurl.NoCurl,1);oe.addDirection(e.Finger.Pinky,e.FingerDirection.VerticalUp,.75);oe.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,1);const We=new e.GestureDescription("C");We.addCurl(e.Finger.Thumb,e.FingerCurl.NoCurl,1);We.addDirection(e.Finger.Thumb,e.FingerDirection.DiagonalUpRight,.75);We.addCurl(e.Finger.Index,e.FingerCurl.HalfCurl,1);We.addCurl(e.Finger.Middle,e.FingerCurl.HalfCurl,1);We.addCurl(e.Finger.Ring,e.FingerCurl.HalfCurl,1);We.addCurl(e.Finger.Pinky,e.FingerCurl.HalfCurl,1);const qe=new e.GestureDescription("D");qe.addCurl(e.Finger.Index,e.FingerCurl.NoCurl,1);qe.addDirection(e.Finger.Index,e.FingerDirection.VerticalUp,.75);qe.addCurl(e.Finger.Middle,e.FingerCurl.FullCurl,1);qe.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);qe.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);qe.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,.75);const rr=new e.GestureDescription("E");rr.addCurl(e.Finger.Index,e.FingerCurl.FullCurl,1);rr.addCurl(e.Finger.Middle,e.FingerCurl.FullCurl,1);rr.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);rr.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);rr.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,1);const De=new e.GestureDescription("F");De.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,.8);De.addCurl(e.Finger.Index,e.FingerCurl.FullCurl,1);De.addCurl(e.Finger.Middle,e.FingerCurl.NoCurl,1);De.addDirection(e.Finger.Middle,e.FingerDirection.VerticalUp,.75);De.addCurl(e.Finger.Ring,e.FingerCurl.NoCurl,1);De.addDirection(e.Finger.Ring,e.FingerDirection.VerticalUp,.75);De.addCurl(e.Finger.Pinky,e.FingerCurl.NoCurl,1);De.addDirection(e.Finger.Pinky,e.FingerDirection.VerticalUp,.75);const se=new e.GestureDescription("G");se.addCurl(e.Finger.Index,e.FingerCurl.NoCurl,1);se.addDirection(e.Finger.Index,e.FingerDirection.HorizontalLeft,.75);se.addDirection(e.Finger.Index,e.FingerDirection.HorizontalRight,.75);se.addCurl(e.Finger.Thumb,e.FingerCurl.NoCurl,1);se.addDirection(e.Finger.Thumb,e.FingerDirection.HorizontalLeft,.5);se.addDirection(e.Finger.Thumb,e.FingerDirection.HorizontalRight,.5);se.addCurl(e.Finger.Middle,e.FingerCurl.FullCurl,1);se.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);se.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);const ce=new e.GestureDescription("H");ce.addCurl(e.Finger.Index,e.FingerCurl.NoCurl,1);ce.addDirection(e.Finger.Index,e.FingerDirection.HorizontalLeft,.75);ce.addDirection(e.Finger.Index,e.FingerDirection.HorizontalRight,.75);ce.addCurl(e.Finger.Middle,e.FingerCurl.NoCurl,1);ce.addDirection(e.Finger.Middle,e.FingerDirection.HorizontalLeft,.75);ce.addDirection(e.Finger.Middle,e.FingerDirection.HorizontalRight,.75);ce.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);ce.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);ce.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,.75);const Xe=new e.GestureDescription("I");Xe.addCurl(e.Finger.Pinky,e.FingerCurl.NoCurl,1);Xe.addDirection(e.Finger.Pinky,e.FingerDirection.VerticalUp,.75);Xe.addCurl(e.Finger.Index,e.FingerCurl.FullCurl,1);Xe.addCurl(e.Finger.Middle,e.FingerCurl.FullCurl,1);Xe.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);Xe.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,.75);const Se=new e.GestureDescription("J");Se.addCurl(e.Finger.Pinky,e.FingerCurl.NoCurl,1);Se.addDirection(e.Finger.Pinky,e.FingerDirection.DiagonalUpRight,.5);Se.addDirection(e.Finger.Pinky,e.FingerDirection.DiagonalUpLeft,.5);Se.addCurl(e.Finger.Index,e.FingerCurl.FullCurl,1);Se.addCurl(e.Finger.Middle,e.FingerCurl.FullCurl,1);Se.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);Se.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,.75);const Pe=new e.GestureDescription("K");Pe.addCurl(e.Finger.Index,e.FingerCurl.NoCurl,1);Pe.addDirection(e.Finger.Index,e.FingerDirection.VerticalUp,.75);Pe.addCurl(e.Finger.Middle,e.FingerCurl.NoCurl,1);Pe.addDirection(e.Finger.Middle,e.FingerDirection.VerticalUp,.75);Pe.addCurl(e.Finger.Thumb,e.FingerCurl.NoCurl,.75);Pe.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);Pe.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);const ye=new e.GestureDescription("L");ye.addCurl(e.Finger.Index,e.FingerCurl.NoCurl,1);ye.addDirection(e.Finger.Index,e.FingerDirection.VerticalUp,.75);ye.addCurl(e.Finger.Thumb,e.FingerCurl.NoCurl,1);ye.addDirection(e.Finger.Thumb,e.FingerDirection.HorizontalLeft,.5);ye.addDirection(e.Finger.Thumb,e.FingerDirection.HorizontalRight,.5);ye.addCurl(e.Finger.Middle,e.FingerCurl.FullCurl,1);ye.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);ye.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);const nr=new e.GestureDescription("M");nr.addCurl(e.Finger.Index,e.FingerCurl.FullCurl,1);nr.addCurl(e.Finger.Middle,e.FingerCurl.FullCurl,1);nr.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);nr.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);nr.addCurl(e.Finger.Thumb,e.FingerCurl.FullCurl,1);const ir=new e.GestureDescription("N");ir.addCurl(e.Finger.Index,e.FingerCurl.FullCurl,1);ir.addCurl(e.Finger.Middle,e.FingerCurl.FullCurl,1);ir.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);ir.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);ir.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,.75);const tr=new e.GestureDescription("O");tr.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,1);tr.addCurl(e.Finger.Index,e.FingerCurl.HalfCurl,1);tr.addCurl(e.Finger.Middle,e.FingerCurl.HalfCurl,1);tr.addCurl(e.Finger.Ring,e.FingerCurl.HalfCurl,1);tr.addCurl(e.Finger.Pinky,e.FingerCurl.HalfCurl,1);const ve=new e.GestureDescription("P");ve.addCurl(e.Finger.Index,e.FingerCurl.NoCurl,1);ve.addDirection(e.Finger.Index,e.FingerDirection.DiagonalDownLeft,.5);ve.addDirection(e.Finger.Index,e.FingerDirection.DiagonalDownRight,.5);ve.addCurl(e.Finger.Middle,e.FingerCurl.NoCurl,1);ve.addDirection(e.Finger.Middle,e.FingerDirection.VerticalDown,.5);ve.addCurl(e.Finger.Thumb,e.FingerCurl.NoCurl,.75);ve.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);ve.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);const Ie=new e.GestureDescription("Q");Ie.addCurl(e.Finger.Index,e.FingerCurl.NoCurl,1);Ie.addDirection(e.Finger.Index,e.FingerDirection.VerticalDown,.75);Ie.addCurl(e.Finger.Thumb,e.FingerCurl.NoCurl,1);Ie.addDirection(e.Finger.Thumb,e.FingerDirection.VerticalDown,.5);Ie.addCurl(e.Finger.Middle,e.FingerCurl.FullCurl,1);Ie.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);Ie.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);const Ne=new e.GestureDescription("R");Ne.addCurl(e.Finger.Index,e.FingerCurl.NoCurl,1);Ne.addDirection(e.Finger.Index,e.FingerDirection.VerticalUp,.75);Ne.addCurl(e.Finger.Middle,e.FingerCurl.NoCurl,1);Ne.addDirection(e.Finger.Middle,e.FingerDirection.VerticalUp,.75);Ne.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);Ne.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);Ne.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,.75);const lr=new e.GestureDescription("S");lr.addCurl(e.Finger.Index,e.FingerCurl.FullCurl,1);lr.addCurl(e.Finger.Middle,e.FingerCurl.FullCurl,1);lr.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);lr.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);lr.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,1);const ur=new e.GestureDescription("T");ur.addCurl(e.Finger.Index,e.FingerCurl.FullCurl,1);ur.addCurl(e.Finger.Middle,e.FingerCurl.FullCurl,1);ur.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);ur.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);ur.addCurl(e.Finger.Thumb,e.FingerCurl.NoCurl,.75);const ke=new e.GestureDescription("U");ke.addCurl(e.Finger.Index,e.FingerCurl.NoCurl,1);ke.addDirection(e.Finger.Index,e.FingerDirection.VerticalUp,.75);ke.addCurl(e.Finger.Middle,e.FingerCurl.NoCurl,1);ke.addDirection(e.Finger.Middle,e.FingerDirection.VerticalUp,.75);ke.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);ke.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);ke.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,.75);const de=new e.GestureDescription("V");de.addCurl(e.Finger.Index,e.FingerCurl.NoCurl,1);de.addDirection(e.Finger.Index,e.FingerDirection.DiagonalUpLeft,.5);de.addDirection(e.Finger.Index,e.FingerDirection.VerticalUp,.5);de.addCurl(e.Finger.Middle,e.FingerCurl.NoCurl,1);de.addDirection(e.Finger.Middle,e.FingerDirection.DiagonalUpRight,.5);de.addDirection(e.Finger.Middle,e.FingerDirection.VerticalUp,.5);de.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);de.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);de.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,.75);const be=new e.GestureDescription("W");be.addCurl(e.Finger.Index,e.FingerCurl.NoCurl,1);be.addDirection(e.Finger.Index,e.FingerDirection.VerticalUp,.75);be.addCurl(e.Finger.Middle,e.FingerCurl.NoCurl,1);be.addDirection(e.Finger.Middle,e.FingerDirection.VerticalUp,.75);be.addCurl(e.Finger.Ring,e.FingerCurl.NoCurl,1);be.addDirection(e.Finger.Ring,e.FingerDirection.VerticalUp,.75);be.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);be.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,.75);const Ye=new e.GestureDescription("X");Ye.addCurl(e.Finger.Index,e.FingerCurl.HalfCurl,1);Ye.addDirection(e.Finger.Index,e.FingerDirection.VerticalUp,.5);Ye.addCurl(e.Finger.Middle,e.FingerCurl.FullCurl,1);Ye.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);Ye.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);Ye.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,.75);const ge=new e.GestureDescription("Y");ge.addCurl(e.Finger.Thumb,e.FingerCurl.NoCurl,1);ge.addDirection(e.Finger.Thumb,e.FingerDirection.DiagonalUpLeft,.5);ge.addDirection(e.Finger.Thumb,e.FingerDirection.DiagonalUpRight,.5);ge.addCurl(e.Finger.Pinky,e.FingerCurl.NoCurl,1);ge.addDirection(e.Finger.Pinky,e.FingerDirection.VerticalUp,.5);ge.addDirection(e.Finger.Pinky,e.FingerDirection.DiagonalUpRight,.5);ge.addCurl(e.Finger.Index,e.FingerCurl.FullCurl,1);ge.addCurl(e.Finger.Middle,e.FingerCurl.FullCurl,1);ge.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);const Ee=new e.GestureDescription("Z");Ee.addCurl(e.Finger.Index,e.FingerCurl.NoCurl,1);Ee.addDirection(e.Finger.Index,e.FingerDirection.DiagonalUpRight,.5);Ee.addDirection(e.Finger.Index,e.FingerDirection.DiagonalUpLeft,.5);Ee.addCurl(e.Finger.Middle,e.FingerCurl.FullCurl,1);Ee.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);Ee.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);Ee.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,.75);const Be=new e.GestureDescription("SEND");Be.addCurl(e.Finger.Thumb,e.FingerCurl.NoCurl,1);Be.addDirection(e.Finger.Thumb,e.FingerDirection.VerticalUp,.9);Be.addCurl(e.Finger.Index,e.FingerCurl.FullCurl,1);Be.addCurl(e.Finger.Middle,e.FingerCurl.FullCurl,1);Be.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);Be.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);const fe=new e.GestureDescription("CLEAR");fe.addCurl(e.Finger.Thumb,e.FingerCurl.NoCurl,.8);fe.addCurl(e.Finger.Index,e.FingerCurl.NoCurl,1);fe.addDirection(e.Finger.Index,e.FingerDirection.VerticalUp,.7);fe.addCurl(e.Finger.Middle,e.FingerCurl.NoCurl,1);fe.addDirection(e.Finger.Middle,e.FingerDirection.VerticalUp,.7);fe.addCurl(e.Finger.Ring,e.FingerCurl.NoCurl,1);fe.addDirection(e.Finger.Ring,e.FingerDirection.VerticalUp,.7);fe.addCurl(e.Finger.Pinky,e.FingerCurl.NoCurl,1);fe.addDirection(e.Finger.Pinky,e.FingerDirection.VerticalUp,.7);const Ce=new e.GestureDescription("SPACE");Ce.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,.8);Ce.addCurl(e.Finger.Index,e.FingerCurl.NoCurl,1);Ce.addDirection(e.Finger.Index,e.FingerDirection.HorizontalRight,.5);Ce.addDirection(e.Finger.Index,e.FingerDirection.HorizontalLeft,.5);Ce.addCurl(e.Finger.Middle,e.FingerCurl.NoCurl,1);Ce.addDirection(e.Finger.Middle,e.FingerDirection.HorizontalRight,.5);Ce.addDirection(e.Finger.Middle,e.FingerDirection.HorizontalLeft,.5);Ce.addCurl(e.Finger.Ring,e.FingerCurl.NoCurl,1);Ce.addCurl(e.Finger.Pinky,e.FingerCurl.NoCurl,1);const ar=new e.GestureDescription("BACKSPACE");ar.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,1);ar.addCurl(e.Finger.Index,e.FingerCurl.HalfCurl,1);ar.addCurl(e.Finger.Middle,e.FingerCurl.FullCurl,1);ar.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);ar.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);const Le=new e.GestureDescription("PREV_MODE");Le.addCurl(e.Finger.Index,e.FingerCurl.NoCurl,1);Le.addDirection(e.Finger.Index,e.FingerDirection.VerticalUp,.75);Le.addCurl(e.Finger.Middle,e.FingerCurl.NoCurl,1);Le.addDirection(e.Finger.Middle,e.FingerDirection.VerticalUp,.75);Le.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);Le.addCurl(e.Finger.Pinky,e.FingerCurl.FullCurl,1);Le.addCurl(e.Finger.Thumb,e.FingerCurl.HalfCurl,.75);const Fe=new e.GestureDescription("NEXT_MODE");Fe.addCurl(e.Finger.Thumb,e.FingerCurl.NoCurl,1);Fe.addDirection(e.Finger.Thumb,e.FingerDirection.DiagonalUpLeft,.5);Fe.addDirection(e.Finger.Thumb,e.FingerDirection.DiagonalUpRight,.5);Fe.addCurl(e.Finger.Index,e.FingerCurl.NoCurl,1);Fe.addDirection(e.Finger.Index,e.FingerDirection.VerticalUp,.75);Fe.addCurl(e.Finger.Middle,e.FingerCurl.FullCurl,1);Fe.addCurl(e.Finger.Ring,e.FingerCurl.FullCurl,1);Fe.addCurl(e.Finger.Pinky,e.FingerCurl.NoCurl,1);Fe.addDirection(e.Finger.Pinky,e.FingerDirection.VerticalUp,.75);const Ar=[Me,oe,We,qe,rr,De,se,ce,Xe,Se,Pe,ye,nr,ir,tr,ve,Ie,Ne,lr,ur,ke,de,be,Ye,ge,Ee],Ur=[Be,fe,Ce,ar,Le,Fe],Hr=[...Ar,...Ur],Tr=$e=>["SEND","CLEAR","SPACE","BACKSPACE","PREV_MODE","NEXT_MODE"].includes($e),_r={twoFingerTapWindow:500,twoFingerTapCooldown:400,twoFingerMinFrames:4,minPointingTime:100,dwellTime:1200,cursorSmoothing:.5},Vr={Thumb_Up:{action:"message",message:"ðŸ‘"},Thumb_Down:{action:"message",message:"ðŸ‘Ž"},Open_Palm:{action:"message",message:"ðŸ‘‹"},Victory:{action:"message",message:"ok"},ILoveYou:{action:"message",message:"thanks"},Closed_Fist:{action:"message",message:"stop"},Pointing_Up:{action:"point"}};function Xr({onStopGeneration:$e,onSendMessage:xr,onScroll:Oe,onPinch:re,onHover:N,onModeChange:h,onGestureModeToggle:w,onGestureState:g,onASLResult:A,onError:C,config:Ae=_r,onDebugInfo:or,onLandmarkData:sr,onPerformance:cr,mode:dr="navigation",appContext:pr="chat",gestureActiveArea:Dr}){const yr=d.useRef($e),we=d.useRef(xr),gr=d.useRef(Oe),fr=d.useRef(re),Cr=d.useRef(N),Re=d.useRef(h),vr=d.useRef(w),H=d.useRef(g),Ke=d.useRef(A),Mr=d.useRef(or),ne=d.useRef(sr),k=d.useRef(cr),Fr=d.useRef(Ae),B=d.useRef(dr),Ue=d.useRef(pr),mr=d.useRef(Dr);yr.current=$e,we.current=xr,gr.current=Oe,fr.current=re,Cr.current=N,Re.current=h,vr.current=w,H.current=g,Ke.current=A,Mr.current=or,ne.current=sr,k.current=cr,Fr.current=Ae,B.current=dr,Ue.current=pr,mr.current=Dr;const Je=d.useRef(C);Je.current=C;const me=d.useRef({frames:0,lastTime:performance.now(),fps:0}),n=d.useRef({baseInterval:16,currentInterval:16,lastFrameTime:0,gestureActivityCount:0,activityThreshold:500,lastActivityTime:0}),l=d.useRef(null),i=d.useRef(null),r=d.useRef(null),[u,o]=d.useState(!1),s=d.useRef(),c=d.useRef(null),t=d.useRef(null),p=d.useRef(null),m=d.useRef(null),y=d.useRef(null),P=d.useRef(null),R=d.useRef({visible:!1,x:0,y:0,isClicking:!1}),V=d.useRef({x:0,y:0}),E=d.useRef(0),G=1500,_=15,z=d.useRef(new Map),q=d.useRef(new Map),he=d.useRef([]),K=d.useRef(null),j=d.useRef(0),W=d.useRef(0),J=800,ie=12,te=d.useCallback(f=>{const F=["Victory","ILoveYou","Fist","Open_Palm"],S=["Thumb_Up","Thumb_Down","Pointing_Up"];return F.includes(f)?15:S.includes(f)?5:_},[]),Q=d.useCallback((f,F)=>{if(["PREV_MODE","NEXT_MODE"].includes(f))return!0;switch(F){case"chat":return!0;case"compare":return!f.startsWith("ASL");case"council":case"roundtable":case"personality":return!0;default:return!0}},[]),He=d.useCallback((f,F)=>{const S=mr.current;if(!S)return!0;const a=1-f;return a>=S.minX&&a<=S.maxX&&F>=S.minY&&F<=S.maxY},[]),_e=d.useCallback(f=>(q.current.has(f)||q.current.set(f,{isScrolling:!1,lastScrollY:null,scrollVelocity:0,lastOpenTime:0,waveXPositions:[],waveDirectionChanges:0,lastWaveDirection:null,waveStartTime:0,dwellStartTime:0,dwellPosition:null,wasPointingOnly:!1,pointingOnlyStartTime:0,twoFingerFrames:0,clickLocked:!1}),q.current.get(f)),[]),Te=d.useCallback(f=>(z.current.has(f)||z.current.set(f,{candidate:"NEUTRAL",frames:0}),z.current.get(f)),[]);d.useEffect(()=>{let f=null,F=null;return(async()=>{var a;try{const v=typeof chrome<"u"&&!!((a=chrome.runtime)!=null&&a.id),D=v?"/mediapipe":"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.0/wasm",ue=v?"/mediapipe/gesture_recognizer.task":"https://storage.googleapis.com/mediapipe-models/gesture_recognizer/gesture_recognizer/float16/1/gesture_recognizer.task",x=v?"/mediapipe/hand_landmarker.task":"https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task",I=await Er.forVisionTasks(D);f=await Lr.createFromOptions(I,{baseOptions:{modelAssetPath:ue,delegate:"GPU"},runningMode:"VIDEO",numHands:2}),t.current=f,F=await Or.createFromOptions(I,{baseOptions:{modelAssetPath:x,delegate:"GPU"},runningMode:"VIDEO",numHands:2}),c.current=F,m.current=new e.GestureEstimator(Hr),o(!0)}catch(v){console.error("Error initializing gesture recognition:",v)}})(),()=>{t.current&&t.current.close(),c.current&&c.current.close()}},[]);const Ve=d.useCallback((f,F,S)=>{var b;const a=_e(S),v=Te(S),D=Ue.current;if(!f.gestures||f.gestures.length===0)return a.isScrolling=!1,a.lastScrollY=null,R.current.visible&&y.current&&(y.current.style.opacity="0",R.current.visible=!1),null;const ue=(b=f.gestures[S])==null?void 0:b[0],x=f.landmarks[S];if(!ue||!x)return null;const I=ue.categoryName;if(!Q(I,D))return null;const U=Vr[I];if(I==="Pointing_Up"&&x){const ee=x[8],T={x:1-ee.x,y:ee.y};Cr.current&&Cr.current(T.x,T.y);const ae=window.innerWidth,$=window.innerHeight,Ge=T.x*ae,O=T.y*$,xe=Fr.current.cursorSmoothing,X=V.current;R.current.visible?(X.x+=(Ge-X.x)*xe,X.y+=(O-X.y)*xe):(X.x=Ge,X.y=O),y.current&&(y.current.style.transform=`translate(${X.x}px, ${X.y}px)`,y.current.style.opacity="1",y.current.style.borderColor="rgba(148, 163, 184, 0.7)",y.current.style.boxShadow="0 0 8px rgba(148, 163, 184, 0.3)"),R.current={visible:!0,x:X.x,y:X.y,isClicking:!1};const ze=Fr.current.dwellTime,br=.05;if(a.dwellPosition===null)a.dwellStartTime=F,a.dwellPosition=T;else if(Math.sqrt(Math.pow(T.x-a.dwellPosition.x,2)+Math.pow(T.y-a.dwellPosition.y,2))>br)a.dwellStartTime=F,a.dwellPosition=T;else{const hr=F-a.dwellStartTime;if(hr>=ze&&fr.current)return fr.current(T.x,T.y),E.current=F,a.dwellStartTime=0,a.dwellPosition=null,H.current&&H.current({gesture:"DWELL_CLICK",progress:1,triggered:!0}),"DWELL_CLICK";if(H.current){const wr=Math.min(1,hr/ze);H.current({gesture:"POINTING",progress:wr,triggered:!1})}}return"POINTING"}else a.dwellStartTime=0,a.dwellPosition=null,R.current.visible&&y.current&&(y.current.style.opacity="0",R.current.visible=!1);if(I==="Closed_Fist"&&x){const T=x[0].y;if(!a.isScrolling)a.isScrolling=!0,a.lastScrollY=T,a.scrollVelocity=0;else if(a.lastScrollY!==null){const ae=T-a.lastScrollY,$=(a.scrollVelocity||0)*.6+ae*.4;a.scrollVelocity=$,Math.abs($)>.006&&gr.current?(gr.current($*1800),a.lastScrollY=T):Math.abs(ae)>.02&&(a.lastScrollY=T)}return"FIST"}else a.isScrolling=!1,a.lastScrollY=null,a.scrollVelocity=0;if(I==="Open_Palm"&&x){a.lastOpenTime=F;const T=x[0].x;if(a.waveStartTime===0||F-a.waveStartTime>2e3)a.waveXPositions=[T],a.waveDirectionChanges=0,a.lastWaveDirection=null,a.waveStartTime=F;else{const ae=a.waveXPositions[a.waveXPositions.length-1],$=T-ae;if(Math.abs($)>.03){a.waveXPositions.push(T);const O=$>0?"right":"left";if(a.lastWaveDirection&&O!==a.lastWaveDirection&&a.waveDirectionChanges++,a.lastWaveDirection=O,a.waveDirectionChanges>=3&&F-E.current>G){const xe=document.activeElement,X=xe instanceof HTMLInputElement||xe instanceof HTMLTextAreaElement,ze=x[0].y;if(we.current&&!X&&He(T,ze))return we.current("Hi"),E.current=F,a.waveDirectionChanges=0,a.waveStartTime=0,a.lastWaveDirection=null,a.waveXPositions=[],"WAVE"}}}}if((U==null?void 0:U.action)==="message"&&U.message){v.candidate===I?v.frames++:(v.candidate=I,v.frames=1);const ee=te(I);if(v.frames>=ee&&F-E.current>G){const T=document.activeElement,ae=T instanceof HTMLInputElement||T instanceof HTMLTextAreaElement,$=x[0];if(we.current&&!ae&&He($.x,$.y))return we.current(U.message),E.current=F,v.frames=0,H.current&&H.current({gesture:I,progress:1,triggered:!0}),I}if(H.current){const T=Math.min(1,v.frames/ee);H.current({gesture:I,progress:T,triggered:!1})}}return I},[_e,Te,Q]),Z=d.useCallback((f,F)=>{if(!m.current||!f)return null;const S=f.map(v=>[v.x,v.y,v.z]),a=m.current.estimate(S,7.5);if(a.gestures.length>0){const v=a.gestures.sort((U,b)=>b.score-U.score),D=v[0],ue=Ue.current;if(!Q(D.name,ue))return H.current&&H.current({gesture:Tr(D.name)?`ACTION: ${D.name}`:`ASL: ${D.name}`,progress:0,triggered:!1}),null;const x=W.current!==0&&F-W.current<J&&!Tr(D.name)&&D.name===K.current;x||(D.name===K.current?j.current++:(K.current=D.name,j.current=1));const I={letter:D.name,confidence:D.score/10,allGestures:v};if(Ke.current&&Ke.current(I),H.current){const U=Math.min(1,j.current/ie),b=j.current>=ie&&!x;b&&(W.current=F,j.current=0,Tr(D.name)?D.name==="PREV_MODE"&&Re.current?Re.current("prev"):D.name==="NEXT_MODE"&&Re.current&&Re.current("next"):he.current.push(D.name));const ee=Tr(D.name)?`ACTION: ${D.name}`:`ASL: ${D.name}`;H.current({gesture:ee,progress:U,triggered:b})}return D.name}return K.current=null,j.current=0,H.current&&H.current({gesture:null,progress:0,triggered:!1}),null},[Q]),le=d.useCallback(()=>{var xe,X,ze,br,Sr,hr,wr;const f=l.current,F=i.current,S=B.current;if(!f||!F){s.current=requestAnimationFrame(le);return}if(S==="navigation"&&!t.current){s.current=requestAnimationFrame(le);return}if(S==="asl"&&!c.current){s.current=requestAnimationFrame(le);return}if(f.videoWidth===0||f.videoHeight===0){s.current=requestAnimationFrame(le);return}const a=window.innerWidth,v=window.innerHeight;(F.width!==a||F.height!==v)&&(F.width=a,F.height=v);const D=F.getContext("2d");if(!D){s.current=requestAnimationFrame(le);return}const ue=performance.now(),x=n.current;if(ue-x.lastFrameTime<x.currentInterval){s.current=requestAnimationFrame(le);return}x.lastFrameTime=ue;const I=ue;let U=[],b=null,ee=!1;if(S==="navigation"&&t.current){const Y=t.current.recognizeForVideo(f,I);Y.landmarks&&(U=Y.landmarks.map(M=>M.map(L=>({x:L.x,y:L.y,z:L.z}))));for(let M=0;M<(((xe=Y.landmarks)==null?void 0:xe.length)||0);M++){const L=Ve(Y,I,M);L&&(b=L,ee=!0)}if(ne.current&&U[0]){const M=(br=(ze=(X=Y.handednesses)==null?void 0:X[0])==null?void 0:ze[0])==null?void 0:br.categoryName;ne.current({landmarks:U[0],handedness:M??null})}}else if(S==="asl"&&c.current){const Y=c.current.detectForVideo(f,I);if(Y.landmarks){if(U=Y.landmarks.map(M=>M.map(L=>({x:L.x,y:L.y,z:L.z}))),U[0]){const M=Z(U[0],I);M&&(b=M,ee=!0)}if(ne.current){const M=(wr=(hr=(Sr=Y.handednesses)==null?void 0:Sr[0])==null?void 0:hr[0])==null?void 0:wr.categoryName;ne.current({landmarks:U[0],handedness:M??null})}}}const T=performance.now();ee?(x.currentInterval=Math.max(10,x.baseInterval*.7),x.lastActivityTime=T,x.gestureActivityCount++):T-x.lastActivityTime>1e3?x.currentInterval=Math.min(50,x.currentInterval*1.05):x.currentInterval=Math.min(33,x.baseInterval*2);const ae=Math.round(performance.now()-I);me.current.frames++;const $=I-me.current.lastTime;$>=1e3&&(me.current.fps=Math.round(me.current.frames*1e3/$),me.current.frames=0,me.current.lastTime=I,k.current&&k.current({fps:me.current.fps,detectionTime:ae}));const Ge=r.current,O=Ge==null?void 0:Ge.getContext("2d");if(D.clearRect(0,0,a,v),O&&O.clearRect(0,0,a,v),U.length>0)for(const Y of U){let M=S==="asl"?"#10b981":"#3b82f6",L=S==="asl"?"#6ee7b7":"#60a5fa";b&&(S==="asl"?b.startsWith("ASL:")?(M="#10b981",L="#6ee7b7"):b.startsWith("ACTION:")?(M="#8b5cf6",L="#c4b5fd"):(M="#10b981",L="#6ee7b7"):b==="Pointing_Up"||b==="POINTING"?(M="#06b6d4",L="#67e8f9"):b==="Thumb_Up"||b==="THUMBS_UP"?(M="#22c55e",L="#86efac"):b==="Thumb_Down"||b==="THUMBS_DOWN"?(M="#f97316",L="#fdba74"):b==="Closed_Fist"||b==="FIST"?(M="#a855f7",L="#d8b4fe"):b==="Open_Palm"||b==="WAVE"?(M="#f59e0b",L="#fcd34d"):(M="#3b82f6",L="#60a5fa"));const Ir=[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20],[5,9],[9,13],[13,17]];for(const[Qe,Rr]of Ir){const Ze=Y[Qe],er=Y[Rr],je=D.createLinearGradient(Ze.x*a,Ze.y*v,er.x*a,er.y*v);je.addColorStop(0,M),je.addColorStop(1,L),D.beginPath(),D.moveTo(Ze.x*a,Ze.y*v),D.lineTo(er.x*a,er.y*v),D.strokeStyle=je,D.lineWidth=b?3:2,D.shadowColor=M,D.shadowBlur=b?10:8,D.stroke()}if(O){for(let Qe=0;Qe<Y.length;Qe++){const Rr=Y[Qe],Ze=Rr.x*a,er=Rr.y*v,je=[4,8,12,16,20].includes(Qe),Nr=je?b?5:4:b?3:2;O.beginPath(),O.arc(Ze,er,Nr,0,2*Math.PI),je?(O.fillStyle="#ffffff",O.shadowColor=L,O.shadowBlur=b?20:15):(O.fillStyle="#1e293b",O.strokeStyle=L,O.lineWidth=1.5,O.shadowColor=M,O.shadowBlur=b?8:5),O.fill(),je||O.stroke()}O.shadowBlur=0}}else R.current.visible&&y.current&&(y.current.style.opacity="0",R.current.visible=!1),ne.current&&ne.current({landmarks:null,handedness:null});s.current=requestAnimationFrame(le)},[Ve,Z]);return d.useEffect(()=>(u&&l.current&&(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then(f=>{p.current=f,l.current&&(l.current.srcObject=f,l.current.play(),l.current.addEventListener("loadeddata",()=>{const F=window.innerWidth,S=window.innerHeight;i.current&&(i.current.width=F,i.current.height=S),r.current&&(r.current.width=F,r.current.height=S),s.current&&cancelAnimationFrame(s.current),s.current=requestAnimationFrame(le)}))}).catch(f=>{console.error("Error accessing webcam:",f);let F="Could not access camera";f.name==="NotFoundError"||f.name==="DevicesNotFoundError"?F="No camera found. Please connect a webcam to use gesture control.":f.name==="NotAllowedError"||f.name==="PermissionDeniedError"?F="Camera access denied. Please allow camera access in your browser settings.":(f.name==="NotReadableError"||f.name==="TrackStartError")&&(F="Camera is in use by another application."),Je.current&&Je.current(F)}):console.warn("navigator.mediaDevices is undefined. Camera access requires HTTPS or localhost.")),()=>{s.current&&cancelAnimationFrame(s.current)}),[u,le]),d.useEffect(()=>()=>{s.current&&(cancelAnimationFrame(s.current),s.current=void 0),p.current&&(p.current.getTracks().forEach(f=>{f.stop()}),p.current=null),l.current&&(l.current.srcObject=null),t.current&&(t.current.close(),t.current=null),c.current&&(c.current.close(),c.current=null),r.current&&(r.current.width=0,r.current.height=0)},[]),pe.jsxs(pe.Fragment,{children:[pe.jsxs("div",{className:"fixed inset-0 z-[1] pointer-events-none overflow-hidden scale-x-[-1]",children:[pe.jsx("video",{ref:l,className:"hidden",playsInline:!0,muted:!0,autoPlay:!0}),pe.jsx("canvas",{ref:i,className:"absolute inset-0 w-full h-full opacity-50 mix-blend-screen"})]}),pe.jsx("div",{className:"fixed inset-0 z-[1] pointer-events-none overflow-hidden scale-x-[-1]",children:pe.jsx("canvas",{ref:r,className:"absolute inset-0 w-full h-full opacity-50 mix-blend-screen"})}),dr==="navigation"&&pe.jsx("div",{ref:y,className:"fixed pointer-events-none z-[9999]",style:{top:0,left:0,width:28,height:28,marginLeft:-14,marginTop:-14,borderRadius:"50%",border:"2px solid rgba(148, 163, 184, 0.7)",opacity:0,boxShadow:"0 0 8px rgba(148, 163, 184, 0.3)",willChange:"transform, opacity"},children:pe.jsx("div",{ref:P,className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full",style:{width:6,height:6,backgroundColor:"rgba(255, 255, 255, 0.9)"}})})]})}export{Xr as default};
