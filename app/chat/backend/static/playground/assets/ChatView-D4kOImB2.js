import{r,j as e,u as Ne,v as he,T as re,S as ue,w as te,U as ye,C as be,x as Se,y as ke}from"./react-vendor-DKsS7gXq.js";import{F as xe}from"./FormattedContent-D1n-P9lI.js";import{a as Ce,b as Ee,f as $e,s as Ae,E as pe,P as Te}from"./index-g4RALCAc.js";import"./markdown-AsYQNlgc.js";import"./math-render-CNya49bh.js";import"./syntax-highlight-BpcuKWAI.js";function Me(l){const[a,o]=r.useState([]);return r.useEffect(()=>{const v=l.match(/```json\s*([\s\S]*?)\s*```/);if(v)try{let x=v[1];x=x.replace(/[\\']/g,'"').replace(/,\s*}/g,"}").replace(/,\s*]/g,"]").replace(/}\s*[\\]+\s*$/g,"}").replace(/"\s*"\s*$/g,"").trim();const p=JSON.parse(x);if(p.options&&Array.isArray(p.options)){const i=p.options.filter(m=>m.id&&m.label&&m.value);i.length>0?o(i):o([])}}catch(x){console.error("Failed to parse gesture options:",x),o([])}else o([])},[l]),a}function ze(l){return l.replace(/```json[\s\S]*?```/g,"").trim()}const Re=1800;function Le({content:l,onSelect:a,isInline:o=!1}){const v=Me(l),[x,p]=r.useState(null),[i,m]=r.useState({}),j=r.useRef(0),c=r.useRef(0);r.useEffect(()=>{const h=$=>{var M;const y=(M=$.detail)==null?void 0:M.target;if(y&&y.hasAttribute("data-gesture-option")){const S=y.getAttribute("data-gesture-option");S&&S!==x&&(p(S),w(S))}else x&&(p(null),d())};return window.addEventListener("gesture-hover",h),()=>{window.removeEventListener("gesture-hover",h),d()}},[x]);const w=h=>{d(),j.current=Date.now();const $=()=>{const y=Date.now()-j.current,M=Math.min(y/Re*100,100);if(m(S=>({...S,[h]:M})),M>=100){const S=v.find(P=>P.id===h);S&&(a(S.value),d())}else c.current=requestAnimationFrame($)};c.current=requestAnimationFrame($)},d=()=>{c.current&&cancelAnimationFrame(c.current),m({})},f=h=>{p(h),w(h)},N=()=>{p(null),d()};if(v.length===0)return null;const E=o?"w-full mt-3":"w-full",n=o?"grid grid-cols-2 gap-2":"flex flex-col gap-2.5",z=h=>o?`relative overflow-hidden rounded-lg font-medium text-xs border transition-all duration-200 text-center min-h-[40px] flex items-center justify-center px-3 py-2 ${h?"bg-blue-500/20 border-blue-500/50 text-white shadow-lg shadow-blue-500/10":"bg-slate-800/60 border-slate-700/60 text-slate-200 hover:bg-slate-800/80 hover:border-slate-700/80"}`:`relative overflow-hidden rounded-xl font-medium text-sm border transition-all duration-200 w-full text-left min-h-[52px] flex items-center px-4 py-3 ${h?"bg-blue-500/20 border-blue-500/50 text-white shadow-lg shadow-blue-500/10 scale-[1.02]":"bg-slate-800/60 border-slate-700/60 text-slate-200 hover:bg-slate-800/80 hover:border-slate-700/80"}`;return e.jsxs("div",{className:E,children:[!o&&e.jsxs("div",{className:"flex items-center gap-2 mb-3 px-1",children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider text-slate-400",children:"Quick Actions"}),e.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-slate-700/50 to-transparent"})]}),e.jsx("div",{className:n,children:v.map(h=>{const $=i[h.id]||0,y=x===h.id;return e.jsxs("button",{onClick:()=>a(h.value),onMouseEnter:()=>f(h.id),onMouseLeave:N,"data-gesture-option":h.id,className:z(y),children:[y&&$>0&&e.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-gradient-to-r from-blue-400 to-blue-500 transition-all duration-75",style:{width:`${$}%`}}),e.jsx("span",{className:"relative z-10",children:h.label})]},h.id)})})]})}function me({models:l,selectedModels:a,onToggleModel:o,isGenerating:v,githubToken:x,openrouterKey:p,dropDirection:i="up"}){const[m,j]=r.useState(null),[c,w]=r.useState(""),d=r.useRef(null),f=r.useRef(null),N=r.useMemo(()=>l.filter(s=>s.type==="self-hosted"),[l]),E=r.useMemo(()=>l.filter(s=>s.type==="github"),[l]),n=r.useMemo(()=>l.filter(s=>s.type==="external"),[l]),z=r.useMemo(()=>N.filter(s=>!c||s.name.toLowerCase().includes(c.toLowerCase())),[N,c]),h=r.useMemo(()=>E.filter(s=>!c||s.name.toLowerCase().includes(c.toLowerCase())),[E,c]),$=r.useMemo(()=>n.filter(s=>!c||s.name.toLowerCase().includes(c.toLowerCase())),[n,c]),y=N.filter(s=>a.has(s.id)).length,M=E.filter(s=>a.has(s.id)).length,S=n.filter(s=>a.has(s.id)).length;r.useEffect(()=>{const s=R=>{d.current&&!d.current.contains(R.target)&&(j(null),w(""))};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),r.useEffect(()=>{const s=R=>{R.key==="Escape"&&(j(null),w(""))};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[]);const P=s=>{m===s?(j(null),w("")):(j(s),w(""),setTimeout(()=>{var R;return(R=f.current)==null?void 0:R.focus()},50))},_=s=>{const R=s.every(U=>a.has(U.id));s.forEach(U=>{(R||!a.has(U.id))&&o(U.id)})},B=s=>s==="self-hosted"?"Self-Hosted":s==="github"?"GitHub":"External",J=M>0&&!x,F=S>0&&!p,A=i==="up"?Ne:he,L=s=>s?"rotate-180":"",O=(J||F)&&e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[J&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-md bg-yellow-500/10 border border-yellow-500/20 text-yellow-200 text-xs",children:[e.jsx(re,{size:11,className:"shrink-0 text-yellow-500"}),e.jsx("span",{children:"Add GitHub token in Settings for dedicated quota"})]}),F&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-md bg-yellow-500/10 border border-yellow-500/20 text-yellow-200 text-xs",children:[e.jsx(re,{size:11,className:"shrink-0 text-yellow-500"}),e.jsx("span",{children:"Add OpenRouter key in Settings for external models"})]})]});return e.jsxs("div",{className:"flex flex-col items-center gap-2",ref:d,children:[i==="up"&&O,e.jsxs("div",{className:"relative flex items-center gap-1 bg-slate-800/90 rounded-lg p-1 border border-slate-700/50 backdrop-blur-md shadow-lg",children:[N.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative flex items-center",children:[e.jsxs("button",{onClick:()=>P("self-hosted"),disabled:v,className:`h-7 px-3 flex items-center gap-1.5 rounded-md transition-all active:scale-95 text-xs font-medium whitespace-nowrap ${y>0?"bg-emerald-500/20 text-emerald-300":"text-slate-400 hover:text-slate-300 hover:bg-slate-700/30"}`,children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsx("span",{children:B("self-hosted")}),e.jsxs("span",{className:`text-[10px] ${y>0?"text-emerald-400":"text-slate-500"}`,children:[y,"/",N.length]}),e.jsx(A,{size:12,className:`transition-transform ${L(m==="self-hosted")}`})]}),m==="self-hosted"&&e.jsx(se,{models:z,allModels:N,selectedModels:a,onToggleModel:o,onToggleAll:()=>_(N),searchQuery:c,setSearchQuery:w,searchInputRef:f,color:"emerald",showSearch:N.length>5,direction:i})]}),e.jsx("div",{className:"w-px h-5 bg-slate-600/50"})]}),E.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative flex items-center",children:[e.jsxs("button",{onClick:()=>P("github"),disabled:v,className:`h-7 px-3 flex items-center gap-1.5 rounded-md transition-all active:scale-95 text-xs font-medium whitespace-nowrap ${M>0?"bg-blue-500/20 text-blue-300":"text-slate-400 hover:text-slate-300 hover:bg-slate-700/30"}`,children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{children:B("github")}),e.jsxs("span",{className:`text-[10px] ${M>0?"text-blue-400":"text-slate-500"}`,children:[M,"/",E.length]}),e.jsx(A,{size:12,className:`transition-transform ${L(m==="github")}`})]}),m==="github"&&e.jsx(se,{models:h,allModels:E,selectedModels:a,onToggleModel:o,onToggleAll:()=>_(E),searchQuery:c,setSearchQuery:w,searchInputRef:f,color:"blue",showSearch:E.length>5,direction:i})]}),n.length>0&&e.jsx("div",{className:"w-px h-5 bg-slate-600/50"})]}),n.length>0&&e.jsxs("div",{className:"relative flex items-center",children:[e.jsxs("button",{onClick:()=>P("external"),disabled:v,className:`h-7 px-3 flex items-center gap-1.5 rounded-md transition-all active:scale-95 text-xs font-medium whitespace-nowrap ${S>0?"bg-purple-500/20 text-purple-300":"text-slate-400 hover:text-slate-300 hover:bg-slate-700/30"}`,children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),e.jsx("span",{children:B("external")}),e.jsxs("span",{className:`text-[10px] ${S>0?"text-purple-400":"text-slate-500"}`,children:[S,"/",n.length]}),e.jsx(A,{size:12,className:`transition-transform ${L(m==="external")}`})]}),m==="external"&&e.jsx(se,{models:$,allModels:n,selectedModels:a,onToggleModel:o,onToggleAll:()=>_(n),searchQuery:c,setSearchQuery:w,searchInputRef:f,color:"purple",showSearch:n.length>5,direction:i})]})]}),i==="down"&&O]})}function se({models:l,allModels:a,selectedModels:o,onToggleModel:v,onToggleAll:x,searchQuery:p,setSearchQuery:i,searchInputRef:m,color:j,showSearch:c,direction:w}){const d=a.every(n=>o.has(n.id)),f={emerald:{bg:"bg-emerald-500/20",text:"text-emerald-300",check:"text-emerald-400",dot:"bg-emerald-500/50",border:"focus:border-emerald-500/50"},blue:{bg:"bg-blue-500/20",text:"text-blue-300",check:"text-blue-400",dot:"bg-blue-500/50",border:"focus:border-blue-500/50"},purple:{bg:"bg-purple-500/20",text:"text-purple-300",check:"text-purple-400",dot:"bg-purple-500/50",border:"focus:border-purple-500/50"}}[j],N=w==="up"?"bottom-full left-0 mb-2":"top-full left-0 mt-2",E=w==="up"?"animate-in fade-in slide-in-from-bottom-2":"animate-in fade-in slide-in-from-top-2";return e.jsxs("div",{className:`absolute ${N} w-56 bg-slate-800/95 backdrop-blur-md border border-slate-700 rounded-lg shadow-2xl z-[100] overflow-hidden ${E} duration-150`,onClick:n=>n.stopPropagation(),"data-no-arena-scroll":!0,children:[w==="down"&&c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-2 py-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(ue,{size:12,className:"absolute left-2 top-1/2 -translate-y-1/2 text-slate-500"}),e.jsx("input",{ref:m,type:"text",placeholder:"Search...",value:p,onChange:n=>i(n.target.value),className:`w-full pl-7 pr-2 py-1 text-xs bg-slate-700/50 border border-slate-600/50 rounded text-slate-200 placeholder-slate-500 focus:outline-none ${f.border}`})]})}),e.jsx("div",{className:"border-t border-slate-700/50"})]}),w==="down"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:x,className:`w-full px-3 py-2 text-left text-xs font-medium transition-colors flex items-center justify-between ${d?`${f.bg} ${f.text}`:"text-slate-300 hover:bg-slate-700/50"}`,children:[e.jsx("span",{children:d?"Deselect All":"Select All"}),d&&e.jsx("span",{className:f.check,children:"âœ“"})]}),e.jsx("div",{className:"border-t border-slate-700/50"})]}),e.jsx("div",{className:"max-h-48 overflow-y-scroll chat-scroll",style:{WebkitOverflowScrolling:"touch"},children:l.map(n=>{const z=o.has(n.id);return e.jsxs("button",{onClick:()=>v(n.id),className:`w-full px-3 py-2 text-left text-xs font-medium transition-colors flex items-center justify-between ${z?`${f.bg} text-slate-200`:"text-slate-300 hover:bg-slate-700/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${f.dot}`}),e.jsx("span",{children:n.name})]}),z&&e.jsx("span",{className:f.check,children:"âœ“"})]},n.id)})}),w==="up"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-slate-700/50"}),e.jsxs("button",{onClick:x,className:`w-full px-3 py-2 text-left text-xs font-medium transition-colors flex items-center justify-between ${d?`${f.bg} ${f.text}`:"text-slate-300 hover:bg-slate-700/50"}`,children:[e.jsx("span",{children:d?"Deselect All":"Select All"}),d&&e.jsx("span",{className:f.check,children:"âœ“"})]})]}),w==="up"&&c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-slate-700/50"}),e.jsx("div",{className:"px-2 py-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(ue,{size:12,className:"absolute left-2 top-1/2 -translate-y-1/2 text-slate-500"}),e.jsx("input",{ref:m,type:"text",placeholder:"Search...",value:p,onChange:n=>i(n.target.value),className:`w-full pl-7 pr-2 py-1 text-xs bg-slate-700/50 border border-slate-600/50 rounded text-slate-200 placeholder-slate-500 focus:outline-none ${f.border}`})]})})]})]})}const Y={none:{id:"none",name:"None",description:"No system prompt",prompt:null},ui_builder:{id:"ui_builder",name:"UI Builder",description:"Interactive JSON buttons for gesture control",prompt:`You can output interactive UI elements using JSON. When appropriate, include clickable options:

\`\`\`json
{
  "options": [
    {"id": "opt1", "label": "Option 1", "action": "message", "value": "User selected option 1"},
    {"id": "opt2", "label": "Option 2", "action": "message", "value": "User selected option 2"}
  ]
}
\`\`\`

Guidelines:
- Use for choices, confirmations, or navigation
- 2-4 options max
- Keep labels short
- Include JSON after your text response`},concise:{id:"concise",name:"Concise",description:"Brief, direct responses",prompt:"Be concise. Give direct answers without unnecessary elaboration. Use bullet points for lists. Skip pleasantries."},technical:{id:"technical",name:"Technical",description:"Detailed technical explanations",prompt:"Provide detailed technical explanations. Include code examples where relevant. Explain tradeoffs and edge cases. Assume technical proficiency."},creative:{id:"creative",name:"Creative",description:"More expressive and creative responses",prompt:"Be creative and expressive. Use analogies and metaphors. Explore ideas freely. Personality is encouraged."}};function fe({systemPreset:l,setSystemPreset:a,showDropdown:o,setShowDropdown:v,showPreview:x,setShowPreview:p,dropdownRef:i,direction:m="down",compact:j=!1}){const c=Y[l],w=Object.keys(Y);return r.useEffect(()=>{const d=f=>{i.current&&!i.current.contains(f.target)&&(v(!1),p(!1))};if(o||x)return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[o,x,i,v,p]),e.jsxs("div",{className:`relative ${j?"":"mt-3"}`,ref:i,children:[e.jsxs("button",{onClick:()=>v(!o),className:`flex items-center gap-1.5 rounded-md transition-all active:scale-95 font-medium ${j?"h-6 px-2 text-[11px]":"h-7 px-2.5 text-xs"} ${l!=="none"?"bg-sky-500/15 text-sky-300 hover:bg-sky-500/25":"bg-slate-800/60 text-slate-400 hover:text-slate-300 hover:bg-slate-700/50"}`,children:[e.jsx(ke,{size:j?11:12}),e.jsxs("span",{children:["System: ",c.name]}),e.jsx(he,{size:j?10:12,className:`transition-transform ${o?"rotate-180":""}`})]}),o&&e.jsxs("div",{className:`absolute ${m==="up"?"bottom-full mb-1":"top-full mt-1"} left-1/2 -translate-x-1/2 min-w-[200px] bg-slate-800/95 backdrop-blur-md rounded-lg border border-slate-700/50 shadow-xl overflow-hidden z-50`,children:[w.map(d=>{const f=Y[d],N=d===l;return e.jsx("div",{className:"relative group",children:e.jsxs("button",{onClick:()=>{a(d),v(!1)},className:`w-full px-3 py-2 text-left text-xs flex items-center justify-between transition-colors ${N?"bg-sky-500/20 text-sky-300":"text-slate-300 hover:bg-slate-700/50"}`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:f.name}),e.jsx("div",{className:"text-[10px] text-slate-500",children:f.description})]}),N&&e.jsx(be,{size:12,className:"text-sky-400"})]})},d)}),c.prompt&&e.jsxs("div",{className:"border-t border-slate-700/50",children:[e.jsx("button",{onClick:()=>p(!x),className:"w-full px-3 py-1.5 text-[10px] text-slate-500 hover:text-slate-400 text-left",children:x?"â–¼ Hide prompt":"â–¶ Show prompt"}),x&&e.jsx("div",{className:"px-3 pb-2 text-[10px] text-slate-400 font-mono whitespace-pre-wrap max-h-32 overflow-y-auto",children:c.prompt})]})]})]})}const Be=r.forwardRef(({models:l,selectedModels:a,onToggleModel:o,githubToken:v,openrouterKey:x,messages:p,setMessages:i,isGenerating:m,setIsGenerating:j,gesturesActive:c=!1},w)=>{var le,ae;const[d,f]=r.useState(!1),[N,E]=r.useState(null),[n,z]=r.useState(new Map),[h,$]=r.useState(new Map),[y,M]=Ce("chat-system-preset","none"),[S,P]=r.useState(!1),[_,B]=r.useState(!1),J=r.useRef(null),F=r.useRef(new Map),A=r.useRef(null),L=r.useRef(null),O=r.useRef(!1),s=Ee(),R=((le=s==null?void 0:s.gestureState)==null?void 0:le.gesture)==="Middle_Finger",U=r.useCallback(()=>{if(!A.current)return!0;const{scrollTop:t,scrollHeight:u,clientHeight:b}=A.current;return u-t-b<100},[]);r.useEffect(()=>{const t=A.current;if(!t)return;const u=()=>{U()?O.current=!1:O.current=!0};return t.addEventListener("scroll",u,{passive:!0}),()=>t.removeEventListener("scroll",u)},[U]),r.useImperativeHandle(w,()=>({sendMessage:(t,u)=>Q(t,u),setInput:t=>{L.current&&(L.current.value=t,L.current.focus())},stopGeneration:ne,scroll:t=>{A.current&&(O.current=!0,A.current.scrollTop=A.current.scrollTop-t)}})),r.useEffect(()=>{A.current&&!O.current&&(A.current.scrollTop=A.current.scrollHeight)},[p,n]),r.useEffect(()=>{const t=u=>{var T;if(u.ctrlKey||u.metaKey||u.altKey)return;const b=u.target;b.tagName==="INPUT"||b.tagName==="TEXTAREA"||u.key.length===1&&((T=L.current)==null||T.focus())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]);const Q=async(t,u=!1)=>{if(!t.trim()||m||a.size===0)return;O.current=!1;const b=Array.from(a),T={role:"user",content:t};i(g=>[...g,T]),j(!0),z(new Map(b.map(g=>[g,""])));const H=Date.now();$(new Map(b.map(g=>[g,{startTime:H}])));const G=[...p,T].map(g=>({role:g.role,content:g.content})),W=[],oe=Y[y];oe.prompt&&W.push({role:"system",content:oe.prompt}),u&&W.push({role:"system",content:'User is using gesture control. Available gestures: ðŸ‘ (yes), ðŸ‘Ž (no), ðŸ‘‹ (hello), "ok", "thanks", "stop", pointing finger (select buttons).'}),(t==="ðŸ–•"||t.toLowerCase().includes("middle finger"))&&W.push({role:"system",content:"The user is showing you their middle finger. Respond with humorous, over-the-top mock indignation. Play along with the 'angry robot' persona."});const we=[...W,...G];let K=0;const ie=b.length,je=b.map(async g=>{const V=l.find(C=>C.id===g),ce=Date.now();if(!V){i(C=>[...C,{role:"assistant",content:"Model not found",modelName:g,modelId:g,error:!0}]),z(C=>{const k=new Map(C);return k.delete(g),k}),$(C=>{const k=new Map(C);return k.delete(g),k}),K++,K===ie&&j(!1);return}const X=new AbortController;F.current.set(g,X);let q;try{const C=await $e({models:[g],messages:we,max_tokens:2048,temperature:.7,github_token:v||null,openrouter_key:x||null},X.signal);let k="";await Ae(C,D=>{if(X.signal.aborted)throw new DOMException("Aborted","AbortError");if(D.event==="error"||D.error)throw new Error(typeof D.error=="string"?D.error:D.content||"Stream failed");D.content&&(q||(q=Date.now(),$(I=>{const ee=new Map(I),de=ee.get(g);return de&&ee.set(g,{...de,firstTokenTime:q}),ee})),k+=D.content,z(I=>new Map(I).set(g,k)))});const Z=Date.now();i(D=>[...D,{role:"assistant",content:k,modelName:V.name,modelId:g,timing:{startTime:ce,firstTokenTime:q,endTime:Z}}])}catch(C){const k=Date.now();C.name!=="AbortError"&&i(Z=>[...Z,{role:"assistant",content:C.message,modelName:V.name,modelId:g,error:!0,timing:{startTime:ce,firstTokenTime:q,endTime:k}}])}finally{F.current.delete(g),z(C=>{const k=new Map(C);return k.delete(g),k}),$(C=>{const k=new Map(C);return k.delete(g),k}),K++,K===ie&&j(!1)}});await Promise.all(je)},ne=()=>{F.current.forEach(b=>b.abort()),F.current.clear();const t=[],u=Date.now();n.forEach((b,T)=>{if(b.trim()){const H=l.find(W=>W.id===T),G=h.get(T);t.push({role:"assistant",content:b,modelName:H==null?void 0:H.name,modelId:T,timing:G?{...G,endTime:u}:void 0})}}),t.length>0&&i(b=>[...b,...t]),z(new Map),$(new Map),j(!1)},ge=r.useCallback(async t=>{const u=p[t];if(u)try{await navigator.clipboard.writeText(u.content),E(`${t}`),setTimeout(()=>E(null),2e3)}catch(b){console.error("Copy failed",b)}},[p]),ve=a.size===0?"Select models to start...":a.size===1?`Message ${((ae=l.find(t=>t.id===Array.from(a)[0]))==null?void 0:ae.name)||"model"}...`:`Message ${a.size} models...`;return e.jsxs("div",{className:"flex flex-col h-full relative",children:[e.jsx("div",{ref:A,className:"flex-1 overflow-y-scroll p-4 pb-40 chat-scroll",style:{WebkitOverflowScrolling:"touch"},"data-no-arena-scroll":!0,children:e.jsxs("div",{className:"mx-auto max-w-2xl space-y-4",children:[p.length===0&&e.jsxs("div",{className:"flex-1 flex flex-col items-center text-slate-500 select-none pt-[15vh]",children:[R?e.jsxs("div",{className:"mb-6 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-red-500 blur-xl opacity-50 rounded-full"}),e.jsx(te,{size:72,className:"relative text-red-500"}),e.jsx("div",{className:"absolute -top-2 -right-2 text-3xl",children:"ðŸ’¢"})]}):e.jsx(te,{size:72,className:"mb-6 opacity-50 transition-all duration-300"}),e.jsx(me,{models:l,selectedModels:a,onToggleModel:o,isGenerating:m,githubToken:v,openrouterKey:x,dropDirection:"down"}),e.jsx(fe,{systemPreset:y,setSystemPreset:M,showDropdown:S,setShowDropdown:P,showPreview:_,setShowPreview:B,dropdownRef:J,direction:"down"})]}),p.map((t,u)=>{const b=t.role==="assistant"&&(c||y==="ui_builder")&&t.content.includes("```json");return e.jsxs("div",{className:`flex ${t.role==="user"?"justify-end":"justify-start"}`,children:[e.jsxs("div",{className:`group relative max-w-[85%] rounded-2xl px-4 py-3 ${t.role==="user"?"bg-blue-600/20 border border-blue-500/30 text-white rounded-tr-sm":t.error?"bg-red-500/10 border border-red-500/30 text-red-200 rounded-tl-sm":"bg-slate-800/60 border border-slate-700/60 text-slate-200 rounded-tl-sm"}`,children:[e.jsxs("div",{className:`flex items-center gap-2 mb-1 text-[10px] font-bold uppercase tracking-wider ${t.role==="user"?"text-blue-300 flex-row-reverse":"text-slate-400"}`,children:[t.role==="user"?e.jsx(ye,{size:12}):e.jsx(te,{size:12}),t.role==="user"?"You":t.modelName||"Assistant",t.error&&e.jsx(re,{size:12,className:"text-red-400"})]}),e.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:e.jsx(xe,{text:t.role==="user"?t.content:ze(t.content)})}),t.role==="assistant"&&t.timing&&e.jsx("div",{className:"mt-2 pt-2 border-t border-slate-700/30",children:e.jsx(pe,{times:t.timing})}),t.role==="assistant"&&t.content&&e.jsx("button",{onClick:()=>ge(u),className:`absolute bottom-2 right-2 p-1.5 rounded-md transition-all ${N===`${u}`?"bg-emerald-500/20 text-emerald-400":"opacity-0 group-hover:opacity-100 bg-slate-700/70 text-slate-400"}`,children:N===`${u}`?e.jsx(be,{size:12}):e.jsx(Se,{size:12})})]}),b&&e.jsx("div",{className:"ml-4",children:e.jsx(Le,{content:t.content,onSelect:T=>Q(T,!0),isInline:!1})})]},u)}),m&&n.size>0&&e.jsx(e.Fragment,{children:Array.from(n.entries()).map(([t,u])=>{const b=l.find(H=>H.id===t),T=h.get(t);return e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"max-w-[85%] rounded-2xl rounded-tl-sm px-4 py-3 bg-slate-800/60 border border-amber-500/30 text-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 text-[10px] font-bold uppercase tracking-wider text-amber-400/80",children:[e.jsx("div",{className:"w-3 h-3 border-2 border-amber-400/50 border-t-amber-400 rounded-full animate-spin"}),(b==null?void 0:b.name)||t]}),e.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:e.jsx(xe,{text:u||"..."})}),T&&e.jsx("div",{className:"mt-2 pt-2 border-t border-slate-700/30",children:e.jsx(pe,{times:T})})]})},t)})})]})}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-[99] flex flex-col items-center gap-2 px-4 pb-4",style:{paddingBottom:"calc(1rem + env(safe-area-inset-bottom))"},children:[p.length>0&&e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(fe,{systemPreset:y,setSystemPreset:M,showDropdown:S,setShowDropdown:P,showPreview:_,setShowPreview:B,dropdownRef:J,direction:"up",compact:!0}),e.jsx(me,{models:l,selectedModels:a,onToggleModel:o,isGenerating:m,githubToken:v,openrouterKey:x,dropDirection:"up"})]}),e.jsx(Te,{inputRef:L,inputFocused:d,setInputFocused:f,onSendMessage:Q,placeholder:ve,isGenerating:m,onStop:ne,className:"w-full flex justify-center",style:{}})]})]})});export{Y as SYSTEM_PRESETS,Be as default};
