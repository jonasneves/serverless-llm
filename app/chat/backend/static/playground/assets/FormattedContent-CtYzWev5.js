import{j as s,F as k}from"./react-vendor-VqckXmoY.js";import{r as x}from"./math-render-Q06Bpsm3.js";import{c as f,d as w,e as b}from"./markdown-rIyYVYgH.js";const j=n=>{var c,m,u,d;if(!n)return{thinking:null,answer:""};const a=n.match(/<\|channel\|>analysis<\|message\|>([\s\S]*?)<\|end\|>/i),g=n.match(/<\|channel\|>final<\|message\|>([\s\S]*?)(?:<\|end\|>|$)/i);if(g){const e=a?(c=a[1])==null?void 0:c.trim():null,r=((m=g[1])==null?void 0:m.trim())||"";return{thinking:e,answer:r}}const l=n.match(/<think>([\s\S]*?)<\/think>\s*([\s\S]*)/i),h=n.match(/<thinking>([\s\S]*?)<\/thinking>\s*([\s\S]*)/i);let t=null;if(l&&h?t=n.indexOf("<think>")<n.indexOf("<thinking>")?l:h:t=l||h,t){const e=(u=t[1])==null?void 0:u.trim(),r=(t[2]||"").trim();return e&&e.length>0?{thinking:e,answer:r}:{thinking:null,answer:r}}const i=n.match(/^([\s\S]*?)<\/think>\s*([\s\S]*)/i),p=n.match(/^([\s\S]*?)<\/thinking>\s*([\s\S]*)/i),o=i||p;if(o){const e=(d=o[1])==null?void 0:d.trim(),r=(o[2]||"").trim();if(e&&e.length>0&&r.length>0)return{thinking:e,answer:r}}return{thinking:null,answer:n}};function C({text:n,thinkingText:a,showThinking:g=!0}){const{thinking:l,answer:h}=j(n),t=a&&a.trim().length>0?a:l;return s.jsxs("div",{children:[t&&t.trim()&&g&&s.jsxs("details",{className:"mb-3 rounded-lg border border-slate-700/50 bg-slate-900/40",children:[s.jsx("summary",{className:"cursor-pointer select-none px-3 py-2 text-xs font-semibold text-slate-300",children:"Thinking"}),s.jsx("pre",{className:"px-3 pb-3 pt-1 text-xs text-slate-400 whitespace-pre-wrap",children:t})]}),s.jsx(k,{remarkPlugins:[w,b],rehypePlugins:[[x,{throwOnError:!1}],[f,{ignoreMissing:!0}]],components:{a:({...i})=>s.jsx("a",{...i,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline"}),pre:({...i})=>s.jsx("pre",{...i,className:"rounded-lg bg-slate-950/70 p-3 overflow-x-auto text-sm"}),code:i=>{const{inline:p,className:o,children:c,...m}=i;return p?s.jsx("code",{...m,className:"px-1 py-0.5 rounded bg-slate-800/70 text-slate-200 text-[0.9em]",children:c}):s.jsx("code",{...m,className:o,children:c})}},children:h})]})}export{C as F};
