import{r as t,j as e,B as ce,P as ke,f as Ce,X as G,h as Se,i as Ee,L as Te,k as Me,l as Pe,e as ze,m as Fe,n as Ae,b as Le,H as X,N as ie,o as J,p as Ge,q as _e,C as re,s as oe}from"./react-vendor-DKsS7gXq.js";import{u as Ie}from"./index-g4RALCAc.js";import"./markdown-AsYQNlgc.js";import"./math-render-CNya49bh.js";import"./syntax-highlight-BpcuKWAI.js";const $e={twoFingerTapWindow:500,twoFingerTapCooldown:400,twoFingerMinFrames:4,minPointingTime:100,dwellTime:1200,cursorSmoothing:.5},Q=["Wrist","Thumb_CMC","Thumb_MCP","Thumb_IP","Thumb_Tip","Index_MCP","Index_PIP","Index_DIP","Index_Tip","Middle_MCP","Middle_PIP","Middle_DIP","Middle_Tip","Ring_MCP","Ring_PIP","Ring_DIP","Ring_Tip","Pinky_MCP","Pinky_PIP","Pinky_DIP","Pinky_Tip"],Re=[{from:4,to:8,name:"Thumb-Index (pinch)"},{from:8,to:12,name:"Index-Middle"},{from:4,to:12,name:"Thumb-Middle"},{from:0,to:12,name:"Wrist-Middle (hand size)"}];function Oe({enabled:d,onToggle:l,gestureState:a,config:c,onConfigChange:u,mouseSimulation:C,onMouseSimulationToggle:k,debugInfo:r,landmarkData:o,performance:v,paused:E=!1,onPauseToggle:F}){var S;const[p,g]=t.useState("state"),[T,_]=t.useState([]),[x,O]=t.useState(null),D="right-3 sm:right-5";t.useEffect(()=>{if(a!=null&&a.triggered&&a.gesture){const s=r?`2F:${r.twoFingerFrames} P:${r.wasPointingOnly?"Y":"N"}`:void 0;_(i=>[{gesture:a.gesture,time:Date.now(),details:s},...i.slice(0,49)])}},[a==null?void 0:a.triggered,a==null?void 0:a.gesture,r]);const M=t.useCallback((s,i)=>{u({...c,[s]:i})},[c,u]),b=t.useCallback((s,i)=>{if(!(o!=null&&o.landmarks))return null;const P=o.landmarks[s],f=o.landmarks[i];return!P||!f?null:Math.sqrt(Math.pow(P.x-f.x,2)+Math.pow(P.y-f.y,2)+Math.pow(P.z-f.z,2))},[o]);return d?e.jsxs("div",{"data-debug-panel":!0,className:`fixed top-28 sm:top-24 ${D} z-50 w-80 bg-slate-900/95 backdrop-blur-md border border-slate-700/80 rounded-xl shadow-xl overflow-hidden max-h-[70vh] flex flex-col`,children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-slate-700/50 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{size:16,className:"text-amber-400"}),e.jsx("span",{className:"text-sm font-medium text-slate-200",children:"Gesture Debug"}),v&&e.jsxs("span",{className:"text-[10px] text-slate-500 font-mono",children:[v.fps,"fps â€¢ ",v.detectionTime,"ms"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[F&&e.jsx("button",{onClick:F,className:`p-1.5 rounded-md transition-colors ${E?"bg-amber-500/20 text-amber-400":"text-slate-400 hover:text-slate-200"}`,title:E?"Resume":"Pause",children:E?e.jsx(ke,{size:14}):e.jsx(Ce,{size:14})}),e.jsx("button",{onClick:l,className:"p-1.5 rounded-md text-slate-400 hover:text-slate-200 transition-colors",children:e.jsx(G,{size:14})})]})]}),e.jsxs("div",{className:"flex border-b border-slate-700/50 shrink-0",children:[e.jsx(W,{active:p==="state",onClick:()=>g("state"),icon:e.jsx(Se,{size:12}),label:"State"}),e.jsx(W,{active:p==="raw",onClick:()=>g("raw"),icon:e.jsx(Ee,{size:12}),label:"Raw"}),e.jsx(W,{active:p==="log",onClick:()=>g("log"),icon:e.jsx(Te,{size:12}),label:"Log"}),e.jsx(W,{active:p==="config",onClick:()=>g("config"),icon:e.jsx(Me,{size:12}),label:"Config"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[p==="state"&&e.jsxs("div",{className:"p-3 space-y-3",children:[e.jsxs("button",{onClick:k,className:`w-full flex items-center justify-between p-2 rounded-lg transition-all ${C?"bg-emerald-500/20 border border-emerald-500/50 text-emerald-400":"bg-slate-800/50 border border-slate-700/50 text-slate-400 hover:text-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{size:14}),e.jsx("span",{className:"text-xs font-medium",children:"Mouse Simulation"})]}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-700/50",children:C?"ON":"OFF"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wide mb-2",children:"Current Gesture"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`px-2 py-1 rounded text-xs font-mono ${a!=null&&a.gesture?"bg-cyan-500/20 text-cyan-400":"bg-slate-800/50 text-slate-500"}`,children:(a==null?void 0:a.gesture)||"NEUTRAL"}),(a==null?void 0:a.progress)!==void 0&&a.progress>0&&e.jsx("div",{className:"flex-1 h-1.5 bg-slate-700/50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-400 transition-all duration-100",style:{width:`${a.progress*100}%`}})})]})]}),r&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wide mb-2",children:"Fingers"}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 text-[10px]",children:[e.jsx(H,{label:"Idx",extended:r.indexExtended}),e.jsx(H,{label:"Mid",extended:r.middleExtended}),e.jsx(H,{label:"Rng",extended:r.ringExtended}),e.jsx(H,{label:"Pnk",extended:r.pinkyExtended})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-1 text-[10px]",children:[e.jsx("div",{className:`px-1.5 py-1 rounded text-center ${r.wasPointingOnly?"bg-blue-500/20 text-blue-400":"bg-slate-800/50 text-slate-500"}`,children:"Point"}),e.jsxs("div",{className:`px-1.5 py-1 rounded text-center ${r.twoFingerFrames>0?"bg-purple-500/20 text-purple-400":"bg-slate-800/50 text-slate-500"}`,children:["2F:",r.twoFingerFrames]}),e.jsx("div",{className:`px-1.5 py-1 rounded text-center ${r.clickLocked?"bg-red-500/20 text-red-400":"bg-emerald-500/20 text-emerald-400"}`,children:r.clickLocked?"Lock":"Ready"})]})]})]}),p==="raw"&&e.jsxs("div",{className:"p-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wide mb-2",children:"Key Distances"}),e.jsx("div",{className:"space-y-1",children:Re.map(({from:s,to:i,name:P})=>{const f=b(s,i);return e.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[e.jsx("span",{className:"text-slate-400",children:P}),e.jsx("span",{className:`font-mono ${f&&f<.05?"text-emerald-400":"text-slate-300"}`,children:f?f.toFixed(4):"â€”"})]},`${s}-${i}`)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wide mb-2",children:"Distance Calculator"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("select",{className:"flex-1 bg-slate-800 border border-slate-700 rounded px-2 py-1 text-[10px] text-slate-300",value:(x==null?void 0:x[0])??"",onChange:s=>O([parseInt(s.target.value),(x==null?void 0:x[1])??8]),children:[e.jsx("option",{value:"",children:"From..."}),Q.map((s,i)=>e.jsxs("option",{value:i,children:[i,": ",s]},i))]}),e.jsx("span",{className:"text-slate-500",children:"â†’"}),e.jsxs("select",{className:"flex-1 bg-slate-800 border border-slate-700 rounded px-2 py-1 text-[10px] text-slate-300",value:(x==null?void 0:x[1])??"",onChange:s=>O([(x==null?void 0:x[0])??4,parseInt(s.target.value)]),children:[e.jsx("option",{value:"",children:"To..."}),Q.map((s,i)=>e.jsxs("option",{value:i,children:[i,": ",s]},i))]})]}),x&&e.jsxs("div",{className:"mt-2 p-2 bg-slate-800/50 rounded text-center",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:"Distance: "}),e.jsx("span",{className:"text-sm font-mono text-cyan-400",children:((S=b(x[0],x[1]))==null?void 0:S.toFixed(4))??"â€”"})]})]}),(o==null?void 0:o.landmarks)&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-[10px] text-slate-500 uppercase tracking-wide mb-2",children:["Fingertip Positions ",o.handedness&&`(${o.handedness})`]}),e.jsx("div",{className:"space-y-1 text-[10px] font-mono",children:[4,8,12,16,20].map(s=>{const i=o.landmarks[s];return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-400",children:Q[s]}),e.jsxs("span",{className:"text-slate-300",children:["(",i.x.toFixed(2),", ",i.y.toFixed(2),", ",i.z.toFixed(2),")"]})]},s)})})]})]}),p==="log"&&e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wide",children:"Event Log"}),e.jsx("button",{onClick:()=>_([]),className:"text-[10px] text-slate-500 hover:text-slate-300",children:"Clear"})]}),e.jsx("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:T.length===0?e.jsx("div",{className:"text-[10px] text-slate-600 italic py-4 text-center",children:"No events yet"}):T.map((s,i)=>e.jsxs("div",{className:"flex items-center gap-2 text-[10px] py-0.5",children:[e.jsx("span",{className:"text-slate-600 font-mono w-12",children:Be(s.time)}),e.jsx("span",{className:`font-mono flex-1 ${i===0?"text-emerald-400":"text-slate-400"}`,children:s.gesture}),s.details&&e.jsx("span",{className:"text-slate-600 font-mono",children:s.details})]},i))})]}),p==="config"&&e.jsxs("div",{className:"p-3 space-y-3",children:[e.jsx($,{label:"Tap Window",value:c.twoFingerTapWindow,min:200,max:1200,step:50,unit:"ms",onChange:s=>M("twoFingerTapWindow",s)}),e.jsx($,{label:"Tap Cooldown",value:c.twoFingerTapCooldown,min:100,max:1e3,step:50,unit:"ms",onChange:s=>M("twoFingerTapCooldown",s)}),e.jsx($,{label:"Min Frames",value:c.twoFingerMinFrames,min:1,max:10,step:1,unit:"f",onChange:s=>M("twoFingerMinFrames",s)}),e.jsx($,{label:"Min Point Time",value:c.minPointingTime,min:0,max:500,step:25,unit:"ms",onChange:s=>M("minPointingTime",s)}),e.jsx($,{label:"Dwell Time",value:c.dwellTime,min:500,max:3e3,step:100,unit:"ms",onChange:s=>M("dwellTime",s)}),e.jsx($,{label:"Cursor Smooth",value:c.cursorSmoothing,min:.1,max:1,step:.05,unit:"",onChange:s=>M("cursorSmoothing",s)}),e.jsx("button",{onClick:()=>u($e),className:"w-full text-[10px] text-slate-500 hover:text-slate-300 transition-colors py-1 border-t border-slate-700/50 mt-2",children:"Reset to defaults"})]})]})]}):null}function W({active:d,onClick:l,icon:a,label:c}){return e.jsxs("button",{onClick:l,className:`flex-1 flex items-center justify-center gap-1 py-2 text-[10px] font-medium transition-colors ${d?"text-cyan-400 border-b-2 border-cyan-400":"text-slate-500 hover:text-slate-300"}`,children:[a,c]})}function H({label:d,extended:l}){return e.jsx("div",{className:`px-1.5 py-1 rounded text-center ${l?"bg-emerald-500/20 text-emerald-400":"bg-slate-800/50 text-slate-500"}`,children:d})}function $({label:d,value:l,min:a,max:c,step:u,unit:C,onChange:k}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[e.jsx("span",{className:"text-slate-400",children:d}),e.jsxs("span",{className:"text-slate-300 font-mono",children:[l,C]})]}),e.jsx("input",{type:"range",min:a,max:c,step:u,value:l,onChange:r=>k(parseFloat(r.target.value)),className:"w-full h-1 bg-slate-700 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-slate-400 [&::-webkit-slider-thumb]:hover:bg-slate-300"})]})}function Be(d){const l=new Date(d);return`${l.getHours().toString().padStart(2,"0")}:${l.getMinutes().toString().padStart(2,"0")}:${l.getSeconds().toString().padStart(2,"0")}`}const Ke=[{id:"pointing_up",name:"Pointing Up",description:"Point at UI elements to hover and interact with mode switcher",tips:["Keep other fingers curled in a fist position","Keep your thumb tucked in","Point at mode buttons to switch modes","Use for navigation - not for sending messages"]},{id:"thumbs_up",name:"Thumbs Up",description:"Send ðŸ‘ emoji message (yes/approve/like)",tips:["Make a fist with all fingers except your thumb","Keep your index, middle, ring, and pinky fingers curled","Point your thumb straight up","Sends ðŸ‘ emoji to chat"]},{id:"thumbs_down",name:"Thumbs Down",description:"Send ðŸ‘Ž emoji message (no/disapprove/dislike)",tips:["Make a fist with all fingers except your thumb","Keep your index, middle, ring, and pinky fingers curled","Point your thumb straight down","Sends ðŸ‘Ž emoji to chat"]},{id:"open_palm",name:"Open Palm",description:"Send ðŸ‘‹ message (hi/hello/greeting)",tips:["Keep all fingers extended straight","Keep your palm facing forward","Keep fingers together but not touching","Sends ðŸ‘‹ to chat"]},{id:"victory",name:"Victory/Peace Sign",description:'Send "ok" message (okay/continue/proceed)',tips:["Extend your index and middle fingers in a V shape","Keep ring and pinky fingers curled down","Keep your palm facing forward",'Sends "ok" to chat']},{id:"iloveyou",name:"I Love You",description:'Send "thanks" message (thank you/appreciate)',tips:["Extend your thumb, index, and pinky fingers","Keep middle and ring fingers curled down",'This is the ASL sign for "I Love You"','Sends "thanks" to chat']},{id:"fist",name:"Closed Fist",description:'Send "stop" message (stop/wait/hold)',tips:["Bend all fingers at the knuckles","Press fingertips against the palm","Keep thumb across the front of your fist",'Sends "stop" to chat']}],We=[{id:"asl_a",name:"ASL Letter A",description:"Make a fist with thumb tucked beside index finger",tips:["Make a fist with all fingers curled","Place your thumb over your fingers (not sticking out)","Keep palm facing forward"]},{id:"asl_b",name:"ASL Letter B",description:"Extend all fingers with thumb beside index finger",tips:["Extend all four fingers (index, middle, ring, pinky)","Place your thumb beside your index finger","Keep all fingers straight and together"]},{id:"asl_o",name:"ASL Letter O",description:"Make a circle with thumb and index finger",tips:["Touch the tip of your thumb and index finger together","Keep middle, ring, and pinky fingers curled","Form a circle shape with thumb and index finger"]}];function He({open:d,onClose:l}){const[a,c]=t.useState(0),[u,C]=t.useState("navigation"),[k,r]=t.useState(!1),o=u==="navigation"?Ke:We,v=o[a],E=t.useCallback(()=>{a<o.length-1&&c(g=>g+1)},[a,o.length]),F=t.useCallback(()=>{a>0&&c(g=>g-1)},[a]),p=t.useCallback(()=>{c(0)},[]);return t.useEffect(()=>{d||(c(0),C("navigation"))},[d]),d?e.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:l}),e.jsxs("div",{className:"relative bg-slate-900 border border-slate-700 rounded-xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-5 border-b border-slate-800 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:"Gesture Training Mode"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Learn and practice gestures for navigation and ASL"})]}),e.jsx("button",{onClick:l,className:"p-1.5 rounded-lg text-slate-500 hover:text-slate-300 hover:bg-slate-800/50 transition-colors",children:e.jsx(G,{size:18})})]}),e.jsx("div",{className:"px-5 py-3 border-b border-slate-800 bg-slate-900/90 z-10",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>C("navigation"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${u==="navigation"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"text-slate-400 hover:bg-slate-800/50"}`,children:"Navigation Gestures"}),e.jsx("button",{onClick:()=>C("asl"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${u==="asl"?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"text-slate-400 hover:bg-slate-800/50"}`,children:"ASL Letters"})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto max-h-[60vh] p-5",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm text-slate-400 mb-1",children:[e.jsxs("span",{children:["Gesture ",a+1," of ",o.length]}),e.jsx("span",{children:v.name})]}),e.jsx("div",{className:"w-full bg-slate-800 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${(a+1)/o.length*100}%`}})})]}),e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx("div",{className:"w-48 h-48 rounded-xl bg-slate-800/50 border border-slate-700 flex items-center justify-center mb-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ‘‹"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Gesture Visualization"})]})}),e.jsx("h3",{className:"text-xl font-medium text-slate-200 mb-2",children:v.name}),e.jsx("p",{className:"text-slate-400 text-center max-w-md",children:v.description})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>r(!k),className:"flex items-center gap-2 text-slate-300 hover:text-slate-100 transition-colors mb-3",children:[e.jsx("span",{className:"font-medium",children:"Tips for success"}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${k?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),k&&e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700 mb-4",children:e.jsx("ul",{className:"space-y-2",children:v.tips.map((g,T)=>e.jsxs("li",{className:"flex items-start gap-2 text-slate-300",children:[e.jsx("span",{className:"text-blue-400 mt-1",children:"â€¢"}),e.jsx("span",{className:"text-sm",children:g})]},T))})})]}),e.jsxs("div",{className:"bg-slate-800/30 rounded-lg p-4 border border-slate-700",children:[e.jsx("h4",{className:"font-medium text-slate-200 mb-3",children:"Practice Area"}),e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-slate-700 rounded-lg bg-slate-900/50",children:[e.jsx("p",{className:"text-slate-500 mb-2",children:"Show your gesture here"}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-800 rounded-lg",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 animate-pulse"}),e.jsx("span",{className:"text-sm text-slate-300",children:"Camera active"})]})]}),e.jsx("div",{className:"mt-3 text-center text-sm text-slate-500",children:"Align your hand within the practice area"})]})]}),e.jsxs("div",{className:"p-5 border-t border-slate-800 bg-slate-900/90 flex justify-between",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-3 py-2 rounded-lg text-slate-400 hover:text-slate-200 hover:bg-slate-800/50 transition-colors",children:[e.jsx(ze,{size:16}),e.jsx("span",{className:"text-sm",children:"Reset"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:F,disabled:a===0,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${a===0?"text-slate-600 cursor-not-allowed":"text-slate-300 hover:text-slate-100 hover:bg-slate-800/50"}`,children:[e.jsx(Fe,{size:16}),e.jsx("span",{className:"text-sm",children:"Previous"})]}),e.jsxs("button",{onClick:E,disabled:a===o.length-1,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${a===o.length-1?"text-slate-600 cursor-not-allowed":"text-slate-300 hover:text-slate-100 hover:bg-slate-800/50"}`,children:[e.jsx("span",{className:"text-sm",children:"Next"}),e.jsx(Ae,{size:16})]})]})]})]})]}):null}const Z="gesture-control-skip-intro",de="gesture-debug-config",ee="gesture-mode";function Xe({inHeader:d=!1,...l}){var le;const a=Ie();t.useEffect(()=>{a.setCallbacks({onStopGeneration:l.onStopGeneration,onSendMessage:l.onSendMessage,onScroll:l.onScroll,onPinch:l.onPinch,onHover:l.onHover,onModeChange:l.onModeChange})},[l.onStopGeneration,l.onSendMessage,l.onScroll,l.onPinch,l.onHover,l.onModeChange,a.setCallbacks]),t.useEffect(()=>{l.appContext&&a.setAppContext(l.appContext)},[l.appContext,a.setAppContext]);const[c,u]=t.useState(!1),[C,k]=t.useState(!1),[r,o]=t.useState(!1),[v,E]=t.useState(!1),[F,p]=t.useState(!1),g=t.useRef(null),T=t.useRef(null),_=t.useRef(null),[x,O]=t.useState({width:256,height:320}),[D,M]=t.useState({width:220,height:180}),{isActive:b,setIsActive:S,gestureMode:s,setGestureMode:i,gestureConfig:P,setGestureConfig:f,mouseSimulation:R,setMouseSimulation:xe,gestureState:N,setGestureState:B,aslResult:A,debugInfo:me,landmarkData:he,performanceMetrics:U,cameraError:K,setCameraError:Y}=a,[z,L]=t.useState(""),[I,se]=t.useState(!1),[ue,te]=t.useState(!1);t.useEffect(()=>{if(typeof window<"u"){const n=localStorage.getItem(ee);(n==="asl"||n==="navigation")&&i(n)}},[i]),t.useEffect(()=>{if(typeof window<"u"){const n=localStorage.getItem(de);if(n)try{f(JSON.parse(n))}catch{}}},[f]),t.useEffect(()=>{localStorage.getItem(Z)==="true"&&k(!0)},[]),t.useEffect(()=>{localStorage.setItem(ee,s)},[s]),t.useEffect(()=>{if(!r)return;const n=h=>{g.current&&!g.current.contains(h.target)&&o(!1)},m=h=>{h.key==="Escape"&&o(!1)};return document.addEventListener("mousedown",n),window.addEventListener("keydown",m),()=>{document.removeEventListener("mousedown",n),window.removeEventListener("keydown",m)}},[r]),t.useEffect(()=>{if(N.triggered&&(p(!0),setTimeout(()=>p(!1),300),s==="asl"&&N.gesture)){if(N.gesture.startsWith("ACTION:"))switch(N.gesture.replace("ACTION: ","")){case"SEND":z&&l.onSendMessage&&(l.onSendMessage(z),L(""));break;case"CLEAR":L("");break;case"SPACE":L(m=>m+" ");break;case"BACKSPACE":L(m=>m.slice(0,-1));break}else if(N.gesture.startsWith("ASL:")){const n=N.gesture.replace("ASL: ","");L(m=>m+n)}}},[N,s,z,l.onSendMessage]);const pe=t.useCallback(()=>{L("")},[]),ge=t.useCallback(()=>{z&&l.onSendMessage&&(l.onSendMessage(z),L(""))},[z,l.onSendMessage]);t.useEffect(()=>{if(K){S(!1);const n=setTimeout(()=>Y(null),5e3);return()=>clearTimeout(n)}},[K,S,Y]);const ae=()=>{b?(S(!1),o(!1)):C?S(!0):u(!0)},ne=()=>{v&&(localStorage.setItem(Z,"true"),k(!0)),u(!1),S(!0),E(!1)},be=()=>{localStorage.removeItem(Z),k(!1)},fe=t.useCallback(n=>{f(n),localStorage.setItem(de,JSON.stringify(n))},[f]);t.useEffect(()=>{localStorage.setItem(ee,s)},[s]),t.useEffect(()=>{if(!R)return;const n=w=>{l.onHover&&l.onHover(w.clientX/window.innerWidth,w.clientY/window.innerHeight),B({gesture:"POINTING",progress:0,triggered:!1})},m=w=>{const y=w.target;y.closest("button")||y.closest("[data-debug-panel]")||y.closest("[data-gesture-panel]")||B({gesture:"TWO_FINGER_POINT",progress:.5,triggered:!1})},h=w=>{const y=w.target;y.closest("button")||y.closest("[data-debug-panel]")||y.closest("[data-gesture-panel]")||(l.onPinch&&l.onPinch(w.clientX/window.innerWidth,w.clientY/window.innerHeight),B({gesture:"TWO_FINGER_TAP",progress:1,triggered:!0}),p(!0),setTimeout(()=>p(!1),300),setTimeout(()=>{B({gesture:"POINTING",progress:0,triggered:!1})},100))};return window.addEventListener("mousemove",n),window.addEventListener("mousedown",m),window.addEventListener("mouseup",h),()=>{window.removeEventListener("mousemove",n),window.removeEventListener("mousedown",m),window.removeEventListener("mouseup",h)}},[R,l.onHover,l.onPinch]);const q={left:"calc(50% - 180px)"},[j,je]=t.useState(null),V=t.useRef(null);t.useEffect(()=>{const n=()=>{V.current&&je(V.current.getBoundingClientRect())};return n(),window.addEventListener("resize",n),window.addEventListener("scroll",n,!0),()=>{window.removeEventListener("resize",n),window.removeEventListener("scroll",n,!0)}},[b,r,d]),t.useEffect(()=>{if(!r)return;const n=()=>{if(T.current){const h=T.current.getBoundingClientRect();O({width:h.width,height:h.height})}},m=requestAnimationFrame(n);return window.addEventListener("resize",n),()=>{cancelAnimationFrame(m),window.removeEventListener("resize",n)}},[r]),t.useEffect(()=>{if(!(b&&s==="asl"))return;const n=()=>{if(_.current){const h=_.current.getBoundingClientRect();M({width:h.width,height:h.height})}},m=requestAnimationFrame(n);return window.addEventListener("resize",n),()=>{cancelAnimationFrame(m),window.removeEventListener("resize",n)}},[b,s]);const ve=d?"relative z-50 pointer-events-auto":"fixed top-4 sm:top-6 z-50 pointer-events-auto",Ne=d?{}:q;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:g,className:ve,style:Ne,children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{ref:V,onClick:()=>{b?o(!r):ae()},className:`relative min-w-[42px] min-h-[42px] w-[42px] h-[42px] rounded-full flex items-center justify-center border transition-all duration-200 active:scale-95 ${b?s==="asl"?"bg-emerald-500/20 border-emerald-500/50 text-emerald-400 hover:bg-emerald-500/30 animate-pulse":"bg-blue-500/20 border-blue-500/50 text-blue-400 hover:bg-blue-500/30 animate-pulse":"bg-slate-800/50 border-slate-700/50 text-slate-400 hover:bg-slate-700/50 hover:text-slate-200"}`,title:b?"Open Gesture Control Panel":"Enable Gesture Control",children:e.jsx(X,{size:18})}),b&&e.jsx("button",{onClick:()=>S(!1),className:"absolute top-full mt-1 left-1/2 -translate-x-1/2 w-7 h-7 rounded-full bg-red-500/20 border border-red-500/50 flex items-center justify-center text-red-400 hover:bg-red-500/30 hover:text-red-300 transition-all active:scale-95 pointer-events-auto",title:"Disable Gesture Control",children:e.jsx(G,{size:14})})]}),b&&r&&e.jsxs("div",{ref:T,"data-gesture-panel":!0,className:"fixed z-[100] bg-slate-900/95 backdrop-blur-md border border-slate-700/80 rounded-xl shadow-2xl overflow-hidden animate-in fade-in duration-200",style:(()=>{if(j){const h=Math.min(j.right+12,window.innerWidth-256-12),w=j.top+j.height/2-150,y=Math.max(12,Math.min(w,window.innerHeight-320));return{left:h,top:y,width:256}}return{width:256,left:12,top:80}})(),children:[e.jsxs("div",{className:"px-3 py-2.5 border-b border-slate-700/50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{size:14,className:s==="asl"?"text-emerald-400":"text-blue-400"}),e.jsx("span",{className:"text-xs font-medium text-slate-200",children:"Gesture Control"})]}),U&&e.jsxs("span",{className:"text-[10px] text-slate-500 font-mono",children:[U.fps,"fps"]})]}),e.jsxs("div",{className:"px-3 py-2 border-b border-slate-700/50",children:[e.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wide mb-2",children:"Mode"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("button",{onClick:()=>i("navigation"),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-xs font-medium transition-all ${s==="navigation"?"bg-blue-500/20 border border-blue-500/50 text-blue-400":"bg-slate-800/50 border border-transparent text-slate-400 hover:bg-slate-700/50"}`,children:[e.jsx(ie,{size:12}),"Navigate"]}),e.jsxs("button",{onClick:()=>i("asl"),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-xs font-medium transition-all ${s==="asl"?"bg-emerald-500/20 border border-emerald-500/50 text-emerald-400":"bg-slate-800/50 border border-transparent text-slate-400 hover:bg-slate-700/50"}`,children:[e.jsx(J,{size:12}),"ASL"]})]})]}),e.jsxs("div",{className:"px-3 py-2 border-b border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wide",children:"Gestures"}),e.jsx(Ge,{size:10,className:"text-slate-600"})]}),s==="navigation"?e.jsxs("div",{className:"grid grid-cols-2 gap-1 text-[10px]",children:[e.jsx("div",{className:"flex items-center gap-1.5 text-slate-400 py-0.5",children:"â˜ï¸ Point â†’ Hover"}),e.jsx("div",{className:"flex items-center gap-1.5 text-slate-400 py-0.5",children:"ðŸ–ï¸ Hold â†’ Click"}),e.jsx("div",{className:"flex items-center gap-1.5 text-slate-400 py-0.5",children:"âœŠ Fist â†’ Scroll"}),e.jsx("div",{className:"flex items-center gap-1.5 text-slate-400 py-0.5",children:"ðŸ‘‹ Wave â†’ Hi"}),e.jsx("div",{className:"flex items-center gap-1.5 text-slate-400 py-0.5",children:"ðŸ‘ Up â†’ Yes"}),e.jsx("div",{className:"flex items-center gap-1.5 text-slate-400 py-0.5",children:"ðŸ‘Ž Down â†’ No"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-1 text-[10px]",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400",children:[e.jsx("span",{className:"text-emerald-400",children:"ðŸ‘"})," Send"]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400",children:[e.jsx("span",{className:"text-red-400",children:"ðŸ–ï¸"})," Clear"]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400",children:[e.jsx("span",{className:"text-blue-400 text-[8px]",children:"âœ‹â†’"})," Space"]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-400",children:[e.jsx("span",{className:"text-orange-400 text-[8px]",children:"ðŸ¤"})," Backspace"]})]}),e.jsx("div",{className:"grid grid-cols-9 gap-0.5",children:"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").map(n=>e.jsx("span",{className:`text-center py-0.5 rounded text-[8px] ${(A==null?void 0:A.letter)===n?"bg-emerald-500/30 text-emerald-400":"bg-slate-800/50 text-slate-600"}`,children:n},n))})]})]}),e.jsx("div",{className:"px-3 py-2 border-b border-slate-700/50",children:e.jsxs("button",{onClick:()=>se(!I),className:`w-full flex items-center justify-between px-2 py-1.5 rounded-lg transition-all ${I?"bg-amber-500/10 text-amber-400":"text-slate-400 hover:bg-slate-800/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{size:12}),e.jsx("span",{className:"text-xs font-medium",children:"Debug Panel"})]}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${I?"bg-amber-500/20":"bg-slate-700/50"}`,children:I?"ON":"OFF"})]})}),e.jsx("div",{className:"px-3 py-2 border-b border-slate-700/50",children:e.jsxs("button",{onClick:()=>te(!0),className:"w-full flex items-center justify-between px-2 py-1.5 rounded-lg text-slate-400 hover:text-slate-300 hover:bg-slate-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{size:12}),e.jsx("span",{className:"text-xs font-medium",children:"Gesture Training"})]}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-700/50",children:"Learn"})]})}),e.jsxs("div",{className:"px-3 py-2 flex gap-2",children:[e.jsx("button",{onClick:()=>{be(),u(!0)},className:"flex-1 text-[10px] text-slate-500 hover:text-slate-300 transition-colors",children:"Show guide"}),e.jsxs("button",{onClick:ae,className:"flex items-center gap-1 px-2 py-1 text-[10px] text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded transition-all",children:[e.jsx(G,{size:10}),"Stop"]})]})]})]}),Le.createPortal(e.jsxs(e.Fragment,{children:[b&&s==="asl"&&e.jsx("div",{ref:_,className:"fixed z-50 pointer-events-auto",style:d&&j?(()=>{const h=Math.min(j.right+12,window.innerWidth-220-12),w=x.height||320,y=D.height||180,we=r?j.top+w+12:j.top+j.height/2-y/2,ye=Math.max(12,Math.min(we,window.innerHeight-y-12));return{left:h,top:ye}})():{...q,top:"calc(4rem)"},children:e.jsxs("div",{className:"bg-slate-900/95 backdrop-blur-md border border-emerald-500/30 rounded-lg shadow-xl p-2 min-w-[180px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(J,{size:10,className:"text-emerald-400"}),e.jsx("span",{className:"text-[10px] text-slate-400",children:"ASL Input"})]}),(A==null?void 0:A.letter)&&e.jsx("span",{className:"text-sm font-bold text-emerald-400 animate-pulse",children:A.letter})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded px-2 py-1.5 min-h-[28px] flex items-center justify-between",children:[e.jsx("span",{className:"font-mono text-slate-200 text-xs tracking-wider",children:z||e.jsx("span",{className:"text-slate-600 italic text-[10px]",children:"Sign letters..."})}),z&&e.jsxs("div",{className:"flex gap-0.5 ml-2",children:[e.jsx("button",{onClick:pe,className:"text-slate-500 hover:text-red-400 transition-colors p-0.5",title:"Clear",children:e.jsx(G,{size:12})}),e.jsx("button",{onClick:ge,className:"text-slate-500 hover:text-emerald-400 transition-colors p-0.5",title:"Send",children:e.jsx(re,{size:12})})]})]}),N.progress>0&&e.jsx("div",{className:"mt-1.5 h-1 bg-slate-700/50 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-100 ${(le=N.gesture)!=null&&le.startsWith("ACTION")?"bg-amber-400":"bg-emerald-400"}`,style:{width:`${N.progress*100}%`}})})]})}),b&&N.progress>0&&!r&&e.jsx("div",{className:"fixed z-40 pointer-events-none",style:d&&j?{left:j.left+j.width/2-24,top:j.top+j.height/2-24,width:"48px",height:"48px"}:{...q,top:"calc(1rem)",width:"48px",height:"48px",marginLeft:"-4px",marginTop:"-4px"},children:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 48 48",className:"transform -rotate-90",children:[e.jsx("circle",{cx:"24",cy:"24",r:"21",fill:"none",stroke:"rgba(100, 116, 139, 0.3)",strokeWidth:"3"}),e.jsx("circle",{cx:"24",cy:"24",r:"21",fill:"none",stroke:F?"#22c55e":s==="asl"?"#10b981":"#3b82f6",strokeWidth:"3",strokeLinecap:"round",strokeDasharray:`${N.progress*132} 132`,style:{filter:F?"drop-shadow(0 0 8px rgba(34, 197, 94, 0.8))":`drop-shadow(0 0 6px ${s==="asl"?"rgba(16, 185, 129, 0.5)":"rgba(59, 130, 246, 0.5)"})`,transition:"stroke 0.2s, filter 0.2s"}})]})}),c&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 sm:p-6 overflow-y-auto",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:()=>u(!1)}),e.jsxs("div",{className:"relative bg-slate-900 border border-slate-700 rounded-xl w-full max-w-sm sm:max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh] sm:max-h-[85vh]",children:[e.jsxs("div",{className:"p-4 sm:p-5 border-b border-slate-800 flex justify-between items-center shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-gradient-to-br from-blue-500/20 to-emerald-500/20 rounded-lg",children:e.jsx(X,{size:18,className:"text-slate-300 sm:w-5 sm:h-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-base sm:text-lg font-semibold text-slate-100",children:"Gesture Control"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-slate-500",children:"Camera-based hand tracking"})]})]}),e.jsx("button",{onClick:()=>u(!1),className:"p-1.5 rounded-lg text-slate-500 hover:text-slate-300 hover:bg-slate-800/50 transition-colors",children:e.jsx(G,{size:18})})]}),e.jsxs("div",{className:"p-4 sm:p-5 overflow-y-auto flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-slate-400 mb-4 leading-relaxed",children:"Control the app using hand gestures. Choose a mode to get started:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[e.jsxs("button",{onClick:()=>{i("navigation"),ne()},className:"group p-4 rounded-xl border-2 border-slate-700/50 bg-slate-800/30 hover:border-blue-500/50 hover:bg-blue-500/5 transition-all text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-400 group-hover:bg-blue-500/20 transition-colors",children:e.jsx(ie,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-200",children:"Navigate"}),e.jsx("div",{className:"text-[10px] text-slate-500",children:"Point, click, scroll"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1.5 text-[10px] text-slate-500",children:[e.jsx("div",{className:"flex items-center gap-1",children:"â˜ï¸ Hover"}),e.jsx("div",{className:"flex items-center gap-1",children:"âœŠ Scroll"}),e.jsx("div",{className:"flex items-center gap-1",children:"ðŸ‘ Yes"}),e.jsx("div",{className:"flex items-center gap-1",children:"ðŸ‘Ž No"})]})]}),e.jsxs("button",{onClick:()=>{i("asl"),ne()},className:"group p-4 rounded-xl border-2 border-slate-700/50 bg-slate-800/30 hover:border-emerald-500/50 hover:bg-emerald-500/5 transition-all text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/10 text-emerald-400 group-hover:bg-emerald-500/20 transition-colors",children:e.jsx(J,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-200",children:"ASL Alphabet"}),e.jsx("div",{className:"text-[10px] text-slate-500",children:"Fingerspelling A-Z"})]})]}),e.jsx("div",{className:"grid grid-cols-9 gap-0.5",children:"ABCDEFGHI".split("").map(n=>e.jsx("span",{className:"text-center py-0.5 rounded bg-slate-700/30 text-slate-500 text-[8px] font-mono",children:n},n))})]})]}),e.jsxs("div",{className:"mb-2 p-2 rounded-lg bg-blue-500/10 border border-blue-500/20 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ¤™"}),e.jsx("span",{className:"text-[10px] sm:text-xs text-blue-400 font-medium",children:"Tip: Shaka gesture switches modes anytime!"})]}),e.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-slate-800/30 border border-slate-700/30",children:[e.jsx(oe,{size:14,className:"text-slate-500 mt-0.5 shrink-0"}),e.jsxs("p",{className:"text-[10px] sm:text-xs text-slate-500 leading-relaxed",children:["All processing happens ",e.jsx("span",{className:"text-slate-400",children:"locally in your browser"}),". No video is sent to any server."]})]})]}),e.jsx("div",{className:"p-4 sm:p-5 border-t border-slate-800 shrink-0 bg-slate-900/50",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-all ${v?"bg-blue-600 border-blue-500":"border-slate-600 hover:border-slate-500 group-hover:bg-slate-800/50"}`,onClick:()=>E(!v),children:v&&e.jsx(re,{size:12,className:"text-white"})}),e.jsx("span",{className:"text-[10px] sm:text-xs text-slate-400 group-hover:text-slate-300 transition-colors select-none",children:"Don't show this guide again"})]})})]})]}),e.jsx(Oe,{enabled:I,onToggle:()=>se(!I),gestureState:N,config:P,onConfigChange:fe,mouseSimulation:R,onMouseSimulationToggle:()=>{xe(!R),R||S(!0)},debugInfo:me,landmarkData:he,performance:U}),K&&e.jsx("div",{className:"fixed top-24 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-top-4 fade-in duration-300",children:e.jsxs("div",{className:"bg-red-900/90 backdrop-blur-md border border-red-500/50 text-red-100 px-4 py-3 rounded-lg shadow-xl flex items-center gap-3 max-w-md",children:[e.jsx(oe,{size:18,className:"text-red-400 shrink-0"}),e.jsx("span",{className:"text-sm",children:K}),e.jsx("button",{onClick:()=>Y(null),className:"ml-2 text-red-300 hover:text-white transition-colors",children:e.jsx(G,{size:16})})]})})]}),document.body),e.jsx(He,{open:ue,onClose:()=>te(!1)})]})}export{Xe as default};
