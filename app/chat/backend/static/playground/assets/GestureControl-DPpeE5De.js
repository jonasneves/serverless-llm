import{r as a,j as e,B as Z,P as oe,f as de,X as I,h as ce,i as xe,L as me,k as ue,l as he,e as pe,m as ge,n as fe,b as be,H as B,o as ve,p as je,N as Ne,q as J,C as we}from"./react-vendor-D3aXD8-_.js";import{u as ye}from"./index-B0lrUQyg.js";import"./markdown-DXw-y-uZ.js";import"./math-render-B8LXoudh.js";import"./syntax-highlight-BO5EbbCt.js";const Ce={twoFingerTapWindow:500,twoFingerTapCooldown:400,twoFingerMinFrames:4,minPointingTime:100,dwellTime:1200,cursorSmoothing:.5},D=["Wrist","Thumb_CMC","Thumb_MCP","Thumb_IP","Thumb_Tip","Index_MCP","Index_PIP","Index_DIP","Index_Tip","Middle_MCP","Middle_PIP","Middle_DIP","Middle_Tip","Ring_MCP","Ring_PIP","Ring_DIP","Ring_Tip","Pinky_MCP","Pinky_PIP","Pinky_DIP","Pinky_Tip"],ke=[{from:4,to:8,name:"Thumb-Index (pinch)"},{from:8,to:12,name:"Index-Middle"},{from:4,to:12,name:"Thumb-Middle"},{from:0,to:12,name:"Wrist-Middle (hand size)"}];function Te({enabled:c,onToggle:n,gestureState:s,config:o,onConfigChange:m,mouseSimulation:k,onMouseSimulationToggle:h,debugInfo:i,landmarkData:d,performance:j,paused:p=!1,onPauseToggle:F}){var E;const[u,T]=a.useState("state"),[z,O]=a.useState([]),[x,g]=a.useState(null),w="right-3 sm:right-5";a.useEffect(()=>{if(s!=null&&s.triggered&&s.gesture){const t=i?`2F:${i.twoFingerFrames} P:${i.wasPointingOnly?"Y":"N"}`:void 0;O(l=>[{gesture:s.gesture,time:Date.now(),details:t},...l.slice(0,49)])}},[s==null?void 0:s.triggered,s==null?void 0:s.gesture,i]);const P=a.useCallback((t,l)=>{m({...o,[t]:l})},[o,m]),S=a.useCallback((t,l)=>{if(!(d!=null&&d.landmarks))return null;const f=d.landmarks[t],b=d.landmarks[l];return!f||!b?null:Math.sqrt(Math.pow(f.x-b.x,2)+Math.pow(f.y-b.y,2)+Math.pow(f.z-b.z,2))},[d]);return c?e.jsxs("div",{"data-debug-panel":!0,className:`fixed top-28 sm:top-24 ${w} z-50 w-80 bg-slate-900/95 backdrop-blur-md border border-slate-700/80 rounded-xl shadow-xl overflow-hidden max-h-[70vh] flex flex-col`,children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-slate-700/50 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{size:16,className:"text-amber-400"}),e.jsx("span",{className:"text-sm font-medium text-slate-200",children:"Gesture Debug"}),j&&e.jsxs("span",{className:"text-[10px] text-slate-500 font-mono",children:[j.fps,"fps â€¢ ",j.detectionTime,"ms"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[F&&e.jsx("button",{onClick:F,className:`p-1.5 rounded-md transition-colors ${p?"bg-amber-500/20 text-amber-400":"text-slate-400 hover:text-slate-200"}`,title:p?"Resume":"Pause",children:p?e.jsx(oe,{size:14}):e.jsx(de,{size:14})}),e.jsx("button",{onClick:n,className:"p-1.5 rounded-md text-slate-400 hover:text-slate-200 transition-colors",children:e.jsx(I,{size:14})})]})]}),e.jsxs("div",{className:"flex border-b border-slate-700/50 shrink-0",children:[e.jsx(L,{active:u==="state",onClick:()=>T("state"),icon:e.jsx(ce,{size:12}),label:"State"}),e.jsx(L,{active:u==="raw",onClick:()=>T("raw"),icon:e.jsx(xe,{size:12}),label:"Raw"}),e.jsx(L,{active:u==="log",onClick:()=>T("log"),icon:e.jsx(me,{size:12}),label:"Log"}),e.jsx(L,{active:u==="config",onClick:()=>T("config"),icon:e.jsx(ue,{size:12}),label:"Config"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[u==="state"&&e.jsxs("div",{className:"p-3 space-y-3",children:[e.jsxs("button",{onClick:h,className:`w-full flex items-center justify-between p-2 rounded-lg transition-all ${k?"bg-emerald-500/20 border border-emerald-500/50 text-emerald-400":"bg-slate-800/50 border border-slate-700/50 text-slate-400 hover:text-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{size:14}),e.jsx("span",{className:"text-xs font-medium",children:"Mouse Simulation"})]}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-700/50",children:k?"ON":"OFF"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wide mb-2",children:"Current Gesture"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`px-2 py-1 rounded text-xs font-mono ${s!=null&&s.gesture?"bg-cyan-500/20 text-cyan-400":"bg-slate-800/50 text-slate-500"}`,children:(s==null?void 0:s.gesture)||"NEUTRAL"}),(s==null?void 0:s.progress)!==void 0&&s.progress>0&&e.jsx("div",{className:"flex-1 h-1.5 bg-slate-700/50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-amber-400 transition-all duration-100",style:{width:`${s.progress*100}%`}})})]})]}),i&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wide mb-2",children:"Fingers"}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 text-[10px]",children:[e.jsx(A,{label:"Idx",extended:i.indexExtended}),e.jsx(A,{label:"Mid",extended:i.middleExtended}),e.jsx(A,{label:"Rng",extended:i.ringExtended}),e.jsx(A,{label:"Pnk",extended:i.pinkyExtended})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-1 text-[10px]",children:[e.jsx("div",{className:`px-1.5 py-1 rounded text-center ${i.wasPointingOnly?"bg-blue-500/20 text-blue-400":"bg-slate-800/50 text-slate-500"}`,children:"Point"}),e.jsxs("div",{className:`px-1.5 py-1 rounded text-center ${i.twoFingerFrames>0?"bg-purple-500/20 text-purple-400":"bg-slate-800/50 text-slate-500"}`,children:["2F:",i.twoFingerFrames]}),e.jsx("div",{className:`px-1.5 py-1 rounded text-center ${i.clickLocked?"bg-red-500/20 text-red-400":"bg-emerald-500/20 text-emerald-400"}`,children:i.clickLocked?"Lock":"Ready"})]})]})]}),u==="raw"&&e.jsxs("div",{className:"p-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wide mb-2",children:"Key Distances"}),e.jsx("div",{className:"space-y-1",children:ke.map(({from:t,to:l,name:f})=>{const b=S(t,l);return e.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[e.jsx("span",{className:"text-slate-400",children:f}),e.jsx("span",{className:`font-mono ${b&&b<.05?"text-emerald-400":"text-slate-300"}`,children:b?b.toFixed(4):"â€”"})]},`${t}-${l}`)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wide mb-2",children:"Distance Calculator"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("select",{className:"flex-1 bg-slate-800 border border-slate-700 rounded px-2 py-1 text-[10px] text-slate-300",value:(x==null?void 0:x[0])??"",onChange:t=>g([parseInt(t.target.value),(x==null?void 0:x[1])??8]),children:[e.jsx("option",{value:"",children:"From..."}),D.map((t,l)=>e.jsxs("option",{value:l,children:[l,": ",t]},l))]}),e.jsx("span",{className:"text-slate-500",children:"â†’"}),e.jsxs("select",{className:"flex-1 bg-slate-800 border border-slate-700 rounded px-2 py-1 text-[10px] text-slate-300",value:(x==null?void 0:x[1])??"",onChange:t=>g([(x==null?void 0:x[0])??4,parseInt(t.target.value)]),children:[e.jsx("option",{value:"",children:"To..."}),D.map((t,l)=>e.jsxs("option",{value:l,children:[l,": ",t]},l))]})]}),x&&e.jsxs("div",{className:"mt-2 p-2 bg-slate-800/50 rounded text-center",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:"Distance: "}),e.jsx("span",{className:"text-sm font-mono text-cyan-400",children:((E=S(x[0],x[1]))==null?void 0:E.toFixed(4))??"â€”"})]})]}),(d==null?void 0:d.landmarks)&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-[10px] text-slate-500 uppercase tracking-wide mb-2",children:["Fingertip Positions ",d.handedness&&`(${d.handedness})`]}),e.jsx("div",{className:"space-y-1 text-[10px] font-mono",children:[4,8,12,16,20].map(t=>{const l=d.landmarks[t];return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-400",children:D[t]}),e.jsxs("span",{className:"text-slate-300",children:["(",l.x.toFixed(2),", ",l.y.toFixed(2),", ",l.z.toFixed(2),")"]})]},t)})})]})]}),u==="log"&&e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wide",children:"Event Log"}),e.jsx("button",{onClick:()=>O([]),className:"text-[10px] text-slate-500 hover:text-slate-300",children:"Clear"})]}),e.jsx("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:z.length===0?e.jsx("div",{className:"text-[10px] text-slate-600 italic py-4 text-center",children:"No events yet"}):z.map((t,l)=>e.jsxs("div",{className:"flex items-center gap-2 text-[10px] py-0.5",children:[e.jsx("span",{className:"text-slate-600 font-mono w-12",children:Pe(t.time)}),e.jsx("span",{className:`font-mono flex-1 ${l===0?"text-emerald-400":"text-slate-400"}`,children:t.gesture}),t.details&&e.jsx("span",{className:"text-slate-600 font-mono",children:t.details})]},l))})]}),u==="config"&&e.jsxs("div",{className:"p-3 space-y-3",children:[e.jsx(_,{label:"Tap Window",value:o.twoFingerTapWindow,min:200,max:1200,step:50,unit:"ms",onChange:t=>P("twoFingerTapWindow",t)}),e.jsx(_,{label:"Tap Cooldown",value:o.twoFingerTapCooldown,min:100,max:1e3,step:50,unit:"ms",onChange:t=>P("twoFingerTapCooldown",t)}),e.jsx(_,{label:"Min Frames",value:o.twoFingerMinFrames,min:1,max:10,step:1,unit:"f",onChange:t=>P("twoFingerMinFrames",t)}),e.jsx(_,{label:"Min Point Time",value:o.minPointingTime,min:0,max:500,step:25,unit:"ms",onChange:t=>P("minPointingTime",t)}),e.jsx(_,{label:"Dwell Time",value:o.dwellTime,min:500,max:3e3,step:100,unit:"ms",onChange:t=>P("dwellTime",t)}),e.jsx(_,{label:"Cursor Smooth",value:o.cursorSmoothing,min:.1,max:1,step:.05,unit:"",onChange:t=>P("cursorSmoothing",t)}),e.jsx("button",{onClick:()=>m(Ce),className:"w-full text-[10px] text-slate-500 hover:text-slate-300 transition-colors py-1 border-t border-slate-700/50 mt-2",children:"Reset to defaults"})]})]})]}):null}function L({active:c,onClick:n,icon:s,label:o}){return e.jsxs("button",{onClick:n,className:`flex-1 flex items-center justify-center gap-1 py-2 text-[10px] font-medium transition-colors ${c?"text-cyan-400 border-b-2 border-cyan-400":"text-slate-500 hover:text-slate-300"}`,children:[s,o]})}function A({label:c,extended:n}){return e.jsx("div",{className:`px-1.5 py-1 rounded text-center ${n?"bg-emerald-500/20 text-emerald-400":"bg-slate-800/50 text-slate-500"}`,children:c})}function _({label:c,value:n,min:s,max:o,step:m,unit:k,onChange:h}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[e.jsx("span",{className:"text-slate-400",children:c}),e.jsxs("span",{className:"text-slate-300 font-mono",children:[n,k]})]}),e.jsx("input",{type:"range",min:s,max:o,step:m,value:n,onChange:i=>h(parseFloat(i.target.value)),className:"w-full h-1 bg-slate-700 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-slate-400 [&::-webkit-slider-thumb]:hover:bg-slate-300"})]})}function Pe(c){const n=new Date(c);return`${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}:${n.getSeconds().toString().padStart(2,"0")}`}const R=[{id:"pointing_up",name:"Pointing Up",description:"Point at UI elements to hover and interact with mode switcher",tips:["Keep other fingers curled in a fist position","Keep your thumb tucked in","Point at mode buttons to switch modes","Use for navigation - not for sending messages"]},{id:"thumbs_up",name:"Thumbs Up",description:"Send a positive response message",tips:["Make a fist with all fingers except your thumb","Keep your index, middle, ring, and pinky fingers curled","Point your thumb straight up","Sends positive response to chat"]},{id:"thumbs_down",name:"Thumbs Down",description:"Send a negative response message",tips:["Make a fist with all fingers except your thumb","Keep your index, middle, ring, and pinky fingers curled","Point your thumb straight down","Sends negative response to chat"]},{id:"open_palm",name:"Open Palm",description:"Send a greeting message",tips:["Keep all fingers extended straight","Keep your palm facing forward","Keep fingers together but not touching","Sends greeting to chat"]},{id:"victory",name:"Victory/Peace Sign",description:'Send "ok" message (okay/continue/proceed)',tips:["Extend your index and middle fingers in a V shape","Keep ring and pinky fingers curled down","Keep your palm facing forward",'Sends "ok" to chat']},{id:"iloveyou",name:"I Love You",description:'Send "thanks" message (thank you/appreciate)',tips:["Extend your thumb, index, and pinky fingers","Keep middle and ring fingers curled down","This gesture signifies gratitude",'Sends "thanks" to chat']},{id:"fist",name:"Closed Fist",description:'Send "stop" message (stop/wait/hold)',tips:["Bend all fingers at the knuckles","Press fingertips against the palm","Keep thumb across the front of your fist",'Sends "stop" to chat']}];function Ee({open:c,onClose:n}){const[s,o]=a.useState(0),[m,k]=a.useState(!1),h=R[s],i=a.useCallback(()=>{s<R.length-1&&o(p=>p+1)},[s]),d=a.useCallback(()=>{s>0&&o(p=>p-1)},[s]),j=a.useCallback(()=>{o(0)},[]);return a.useEffect(()=>{c||o(0)},[c]),c?e.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:n}),e.jsxs("div",{className:"relative bg-slate-900 border border-slate-700 rounded-xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-5 border-b border-slate-800 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:"Gesture Training Mode"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Learn and practice gestures for navigation"})]}),e.jsx("button",{onClick:n,className:"p-1.5 rounded-lg text-slate-500 hover:text-slate-300 hover:bg-slate-800/50 transition-colors",children:e.jsx(I,{size:18})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto max-h-[60vh] p-5",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm text-slate-400 mb-1",children:[e.jsxs("span",{children:["Gesture ",s+1," of ",R.length]}),e.jsx("span",{children:h.name})]}),e.jsx("div",{className:"w-full bg-slate-800 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${(s+1)/R.length*100}%`}})})]}),e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx("div",{className:"w-48 h-48 rounded-xl bg-slate-800/50 border border-slate-700 flex items-center justify-center mb-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ‘‹"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Gesture Visualization"})]})}),e.jsx("h3",{className:"text-xl font-medium text-slate-200 mb-2",children:h.name}),e.jsx("p",{className:"text-slate-400 text-center max-w-md",children:h.description})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>k(!m),className:"flex items-center gap-2 text-slate-300 hover:text-slate-100 transition-colors mb-3",children:[e.jsx("span",{className:"font-medium",children:"Tips for success"}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${m?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),m&&e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700 mb-4",children:e.jsx("ul",{className:"space-y-2",children:h.tips.map((p,F)=>e.jsxs("li",{className:"flex items-start gap-2 text-slate-300",children:[e.jsx("span",{className:"text-blue-400 mt-1",children:"â€¢"}),e.jsx("span",{className:"text-sm",children:p})]},F))})})]}),e.jsxs("div",{className:"bg-slate-800/30 rounded-lg p-4 border border-slate-700",children:[e.jsx("h4",{className:"font-medium text-slate-200 mb-3",children:"Practice Area"}),e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-slate-700 rounded-lg bg-slate-900/50",children:[e.jsx("p",{className:"text-slate-500 mb-2",children:"Show your gesture here"}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-800 rounded-lg",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 animate-pulse"}),e.jsx("span",{className:"text-sm text-slate-300",children:"Camera active"})]})]}),e.jsx("div",{className:"mt-3 text-center text-sm text-slate-500",children:"Align your hand within the practice area"})]})]}),e.jsxs("div",{className:"p-5 border-t border-slate-800 bg-slate-900/90 flex justify-between",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-3 py-2 rounded-lg text-slate-400 hover:text-slate-200 hover:bg-slate-800/50 transition-colors",children:[e.jsx(pe,{size:16}),e.jsx("span",{className:"text-sm",children:"Reset"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:d,disabled:s===0,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${s===0?"text-slate-600 cursor-not-allowed":"text-slate-300 hover:text-slate-100 hover:bg-slate-800/50"}`,children:[e.jsx(ge,{size:16}),e.jsx("span",{className:"text-sm",children:"Previous"})]}),e.jsxs("button",{onClick:i,disabled:s===R.length-1,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${s===R.length-1?"text-slate-600 cursor-not-allowed":"text-slate-300 hover:text-slate-100 hover:bg-slate-800/50"}`,children:[e.jsx("span",{className:"text-sm",children:"Next"}),e.jsx(fe,{size:16})]})]})]})]})]}):null}const U="gesture-control-skip-intro",Q="gesture-debug-config";function _e({inHeader:c=!1,...n}){const s=ye();a.useEffect(()=>{s.setCallbacks({onStopGeneration:n.onStopGeneration,onSendMessage:n.onSendMessage,onScroll:n.onScroll,onPinch:n.onPinch,onHover:n.onHover,onModeChange:n.onModeChange})},[n.onStopGeneration,n.onSendMessage,n.onScroll,n.onPinch,n.onHover,n.onModeChange,s.setCallbacks]),a.useEffect(()=>{n.appContext&&s.setAppContext(n.appContext)},[n.appContext,s.setAppContext]);const[o,m]=a.useState(!1),[k,h]=a.useState(!1),[i,d]=a.useState(!1),[j,p]=a.useState(!1),[F,u]=a.useState(!1),T=a.useRef(null),z=a.useRef(null),[O,x]=a.useState({width:256,height:320}),{isActive:g,setIsActive:w,gestureConfig:P,setGestureConfig:S,mouseSimulation:E,setMouseSimulation:t,gestureState:l,setGestureState:f,debugInfo:b,landmarkData:ee,performanceMetrics:K,cameraError:$,setCameraError:H}=s,[G,Y]=a.useState(!1),[se,q]=a.useState(!1);a.useEffect(()=>{if(typeof window<"u"){const r=localStorage.getItem(Q);if(r)try{S(JSON.parse(r))}catch{}}},[S]),a.useEffect(()=>{localStorage.getItem(U)==="true"&&h(!0)},[]),a.useEffect(()=>{if(!i)return;const r=v=>{T.current&&!T.current.contains(v.target)&&d(!1)},M=v=>{v.key==="Escape"&&d(!1)};return document.addEventListener("mousedown",r),window.addEventListener("keydown",M),()=>{document.removeEventListener("mousedown",r),window.removeEventListener("keydown",M)}},[i]),a.useEffect(()=>{l.triggered&&(u(!0),setTimeout(()=>u(!1),300))},[l]),a.useEffect(()=>{if($){w(!1);const r=setTimeout(()=>H(null),5e3);return()=>clearTimeout(r)}},[$,w,H]);const V=()=>{g?(w(!1),d(!1)):k?w(!0):m(!0)},te=()=>{j&&(localStorage.setItem(U,"true"),h(!0)),m(!1),w(!0),p(!1)},ne=()=>{localStorage.removeItem(U),h(!1)},ae=a.useCallback(r=>{S(r),localStorage.setItem(Q,JSON.stringify(r))},[S]);a.useEffect(()=>{if(!E)return;const r=N=>{n.onHover&&n.onHover(N.clientX/window.innerWidth,N.clientY/window.innerHeight),f({gesture:"POINTING",progress:0,triggered:!1})},M=N=>{const C=N.target;C.closest("button")||C.closest("[data-debug-panel]")||C.closest("[data-gesture-panel]")||f({gesture:"TWO_FINGER_POINT",progress:.5,triggered:!1})},v=N=>{const C=N.target;C.closest("button")||C.closest("[data-debug-panel]")||C.closest("[data-gesture-panel]")||(n.onPinch&&n.onPinch(N.clientX/window.innerWidth,N.clientY/window.innerHeight),f({gesture:"TWO_FINGER_TAP",progress:1,triggered:!0}),u(!0),setTimeout(()=>u(!1),300),setTimeout(()=>{f({gesture:"POINTING",progress:0,triggered:!1})},100))};return window.addEventListener("mousemove",r),window.addEventListener("mousedown",M),window.addEventListener("mouseup",v),()=>{window.removeEventListener("mousemove",r),window.removeEventListener("mousedown",M),window.removeEventListener("mouseup",v)}},[E,n.onHover,n.onPinch]);const X={left:"calc(50% - 180px)"},[y,le]=a.useState(null),W=a.useRef(null);a.useEffect(()=>{const r=()=>{W.current&&le(W.current.getBoundingClientRect())};return r(),window.addEventListener("resize",r),window.addEventListener("scroll",r,!0),()=>{window.removeEventListener("resize",r),window.removeEventListener("scroll",r,!0)}},[g,i,c]),a.useEffect(()=>{if(!i)return;const r=()=>{if(z.current){const v=z.current.getBoundingClientRect();x({width:v.width,height:v.height})}},M=requestAnimationFrame(r);return window.addEventListener("resize",r),()=>{cancelAnimationFrame(M),window.removeEventListener("resize",r)}},[i]);const ie=c?"relative z-50 pointer-events-auto":"fixed top-4 sm:top-6 z-50 pointer-events-auto",re=c?{}:X;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:T,className:ie,style:re,children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{ref:W,onClick:()=>{g?d(!i):V()},className:`relative min-w-[42px] min-h-[42px] w-[42px] h-[42px] rounded-full flex items-center justify-center border transition-all duration-200 active:scale-95 ${g?"bg-blue-500/20 border-blue-500/50 text-blue-400 hover:bg-blue-500/30 animate-pulse":"bg-slate-800/50 border-slate-700/50 text-slate-400 hover:bg-slate-700/50 hover:text-slate-200"}`,title:g?"Open Gesture Control Panel":"Enable Gesture Control",children:e.jsx(B,{size:18})}),g&&e.jsx("button",{onClick:()=>w(!1),className:"absolute top-full mt-1 left-1/2 -translate-x-1/2 w-7 h-7 rounded-full bg-red-500/20 border border-red-500/50 flex items-center justify-center text-red-400 hover:bg-red-500/30 hover:text-red-300 transition-all active:scale-95 pointer-events-auto",title:"Disable Gesture Control",children:e.jsx(I,{size:14})})]}),g&&i&&e.jsxs("div",{ref:z,"data-gesture-panel":!0,className:"fixed z-[100] bg-slate-900/95 backdrop-blur-md border border-slate-700/80 rounded-xl shadow-2xl overflow-hidden animate-in fade-in duration-200",style:(()=>{if(y){const v=Math.min(y.right+12,window.innerWidth-256-12),N=y.top+y.height/2-150,C=Math.max(12,Math.min(N,window.innerHeight-320));return{left:v,top:C,width:256}}return{width:256,left:12,top:80}})(),children:[e.jsxs("div",{className:"px-3 py-2.5 border-b border-slate-700/50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{size:14,className:"text-blue-400"}),e.jsx("span",{className:"text-xs font-medium text-slate-200",children:"Gesture Control"})]}),K&&e.jsxs("span",{className:"text-[10px] text-slate-500 font-mono",children:[K.fps,"fps"]})]}),e.jsxs("div",{className:"px-3 py-2 border-b border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wide",children:"Gestures"}),e.jsx(ve,{size:10,className:"text-slate-600"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1 text-[10px]",children:[e.jsx("div",{className:"flex items-center gap-1.5 text-slate-400 py-0.5",children:"â˜ï¸ Point â†’ Hover"}),e.jsx("div",{className:"flex items-center gap-1.5 text-slate-400 py-0.5",children:"ðŸ–ï¸ Hold â†’ Click"}),e.jsx("div",{className:"flex items-center gap-1.5 text-slate-400 py-0.5",children:"âœŠ Fist â†’ Scroll"}),e.jsx("div",{className:"flex items-center gap-1.5 text-slate-400 py-0.5",children:"ðŸ‘‹ Wave â†’ Hi"}),e.jsx("div",{className:"flex items-center gap-1.5 text-slate-400 py-0.5",children:"ðŸ‘ Up â†’ Yes"}),e.jsx("div",{className:"flex items-center gap-1.5 text-slate-400 py-0.5",children:"ðŸ‘Ž Down â†’ No"})]})]}),e.jsx("div",{className:"px-3 py-2 border-b border-slate-700/50",children:e.jsxs("button",{onClick:()=>Y(!G),className:`w-full flex items-center justify-between px-2 py-1.5 rounded-lg transition-all ${G?"bg-amber-500/10 text-amber-400":"text-slate-400 hover:bg-slate-800/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{size:12}),e.jsx("span",{className:"text-xs font-medium",children:"Debug Panel"})]}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${G?"bg-amber-500/20":"bg-slate-700/50"}`,children:G?"ON":"OFF"})]})}),e.jsx("div",{className:"px-3 py-2 border-b border-slate-700/50",children:e.jsxs("button",{onClick:()=>q(!0),className:"w-full flex items-center justify-between px-2 py-1.5 rounded-lg text-slate-400 hover:text-slate-300 hover:bg-slate-800/50 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{size:12}),e.jsx("span",{className:"text-xs font-medium",children:"Gesture Training"})]}),e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-700/50",children:"Learn"})]})}),e.jsxs("div",{className:"px-3 py-2 flex gap-2",children:[e.jsx("button",{onClick:()=>{ne(),m(!0)},className:"flex-1 text-[10px] text-slate-500 hover:text-slate-300 transition-colors",children:"Show guide"}),e.jsxs("button",{onClick:V,className:"flex items-center gap-1 px-2 py-1 text-[10px] text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded transition-all",children:[e.jsx(I,{size:10}),"Stop"]})]})]})]}),be.createPortal(e.jsxs(e.Fragment,{children:[g&&l.progress>0&&!i&&e.jsx("div",{className:"fixed z-40 pointer-events-none",style:c&&y?{left:y.left+y.width/2-24,top:y.top+y.height/2-24,width:"48px",height:"48px"}:{...X,top:"calc(1rem)",width:"48px",height:"48px",marginLeft:"-4px",marginTop:"-4px"},children:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 48 48",className:"transform -rotate-90",children:[e.jsx("circle",{cx:"24",cy:"24",r:"21",fill:"none",stroke:"rgba(100, 116, 139, 0.3)",strokeWidth:"3"}),e.jsx("circle",{cx:"24",cy:"24",r:"21",fill:"none",stroke:F?"#22c55e":"#3b82f6",strokeWidth:"3",strokeLinecap:"round",strokeDasharray:`${l.progress*132} 132`,style:{filter:F?"drop-shadow(0 0 8px rgba(34, 197, 94, 0.8))":"drop-shadow(0 0 6px rgba(59, 130, 246, 0.5))",transition:"stroke 0.2s, filter 0.2s"}})]})}),o&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 sm:p-6 overflow-y-auto",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:()=>m(!1)}),e.jsxs("div",{className:"relative bg-slate-900 border border-slate-700 rounded-xl w-full max-w-sm sm:max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh] sm:max-h-[85vh]",children:[e.jsxs("div",{className:"p-4 sm:p-5 border-b border-slate-800 flex justify-between items-center shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-gradient-to-br from-blue-500/20 to-cyan-500/20 rounded-lg",children:e.jsx(B,{size:18,className:"text-slate-300 sm:w-5 sm:h-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-base sm:text-lg font-semibold text-slate-100",children:"Gesture Control"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-slate-500",children:"Camera-based hand tracking"})]})]}),e.jsx("button",{onClick:()=>m(!1),className:"p-1.5 rounded-lg text-slate-500 hover:text-slate-300 hover:bg-slate-800/50 transition-colors",children:e.jsx(I,{size:18})})]}),e.jsxs("div",{className:"p-4 sm:p-5 overflow-y-auto flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-slate-400 mb-4 leading-relaxed",children:"Control the app using hand gestures. Use navigation gestures to interact:"}),e.jsxs("div",{className:"p-4 rounded-xl border-2 border-slate-700/50 bg-slate-800/30 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-400",children:e.jsx(Ne,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-200",children:"Navigation Gestures"}),e.jsx("div",{className:"text-[10px] text-slate-500",children:"Point, click, scroll"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-1.5 text-[10px] text-slate-500",children:[e.jsx("div",{className:"flex items-center gap-1",children:"â˜ï¸ Hover"}),e.jsx("div",{className:"flex items-center gap-1",children:"âœŠ Scroll"}),e.jsx("div",{className:"flex items-center gap-1",children:"ðŸ‘ Yes"}),e.jsx("div",{className:"flex items-center gap-1",children:"ðŸ‘Ž No"})]})]}),e.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-slate-800/30 border border-slate-700/30",children:[e.jsx(J,{size:14,className:"text-slate-500 mt-0.5 shrink-0"}),e.jsxs("p",{className:"text-[10px] sm:text-xs text-slate-500 leading-relaxed",children:["All processing happens ",e.jsx("span",{className:"text-slate-400",children:"locally in your browser"}),". No video is sent to any server."]})]})]}),e.jsxs("div",{className:"p-4 sm:p-5 border-t border-slate-800 shrink-0 bg-slate-900/50",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group mb-4",children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-all ${j?"bg-blue-600 border-blue-500":"border-slate-600 hover:border-slate-500 group-hover:bg-slate-800/50"}`,onClick:()=>p(!j),children:j&&e.jsx(we,{size:12,className:"text-white"})}),e.jsx("span",{className:"text-[10px] sm:text-xs text-slate-400 group-hover:text-slate-300 transition-colors select-none",children:"Don't show this guide again"})]}),e.jsx("button",{onClick:te,className:"w-full py-2.5 px-4 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-lg transition-colors",children:"Enable Gesture Control"})]})]})]}),e.jsx(Te,{enabled:G,onToggle:()=>Y(!G),gestureState:l,config:P,onConfigChange:ae,mouseSimulation:E,onMouseSimulationToggle:()=>{t(!E),E||w(!0)},debugInfo:b,landmarkData:ee,performance:K}),$&&e.jsx("div",{className:"fixed top-24 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-top-4 fade-in duration-300",children:e.jsxs("div",{className:"bg-red-900/90 backdrop-blur-md border border-red-500/50 text-red-100 px-4 py-3 rounded-lg shadow-xl flex items-center gap-3 max-w-md",children:[e.jsx(J,{size:18,className:"text-red-400 shrink-0"}),e.jsx("span",{className:"text-sm",children:$}),e.jsx("button",{onClick:()=>H(null),className:"ml-2 text-red-300 hover:text-white transition-colors",children:e.jsx(I,{size:16})})]})})]}),document.body),e.jsx(Ee,{open:se,onClose:()=>q(!1)})]})}export{_e as default};
