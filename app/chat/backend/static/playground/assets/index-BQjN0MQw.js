const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SettingsModal-B4oAOGnm.js","assets/react-vendor-CQxWqugw.js","assets/markdown-BNX5kHMI.js","assets/math-render-D6B7xoul.js","assets/math-render-BqiDbsU2.css","assets/syntax-highlight-K7DiErAG.js","assets/syntax-highlight-BEHUn5zE.css","assets/DiscussionTranscript-DiJX4r6q.js","assets/FormattedContent-ClPh4eCb.js","assets/GestureControl-BlgHJX7R.js","assets/HandBackground-F7iiHyIM.js","assets/mediapipe-BWDqrTQ6.js","assets/ChatView-DbHxTKVA.js"])))=>i.map(i=>d[i]);
var Xn=Object.defineProperty;var Gn=(t,n,o)=>n in t?Xn(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o;var rn=(t,n,o)=>Gn(t,typeof n!="symbol"?n+"":n,o);import{r as s,j as e,X as Un,S as Kn,C as qn,a as Vn,A as Qn,b as Jn,Z as Zn,T as es,R as ts,c as ns,d as ss}from"./react-vendor-CQxWqugw.js";import"./math-render-D6B7xoul.js";import"./syntax-highlight-K7DiErAG.js";import"./markdown-BNX5kHMI.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))h(u);new MutationObserver(u=>{for(const i of u)if(i.type==="childList")for(const v of i.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&h(v)}).observe(document,{childList:!0,subtree:!0});function o(u){const i={};return u.integrity&&(i.integrity=u.integrity),u.referrerPolicy&&(i.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?i.credentials="include":u.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function h(u){if(u.ep)return;u.ep=!0;const i=o(u);fetch(u.href,i)}})();const rs="modulepreload",os=function(t){return"/static/playground/"+t},on={},et=function(n,o,h){let u=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const v=document.querySelector("meta[property=csp-nonce]"),d=(v==null?void 0:v.nonce)||(v==null?void 0:v.getAttribute("nonce"));u=Promise.allSettled(o.map(p=>{if(p=os(p),p in on)return;on[p]=!0;const b=p.endsWith(".css"),g=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${g}`))return;const w=document.createElement("link");if(w.rel=b?"stylesheet":rs,b||(w.as="script"),w.crossOrigin="",w.href=p,d&&w.setAttribute("nonce",d),document.head.appendChild(w),b)return new Promise((R,$)=>{w.addEventListener("load",R),w.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${p}`)))})}))}function i(v){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=v,window.dispatchEvent(d),!d.defaultPrevented)throw v}return u.then(v=>{for(const d of v||[])d.status==="rejected"&&i(d.reason);return n().catch(i)})},as={"self-hosted":{color:"#10b981"},github:{color:"#3b82f6"},external:{color:"#8b5cf6"}},is=["deepseek-r1-distill-qwen-1.5b","r1qwen","smollm3","nanbeige"],ls=["gpt-oss","gptoss"],cs=t=>{const n=t.toLowerCase();return is.some(o=>n.includes(o.toLowerCase()))},ds=t=>{const n=t.toLowerCase();return ls.some(o=>n.includes(o.toLowerCase()))},_t=[{id:"eu-ai-act-enforcement",label:"EU AI Act Enforcement Wave",prompt:"The EU AI Act enters enforcement; high-risk systems must prove data provenance, evals, and risk controls. Outline compliance gaps for a frontier model API and tradeoffs between speed and alignment.",category:"Policy",modes:["analyze","debate"],tags:["governance","compliance"]},{id:"export-controls-blackwell",label:"Export Controls Tighten",prompt:"U.S. export rules tighten again on AI accelerators; Blackwell-class parts face new caps and cloud checks. Map the impact on training roadmaps, costs, and on-device strategies.",category:"Infra",modes:["compare","debate"],tags:["chips","supply-chain"]},{id:"weights-leak",label:"Major Weights Leak",prompt:"A commercial frontier model checkpoint leaks. Assess risks (misuse, impersonation, jailbreak diffusion), legal exposure, and whether open red-team releases mitigate or worsen safety.",category:"Security",modes:["analyze","debate"],tags:["safety","open-weights"]},{id:"on-device-llm-race",label:"On-Device LLM Race",prompt:"Phone OEMs ship 3nm NPUs and 20B-parameter on-device assistants. What actually moves the needle for UX, privacy, and cost vs. cloud? Where do hybrid (edge + cloud) designs win?",category:"Infra",modes:["compare","debate"],tags:["edge","latency"]},{id:"signed-app-prompt-injection",label:"Signed App Prompt Injection",prompt:"A popular signed desktop app shipped with hardcoded system prompts; attackers use supply chain updates to exfiltrate data. How should vendors audit, sandbox, and attest LLM apps?",category:"Security",modes:["compare","analyze"],tags:["supply-chain","prompt-injection"]},{id:"eval-standardization",label:"Safety Eval Standard",prompt:"NIST-style safety eval suites gain traction (jailbreak, autonomy, bio). How should vendors report scores, and what gaps remain for frontier vs. small models?",category:"Policy",modes:["compare","debate"],tags:["evaluation","safety"]},{id:"licensing-standoff",label:"Publisher Licensing Standoff",prompt:"Major news publishers pause AI licensing talks and sue over training. What remedies (revenue share, opt-out registries, model removal) are realistic, and how do they ripple to open models?",category:"Data",modes:["analyze","debate"],tags:["licensing","copyright"]},{id:"sbom-for-llms",label:"SBOM for LLM Pipelines",prompt:"Regulators push SBOMs and signed artifacts for AI stacks. Draft what should appear in an LLM pipeline SBOM (data, weights, evals, guardrails) and how to verify it at runtime.",category:"Security",modes:["compare","analyze"],tags:["sbom","supply-chain"]},{id:"data-poisoning-campaign",label:"Data Poisoning Campaign",prompt:"Researchers find coordinated data poisoning in popular open corpora. How should model hosts detect and mitigate poisoning post-hoc, and what retraining tradeoffs are acceptable?",category:"Security",modes:["compare","debate"],tags:["data","poisoning"]},{id:"copyright-settlement",label:"Copyright Settlement Sets Precedent",prompt:"A major copyright suit settles with dataset disclosure and per-output watermarking. Predict how this precedent affects future training sets and open-weight releases.",category:"Policy",modes:["debate"],tags:["copyright","watermarking"]}],ur={analyze:["What's the most important programming principle?","Should code comments explain 'what' or 'why'?","Is TypeScript worth the extra complexity?"],debate:["Tabs or spaces? Give your verdict.","Should AI be allowed to write its own code?","What will never be automated by AI?"],compare:[],chat:[]};_t.filter(t=>t.category==="Policy"||t.category==="Data"),_t.filter(t=>t.category==="Infra"),_t.filter(t=>t.category==="Security");const us=["dots-mesh","dots","dots-fade","grid","mesh","animated-mesh","none"],ft="#0f172a",an={compare:ft,analyze:ft,debate:ft,chat:ft},Ze={maxTokens:1024,temperature:.7},ae={cardWidth:256,cardHeight:200,gapX:24,gapY:24,baseRadius:160,minRadius:120,radiusPerModel:15,scrollClamp:200};function fs({showDock:t,availableModels:n,allSelectedByType:o,totalModelsByType:h,handleDragStart:u,handleModelToggle:i,handleAddGroup:v,dockRef:d,mode:p,allModels:b,setShowDock:g,chatSelectedModels:w=new Set,onToggleChatModel:R,onToggleChatGroup:$}){const[B,W]=s.useState(""),[Q,c]=s.useState(""),Y=s.useRef(null);s.useEffect(()=>{const z=setTimeout(()=>c(B),200);return()=>clearTimeout(z)},[B]);const X=[{type:"self-hosted",title:"Self-Hosted",accentColor:"emerald"},{type:"github",title:"GitHub Models",accentColor:"blue"},{type:"external",title:"External",accentColor:"purple"}],P=p==="chat",F=P?b:n,C=s.useMemo(()=>{if(!Q)return F;const z=Q.toLowerCase();return F.filter(E=>E.name.toLowerCase().includes(z))},[F,Q]),Z=s.useCallback(z=>{P&&R?R(z):i(z)},[P,R,i]);s.useEffect(()=>{t?setTimeout(()=>{var z;return(z=Y.current)==null?void 0:z.focus()},100):W("")},[t]),s.useEffect(()=>{if(!t)return;const z=E=>{E.key==="Escape"&&(E.preventDefault(),g(!1))};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[t,g]);const q=z=>({emerald:{dot:"bg-emerald-500",text:"text-emerald-400",active:"bg-emerald-500/20 border-emerald-500/30"},blue:{dot:"bg-blue-500",text:"text-blue-400",active:"bg-blue-500/20 border-blue-500/30"},purple:{dot:"bg-purple-500",text:"text-purple-400",active:"bg-purple-500/20 border-purple-500/30"}})[z];return e.jsxs("div",{ref:d,"data-no-arena-scroll":!0,"data-no-background":!0,className:"fixed top-1/2 left-1/2 w-[min(90vw,500px)] max-h-[70vh] rounded-2xl flex flex-col z-[60] transition-all duration-300 shadow-2xl bg-slate-800/95 backdrop-blur-md",style:{transform:t?"translate(-50%, -50%) scale(1)":"translate(-50%, -50%) scale(0.95)",opacity:t?1:0,pointerEvents:t?"auto":"none"},children:[e.jsxs("div",{className:"px-4 py-3 border-b border-slate-700/50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-semibold text-slate-200",children:P?"Select Models":"Add to Arena"}),P&&e.jsx("p",{className:"text-[10px] text-slate-500 mt-0.5",children:w.size===0?"Click to select":`${w.size} selected`})]}),e.jsx("button",{onClick:()=>g(!1),className:"text-slate-400 hover:text-slate-200",children:e.jsx(Un,{size:18})})]}),e.jsx("div",{className:"px-4 py-2 border-b border-slate-700/50",children:e.jsxs("div",{className:"relative",children:[e.jsx(Kn,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500"}),e.jsx("input",{ref:Y,type:"text",placeholder:"Search...",value:B,onChange:z=>W(z.target.value),className:"w-full pl-9 pr-3 py-2 text-sm bg-slate-700/50 border border-slate-600/50 rounded-lg text-slate-200 placeholder-slate-500 focus:outline-none focus:border-slate-500"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-3 space-y-4",children:X.map(z=>{const E=C.filter(U=>U.type===z.type),V=b.filter(U=>U.type===z.type),O=q(z.accentColor);if(V.length===0)return null;const ee=P&&V.every(U=>w.has(U.id));return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between px-1 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${O.dot}`}),e.jsxs("span",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wide",children:[z.title," (",V.length,")"]})]}),P?$&&e.jsx("button",{onClick:()=>$(z.type),className:`text-[10px] font-medium px-2 py-1 rounded ${O.text} hover:bg-white/5`,children:ee?"− Remove All":"+ Add All"}):e.jsx("button",{onClick:()=>v(z.type),className:`text-[10px] font-medium px-2 py-1 rounded ${O.text} hover:bg-white/5`,children:o[z.type]?"− Remove All":"+ Add All"})]}),e.jsx("div",{className:"space-y-1",children:E.map(U=>{const G=P?w.has(U.id):!1;return e.jsxs("div",{draggable:!P,onDragStart:P?void 0:J=>u(J,U.id),onClick:()=>Z(U.id),className:`flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-colors border ${G?O.active:"hover:bg-white/5 border-transparent"}`,children:[e.jsx("span",{className:`text-xs font-medium ${G?"text-slate-200":"text-slate-400"}`,children:U.name}),G&&e.jsx(qn,{size:14,className:O.text})]},U.id)})})]},z.type)})}),e.jsx("div",{className:"px-4 py-2 border-t border-slate-700/50",children:e.jsxs("p",{className:"text-[10px] text-slate-500 text-center",children:["Press ",e.jsx("kbd",{className:"px-1 py-0.5 rounded bg-slate-700 text-slate-400 text-[9px]",children:"M"})," or ",e.jsx("kbd",{className:"px-1 py-0.5 rounded bg-slate-700 text-slate-400 text-[9px]",children:"Esc"})," to close"]})})]})}function ps({inputRef:t,inputFocused:n,setInputFocused:o,onSendMessage:h,className:u,style:i,placeholder:v,isGenerating:d,onStop:p}){return e.jsx("div",{className:u??"fixed bottom-0 right-0 left-0 z-[100] pb-6 px-3 sm:px-4 flex justify-center items-end pointer-events-none transition-all duration-300",style:i??{paddingBottom:"calc(1.5rem + env(safe-area-inset-bottom))"},children:e.jsx("div",{className:"w-full pointer-events-auto",style:{maxWidth:"600px"},children:e.jsxs("div",{className:`rounded-xl p-2.5 transition-all duration-300 flex items-center gap-2 border border-slate-700/40 header-shell ${n?"prompt-panel-focused":""}`,children:[e.jsx("input",{ref:t,type:"text",placeholder:v||"Ask a question to compare model responses...",className:"w-full bg-transparent text-slate-200 placeholder-slate-500 outline-none text-base sm:text-sm px-2.5 py-2.5",onFocus:()=>o(!0),onBlur:()=>o(!1),onKeyDown:b=>{var g;if(b.key==="Enter"&&!b.shiftKey){if(b.preventDefault(),d)return;(g=t.current)!=null&&g.value&&(h(t.current.value),t.current.value="")}},disabled:d}),e.jsx("button",{onClick:()=>{var b;d?p==null||p():(b=t.current)!=null&&b.value&&(h(t.current.value),t.current.value="")},onMouseDown:b=>b.currentTarget.blur(),className:`min-w-[44px] min-h-[44px] sm:min-w-[36px] sm:min-h-[36px] p-2 rounded-lg transition-colors active:scale-95 flex items-center justify-center focus:outline-none focus-visible:outline-none ${d?"text-red-400 hover:text-red-300 hover:bg-red-500/10":"text-slate-400 hover:text-white hover:bg-white/10"}`,"aria-label":d?"Stop generation":"Send message",children:d?e.jsx(Vn,{className:"w-5 h-5 sm:w-4 sm:h-4 fill-current"}):e.jsx(Qn,{className:"w-5 h-5 sm:w-4 sm:h-4",strokeWidth:2.5})})]})})})}const hs={chat:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),compare:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})}),analyze:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),debate:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})},Be=[{value:"chat",label:"Chat"},{value:"compare",label:"Compare"},{value:"analyze",label:"Analyze"},{value:"debate",label:"Debate"}];function ms({mode:t,setMode:n,setHoveredCard:o,clearSelection:h,showDock:u,setShowDock:i,onOpenSettings:v,gestureButtonSlot:d}){const[p,b]=s.useState(!1),g=s.useRef(null),[w,R]=s.useState(!0),$=s.useRef(null),[B,W]=s.useState(null),[Q,c]=s.useState(0),Y=Be.findIndex(C=>C.value===t),X=Y===-1?0:Y,P=Be[X].label;s.useEffect(()=>{const C=()=>{R(window.innerWidth>=1024)};return C(),window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[]),s.useEffect(()=>{if(!$.current)return;const C=()=>{const z=$.current;if(!z)return;const E=z.querySelectorAll('button[role="radio"]');if(E.length===0||X>=E.length)return;const O=E[X].getBoundingClientRect(),ee=z.getBoundingClientRect(),U=O.width,G=O.left,J=ee.left;W(U),c(G-J)},Z=setTimeout(C,0),q=new ResizeObserver(()=>{setTimeout(C,0)});return q.observe($.current),window.addEventListener("resize",C),()=>{clearTimeout(Z),q.disconnect(),window.removeEventListener("resize",C)}},[t,w,X]),s.useEffect(()=>{function C(Z){g.current&&!g.current.contains(Z.target)&&b(!1)}return p&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[p]);const F=C=>{n(C),o(null),h(),b(!1)};return e.jsxs("div",{className:"fixed top-0 left-0 right-0 flex items-center justify-between mb-2 px-3 sm:px-6 pt-4 sm:pt-6 z-50 pointer-events-none transition-all duration-300",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-auto",style:{height:"100%",zIndex:-1}}),e.jsx("div",{className:"flex items-center gap-2 w-auto pointer-events-auto z-20",children:d}),e.jsx("div",{className:"hidden md:block absolute left-1/2 -translate-x-1/2 pointer-events-auto z-20",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex items-center p-1.5 rounded-xl border border-slate-700/40 header-shell",children:[e.jsx("button",{onClick:()=>i(!u),className:"px-2 sm:px-3 flex items-center justify-center text-slate-400 hover:text-white transition-colors",title:"Toggle Model Dock",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsx("div",{className:"w-px h-5 bg-slate-700/50 mx-0.5 sm:mx-1"}),e.jsxs("div",{ref:$,className:"relative flex p-1 rounded-lg bg-black/20 mode-track",role:"radiogroup","aria-label":"Mode selection","data-gesture-mode-track":"true",children:[e.jsx("div",{className:"absolute top-1 bottom-1 rounded-md transition-all duration-300 ease-out mode-slider",style:{width:B!==null?`${B}px`:`calc((100% - 8px) / ${Be.length})`,left:B!==null?`${Q}px`:`calc(4px + (100% - 8px) * ${X} / ${Be.length})`}}),Be.map(C=>e.jsx("button",{tabIndex:-1,onClick:()=>F(C.value),role:"radio","aria-checked":t===C.value,"aria-label":C.label,title:C.label,className:`relative z-10 py-2 sm:py-1.5 px-3 text-[11px] sm:text-xs font-medium transition-colors duration-200 min-h-[44px] sm:min-h-0 active:scale-95 focus:outline-none focus-visible:outline-none flex-1 flex items-center justify-center text-center ${t===C.value?"text-white":"text-slate-400 hover:text-slate-200"}`,children:C.label},C.value))]})]})})}),e.jsx("div",{className:"flex md:hidden flex-1 justify-center pointer-events-auto relative z-20",children:e.jsxs("div",{className:"relative",ref:g,children:[e.jsxs("button",{onClick:()=>b(!p),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-slate-800/90 border border-slate-700/50 text-slate-200 font-medium text-sm backdrop-blur-md shadow-lg active:scale-95 transition-all",children:[e.jsx("span",{className:"font-bold text-slate-400 hidden xs:inline",children:"Arena"}),e.jsx("span",{className:"font-bold hidden xs:inline text-slate-600",children:"/"}),e.jsx("span",{children:P}),e.jsx("svg",{className:`w-4 h-4 text-slate-400 transition-transform duration-200 ${p?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p&&e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 w-48 py-1 rounded-xl bg-slate-800 border border-slate-700 shadow-2xl overflow-hidden flex flex-col animate-in fade-in zoom-in-95 duration-100 origin-top",children:Be.map(C=>e.jsxs("button",{onClick:()=>F(C.value),className:`px-4 py-3 text-sm text-left w-full transition-colors flex items-center gap-3 ${t===C.value?"bg-blue-500/10 text-blue-400":"text-slate-300 hover:bg-slate-700/50"}`,children:[e.jsx("span",{className:"flex-shrink-0",children:hs[C.value]}),e.jsx("span",{className:"flex-1",children:C.label}),t===C.value&&e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},C.value))})]})}),e.jsx("div",{className:"flex items-center gap-2 w-auto justify-end pointer-events-auto z-20",children:e.jsx("button",{onClick:v,className:"min-w-[42px] min-h-[42px] w-[42px] h-[42px] rounded-full bg-slate-800/50 flex items-center justify-center border border-slate-700/50 hover:border-slate-600 transition-colors active:scale-95 focus:outline-none focus-visible:outline-none",title:"Settings",children:e.jsxs("svg",{className:"w-4 h-4 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})})})]})}const xs=t=>{if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return null}},gs=(t,n)=>{if(t===null)return n;try{return JSON.parse(t)}catch{return n}};function He(t,n,o={}){const h=o.serialize??xs,u=o.deserialize??gs,[i,v]=s.useState(()=>{if(typeof window>"u")return n;try{const d=window.localStorage.getItem(t);return u(d,n)}catch{return n}});return s.useEffect(()=>{if(!(typeof window>"u"))try{const d=h(i);d===null?window.localStorage.removeItem(t):window.localStorage.setItem(t,d)}catch{}},[t,h,i]),[i,v]}const bs=800,ys=3e3,vs=8;function ws(){const[t,n]=s.useState([]),[o,h]=s.useState(!0),[u,i]=s.useState(null),[v,d]=s.useState(0),[p,b]=He("playground_selected_models",null),g=s.useRef(p!==null),[w,R]=He("playground_chat_model",null),$=s.useRef(w!==null),B=s.useMemo(()=>p??[],[p]),W=s.useCallback(E=>{b(V=>typeof E=="function"?E(V??[]):E)},[b]),[Q,c]=s.useState(""),Y=s.useRef(0),X=s.useRef(null),P=s.useCallback(async(E,V,O=!1)=>{X.current&&(clearTimeout(X.current),X.current=null),h(!0),O&&(i("Refreshing..."),d(0));const ee=U=>{var ce,xe;const G=U.models.map(K=>{const de=K.type==="self-hosted"||K.type==="github"||K.type==="external"?K.type:"self-hosted",re=as[de];return{id:K.id,name:re.name||K.name||K.id,color:re.color,type:de,response:"",priority:K.priority,context_length:K.context_length,default:K.default}});if(n(G),h(!1),i(null),d(0),g.current||(b(G.filter(K=>K.type==="self-hosted"&&K.id!=="nemotron-3-nano-30b-a3b").map(K=>K.id)),g.current=!0),!$.current){const K=G.find(re=>re.default),de=G.find(re=>re.type==="github"||re.type==="external");R((K==null?void 0:K.id)||(de==null?void 0:de.id)||((ce=G[0])==null?void 0:ce.id)||null),$.current=!0}const J=G.find(K=>K.type==="github"||K.type==="external"),se=G.find(K=>K.default),me=((xe=G[0])==null?void 0:xe.id)||"";c((J==null?void 0:J.id)||(se==null?void 0:se.id)||me)};try{const U=await fetch("/api/models");if(E!==Y.current)return;if(!U.ok)throw new Error(`HTTP ${U.status}`);const G=await U.json();if(E!==Y.current)return;if(!G.models||G.models.length===0)throw new Error("No models available yet");ee(G)}catch(U){if(E!==Y.current)return;console.warn("Backend fetch failed:",U);try{console.log("Trying static models.json...");const J=await fetch("/models.json");if(J.ok){const se=await J.json();if(se.models&&se.models.length>0){console.log(`Loaded ${se.models.length} models from static file`),ee(se);return}}}catch(J){console.warn("Static models.json not available:",J)}const G=V+1;if(d(G),G<vs){const J=Math.min(bs*Math.pow(1.4,V),ys);i("Connecting to backend..."),X.current=setTimeout(()=>{P(E,G)},J)}else h(!1),i("Could not load models")}},[b,R]),F=s.useCallback(()=>{Y.current+=1,P(Y.current,0,!0)},[P]);s.useEffect(()=>(Y.current+=1,P(Y.current,0),()=>{Y.current+=1,X.current&&clearTimeout(X.current)}),[P]);const C=s.useMemo(()=>t.filter(E=>!B.includes(E.id)),[t,B]),{totalModelsByType:Z,allSelectedByType:q}=s.useMemo(()=>{const E={"self-hosted":t.filter(O=>O.type==="self-hosted").length,github:t.filter(O=>O.type==="github").length,external:t.filter(O=>O.type==="external").length},V={"self-hosted":t.filter(O=>O.type==="self-hosted"&&B.includes(O.id)).length,github:t.filter(O=>O.type==="github"&&B.includes(O.id)).length,external:t.filter(O=>O.type==="external"&&B.includes(O.id)).length};return{totalModelsByType:E,allSelectedByType:{"self-hosted":E["self-hosted"]>0&&V["self-hosted"]===E["self-hosted"],github:E.github>0&&V.github===E.github,external:E.external>0&&V.external===E.external}}},[t,B]),z=s.useCallback(E=>{var V;return((V=t.find(O=>O.id===E))==null?void 0:V.name)||E},[t]);return{modelsData:t,setModelsData:n,selected:B,setSelected:W,chatModelId:w,setChatModelId:R,moderator:Q,setModerator:c,availableModels:C,totalModelsByType:Z,allSelectedByType:q,modelIdToName:z,isLoading:o,loadError:u,retryCount:v,retryNow:F}}function ks(){var t;return typeof chrome<"u"&&((t=chrome.storage)!=null&&t.local)?window.__API_BASE__||"https://chat.neevs.io":""}async function*Bt(t,n,o){var b;const u=`${ks()}${t}`,i=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),signal:o});if(!i.ok){yield{event:"error",error:`HTTP ${i.status}: ${i.statusText}`};return}const v=(b=i.body)==null?void 0:b.getReader();if(!v){yield{event:"error",error:"No response body"};return}const d=new TextDecoder;let p="";try{for(;;){const{done:g,value:w}=await v.read();if(g)break;p+=d.decode(w,{stream:!0});const R=p.split(`
`);p=R.pop()||"";for(const $ of R)if($.startsWith("data: ")){const B=$.slice(6).trim();if(B)try{yield JSON.parse(B)}catch{}}}}finally{v.releaseLock()}}const js=async(t,n)=>Bt("/api/chat/stream",{models:t.models,messages:t.messages,max_tokens:t.max_tokens,temperature:t.temperature,github_token:t.github_token,openrouter_key:t.openrouter_key},n),Ss=async(t,n)=>Bt("/api/chat/analyze/stream",t,n),Ms=async(t,n)=>Bt("/api/chat/debate/stream",t,n),zt=async(t,n)=>{try{for await(const o of t)n(o)}catch(o){throw console.error("Stream error:",o),o}};function ln(t){window.__API_BASE__=t}const Ts=[{name:"Chat",path:"chat.yml",category:"core"},{name:"Build Images",path:"build-push-images.yml",category:"core"},{name:"Nanbeige4-3B Thinking",path:"inference.yml",category:"reasoning",serviceKey:"nanbeige"},{name:"Qwen3 4B",path:"inference.yml",category:"small",serviceKey:"qwen"},{name:"SmolLM3 3B",path:"inference.yml",category:"small",serviceKey:"smollm3"},{name:"LFM2.5 1.2B",path:"inference.yml",category:"small",serviceKey:"lfm2"},{name:"DeepSeek R1 1.5B",path:"inference.yml",category:"reasoning",serviceKey:"r1qwen"},{name:"Gemma 3 12B",path:"inference.yml",category:"medium",serviceKey:"gemma"},{name:"Mistral 7B v0.3",path:"inference.yml",category:"medium",serviceKey:"mistral"},{name:"Phi-3 Mini",path:"inference.yml",category:"small",serviceKey:"phi"},{name:"RNJ-1 Instruct",path:"inference.yml",category:"medium",serviceKey:"rnj"},{name:"Llama 3.2-3B",path:"inference.yml",category:"medium",serviceKey:"llama"},{name:"FunctionGemma 270M",path:"inference.yml",category:"small",serviceKey:"functiongemma"},{name:"Nemotron-3 Nano 30B",path:"inference.yml",category:"reasoning",serviceKey:"nemotron"},{name:"GPT-OSS 20B",path:"inference.yml",category:"reasoning",serviceKey:"gptoss"}],Cs={workflows:Ts},fn=Cs.workflows;new Map(fn.map(t=>[t.name,t.path]));new Map(fn.filter(t=>t.serviceKey).map(t=>[t.serviceKey,t.name]));const Oe={githubToken:"",profile:"local_all",chatApiBaseUrl:"http://localhost:8080",modelsBaseDomain:"",modelsUseHttps:!1};function cn(t){const n={...Oe,...t};(!n.chatApiBaseUrl||typeof n.chatApiBaseUrl!="string")&&typeof n.baseDomain=="string"&&(n.chatApiBaseUrl=n.baseDomain?`${n.useHttps===!1?"http":"https"}://chat.${n.baseDomain}`:"http://localhost:8080",n.profile="custom"),(!n.modelsBaseDomain||typeof n.modelsBaseDomain!="string")&&typeof n.baseDomain=="string"&&(n.modelsBaseDomain=n.baseDomain,n.profile="custom"),typeof n.modelsUseHttps!="boolean"&&typeof n.useHttps=="boolean"&&(n.modelsUseHttps=n.useHttps,n.profile="custom");const o=n.profile==="remote_all"||n.profile==="local_chat_remote_models"||n.profile==="local_all"||n.profile==="custom"?n.profile:Oe.profile;return{githubToken:typeof n.githubToken=="string"?n.githubToken:Oe.githubToken,profile:o,chatApiBaseUrl:$t(typeof n.chatApiBaseUrl=="string"?n.chatApiBaseUrl:""),modelsBaseDomain:typeof n.modelsBaseDomain=="string"?n.modelsBaseDomain:Oe.modelsBaseDomain,modelsUseHttps:typeof n.modelsUseHttps=="boolean"?n.modelsUseHttps:Oe.modelsUseHttps}}function Es(){var t;return typeof chrome<"u"&&!!((t=chrome.storage)!=null&&t.local)}function $t(t){const n=t.trim().replace(/\/+$/,"");return n||"http://localhost:8080"}function Ns(){const[t,n]=s.useState(Oe),[o,h]=s.useState(!1);return s.useEffect(()=>{if(Es()){chrome.storage.local.get(["envConfig"],i=>{const v=cn(i.envConfig);n(v),h(!0);const d=$t(v.chatApiBaseUrl);ln(d),console.log("[Config] Extension mode, API base:",d)});const u=(i,v)=>{var d;if(v==="local"&&((d=i.envConfig)!=null&&d.newValue)){const p=cn(i.envConfig.newValue);n(p);const b=$t(p.chatApiBaseUrl);ln(b),console.log("[Config] Updated API base:",b)}};return chrome.storage.onChanged.addListener(u),()=>chrome.storage.onChanged.removeListener(u)}else h(!0),console.log("[Config] Web mode, using relative URLs")},[]),{config:t,isLoaded:o}}function Ls(){const[t,n]=s.useState([]),o=s.useRef([]),h=s.useCallback(d=>{if(!d.length)return;const p=[...o.current,...d];o.current=p,n(p)},[]),u=s.useCallback(()=>{o.current=[],n([])},[]),i=s.useCallback(d=>d.map(p=>`${p.role==="user"?"User":"Assistant"}: ${p.content}`).join(`

`),[]),v=s.useCallback((d,p)=>{if(p==="compare")return d;const b=d.filter(w=>w.role==="user"),g=[...d].reverse().find(w=>w.role==="assistant"&&w.kind==="analyze_synthesis"&&w.content.trim().length>0);return g?[...b,g]:b},[]);return{history:t,historyRef:o,pushHistoryEntries:h,clearHistory:u,historyToText:i,buildCarryoverHistory:v}}function Rs(t){const n=s.useRef({}),o=s.useRef(null),h=s.useCallback(()=>{o.current=null;const p=n.current;n.current={},Object.keys(p).length&&t(g=>g.map(w=>{const R=p[w.id];return R?{...w,response:(w.response||"")+R.answer,thinking:(w.thinking||"")+R.thinking}:w}))},[t]),u=s.useCallback(()=>{o.current==null&&(o.current=requestAnimationFrame(h))},[h]),i=s.useCallback((p,b,g)=>{if(!b&&!g)return;const w=n.current[p]||{answer:"",thinking:""};w.answer+=b,w.thinking+=g,n.current[p]=w,u()},[u]),v=s.useCallback(p=>{n.current[p]&&delete n.current[p]},[]),d=s.useCallback(()=>{n.current={},o.current!=null&&(cancelAnimationFrame(o.current),o.current=null)},[]);return{pendingStreamRef:n,flushStreamRafRef:o,enqueueStreamDelta:i,clearPendingStreamForModel:v,resetPendingStream:d}}function As(t){const{mode:n,moderator:o,selected:h,selectedCardIds:u,githubToken:i,isGenerating:v,summarizeSessionResponses:d,setLastQuery:p,setHoveredCard:b,setPhaseLabel:g,setModeratorSynthesis:w,setDiscussionTurnsByModel:R,resetFailedModels:$,markModelFailed:B,failedModelsRef:W,currentDiscussionTurnRef:Q,sessionModelIdsRef:c,abortControllerRef:Y,thinkingStateRef:X,conversationHistoryRef:P,pushHistoryEntries:F,historyToText:C,buildCarryoverHistory:Z,setModelsData:q,modelIdToName:z,setExecutionTimes:E,setIsGenerating:V,setIsSynthesizing:O,setSpeaking:ee,enqueueStreamDelta:U,clearPendingStreamForModel:G,resetPendingStream:J}=t;return{sendMessage:async(me,ce,xe,K)=>{if(!me.trim()||h.length===0&&!xe||!xe&&v)return;const de=(K==null?void 0:K.skipHistory)??!1,re={role:"user",content:me},Ce=de?P.current:[...P.current,re];de||F([re]);const ie=Z(Ce,n),Me=C(ie);p(me);const Ne=Me?`${Me}

Continue the conversation above and respond to the latest user request.`:me;let le;if(xe)le=xe;else{const L=Array.from(u).filter(T=>h.includes(T)&&(n==="compare"||T!==o));le=L.length>0?L:h.slice()}c.current=le;const we={},l=(L,T,m)=>{if(!T)return;const x=m!=null&&m.label?`${m.label}: ${T}`:T;we[L]=m!=null&&m.replace?x:we[L]?`${we[L]}

${x}`:x},te=new AbortController;Y.current=te,V(!0),O(!1),b(null),g(null),w(""),R({}),$(),Q.current=null,J(),q(L=>L.map(T=>le.includes(T.id)||T.id===o?ce&&ce[T.id]?{...T,response:ce[T.id],thinking:void 0,error:void 0}:{...T,response:"",thinking:void 0,error:void 0}:T)),E(L=>{const T={...L},m=performance.now();return le.forEach(x=>{T[x]={startTime:m}}),o&&!T[o]&&(T[o]={startTime:m}),T});const ue=new Set(le);o&&ue.add(o),ue.forEach(L=>{const T=cs(L),m=ds(L);X.current[L]={inThink:T||m,carry:"",implicitThinking:T,harmonyFormat:m}});const ye=new Set,fe=(L,T)=>{const m=L==null?void 0:L.trim();!m||de||F([{role:"assistant",content:m,kind:T}])},ke=(L,T)=>{const m=X.current[L]||{inThink:!1,carry:"",implicitThinking:!1};let x=m.carry+T;m.carry="";const M=x.lastIndexOf("<");if(M!==-1&&x.length-M<12){const N=x.slice(M);("<think>".startsWith(N)||"</think>".startsWith(N)||"<thinking>".startsWith(N)||"</thinking>".startsWith(N))&&(m.carry=N,x=x.slice(0,M))}let S="",H="",A=0;if(m.harmonyFormat){const N="<|channel|>final<|message|>",_=x.indexOf(N);if(_!==-1)m.inThink&&(S+=x.slice(0,_)),m.inThink=!1,H+=x.slice(_+N.length);else if(m.inThink){const ne=x.replace(/<\|channel\|>analysis<\|message\|>/gi,"").replace(/<\|end\|>/gi,"").replace(/<\|start\|>/gi,"").replace(/assistant/gi,"");S+=ne}else{const ne=x.replace(/<\|end\|>/gi,"");H+=ne}X.current[L]=m,H&&l(L,H),(S||H)&&U(L,H,S);return}if(!m.inThink&&!m.implicitThinking){const N=x.indexOf("</think>"),_=x.indexOf("</thinking>"),ne=N!==-1||_!==-1,pe=x.indexOf("<think>")!==-1||x.indexOf("<thinking>")!==-1;ne&&!pe&&(m.implicitThinking=!0,m.inThink=!0)}for(;A<x.length;)if(m.inThink){const N=x.indexOf("</think>",A),_=x.indexOf("</thinking>",A);let ne=-1,pe=0;if(N!==-1&&(_===-1||N<_)?(ne=N,pe=8):_!==-1&&(ne=_,pe=11),ne===-1){S+=x.slice(A);break}S+=x.slice(A,ne),m.inThink=!1,m.implicitThinking=!1,A=ne+pe}else{const N=x.indexOf("<think>",A),_=x.indexOf("<thinking>",A);let ne=-1,pe=0;if(N!==-1&&(_===-1||N<_)?(ne=N,pe=7):_!==-1&&(ne=_,pe=10),ne===-1){H+=x.slice(A);break}H+=x.slice(A,ne),m.inThink=!0,A=ne+pe}X.current[L]=m,H&&l(L,H),(S||H)&&U(L,H,S)},je=L=>{const T=L.toLowerCase();return T.includes("rate limit")||T.includes("waiting")?'<svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; vertical-align: text-bottom; margin-right: 6px;"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/><path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>'+L:T.includes("error")||T.includes("failed")?'<svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; vertical-align: text-bottom; margin-right: 6px;"><path d="M12 2L2 20h20L12 2z" stroke="currentColor" stroke-width="2" fill="none" stroke-linejoin="round"/><path d="M12 9v4M12 17h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>'+L:L};try{if(n==="compare"){ee(new Set(le));const L=await js({models:le,messages:Ce.map(T=>({role:T.role,content:T.content})),max_tokens:Ze.maxTokens,temperature:Ze.temperature,github_token:i||null},te.signal);if(await zt(L,T=>{if(T.event==="info"&&T.content){const m=String(T.content),x=je(m);g(x),T.model_id&&q(M=>M.map(S=>S.id===T.model_id?{...S,statusMessage:x}:S))}if(T.event==="token"&&T.model_id){const m=T.model_id,x=performance.now();ye.has(m)||(ye.add(m),E(M=>({...M,[m]:{...M[m],firstTokenTime:x}})),q(M=>M.map(S=>S.id===m?{...S,statusMessage:void 0}:S))),ke(m,String(T.content??""))}if(T.event==="done"&&T.model_id){const m=performance.now(),x=T.model_id;E(M=>({...M,[x]:{...M[x],endTime:m}})),ee(M=>{const S=new Set(M);return S.delete(x),S})}}),!de){const T=d(we,le);T&&F([{role:"assistant",content:T,kind:"compare_summary"}])}return}if(n==="analyze"){const L=le;if(L.length<2){const x="Select at least 2 participants for Analyze mode.";w(x),o&&q(M=>M.map(S=>S.id===o?{...S,response:x}:S)),g("Error");return}ee(new Set(L));const T=await Ss({query:Ne,participants:L,max_tokens:Ze.maxTokens,github_token:i||null},te.signal);let m="";if(await zt(T,x=>{const M=x.event;if(M==="analyze_start"&&g("Collecting Responses"),M==="model_start"&&x.model_id){const S=x.model_id;ee(H=>{const A=new Set(H);return A.add(S),A})}if(M==="model_chunk"&&x.model_id){const S=x.model_id,H=performance.now();ye.has(S)||(ye.add(S),E(A=>({...A,[S]:{...A[S],firstTokenTime:H}}))),ke(S,String(x.chunk??""))}if(M==="model_response"&&x.model_id){const S=x.model_id,H=performance.now();E(N=>({...N,[S]:{...N[S],endTime:H}})),ee(N=>{const _=new Set(N);return _.delete(S),_});const A=String(x.response??"");l(S,A,{replace:!0}),ce&&ce[S]||(q(N=>N.map(_=>_.id===S?{..._,response:A}:_)),fe(`${z(S)}:
${A}`,"analyze_response"))}if(M==="model_error"&&x.model_id){const S=x.model_id,H=performance.now();E(N=>({...N,[S]:{...N[S],endTime:H}})),ee(N=>{const _=new Set(N);return _.delete(S),_});const A=String(x.error??"Error generating response.");G(S),q(N=>N.map(_=>_.id===S?{..._,response:A,error:A}:_)),B(S),l(S,A,{replace:!0})}if(M==="analysis_complete"){g("Analysis Complete");const S=x.consensus||[],H=x.unique_contributions||{};let A=`Analysis:

`;if(S.length>0&&(A+=`Consensus:
`+S.map(N=>`• ${N}`).join(`
`)+`

`),Object.keys(H).length>0){A+=`Unique Contributions:
`;for(const[N,_]of Object.entries(H)){const ne=z(N);A+=`
${ne}:
`+_.map(pe=>`• ${pe}`).join(`
`)+`
`}}m=A,w(A),o&&q(N=>N.map(_=>_.id===o?{..._,response:A}:_))}if(M==="analyze_complete"&&(g("Complete"),ee(new Set)),M==="error"){const S=String(x.error??"Analyze error.");w(S),g("Error")}}),!de){const x=m.trim();x&&F([{role:"assistant",content:x,kind:"analyze_synthesis"}])}return}if(n==="debate"){const L=le;if(L.length<2){const m="Select at least 2 participants for Debate mode.";w(m),o&&q(x=>x.map(M=>M.id===o?{...M,response:m}:M)),g("Error");return}const T=await Ms({query:Ne,participants:L,turns:2,max_tokens:Ze.maxTokens,temperature:Ze.temperature,github_token:i||null},te.signal);await zt(T,m=>{const x=m.event;if(x==="debate_start"&&g("Debate Starting"),x==="round_start"){const M=m.round_number??0;g(`Round ${M+1}`)}if(x==="turn_start"&&m.model_id){const M=m.model_id,S=m.turn_number??0,H=m.round_number??0;ee(new Set([M])),g(`Round ${H+1} · Turn ${S+1}`),Q.current={modelId:M,turnNumber:S}}if(x==="turn_chunk"&&m.model_id){const M=m.model_id,S=performance.now();ye.has(M)||(ye.add(M),E(H=>({...H,[M]:{...H[M],firstTokenTime:S}}))),ke(M,String(m.chunk??""))}if(x==="turn_complete"&&m.model_id){const M=m.model_id,S=performance.now();E(N=>({...N,[M]:{...N[M],endTime:S}})),ee(N=>{const _=new Set(N);return _.delete(M),_});const H=String(m.response??""),A=m.turn_number??0;l(M,H,{replace:!0}),q(N=>N.map(_=>_.id===M?{..._,response:H}:_)),R(N=>({...N,[M]:[...N[M]||[],{turn_number:A,response:H}]})),fe(`${z(M)}:
${H}`,"debate_turn")}if(x==="turn_error"&&m.model_id){const M=m.model_id,S=performance.now();E(A=>({...A,[M]:{...A[M],endTime:S}})),ee(A=>{const N=new Set(A);return N.delete(M),N});const H=String(m.error??"Turn error.");G(M),q(A=>A.map(N=>N.id===M?{...N,response:H,error:H}:N)),B(M)}if(x==="debate_complete"&&(g("Complete"),ee(new Set)),x==="error"){const M=String(m.error??"Debate error.");g("Error"),w(M)}});return}}catch(L){if(L.name==="AbortError")return;if(console.error("Chat error:",L),Y.current===te){const T=L.message||String(L);w(`Session Error: ${T}`),g("Error"),J(),q(m=>m.map(x=>le.includes(x.id)&&!x.response?{...x,response:"Error generating response."}:x)),le.forEach(m=>B(m))}}finally{if(Y.current===te){const L=performance.now();E(T=>{const m={...T};return c.current.forEach(x=>{m[x]&&!m[x].endTime&&(m[x]={...m[x],endTime:L})}),m}),V(!1),O(!1),g(T=>T==="Error"?T:null),ee(new Set)}}}}}function It(t,n){const o=Math.min(t.x,n.x),h=Math.min(t.y,n.y),u=Math.max(t.x,n.x),i=Math.max(t.y,n.y);return{left:o,top:h,right:u,bottom:i,width:u-o,height:i-h}}function _s({rootContainerRef:t,visualizationAreaRef:n,arenaOffsetYRef:o,arenaTargetYRef:h,wheelRafRef:u,selectedModels:i,cardRefs:v,selectedCardIds:d,setSelectedCardIds:p,suppressClickRef:b}){const[g,w]=s.useState(null),R=s.useRef(!1);s.useEffect(()=>{R.current=g!=null},[g]),s.useEffect(()=>{const W=Q=>{if(Q.button!==0||!t.current)return;const c=Q.target;if(!c)return;const Y=c.closest("[data-card]"),X=c.closest('button, a, input, textarea, select, [role="button"]'),P=c.closest("[draggable]"),F=c.closest("[data-no-arena-scroll]");if(Y||X||P||F||!t.current.contains(c))return;h.current=o.current,u.current!=null&&(cancelAnimationFrame(u.current),u.current=null);const C=t.current.getBoundingClientRect(),Z={x:Q.clientX-C.left,y:Q.clientY-C.top};Q.preventDefault(),R.current=!0,b.current.card=!1,b.current.background=!1,w({origin:Z,current:Z,active:!1})};return window.addEventListener("mousedown",W,!0),()=>window.removeEventListener("mousedown",W,!0)},[o,h,u,t,n,b]),s.useEffect(()=>{if(!g||!t.current)return;const W=Y=>Y.preventDefault();document.addEventListener("selectstart",W);const Q=Y=>{const X=t.current.getBoundingClientRect(),P={x:Y.clientX-X.left,y:Y.clientY-X.top};w(F=>{if(!F)return F;const C=It(F.origin,P),Z=F.active||C.width>4||C.height>4;return{...F,current:P,active:Z}})},c=Y=>{R.current=!1;const X=t.current.getBoundingClientRect(),P={x:Y.clientX-X.left,y:Y.clientY-X.top},F=Y.target,C=!!(F&&F.closest("[data-card]"));w(Z=>{if(!Z)return null;const q=It(Z.origin,P);if(Z.active&&q.width>0&&q.height>0){const z=[],E=t.current.getBoundingClientRect(),V={left:E.left+q.left,right:E.left+q.right,top:E.top+q.top,bottom:E.top+q.bottom};for(const O of i){const ee=v.current.get(O.id);if(!ee)continue;const U=ee.getBoundingClientRect();!(U.right<V.left||U.left>V.right||U.bottom<V.top||U.top>V.bottom)&&z.push(O.id)}p(new Set(z)),C?b.current.card=!0:z.length>0&&(b.current.background=!0)}return null})};return window.addEventListener("mousemove",Q),window.addEventListener("mouseup",c),()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",c),document.removeEventListener("selectstart",W)}},[g,t,n,i,v,d,p,b]);const $=s.useMemo(()=>{if(!g||!g.active)return null;const W=It(g.origin,g.current);return W.width<=0||W.height<=0?null:{left:W.left,top:W.top,width:W.width,height:W.height}},[g]),B=s.useCallback(()=>{w(null),R.current=!1},[]);return{selectionRect:$,isSelecting:g!=null,dragSelectionActiveRef:R,clearSelection:B}}function zs({visualizationAreaRef:t,cardRefs:n,selected:o,setSelected:h,mode:u,gridCols:i,getCirclePosition:v}){const[d,p]=s.useState(null),b=s.useCallback((g,w)=>{if(g.button!==0||g.target.closest('button, a, input, textarea, select, [role="button"]'))return;g.preventDefault();const $=n.current.get(w);if(!$||!t.current)return;const B=$.getBoundingClientRect(),W=t.current.getBoundingClientRect(),Q=B.left+B.width/2,c=B.top+B.height/2;p({activeId:w,currX:g.clientX,currY:g.clientY,offsetX:Q-g.clientX,offsetY:c-g.clientY,containerLeft:W.left,containerTop:W.top,containerWidth:W.width,containerHeight:W.height,cardHeight:B.height}),g.target.setPointerCapture(g.pointerId)},[t]);return s.useEffect(()=>{if(!d)return;const g=R=>{if(p(c=>c?{...c,currX:R.clientX,currY:R.clientY}:null),!t.current)return;const $=t.current.getBoundingClientRect(),B=o.indexOf(d.activeId);let W=1/0,Q=-1;if(u==="compare"){const c=R.clientX-($.left+$.width/2),Y=R.clientY-$.top,X=(ae.cardWidth+ae.gapX)*i-ae.gapX;o.forEach((P,F)=>{const C=Math.floor(F/i),q=F%i*(ae.cardWidth+ae.gapX)-X/2+ae.cardWidth/2,z=C*(ae.cardHeight+ae.gapY),E=q,V=z+ae.cardHeight/2,O=(c-E)**2+(Y-V)**2;O<W&&(W=O,Q=F)})}else{const c=R.clientX-($.left+$.width/2),Y=R.clientY-($.top+$.height/2),X=Math.max(ae.baseRadius,ae.minRadius+o.length*ae.radiusPerModel);o.forEach((P,F)=>{const C=v(F,o.length,u,X),Z=(c-C.x)**2+(Y-C.y)**2;Z<W&&(W=Z,Q=F)})}if(Q!==-1&&Q!==B){const c=[...o],[Y]=c.splice(B,1);c.splice(Q,0,Y),h(c)}},w=()=>p(null);return window.addEventListener("pointermove",g),window.addEventListener("pointerup",w),()=>{window.removeEventListener("pointermove",g),window.removeEventListener("pointerup",w)}},[d,t,n,o,h,u,i,v]),{dragState:d,handlePointerDown:b}}function Te(t,n){return!t||!t.startsWith("#")?t:t.length===7||t.length===4?`${t}${n}`:t}const Is={idle:"Ready",responding:"Responding",done:"Done",waiting:"Waiting",error:"Error"};function Dt({state:t,color:n,size:o=16,label:h,className:u=""}){const i={width:`${o}px`,height:`${o}px`},v=h??Is[t],d=Math.max(2,Math.round(o*.14)),p=Math.max(12,o-2),b="#fbbf24",g=Te(n,"cc"),w=()=>{switch(t){case"responding":return e.jsx("div",{className:"relative flex items-center justify-center",style:i,children:e.jsxs("svg",{width:p,height:p,viewBox:"0 0 24 24",fill:"none",className:"",style:{filter:`drop-shadow(0 0 6px ${Te(b,"55")})`,animation:"spin 0.6s linear infinite"},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"spinnerGradient",gradientUnits:"userSpaceOnUse",x1:"3",y1:"12",x2:"12",y2:"3",children:[e.jsx("stop",{offset:"0%",stopColor:b,stopOpacity:"1"}),e.jsx("stop",{offset:"60%",stopColor:b,stopOpacity:"0.5"}),e.jsx("stop",{offset:"100%",stopColor:b,stopOpacity:"0"})]})}),e.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:Te(b,"15"),strokeWidth:d,fill:"none"}),e.jsx("path",{d:"M 12 3 A 9 9 0 1 1 3 12",stroke:"url(#spinnerGradient)",strokeWidth:d,strokeLinecap:"round",fill:"none"}),e.jsx("circle",{cx:"3",cy:"12",r:d*.7,fill:b})]})});case"done":return e.jsx("div",{className:"flex items-center justify-center rounded-full",style:{...i,background:Te(n,"14"),border:`1px solid ${Te(n,"99")}`},children:e.jsx("svg",{width:p,height:p,viewBox:"0 0 24 24",fill:"none",children:e.jsx("polyline",{points:"5 13 10 18 19 7",stroke:n,strokeWidth:d,strokeLinecap:"round",strokeLinejoin:"round"})})});case"error":const R="#ef4444";return e.jsx("div",{className:"flex items-center justify-center rounded-full",style:{...i,background:Te(R,"14"),border:`1px solid ${Te(R,"99")}`},children:e.jsx("svg",{width:p,height:p,viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M6 6L18 18M6 18L18 6",stroke:R,strokeWidth:d,strokeLinecap:"round",strokeLinejoin:"round"})})});case"waiting":return e.jsxs("div",{className:"relative flex items-center justify-center",style:i,children:[e.jsx("div",{className:"absolute inset-0 rounded-full",style:{border:`1px solid ${Te(g,"99")}`}}),e.jsx("svg",{width:p,height:p,viewBox:"0 0 24 24",fill:"none",style:{animation:"spin 5s linear infinite"},children:e.jsx("circle",{cx:"12",cy:"12",r:"8.5",stroke:Te(g,"44"),strokeWidth:d-1,strokeDasharray:"6 10",strokeLinecap:"round"})}),e.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{background:Te(g,"aa"),animation:"pulse 1.5s ease-in-out infinite"}})]});default:return e.jsxs("div",{className:"relative flex items-center justify-center",style:i,children:[e.jsx("div",{className:"absolute inset-0 rounded-full",style:{border:"1px solid rgba(71, 85, 105, 0.5)"}}),e.jsx("div",{className:"w-2 h-2 rounded-full",style:{background:"rgba(148, 163, 184, 0.6)",animation:"pulse 2.4s ease-in-out infinite"}})]})}};return e.jsx("div",{className:`inline-flex items-center justify-center ${u}`,title:v,children:w()})}function dn({times:t,isFastestTTFT:n,isFastestTotal:o}){const h=(t==null?void 0:t.startTime)!=null,u=(t==null?void 0:t.endTime)!=null,i=(t==null?void 0:t.firstTokenTime)!=null,v=h&&u?((t.endTime-t.startTime)/1e3).toFixed(2):null,d=h&&i?((t.firstTokenTime-t.startTime)/1e3).toFixed(2):null;return e.jsxs("div",{className:"text-[10px] text-slate-500 flex items-center gap-2",children:[e.jsxs("span",{className:o?"text-yellow-400/90 bg-yellow-500/10 px-1.5 py-0.5 rounded":void 0,title:o?"Fastest":void 0,children:[e.jsx("span",{className:o?void 0:"text-slate-400",children:"TIME"})," ",v?`${v}s`:h&&!u?"...":"—"]}),d&&e.jsxs("span",{className:n?"text-amber-400/90 bg-amber-500/10 px-1.5 py-0.5 rounded":"text-slate-600",title:n?"Fastest TTFT":void 0,children:["TTFT ",d,"s"]})]})}const Pt=({text:t,speed:n=5})=>{const[o,h]=s.useState(""),u=s.useRef(0),i=s.useRef(null);return s.useEffect(()=>{!t.startsWith(o)&&o!==""&&(h(""),u.current=0)},[t]),s.useEffect(()=>{i.current!=null&&(clearTimeout(i.current),i.current=null);const v=t.length;if(u.current>=v)return;const d=()=>{const p=u.current,b=v-p;if(b<=0)return;const g=b>120?12:b>40?4:b>10?2:1,w=Math.min(v,p+g);u.current=w,h(t.slice(0,w));const $=v-w>5?0:n;i.current=window.setTimeout(d,$)};return i.current=window.setTimeout(d,n),()=>{i.current!=null&&(clearTimeout(i.current),i.current=null)}},[t,n]),e.jsx("span",{children:o})},pt=256,pn=200,Pe=96;function Ds(t){const{mode:n,selectedModels:o,gridCols:h,speaking:u,selectedCardIds:i,setSelectedCardIds:v,executionTimes:d,failedModels:p,cardRefs:b,handlePointerDown:g,dragState:w,setContextMenu:R,suppressClickRef:$,getTailSnippet:B,hoveredCard:W,setHoveredCard:Q,layoutRadius:c,getCirclePosition:Y,moderatorModel:X,moderatorId:P,orchestratorTransform:F,orchestratorStatus:C,orchestratorPhaseLabel:Z,moderatorSynthesis:q,isSynthesizing:z,isGenerating:E,phaseLabel:V,linesTransitioning:O,lastSelectedCardRef:ee,orchestratorAutoMode:U,orchestratorAutoScope:G,showOrchestratorMenu:J,setShowOrchestratorMenu:se,setOrchestratorAutoMode:me,setOrchestratorAutoScope:ce,orchestratorMenuRef:xe,availableModels:K,setModerator:de,fastestTTFT:re,fastestTotal:Ce}=t,ie=n!=="compare",Me=n==="analyze"?c-64:0,Ne=un(C),[le,we]=s.useState(null);return s.useEffect(()=>{if(!J)return;const l=te=>{xe.current&&!xe.current.contains(te.target)&&(se(!1),we(null))};return document.addEventListener("mousedown",l,!0),()=>document.removeEventListener("mousedown",l,!0)},[J,xe,se]),e.jsxs(e.Fragment,{children:[o.map((l,te)=>{var rt;const ue=Y(te,o.length,n,c),ye=$s(te,h),fe=u.has(l.id),ke=i.has(l.id),je=p.has(l.id),L=!fe&&!je&&!!((rt=d[l.id])!=null&&rt.endTime)&&l.response.trim().length>0,m=Ys(fe,L,je,!fe&&!L&&!je&&E&&n==="debate"),x=un(m),M="#fbbf24",S="#ef4444",H=l.type==="self-hosted"?"#10b981":"#3b82f6",A=je?S:H,N=fe&&!je,_=Xs({hasError:je,isProcessing:N,isSelected:ke,errorColor:S,processingColor:M,typeColor:H}),ne=Bs({mode:n,gridX:ye.gridX,gridY:ye.gridY,circleX:ue.x,circleY:ue.y,dragState:w,modelId:l.id}),pe=W===l.id,ht=ie?Pe:pt,mt=ie?Pe:pn,Se=Math.max(800,c*2+600),ge=Se/2,tt=ge,nt=ge,We=ge+(0-ue.x),st=ge+(Me-ue.y);return e.jsxs("div",{ref:he=>{he?b.current.set(l.id,he):b.current.delete(l.id)},onPointerDown:he=>g(he,l.id),className:"absolute",onContextMenu:he=>{he.preventDefault(),he.stopPropagation(),R({x:he.clientX,y:he.clientY,modelId:l.id})},style:{transform:ne,zIndex:ie?pe?300:ke?40:fe?15:5:ke?20:fe?10:1,left:"50%",top:ie?"50%":"0",transition:(w==null?void 0:w.activeId)===l.id?"none":"transform 300ms cubic-bezier(0.2, 0, 0.2, 1)"},children:[ie&&fe&&!je&&!O&&e.jsxs("svg",{className:"absolute pointer-events-none",style:{width:`${Se}px`,height:`${Se}px`,top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:-1},viewBox:`0 0 ${Se} ${Se}`,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`grad-${l.id}`,gradientUnits:"userSpaceOnUse",x1:tt,y1:nt,x2:We,y2:st,children:[e.jsx("stop",{offset:"0%",stopColor:M,stopOpacity:"0.45"}),e.jsx("stop",{offset:"100%",stopColor:M,stopOpacity:"0.12"})]})}),e.jsx("line",{x1:tt,y1:nt,x2:We,y2:st,stroke:`url(#grad-${l.id})`,strokeWidth:"2",strokeDasharray:"6,4",strokeLinecap:"round",className:"animate-flow arena-link"})]}),e.jsxs("div",{"data-card":!0,onClick:he=>Ps({e:he,modelId:l.id,suppressClickRef:$,setSelectedCardIds:v,selectedModels:o,lastSelectedCardRef:ee}),onMouseEnter:()=>ie&&Q(l.id),onMouseLeave:()=>ie&&Q(null),className:`relative cursor-grab active:cursor-grabbing card-hover ${ie?"rounded-full":""} ${ke?"card-selected":""} ${fe?"card-speaking":""}`,style:{background:_.background,backdropFilter:ie?void 0:"blur(8px)",WebkitBackdropFilter:ie?void 0:"blur(8px)",border:_.border,boxShadow:_.shadow,transform:ke||N?"scale(1.05)":"scale(1)",width:`${ht}px`,height:`${mt}px`,borderRadius:ie?"50%":"12px",transition:"transform 180ms ease-out, box-shadow 180ms ease-out, border-color 180ms ease-out, width 0.7s cubic-bezier(0.4, 0, 0.2, 1), height 0.7s cubic-bezier(0.4, 0, 0.2, 1), border-radius 0.7s cubic-bezier(0.4, 0, 0.2, 1)"},children:[!ie&&e.jsxs("div",{style:Fs,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[e.jsx(Dt,{state:m,color:A,size:16,label:x}),e.jsx("span",{className:"text-xs font-semibold text-slate-200 truncate",children:l.name})]}),e.jsx("div",{className:"flex items-center gap-1.5 shrink-0",children:e.jsx("span",{className:`text-[9px] uppercase tracking-wider px-1.5 py-0.5 rounded ${l.type==="self-hosted"?"bg-emerald-500/10 text-emerald-300 border border-emerald-500/30":"bg-blue-500/10 text-blue-300 border border-blue-500/30"}`,children:l.type==="self-hosted"?"Self-hosted":"API"})})]}),e.jsx("p",{className:"text-xs text-slate-400 leading-relaxed line-clamp-3 flex-1",children:Os({model:l,isSpeaking:fe,thinkingFallback:e.jsx("span",{className:"text-slate-500 italic",children:"Thinking…"}),getTailSnippet:B})}),e.jsx("div",{className:"flex items-center gap-4 mt-3 pt-3 border-t border-slate-700/50",children:e.jsx(dn,{times:d[l.id],isFastestTTFT:re===l.id,isFastestTotal:Ce===l.id})})]}),ie&&e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-center",style:{transition:"opacity 0.3s ease-out"},children:[e.jsx("div",{className:"absolute inset-[3px] rounded-full border border-white/5",style:{boxShadow:`inset 0 0 20px ${A}15`}}),e.jsx("div",{className:"absolute inset-[-6px] rounded-full opacity-60",style:{background:`radial-gradient(circle, ${A}22 0%, transparent 65%)`,filter:"blur(10px)"}}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center gap-1.5 px-3",children:[e.jsx("div",{className:"text-[7px] tracking-[0.32em] text-slate-400 uppercase",children:x}),e.jsx("div",{className:"text-[10px] font-semibold text-slate-100 leading-tight",children:l.name}),e.jsx(Dt,{state:m,color:A,size:12})]})]})]}),n==="analyze"&&ie&&l.personaEmoji&&e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 flex items-center justify-center pointer-events-none select-none",style:{bottom:"-12px",fontSize:"20px",zIndex:100,transition:"transform 180ms ease-out",transform:fe?"scale(1.15)":"scale(1)",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.5)) drop-shadow(0 0 8px rgba(0,0,0,0.3))"},title:l.personaName?`${l.personaName} - ${l.personaTrait}`:"Persona",children:l.personaEmoji}),ie&&fe&&l.thinking&&l.thinking.trim().length>0&&l.response.trim().length===0&&e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 flex items-center justify-center pointer-events-none select-none animate-pulse",style:{bottom:"-12px",fontSize:"18px",zIndex:100,filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.5)) drop-shadow(0 0 10px rgba(168, 85, 247, 0.4))"},title:"Thinking...",children:"💭"}),ie&&W===l.id&&e.jsxs("div",{"data-card":!0,onClick:he=>he.stopPropagation(),className:"absolute w-64 max-w-[calc(100vw-2rem)] p-4 rounded-xl transition-all duration-300 z-[220]",style:{top:ue.y>0?"auto":"100%",bottom:ue.y>0?"100%":"auto",left:"50%",transform:"translateX(-50%)",marginTop:ue.y>0?0:"12px",marginBottom:ue.y>0?"12px":0,background:"rgba(15, 23, 42, 0.95)",backdropFilter:"blur(16px)",border:`1px solid ${A}40`,boxShadow:`0 20px 40px rgba(0,0,0,0.5), 0 0 20px ${A}15`},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{background:A}}),e.jsx("span",{className:"text-xs font-semibold text-slate-300",children:l.name})]}),n==="analyze"&&l.personaEmoji&&l.personaName&&e.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b border-slate-700/50",children:[e.jsx("span",{className:"text-base",children:l.personaEmoji}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs font-semibold text-blue-400",children:l.personaName}),l.personaTrait&&e.jsx("div",{className:"text-[10px] text-slate-500",children:l.personaTrait})]})]}),e.jsx("p",{className:"text-xs text-slate-400 leading-relaxed whitespace-pre-wrap",children:Hs({model:l,isSpeaking:fe,getTailSnippet:B})}),e.jsx("div",{className:"flex items-center gap-4 mt-3 pt-2 border-t border-slate-700/50",children:e.jsx(dn,{times:d[l.id]})})]})]},l.id)}),n!=="compare"&&X&&e.jsxs("div",{"data-card":!0,className:"absolute z-20 transition-all duration-700 ease-out cursor-pointer",style:{opacity:1,transform:F,left:"50%",top:n==="analyze"?`calc(50% + ${c}px - 64px)`:"50%"},onClick:l=>{l.stopPropagation(),P&&(v(new Set([P])),ee.current=P)},onContextMenu:l=>{l.preventDefault(),l.stopPropagation(),J?(se(!1),we(null)):(we({x:l.clientX,y:l.clientY}),se(!0))},onMouseEnter:()=>Q("moderator"),onMouseLeave:()=>Q(null),children:[e.jsx("div",{className:"relative flex items-center justify-center",style:{width:`${Pe}px`,height:`${Pe}px`},children:(()=>{const l=C==="responding",te=l?"#fbbf24":X.color;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 rounded-full animate-pulse",style:{background:`radial-gradient(circle, ${te}20 0%, transparent 70%)`,transform:"scale(2.2)",filter:"blur(18px)"}}),e.jsxs("div",{className:"relative rounded-full flex items-center justify-center transition-all duration-300",style:{width:`${Pe}px`,height:`${Pe}px`,background:l?"linear-gradient(135deg, rgba(251, 191, 36, 0.08), rgba(15, 23, 42, 0.9))":"rgba(15, 23, 42, 0.9)",backdropFilter:"blur(16px)",border:`2px solid ${te}${l?"99":"60"}`,boxShadow:`0 0 36px ${te}${l?"40":"28"}, inset 0 1px 1px rgba(255,255,255,0.1)`},children:[e.jsx("div",{className:"absolute inset-[-4px] rounded-full",style:{background:`conic-gradient(from 0deg, transparent, ${te}60, transparent)`,animation:"spin 4s linear infinite"}}),e.jsx("div",{className:"absolute inset-[2px] rounded-full",style:{background:"rgba(15, 23, 42, 0.96)"}}),e.jsxs("div",{className:"relative text-center z-10 flex flex-col items-center gap-1.5 px-3",children:[e.jsx("div",{className:"text-[7px] tracking-[0.32em] text-slate-400 uppercase",children:Ne}),e.jsx("div",{className:"text-[10px] font-semibold text-slate-100 leading-tight",children:X.name}),e.jsx(Dt,{state:C,color:te,size:12})]})]})]})})()}),e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 flex flex-col items-center gap-1 w-max max-w-[200px]",style:{top:"calc(100% + 12px)"},children:e.jsx("span",{className:"text-[10px] text-slate-500",children:Z})}),W==="moderator"&&!J&&(()=>{const l=C==="responding",te=l?"#fbbf24":X.color;return e.jsxs("div",{"data-card":!0,onClick:ue=>ue.stopPropagation(),className:"absolute bottom-full mb-4 left-1/2 -translate-x-1/2 w-80 max-w-[calc(100vw-2rem)] p-4 rounded-xl z-[200] transition-all duration-300",style:{background:"rgba(15, 23, 42, 0.95)",backdropFilter:"blur(16px)",border:`1px solid ${te}40`,boxShadow:`0 20px 40px rgba(0,0,0,0.5), 0 0 30px ${te}20`},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider",children:"Orchestrator"}),e.jsx("span",{className:"text-xs text-slate-500",children:"·"}),e.jsx("span",{className:"text-xs font-medium text-slate-300",children:X.name}),l&&e.jsx("span",{className:"text-[9px] uppercase tracking-wider px-1.5 py-0.5 rounded bg-yellow-500/20 text-yellow-300 border border-yellow-500/30",children:"Working"})]}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:Ws({moderatorSynthesis:q,isSynthesizing:z,moderatorId:P,speaking:u,phaseLabel:V,isGenerating:E,getTailSnippet:B})})]})})(),J&&le&&Jn.createPortal(e.jsx("div",{ref:xe,className:"w-64 bg-slate-800 border border-slate-700 rounded-lg shadow-xl overflow-hidden",style:{position:"fixed",top:`${le.y}px`,left:`${le.x}px`,transform:"translateY(-50%)",zIndex:9999},onClick:l=>l.stopPropagation(),children:U?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-3 py-2 text-[10px] uppercase tracking-wider text-slate-500 font-semibold border-b border-slate-700/50",children:["Auto Mode: ",G==="self-hosted"?"SELF-HOSTED":G.toUpperCase()]}),["all","self-hosted","api"].map(l=>e.jsxs("button",{onClick:()=>{ce(l),se(!1)},className:`w-full px-3 py-2 text-left text-xs font-medium transition-colors ${G===l?"bg-yellow-500/20 text-yellow-300":"text-slate-300 hover:bg-slate-700/50"}`,children:[l==="all"&&"All",l==="self-hosted"&&"Self-hosted",l==="api"&&"API",e.jsxs("span",{className:"text-[10px] text-slate-500 ml-1",children:[l==="all"&&"(self-hosted → API)",l==="self-hosted"&&"(no quota)",l==="api"&&"(cloud only)"]})]},l)),e.jsx("div",{className:"border-t border-slate-700",children:e.jsx("button",{onClick:()=>{me(!1),se(!1)},className:"w-full px-3 py-2 text-left text-xs font-medium text-slate-400 hover:bg-slate-700/50 transition-colors",children:"Manual Mode"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 py-2 text-[10px] uppercase tracking-wider text-slate-500 font-semibold border-b border-slate-700/50",children:"Select Orchestrator"}),K.filter(l=>l.type==="github"||l.type==="external").length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 py-1.5 text-[9px] uppercase tracking-wider text-slate-600 font-semibold",children:"GitHub Models"}),K.filter(l=>l.type==="github"||l.type==="external").map(l=>e.jsx("button",{onClick:()=>{de(l.id),se(!1)},className:`w-full px-4 py-2 text-left text-xs font-medium transition-colors ${P===l.id?"bg-blue-500/20 text-blue-300":"text-slate-300 hover:bg-slate-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:l.name}),P===l.id&&e.jsx("span",{className:"text-blue-400",children:"✓"})]})},l.id))]}),K.filter(l=>l.type==="self-hosted").length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 py-1.5 text-[9px] uppercase tracking-wider text-slate-600 font-semibold border-t border-slate-700/50 mt-1",children:"Self-Hosted Models"}),K.filter(l=>l.type==="self-hosted").map(l=>e.jsx("button",{onClick:()=>{de(l.id),se(!1)},className:`w-full px-4 py-2 text-left text-xs font-medium transition-colors ${P===l.id?"bg-blue-500/20 text-blue-300":"text-slate-300 hover:bg-slate-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:l.name}),P===l.id&&e.jsx("span",{className:"text-blue-400",children:"✓"})]})},l.id))]}),e.jsx("div",{className:"border-t border-slate-700",children:e.jsxs("button",{onClick:()=>{me(!0),se(!1)},className:"w-full px-3 py-2 text-left text-xs font-medium text-yellow-400 hover:bg-slate-700/50 transition-colors flex items-center gap-2",children:[e.jsx(Zn,{size:12}),e.jsx("span",{children:"Enable Auto Mode"})]})})]})}),document.body)]}),n!=="compare"&&e.jsxs("svg",{className:"absolute pointer-events-none transition-opacity duration-700",style:{width:"1000px",height:"1000px",opacity:.2},children:[e.jsx("circle",{cx:"500",cy:"500",r:c,fill:"none",stroke:"url(#circleGrad)",strokeWidth:"1",strokeDasharray:"8,4"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"circleGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),e.jsx("stop",{offset:"50%",stopColor:"#8b5cf6"}),e.jsx("stop",{offset:"100%",stopColor:"#3b82f6"})]})})]})]})}function $s(t,n){const o=Math.floor(t/n),h=t%n,u=(pt+ae.gapX)*n-ae.gapX,i=o*(pn+ae.gapY);return{gridX:h*(pt+ae.gapX)-u/2+pt/2,gridY:i}}function Bs({mode:t,gridX:n,gridY:o,circleX:h,circleY:u,dragState:i,modelId:v}){if((i==null?void 0:i.activeId)===v){const d=i.currX+i.offsetX,p=i.currY+i.offsetY;if(t==="compare"){const w=d-(i.containerLeft+i.containerWidth/2),R=p-i.containerTop-i.cardHeight/2;return`translate(calc(-50% + ${w}px), ${R}px)`}const b=d-(i.containerLeft+i.containerWidth/2),g=p-(i.containerTop+i.containerHeight/2);return`translate(calc(-50% + ${b}px), calc(-50% + ${g}px))`}return t==="compare"?`translate(calc(-50% + ${n}px), ${o}px)`:`translate(calc(-50% + ${h}px), calc(-50% + ${u}px))`}function Ps({e:t,modelId:n,suppressClickRef:o,setSelectedCardIds:h,selectedModels:u,lastSelectedCardRef:i}){if(t.stopPropagation(),o.current.card){o.current.card=!1;return}const v=t.shiftKey,d=t.metaKey||t.ctrlKey;if(v&&i.current){const p=u.findIndex(g=>g.id===i.current),b=u.findIndex(g=>g.id===n);if(p!==-1&&b!==-1){const g=Math.min(p,b),w=Math.max(p,b),R=u.slice(g,w+1).map($=>$.id);h($=>{const B=new Set($);return R.forEach(W=>B.add(W)),B})}}else d?(h(p=>{const b=new Set(p);return b.has(n)?b.delete(n):b.add(n),b}),i.current=n):(h(new Set([n])),i.current=n)}function Os({model:t,isSpeaking:n,thinkingFallback:o,getTailSnippet:h}){return t.statusMessage?_e(t.statusMessage)??t.statusMessage:n?t.response.trim().length>0?_e(t.response)??e.jsx(Pt,{text:t.response,speed:20}):t.thinking&&t.thinking.trim().length>0?e.jsxs("span",{children:[e.jsx("span",{className:"text-slate-500 italic",children:"Thinking… "}),h(t.thinking.trim(),220)]}):o:_e(t.response)??t.response}function Hs({model:t,isSpeaking:n,getTailSnippet:o,maxChars:h=220}){return t.statusMessage?_e(t.statusMessage)??t.statusMessage:n?t.thinking&&t.thinking.trim().length>0?e.jsxs("span",{children:[e.jsx("span",{className:"text-purple-400/80 text-[10px] uppercase tracking-wider font-medium",children:"Thinking "}),e.jsx("span",{className:"text-slate-400",children:o(t.thinking.trim(),260)})]}):t.response.trim().length>0?_e(t.response)??e.jsx(Pt,{text:t.response,speed:20}):e.jsx("span",{className:"text-slate-500 italic",children:"Thinking…"}):t.thinking&&t.thinking.trim().length>0?e.jsxs("span",{children:[e.jsx("span",{className:"text-purple-400/80 text-[10px] uppercase tracking-wider font-medium",children:"Reasoning "}),e.jsx("span",{className:"text-slate-400",children:o(t.thinking.trim(),260)})]}):t.response?_e(t.response)??o(t.response,h):e.jsx("span",{className:"text-slate-500 italic",children:"No response yet."})}function Ws({moderatorSynthesis:t,isSynthesizing:n,moderatorId:o,speaking:h,phaseLabel:u,isGenerating:i,getTailSnippet:v}){if(t)return n&&o&&h.has(o)?e.jsx(Pt,{text:t,speed:20}):v(t);if(n)return e.jsx("span",{className:"text-slate-500 italic",children:"Synthesizing responses..."});if(i){const d=u?_e(u):null;if(d)return e.jsx("span",{className:"text-slate-500 italic",children:d});const p=u==="Stage 1 · Responses"?"Waiting for model responses...":u||"Orchestrating...";return e.jsx("span",{className:"text-slate-500 italic",children:p})}return e.jsx("span",{className:"text-slate-500 italic",children:"Send a prompt to see the synthesis."})}const Fs={padding:"16px",height:"100%",display:"flex",flexDirection:"column",isolation:"isolate",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",opacity:1,transition:"opacity 0.3s ease-out"};function un(t){switch(t){case"error":return"Error";case"responding":return"Responding";case"done":return"Done";case"waiting":return"Waiting";default:return"Ready"}}function Ys(t,n,o,h){return o?"error":t?"responding":n?"done":h?"waiting":"idle"}function _e(t){return t.startsWith("<svg")?e.jsx("span",{dangerouslySetInnerHTML:{__html:t}}):null}function Xs({hasError:t,isProcessing:n,isSelected:o,errorColor:h,processingColor:u,typeColor:i}){const v="rgba(30, 41, 59, 0.85)";return t?{background:`linear-gradient(135deg, ${h}14, ${v})`,border:`1px solid ${h}99`,shadow:`0 0 24px ${h}33, inset 0 1px 1px rgba(255,255,255,0.1)`}:n?{background:`linear-gradient(135deg, ${u}14, ${v})`,border:`1px solid ${u}99`,shadow:`0 0 24px ${u}33, inset 0 1px 1px rgba(255,255,255,0.1)`}:o?{background:v,border:`1px solid ${i}d0`,shadow:`0 0 20px ${i}30, inset 0 1px 1px rgba(255,255,255,0.1)`}:{background:v,border:"1px solid rgba(71, 85, 105, 0.5)",shadow:"0 4px 20px rgba(0,0,0,0.3), inset 0 1px 1px rgba(255,255,255,0.05)"}}function Gs({rect:t}){return t?e.jsx("div",{className:"absolute pointer-events-none z-30",style:{left:t.left,top:t.top,width:t.width,height:t.height,border:"2px solid rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)"}}):null}const Ot=s.createContext(null);function Us({children:t}){const[n,o]=s.useState(!1),[h,u]=s.useState("chat"),i=s.useRef({}),v=s.useCallback($=>{i.current=$},[]),[d,p]=s.useState({gesture:null,progress:0,triggered:!1}),[b,g]=s.useState(void 0),[w,R]=s.useState(null);return e.jsx(Ot.Provider,{value:{isActive:n,setIsActive:o,appContext:h,setAppContext:u,callbacks:i,setCallbacks:v,gestureState:d,setGestureState:p,performanceMetrics:b,setPerformanceMetrics:g,cameraError:w,setCameraError:R},children:t})}function Ks(){const t=s.useContext(Ot);if(!t)throw new Error("useGesture must be used within GestureProvider");return t}function fr(){return s.useContext(Ot)}class qs extends s.Component{constructor(o){super(o);rn(this,"handleRetry",()=>{var o,h;this.setState({hasError:!1,error:null}),(h=(o=this.props).onRetry)==null||h.call(o)});this.state={hasError:!1,error:null}}static getDerivedStateFromError(o){return{hasError:!0,error:o}}componentDidCatch(o,h){console.error("ErrorBoundary caught an error:",o,h)}render(){var o;return this.state.hasError?this.props.fallback?this.props.fallback:e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-white/70 gap-4 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-400",children:[e.jsx(es,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:"Something went wrong"})]}),e.jsx("p",{className:"text-xs text-white/40 text-center max-w-xs",children:((o=this.state.error)==null?void 0:o.message)||"Failed to load component"}),e.jsxs("button",{onClick:this.handleRetry,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white/80 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg transition-all active:scale-95 border border-slate-600/50",children:[e.jsx(ts,{size:14}),"Try Again"]})]}):this.props.children}}const Vs=s.lazy(()=>et(()=>import("./SettingsModal-B4oAOGnm.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Qs=s.lazy(()=>et(()=>import("./DiscussionTranscript-DiJX4r6q.js"),__vite__mapDeps([7,1,2,3,4,5,6,8]))),Js=s.lazy(()=>et(()=>import("./GestureControl-BlgHJX7R.js"),__vite__mapDeps([9,1,2,3,4,5,6]))),Zs=s.lazy(()=>et(()=>import("./HandBackground-F7iiHyIM.js"),__vite__mapDeps([10,1,2,3,4,5,6,11]))),er=s.lazy(()=>et(()=>import("./ChatView-DbHxTKVA.js"),__vite__mapDeps([12,1,2,3,4,5,6,8])).then(t=>({default:t.default}))),tr='button, input, textarea, select, a, [role="button"], [data-no-background], [data-card]';function nr(){const t=Ks();Ns();const{modelsData:n,setModelsData:o,selected:h,setSelected:u,chatModelId:i,setChatModelId:v,moderator:d,setModerator:p,availableModels:b,totalModelsByType:g,allSelectedByType:w,modelIdToName:R,isLoading:$,loadError:B,retryCount:W,retryNow:Q}=ws(),[c,Y]=He("playground_mode","chat",{serialize:r=>r,deserialize:(r,a)=>["chat","compare","analyze","debate"].includes(r)?r:a}),[X,P]=s.useState(!1),F=s.useRef(null),[C,Z]=s.useState(null),[q,z]=s.useState(!1),[E,V]=s.useState(!1),[O,ee]=s.useState(2),U=s.useRef(0),G=s.useRef(0),J=s.useRef(null),[se,me]=s.useState(!1),[ce,xe]=He("github_models_token","",{serialize:r=>r||null,deserialize:(r,a)=>r??a}),[K,de]=He("openrouter_api_key","",{serialize:r=>r||null,deserialize:(r,a)=>r??a}),[re,Ce]=s.useState({}),ie=s.useRef(null),Me=s.useRef(null),[Ne,le]=s.useState(""),[we,l]=s.useState(null),te=s.useRef(null),ue=s.useCallback(r=>{te.current&&clearTimeout(te.current),l(r),te.current=window.setTimeout(()=>{l(null),te.current=null},5e3)},[]),ye=s.useCallback(r=>{if(c==="chat"||ce)return!0;const a=n.find(f=>f.id===r);return!a||a.type!=="github"&&a.type!=="external"},[c,ce,n]),fe=s.useCallback(()=>!!(c==="chat"||ce),[c,ce]),[ke,je]=s.useState([]),[L,T]=s.useState(()=>new Set(["lfm2.5-1.2b-instruct"])),[m,x]=s.useState(!1),M=s.useRef(!1),S=s.useCallback(r=>{T(a=>{const f=new Set(a);return f.has(r)?f.delete(r):f.add(r),f})},[]),H=s.useCallback(r=>{const a=n.filter(f=>f.type===r).map(f=>f.id);T(f=>{const y=a.every(j=>f.has(j)),k=new Set(f);return y?a.forEach(j=>k.delete(j)):a.forEach(j=>k.add(j)),k})},[n]),{history:A,historyRef:N,pushHistoryEntries:_,clearHistory:ne,historyToText:pe,buildCarryoverHistory:ht}=Ls(),mt=(r,a)=>{const f=new Set,y=a.filter(Boolean).filter((j,I,D)=>D.indexOf(j)===I),k=[];return y.forEach(j=>{const I=r[j];I&&I.trim()&&(k.push({id:j,text:I.trim()}),f.add(j))}),Object.entries(r).forEach(([j,I])=>{f.has(j)||!I||!I.trim()||k.push({id:j,text:I.trim()})}),k.length?k.map(({id:j,text:I})=>`${R(j)}:
${I}`).join(`

`):null};s.useEffect(()=>{M.current=t.isActive},[t.isActive]);const Se=h.map(r=>n.find(a=>a.id===r)).filter(r=>!!r&&(c==="compare"||r.id!==d)),ge=s.useMemo(()=>c!=="compare"?Se:[...Se].sort((r,a)=>{var k,j;const f=(k=re[r.id])==null?void 0:k.firstTokenTime,y=(j=re[a.id])==null?void 0:j.firstTokenTime;return f===void 0&&y===void 0?0:f===void 0?1:y===void 0?-1:f-y}),[c,Se,re]),{fastestTTFT:tt,fastestTotal:nt}=s.useMemo(()=>{if(c!=="compare")return{fastestTTFT:null,fastestTotal:null};let r=null,a=1/0,f=null,y=1/0,k=0,j=0;for(const I of Se){const D=re[I.id];if(D){if(D.firstTokenTime!==void 0){k++;const oe=D.firstTokenTime-D.startTime;oe<a&&(a=oe,r=I.id)}if(D.endTime!==void 0){j++;const oe=D.endTime-D.startTime;oe<y&&(y=oe,f=I.id)}}}return{fastestTTFT:k>=2?r:null,fastestTotal:j>=2?f:null}},[c,Se,re]),We=(r,a,f,y)=>{if(f==="analyze"){const dt=250+r*220/(a-1)-90,ut=dt*Math.PI/180;return{x:Math.cos(ut)*y,y:Math.sin(ut)*y,angle:dt}}const k=r*360/a-90,j=Math.cos(k*Math.PI/180)*y,I=Math.sin(k*Math.PI/180)*y;return{x:j,y:I,angle:k}},st=(r,a)=>{Z(a),r.dataTransfer.effectAllowed="move"},rt=r=>{r.preventDefault(),z(!0)},he=()=>{z(!1)},hn=r=>{if(r.preventDefault(),z(!1),C){if(c==="chat")v(C);else if(!h.includes(C)){if(!ye(C)){ue("Add your GitHub token in Settings for API model access with dedicated quota"),Z(null);return}u(a=>[...a,C])}Z(null)}},xt=r=>{if(c==="chat"){v(i===r?null:r);return}if(h.includes(r))if(Ae&&yt.current.includes(r)&&Ne){Me.current&&Me.current.abort();const f=yt.current.filter(k=>k!==r),y={};if(n.forEach(k=>{f.includes(k.id)&&k.response&&!k.error&&(y[k.id]=k.response)}),u(k=>k.filter(j=>j!==r)),Ee.has(r)&&Fe(k=>{const j=new Set(k);return j.delete(r),j}),(c==="analyze"||c==="debate")&&f.length<2){Ge(!1),Ke(!1),qe("This mode requires at least 2 participants."),Qe("Error");return}Et(Ne,y,f,{skipHistory:!0})}else u(f=>f.filter(y=>y!==r));else{if(!ye(r)){ue("Add your GitHub token in Settings for API model access with dedicated quota");return}u(a=>[...a,r])}},mn=r=>{const a=n.filter(k=>k.type===r).map(k=>k.id);if(a.length>0&&a.every(k=>h.includes(k))){u(k=>k.filter(j=>!a.includes(j)));return}if((r==="github"||r==="external")&&!fe()){ue("Add your GitHub token in Settings for API model access with dedicated quota");return}const y=b.filter(k=>k.type===r).map(k=>k.id);y.length>0&&u(k=>[...k,...y])},[xn,ze]=s.useState(null),[Ht,gt]=s.useState(new Set),[gn,bn]=s.useState(!1),[Ee,Fe]=s.useState(new Set),Ie=()=>Fe(new Set),[ot,yn]=s.useState(null),bt=s.useMemo(()=>{if(c==="compare")return 0;const r=Math.max(ae.baseRadius,ae.minRadius+ge.length*ae.radiusPerModel);if(!ot)return r;const f=Math.min(ot.width,ot.height)/2-140;return Math.max(r,f)},[c,ge.length,ot]);s.useEffect(()=>{const r=()=>{if(!be.current)return;const{clientWidth:f,clientHeight:y}=be.current;let k=Math.floor(f/(ae.cardWidth+ae.gapX));k=Math.max(1,k),ee(k),yn({width:f,height:y})},a=new ResizeObserver(f=>{for(let y of f)y.target===be.current&&r()});return be.current&&(a.observe(be.current),r()),()=>{be.current&&a.unobserve(be.current)}},[c]);const De=s.useRef(null),be=s.useRef(null),Le=s.useRef(null),Wt=s.useRef(null),at=s.useRef(new Map),vn=s.useRef(null),Ye=s.useRef({card:!1,background:!1}),wn=s.useRef({}),yt=s.useRef([]),{enqueueStreamDelta:kn,clearPendingStreamForModel:jn,resetPendingStream:vt}=Rs(o),{selectionRect:Sn,isSelecting:wt,dragSelectionActiveRef:Ft}=_s({rootContainerRef:Wt,visualizationAreaRef:be,arenaOffsetYRef:U,arenaTargetYRef:G,wheelRafRef:J,selectedModels:ge,cardRefs:at,selectedCardIds:Ee,setSelectedCardIds:Fe,suppressClickRef:Ye}),{dragState:Mn,handlePointerDown:Tn}=zs({visualizationAreaRef:be,cardRefs:at,selected:h,setSelected:u,mode:c,gridCols:O,getCirclePosition:We});s.useEffect(()=>()=>vt(),[vt]);const[ve,Re]=s.useState(null);s.useEffect(()=>{const r="arena-selecting",a=document.body;return wt?a.classList.add(r):a.classList.remove(r),()=>{a.classList.remove(r)}},[wt]);const it=s.useCallback(r=>r?!r.closest(tr):!1,[]),Cn=s.useCallback(r=>{if(it(r.target)){if(Ye.current.background){Ye.current.background=!1;return}ze(null),Ie(),Ye.current.background=!1}},[it,Ie]),En=s.useCallback(r=>{it(r.target)&&(r.preventDefault(),Re({x:r.clientX,y:r.clientY,type:"background"}))},[it]),Yt=s.useCallback(()=>{P(!0),F.current&&clearTimeout(F.current),F.current=window.setTimeout(()=>{P(!1),F.current=null},350)},[]),Xt=s.useRef(c),Xe=s.useCallback(r=>{r!==c&&(Yt(),Ge(!1),Y(r))},[c,Yt]);s.useEffect(()=>()=>{te.current&&clearTimeout(te.current)},[]),s.useEffect(()=>()=>{F.current&&clearTimeout(F.current)},[]),s.useEffect(()=>{const r=()=>Re(null);return window.addEventListener("click",r),()=>window.removeEventListener("click",r)},[]);const[Ae,Ge]=s.useState(!1),[Ue,Ke]=s.useState(!1),[$e,qe]=s.useState(""),Nn=s.useCallback(()=>{ne(),Ge(!1),Ke(!1),qe(""),Qe(null),Mt({}),o(r=>r.map(a=>({...a,response:"",thinking:void 0,error:void 0}))),Ce({}),gt(new Set)},[ne,o]),[Ln,Rn]=s.useState(!0),[An,_n]=s.useState("api"),[kt,jt]=s.useState(!1),St=s.useRef(null);s.useEffect(()=>{const r=f=>{St.current&&!St.current.contains(f.target)&&jt(!1)},a=f=>{f.key==="Escape"&&jt(!1)};return kt&&(document.addEventListener("mousedown",r),document.addEventListener("keydown",a)),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("keydown",a)}},[kt]);const[Ve,Qe]=s.useState(null),[,Mt]=s.useState({}),[zn,Gt]=s.useState(new Set),Tt=s.useRef(new Set),In=s.useRef(null),Ut=s.useRef({}),Kt=s.useRef(c),[Ct,qt]=s.useState(null),Dn=()=>{const r=new Set;Tt.current=r,Gt(r)},$n=r=>{Gt(a=>{if(a.has(r))return a;const f=new Set(a);return f.add(r),Tt.current=f,f})},Vt=s.useRef({compare:{responses:{},moderatorSynthesis:"",phaseLabel:null,executionTimes:{}},analyze:{responses:{},moderatorSynthesis:"",phaseLabel:null,executionTimes:{}},debate:{responses:{},moderatorSynthesis:"",phaseLabel:null,executionTimes:{}}}),Qt=s.useRef(n),Jt=s.useRef($e),Zt=s.useRef(Ve),en=s.useRef(re);s.useEffect(()=>{Qt.current=n},[n]),s.useEffect(()=>{Jt.current=$e},[$e]),s.useEffect(()=>{Zt.current=Ve},[Ve]),s.useEffect(()=>{en.current=re},[re]),s.useEffect(()=>{const r=["compare","analyze","debate"],a=Xt.current;if(r.includes(a)&&r.includes(c)&&a!==c){const f={};Qt.current.forEach(j=>{f[j.id]={response:j.response,thinking:j.thinking,error:j.error}}),Vt.current[a]={responses:f,moderatorSynthesis:Jt.current,phaseLabel:Zt.current,executionTimes:en.current};const y=Vt.current[c];Object.values(y.responses).some(j=>j.response&&j.response!=="")?(o(j=>j.map(I=>{var D,oe,Je;return{...I,response:((D=y.responses[I.id])==null?void 0:D.response)||"",thinking:(oe=y.responses[I.id])==null?void 0:oe.thinking,error:(Je=y.responses[I.id])==null?void 0:Je.error}})),qe(y.moderatorSynthesis),Qe(y.phaseLabel),Ce(y.executionTimes)):(ne(),o(j=>j.map(I=>({...I,response:"",thinking:void 0,error:void 0}))),qe(""),Qe(null),Ce({})),Ke(!1),Mt({}),gt(new Set)}Xt.current=c},[c,ne,o]);const{sendMessage:Et}=As({mode:c,moderator:d,selected:h,selectedCardIds:Ee,githubToken:ce,isGenerating:Ae,summarizeSessionResponses:mt,setLastQuery:le,setHoveredCard:ze,setPhaseLabel:Qe,setModeratorSynthesis:qe,setDiscussionTurnsByModel:Mt,resetFailedModels:Dn,markModelFailed:$n,failedModelsRef:Tt,currentDiscussionTurnRef:In,sessionModelIdsRef:yt,abortControllerRef:Me,thinkingStateRef:wn,conversationHistoryRef:N,pushHistoryEntries:_,historyToText:pe,buildCarryoverHistory:ht,setModelsData:o,modelIdToName:R,setExecutionTimes:Ce,setIsGenerating:Ge,setIsSynthesizing:Ke,setSpeaking:gt,enqueueStreamDelta:kn,clearPendingStreamForModel:jn,resetPendingStream:vt});s.useEffect(()=>{const r=a=>{if(a.key==="Escape"){const y=document.activeElement;if(y&&y!==document.body&&y.blur(),se){me(!1);return}if(ve){Re(null);return}if(Ee.size>0){Ie(),ze(null);return}if(E){V(!1);return}ze(null);return}if((a.metaKey||a.ctrlKey)&&(a.key==="a"||a.key==="A")){const y=a.target;if(y.tagName==="INPUT"||y.tagName==="TEXTAREA"||c==="chat")return;a.preventDefault(),h.length>0&&Fe(new Set(h));return}const f=a.target;if(!(f.tagName==="INPUT"||f.tagName==="TEXTAREA")){if(a.key==="ArrowRight"||a.key==="ArrowLeft"){a.preventDefault();const y=["chat","compare","analyze","debate"],k=y.indexOf(c);if(k!==-1){const j=a.key==="ArrowRight"?1:-1,I=(k+j+y.length)%y.length;Xe(y[I])}return}if(a.key==="m"||a.key==="M"){a.preventDefault(),V(!E);return}if((a.key==="Delete"||a.key==="Backspace")&&Ee.size>0){a.preventDefault(),u(y=>y.filter(k=>!Ee.has(k))),Ie();return}a.key.length===1&&!a.ctrlKey&&!a.metaKey&&!a.altKey&&De.current&&De.current.focus()}};return window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}},[E,se,ve,Ee,c,Xe,Ie]);const lt=s.useRef(!1),Nt=s.useRef(0),tn=r=>{const a=be.current;a&&a.style.setProperty("--arena-offset-y",`${r}px`)},Lt=r=>Math.max(-200,Math.min(ae.scrollClamp,r)),nn=()=>{const r=U.current,a=G.current,f=a-r;if(Math.abs(f)<.5){U.current=a,tn(a),J.current=null;return}const y=r+f*.35;U.current=y,tn(y),J.current=requestAnimationFrame(nn)},Rt=()=>{J.current==null&&(J.current=requestAnimationFrame(nn))};s.useEffect(()=>{const r=j=>{if(Ft.current)return;const I=j.target;if(I&&I.closest("input, textarea, [data-no-arena-scroll]"))return;j.preventDefault();const D=j.deltaY*.9,oe=G.current-D;G.current=Lt(oe),Rt()},a=j=>j?!!j.closest('input, textarea, [data-no-arena-scroll], [data-card], button, a, select, [role="button"]'):!1,f=j=>{if(j.touches.length!==1)return;const I=j.target;a(I)||(lt.current=!0,Nt.current=j.touches[0].clientY)},y=j=>{if(Ft.current||!lt.current||j.touches.length!==1)return;const I=j.target;if(a(I)){lt.current=!1;return}const D=j.touches[0].clientY,oe=D-Nt.current;Nt.current=D,j.preventDefault(),G.current=Lt(G.current+oe),Rt()},k=()=>{lt.current=!1};return window.addEventListener("touchstart",f,{passive:!0}),window.addEventListener("touchmove",y,{passive:!1}),window.addEventListener("touchend",k),window.addEventListener("touchcancel",k),window.addEventListener("wheel",r,{passive:!1}),()=>{window.removeEventListener("touchstart",f),window.removeEventListener("touchmove",y),window.removeEventListener("touchend",k),window.removeEventListener("touchcancel",k),window.removeEventListener("wheel",r),J.current!=null&&cancelAnimationFrame(J.current)}},[]);const[ct,Bn]=He("playground-bg-style","dots",{serialize:r=>r,deserialize:(r,a)=>r&&us.includes(r)?r:a}),Pn=n.find(r=>r.id===d),On=Ue?"responding":Ae?"waiting":$e?"done":"idle",Hn=Ue?"Synthesizing...":Ae?"Observing":$e?"Complete":"Ready",Wn=`${Ct?`translate(-50%, -50%) translate(${Ct.x}px, ${Ct.y}px)`:"translate(-50%, -50%)"} scale(1)`;s.useLayoutEffect(()=>{if(c!=="compare")return;const r={};ge.forEach(a=>{const f=at.current.get(a.id);f&&(r[a.id]=f.getBoundingClientRect())}),Ut.current=r},[c,ge.length,ge.map(r=>r.id).join(",")]),s.useEffect(()=>{if(Kt.current==="compare"&&c!=="compare"&&d&&be.current){const a=Ut.current[d],f=be.current.getBoundingClientRect();if(a&&f.width>0&&f.height>0){const y=f.left+f.width/2,k=c==="analyze"?bt-64:0,j=f.top+(f.height*.5+k),I=a.left+a.width/2-y,D=a.top+a.height/2-j;(Math.abs(I)>1||Math.abs(D)>1)&&(qt({x:I,y:D}),requestAnimationFrame(()=>qt(null)))}}Kt.current=c},[c,d,bt]);const Fn=ct==="none"?"":`bg-${ct}`,Yn=(r,a=280)=>r?r.length<=a?r:`…${r.slice(r.length-a)}`:"",sn=()=>{Me.current&&(Me.current.abort(),Ge(!1),Ke(!1))};return e.jsxs("div",{ref:Wt,className:`fixed inset-0 overflow-hidden text-white ${Fn}`,style:{backgroundColor:an[c],transition:"background-color 1s ease",...ct==="none"?{background:an[c]}:{},...wt?{userSelect:"none",WebkitUserSelect:"none"}:{}},onClick:Cn,onContextMenu:En,children:[t.isActive&&e.jsx(s.Suspense,{fallback:null,children:e.jsx(Zs,{onSendMessage:t.callbacks.current.onSendMessage,onScroll:t.callbacks.current.onScroll,onPinch:t.callbacks.current.onPinch,onHover:t.callbacks.current.onHover,gestureActiveArea:{minX:.7,maxX:1,minY:0,maxY:1},onGestureState:t.setGestureState,onError:t.setCameraError,onPerformance:t.setPerformanceMetrics})}),$&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/95 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col items-center gap-5 text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 border-2 border-slate-700 border-t-blue-500 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-0 w-12 h-12 border-2 border-transparent border-b-emerald-500/50 rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"text-white/80 text-sm font-medium",children:B||"Connecting to models..."}),W>0&&e.jsxs("p",{className:"text-white/40 text-xs tabular-nums",children:["Attempt ",W," of 8"]})]}),e.jsxs("button",{onClick:Q,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white/70 hover:text-white bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-lg transition-all active:scale-95",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Now"]})]})}),e.jsx(ms,{mode:c,setMode:Xe,setHoveredCard:ze,clearSelection:Ie,showDock:E,setShowDock:V,onOpenSettings:()=>me(!0),gestureButtonSlot:e.jsx(s.Suspense,{fallback:null,children:e.jsx(Js,{inHeader:!0,appContext:c,onStopGeneration:()=>{if(c==="chat"&&Le.current){Le.current.stopGeneration();return}sn()},onSendMessage:r=>{if(c==="chat"&&Le.current){Le.current.sendMessage(r,!0);return}const a=c==="compare"||c==="analyze"||c==="debate"?h:[];a.length>0&&Et(r,{},a)},onScroll:r=>{if(c==="chat"&&Le.current){Le.current.scroll(r);return}G.current=Lt(G.current+r),Rt()},onHover:(r,a)=>{const f=r*window.innerWidth,y=a*window.innerHeight,k=document.elementFromPoint(f,y);if(k){const j=k.closest("[data-gesture-mode-track]");if(j){const oe=j.getBoundingClientRect(),Je=f-oe.left,dt=oe.width,ut=Math.floor(Je/dt*5),At=["chat","compare","analyze","debate"][Math.max(0,Math.min(4,ut))];At&&At!==c&&Xe(At);return}const I=document.querySelector('[data-gesture-hovered="true"]'),D=k.closest('button, a, [role="button"], [data-clickable], .cursor-pointer, [onclick]')||k;D!==I?(I&&(I.removeAttribute("data-gesture-hovered"),I.dispatchEvent(new PointerEvent("pointerleave",{bubbles:!1,cancelable:!0})),I.dispatchEvent(new MouseEvent("mouseleave",{bubbles:!1,cancelable:!0})),I.dispatchEvent(new MouseEvent("mouseout",{bubbles:!0,cancelable:!0}))),D.setAttribute("data-gesture-hovered","true"),D.dispatchEvent(new PointerEvent("pointerenter",{bubbles:!1,cancelable:!0,clientX:f,clientY:y})),D.dispatchEvent(new PointerEvent("pointermove",{bubbles:!0,cancelable:!0,clientX:f,clientY:y})),D.dispatchEvent(new MouseEvent("mouseenter",{bubbles:!1,cancelable:!0,clientX:f,clientY:y})),D.dispatchEvent(new MouseEvent("mouseover",{bubbles:!0,cancelable:!0,clientX:f,clientY:y}))):D===I&&(D.dispatchEvent(new PointerEvent("pointermove",{bubbles:!0,cancelable:!0,clientX:f,clientY:y})),D.dispatchEvent(new MouseEvent("mousemove",{bubbles:!0,cancelable:!0,clientX:f,clientY:y})))}},onPinch:(r,a)=>{const f=r*window.innerWidth,y=a*window.innerHeight,k=document.elementFromPoint(f,y);if(k){const j=oe=>{oe.dispatchEvent(new PointerEvent("pointerdown",{bubbles:!0,cancelable:!0,clientX:f,clientY:y,pointerId:1,pointerType:"touch",isPrimary:!0})),oe.dispatchEvent(new PointerEvent("pointerup",{bubbles:!0,cancelable:!0,clientX:f,clientY:y,pointerId:1,pointerType:"touch",isPrimary:!0})),oe.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,clientX:f,clientY:y})),oe.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0,cancelable:!0,clientX:f,clientY:y})),oe.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,clientX:f,clientY:y}))},I=k.closest('button, a, [role="button"], [data-clickable], .cursor-pointer, [onclick]');j(I||k);const D=document.createElement("div");D.style.position="fixed",D.style.left=`${f}px`,D.style.top=`${y}px`,D.style.width="20px",D.style.height="20px",D.style.background="rgba(236, 72, 153, 0.5)",D.style.borderRadius="50%",D.style.transform="translate(-50%, -50%)",D.style.pointerEvents="none",D.style.zIndex="9999",document.body.appendChild(D),D.animate([{transform:"translate(-50%, -50%) scale(1)",opacity:1},{transform:"translate(-50%, -50%) scale(4)",opacity:0}],{duration:400}).onfinish=()=>D.remove()}},onModeChange:r=>{const a=["chat","compare","analyze","debate"],f=a.indexOf(c);let y;r==="next"?y=(f+1)%a.length:y=(f-1+a.length)%a.length,Xe(a[y])}})})}),e.jsxs("div",{style:{paddingLeft:"1.5rem",paddingRight:"0"},children:[E&&e.jsx("div",{className:"fixed inset-0 z-[55] bg-black/10 backdrop-blur-[1px] transition-opacity duration-300",onClick:()=>V(!1)}),e.jsx(fs,{showDock:E,availableModels:b,allSelectedByType:w,totalModelsByType:g,handleDragStart:st,handleModelToggle:xt,handleAddGroup:mn,dockRef:ie,mode:c,allModels:n,setShowDock:V,chatSelectedModels:L,onToggleChatModel:S,onToggleChatGroup:H}),c==="chat"&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex h-screen w-full relative z-[10]",children:e.jsx("div",{className:"flex-1 relative px-2 sm:px-6 pt-20 pb-6",children:e.jsx(qs,{children:e.jsx(s.Suspense,{fallback:e.jsxs("div",{className:"flex items-center justify-center h-full text-white/50 gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/20 border-t-white/60 rounded-full animate-spin"}),"Loading..."]}),children:e.jsx(er,{ref:Le,models:n,selectedModels:L,onToggleModel:S,githubToken:ce,openrouterKey:K,messages:ke,setMessages:je,isGenerating:m,setIsGenerating:x,gesturesActive:t.isActive})})})})})}),c!=="chat"&&e.jsxs("div",{className:"flex h-screen w-full relative",children:[e.jsx("div",{className:"relative flex-1 transition-all duration-300 flex flex-col pt-24",children:e.jsx("div",{ref:be,onDragOver:rt,onDragLeave:he,onDrop:hn,className:"relative w-full h-full z-10 transition-all duration-300",style:{position:"relative",display:"flex",alignItems:c==="compare"?"flex-start":"center",justifyContent:"center","--arena-offset-y":`${U.current}px`,transform:c==="analyze"||c==="debate"?`translateY(calc(var(--arena-offset-y) - 50px)) scale(${q?1.02:1})`:`translateY(var(--arena-offset-y)) scale(${q?1.02:1})`,willChange:"transform",border:q?"2px dashed rgba(59, 130, 246, 0.4)":"2px dashed transparent",borderRadius:q?"24px":"0px",transition:"transform 0s linear",...c==="compare"?{minHeight:"300px",paddingBottom:"120px"}:c==="analyze"||c==="debate"?{height:"100%",minHeight:"100%",overflow:"hidden"}:{height:"100%",minHeight:"100%",overflow:"hidden"},...q?{background:"rgba(59, 130, 246, 0.05)"}:{}},children:e.jsx(Ds,{mode:c,selectedModels:ge,gridCols:O,speaking:Ht,selectedCardIds:Ee,setSelectedCardIds:Fe,executionTimes:re,failedModels:zn,cardRefs:at,handlePointerDown:Tn,dragState:Mn,handleModelToggle:xt,setContextMenu:Re,suppressClickRef:Ye,getTailSnippet:Yn,hoveredCard:xn,setHoveredCard:ze,layoutRadius:bt,getCirclePosition:We,moderatorModel:Pn,moderatorId:d,orchestratorTransform:Wn,orchestratorStatus:On,orchestratorPhaseLabel:Hn,moderatorSynthesis:$e,isSynthesizing:Ue,isGenerating:Ae,phaseLabel:Ve,linesTransitioning:X,lastSelectedCardRef:vn,orchestratorAutoMode:Ln,orchestratorAutoScope:An,showOrchestratorMenu:kt,setShowOrchestratorMenu:jt,setOrchestratorAutoMode:Rn,setOrchestratorAutoScope:_n,orchestratorMenuRef:St,availableModels:b,setModerator:p,fastestTTFT:tt,fastestTotal:nt})})}),c!=="compare"&&e.jsx("div",{className:"transcript-panel w-[400px] xl:w-[480px] flex flex-col border-l border-white/5 bg-slate-900/20 backdrop-blur-sm z-40 relative h-full",children:e.jsx(s.Suspense,{fallback:null,children:e.jsx(Qs,{history:A,models:n,mode:c,onSelectPrompt:r=>{De.current&&(De.current.value=r,De.current.focus())},onNewSession:Nn,className:"pt-24 pb-6 mask-fade-top",phaseLabel:Ve,isGenerating:Ae,isSynthesizing:Ue,speakingCount:Ht.size,totalParticipants:ge.length})})})]})]}),e.jsx(Gs,{rect:Sn}),we&&e.jsx("div",{className:"fixed bottom-20 left-1/2 -translate-x-1/2 z-[200] animate-in slide-in-from-bottom-4 fade-in duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-amber-500/10 border border-amber-500/30 backdrop-blur-md shadow-xl",children:[e.jsx("svg",{className:"w-5 h-5 text-amber-400 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("span",{className:"text-sm text-amber-100",children:we}),e.jsx("button",{onClick:()=>{l(null),me(!0)},className:"ml-2 px-3 py-1 text-xs font-medium text-amber-900 bg-amber-400 hover:bg-amber-300 rounded-md transition-colors",children:"Open Settings"}),e.jsx("button",{onClick:()=>l(null),className:"ml-1 p-1 text-amber-400/60 hover:text-amber-400 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx(s.Suspense,{fallback:null,children:e.jsx(Vs,{open:se,onClose:()=>me(!1),token:ce,setToken:xe,openrouterKey:K,setOpenrouterKey:de,bgStyle:ct,setBgStyle:Bn})}),(c==="compare"||c==="analyze"||c==="debate")&&e.jsx(ps,{inputRef:De,inputFocused:gn,setInputFocused:bn,onSendMessage:Et,isGenerating:Ae||Ue,onStop:sn,placeholder:c==="compare"?void 0:"Steer the discussion...",className:`fixed bottom-0 left-0 z-[100] pb-6 px-3 sm:px-4 flex justify-center items-end pointer-events-none transition-all duration-300 ${c==="compare"?"right-0":"right-[400px] xl:right-[480px]"}`,style:{paddingBottom:"calc(1.5rem + env(safe-area-inset-bottom))"}}),ve&&e.jsx("div",{className:"fixed bg-slate-800 border border-slate-700 rounded-lg shadow-xl py-1 z-[200] min-w-[160px]",style:{top:ve.y,left:ve.x},onClick:r=>r.stopPropagation(),children:ve.type==="background"?e.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-slate-200 hover:bg-slate-700 transition-colors flex items-center gap-2",onClick:()=>{V(!0),Re(null)},children:[e.jsx("svg",{className:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Model"]}):ve.modelId?e.jsxs(e.Fragment,{children:[c!=="compare"&&ve.modelId!==d&&e.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-slate-200 hover:bg-slate-700 transition-colors flex items-center gap-2",onClick:()=>{p(ve.modelId),Re(null)},children:[e.jsx("svg",{className:"w-4 h-4 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),"Set as Orchestrator"]}),e.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-slate-700 transition-colors flex items-center gap-2",onClick:()=>{const r=ve.modelId===d;if(xt(ve.modelId),r&&c!=="compare"){const a=h.filter(f=>f!==ve.modelId);a.length>0?p(a[0]):p("")}Re(null)},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Remove"]})]}):null})]})}function sr(){return e.jsx(Us,{children:e.jsx(nr,{})})}ns.createRoot(document.getElementById("root")).render(e.jsx(ss.StrictMode,{children:e.jsx(sr,{})}));export{us as B,dn as E,ur as M,ps as P,He as a,fr as b,js as f,zt as s,Ks as u};
