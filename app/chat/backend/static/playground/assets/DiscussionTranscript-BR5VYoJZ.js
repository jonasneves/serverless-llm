import{r as m,j as e,M as $,d as A}from"./react-vendor-Cr2kZ6Hw.js";import{F as u}from"./FormattedContent-C59IBQBw.js";import{M as O}from"./index-DcWow5Tm.js";import"./markdown-BhL5aFst.js";import"./math-render-BeslBgx1.js";import"./syntax-highlight-xu6YVAlF.js";function L({history:r,models:N,mode:p,onSelectPrompt:b,onNewSession:f,className:w="",phaseLabel:h,isGenerating:i,isSynthesizing:n,speakingCount:k=0,totalParticipants:o=0}){var v;const _=m.useRef(null),d=m.useRef(null),j=p?O[p]:[];m.useEffect(()=>{d.current&&d.current.scrollIntoView({behavior:"smooth"})},[r.length,(v=r[r.length-1])==null?void 0:v.content]);const C=s=>N.find(l=>l.name===s),y=i||n,g=o-k,R=o>0?g/o*100:0,M=(s,l)=>{if(s.role==="user")return e.jsx("div",{className:"flex justify-end mb-6",children:e.jsxs("div",{className:"max-w-[85%] bg-blue-600/20 border border-blue-500/30 rounded-2xl rounded-tr-sm px-4 py-3 text-slate-100",children:[e.jsx("div",{className:"text-[10px] text-blue-300 uppercase tracking-wider mb-1 font-bold text-right",children:"You"}),e.jsx("div",{className:"whitespace-pre-wrap text-sm",children:s.content})]})},l);if(s.kind==="council_chairman"||s.kind==="council_synthesis"||s.kind==="council_ranking"||s.kind==="roundtable_synthesis"||s.kind==="roundtable_analysis"||s.kind==="compare_summary"){let a="Chairman",t=s.content;const c=s.content.indexOf(":");return s.kind==="council_chairman"&&c!==-1&&c<30?(a=s.content.slice(0,c).trim(),t=s.content.slice(c+1).trim()):s.kind==="compare_summary"?a="Summary":s.kind==="council_ranking"&&(a="Council Vote Results",t.startsWith(`Anonymous Rankings:
`)&&(t=t.replace(`Anonymous Rankings:
`,""))),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"max-w-[90%] w-full bg-slate-800/40 border border-slate-700/50 rounded-xl px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 justify-center",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-widest text-orange-400 font-bold",children:a}),e.jsx("div",{className:"h-px flex-1 bg-slate-700/50"})]}),e.jsx("div",{className:"text-slate-300 text-sm italic text-center",children:e.jsx(u,{text:t,showThinking:!1})})]})},l)}if(s.kind==="council_turn"||s.kind==="roundtable_turn"){const a=s.content.indexOf(`
`);let t="Model",c=s.content;a!==-1&&(t=s.content.slice(0,a).trim(),c=s.content.slice(a+1).trim());const E=t.split("Â·")[0].split(":")[0].trim(),x=C(E),T=(x==null?void 0:x.color)||"#94a3b8";return e.jsxs("div",{className:"flex flex-col items-start mb-6 max-w-[90%]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 pl-1",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border border-white/10 shadow-sm",style:{backgroundColor:T}}),e.jsx("span",{className:"text-xs font-bold text-slate-300",children:t.replace(":","")})]}),e.jsx("div",{className:"bg-slate-800/60 border border-slate-700/60 rounded-2xl rounded-tl-sm px-4 py-3 text-slate-200 w-full",children:e.jsx(u,{text:c,showThinking:!1})})]},l)}return e.jsx("div",{className:"flex items-start mb-6",children:e.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl rounded-tl-sm px-4 py-3 text-slate-200",children:e.jsx(u,{text:s.content})})},l)};return e.jsxs("div",{ref:_,className:`flex-1 overflow-y-auto px-4 py-6 scroll-smooth ${w} [mask-image:linear-gradient(to_bottom,transparent_0%,black_2rem,black_100%)]`,"data-no-arena-scroll":!0,children:[y&&h&&e.jsxs("div",{className:"sticky top-0 z-10 mb-4",children:[e.jsx("div",{className:`px-4 py-3 rounded-xl backdrop-blur-md transition-all duration-300 ${n?"bg-yellow-500/20 border border-yellow-500/40":"bg-slate-800/80 border border-slate-700/60"}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${n?"bg-yellow-400":"bg-blue-400"} animate-pulse`}),e.jsx("span",{className:`text-xs font-semibold uppercase tracking-wider ${n?"text-yellow-300":"text-slate-300"}`,children:h})]}),i&&!n&&o>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 h-1.5 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-400 transition-all duration-300 rounded-full",style:{width:`${R}%`}})}),e.jsxs("span",{className:"text-[10px] text-slate-400 tabular-nums",children:[g,"/",o]})]}),n&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"w-4 h-4 text-yellow-400 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),e.jsx("span",{className:"text-[10px] text-yellow-300",children:"Working..."})]})]})}),e.jsx("div",{className:"pointer-events-none",style:{height:"24px",marginTop:"-4px",background:"linear-gradient(to bottom, rgba(15, 23, 42, 0.6), transparent)"}})]}),e.jsxs("div",{className:`max-w-3xl mx-auto flex flex-col ${r.length>0?"justify-start":"justify-end"} min-h-full`,children:[r.length===0&&e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-500 pb-20",children:[e.jsx($,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg mb-8 opacity-50",children:"Start a discussion to see the transcript."}),j.length>0&&b&&e.jsxs("div",{className:"flex flex-col gap-3 w-full items-center",children:[e.jsx("p",{className:"text-sm text-slate-400 text-center mb-2",children:"Try an example:"}),j.map((s,l)=>e.jsx("button",{onClick:()=>b(s),className:"w-[85%] max-w-[340px] text-sm text-slate-300 hover:text-blue-400 bg-slate-800/50 hover:bg-slate-700/50 border border-slate-700/40 hover:border-blue-400/40 rounded-xl px-5 py-3 transition-all active:scale-[0.98] text-left",children:s},l))]})]}),r.map(M),r.length>0&&!i&&!n&&f&&e.jsx("div",{className:"flex justify-center py-8",children:e.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2.5 text-sm font-medium text-slate-300 hover:text-white bg-slate-800/60 hover:bg-slate-700/80 border border-slate-700/50 hover:border-slate-600 rounded-full transition-all active:scale-[0.97] shadow-lg shadow-black/20",children:[e.jsx(A,{size:16}),"New Round"]})}),e.jsx("div",{ref:d})]})]})}export{L as default};
