import{r as o,j as e,Z as se,t as we,u as ie,v as ve,T as ye,U as qe,w as Qe,x as Ge,y as Ze,p as Fe,z as Ve,X as Ue,D as Ie}from"./react-vendor-Cr2kZ6Hw.js";import{F as oe}from"./FormattedContent-C59IBQBw.js";import{g as et,a as tt,S as rt,P as st,f as je,s as Ne}from"./index-BbpMjbXf.js";import"./markdown-BhL5aFst.js";import"./math-render-BeslBgx1.js";import"./syntax-highlight-xu6YVAlF.js";function Se(i,f){const T=Math.min(i.x,f.x),x=Math.min(i.y,f.y),k=Math.max(i.x,f.x),h=Math.max(i.y,f.y);return{left:T,top:x,right:k,bottom:h,width:k-T,height:h-x}}function nt(i,f){return!(i.right<f.left||i.left>f.right||i.bottom<f.top||i.top>f.bottom)}function lt({containerRef:i,itemRefs:f,setSelectedIndices:T}){const[x,k]=o.useState(null),h=o.useRef(!1);o.useEffect(()=>{h.current=x!=null},[x]),o.useEffect(()=>{const z=u=>{if(u.button!==0||!i.current)return;const C=u.target;if(!C||C.closest('button, a, input, textarea, select, [role="button"]'))return;const c=i.current.getBoundingClientRect();if(!(u.clientX>=c.left&&u.clientX<=c.right&&u.clientY>=c.top&&u.clientY<=c.bottom))return;const R={x:u.clientX,y:u.clientY};u.preventDefault(),h.current=!0,k({origin:R,current:R,active:!1})};return window.addEventListener("mousedown",z,!0),()=>window.removeEventListener("mousedown",z,!0)},[i]),o.useEffect(()=>{if(!x||!i.current)return;const z=j=>j.preventDefault();document.addEventListener("selectstart",z);const u=j=>{const c={x:j.clientX,y:j.clientY};k(m=>{if(!m)return m;const R=Se(m.origin,c),$=m.active||R.width>2||R.height>2;return{...m,current:c,active:$}})},C=j=>{h.current=!1;const c={x:j.clientX,y:j.clientY};k(m=>{if(!m)return null;const R=Se(m.origin,c);if(m.active&&R.width>1&&R.height>1){const $=[];for(const[Q,E]of f.current.entries()){const F=E.getBoundingClientRect();nt({left:R.left,right:R.right,top:R.top,bottom:R.bottom},{left:F.left,right:F.right,top:F.top,bottom:F.bottom})&&$.push(Q)}T(new Set($))}return null})};return window.addEventListener("mousemove",u),window.addEventListener("mouseup",C),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",C),document.removeEventListener("selectstart",z)}},[x,i,f,T]);const b=o.useMemo(()=>{if(!x||!x.active||!i.current)return null;const z=i.current.getBoundingClientRect(),u=Se(x.origin,x.current);return u.width<=0||u.height<=0?null:{left:u.left-z.left,top:u.top-z.top,width:u.width,height:u.height}},[x,i]),v=o.useCallback(()=>{k(null),h.current=!1},[]);return{selectionRect:b,isSelecting:x!=null,dragSelectionActiveRef:h,clearSelection:v}}const at=6e4;function ot(){const i=o.useRef(new Map),f=o.useRef(null),T=b=>{const v=i.current.get(b);return v?Date.now()-v<at:!1};return{sortModels:b=>{const v=b.map(c=>({...c,priority:et(c.id,c.type||"self-hosted",c.priority),isRateLimited:T(c.id),isLastSuccessful:c.id===f.current})),z=v.filter(c=>!c.isRateLimited),u=v.filter(c=>c.isRateLimited),C=z.sort((c,m)=>c.isLastSuccessful!==m.isLastSuccessful?c.isLastSuccessful?-1:1:c.priority!==m.priority?c.priority-m.priority:c.type!==m.type?c.type==="self-hosted"?-1:1:c.id.localeCompare(m.id)),j=u.sort((c,m)=>c.priority!==m.priority?c.priority-m.priority:c.id.localeCompare(m.id));return[...C,...j]},recordRateLimit:b=>{i.current.set(b,Date.now())},recordSuccess:b=>{f.current=b,i.current.delete(b)},isRecentlyRateLimited:T,getLastSuccessfulModel:()=>f.current}}function it(i){const[f,T]=o.useState([]);return o.useEffect(()=>{const x=i.match(/```json\s*([\s\S]*?)\s*```/);if(x)try{let k=x[1];k=k.replace(/[\\']/g,'"').replace(/,\s*}/g,"}").replace(/,\s*]/g,"]").replace(/}\s*[\\]+\s*$/g,"}").replace(/"\s*"\s*$/g,"").trim();const h=JSON.parse(k);if(h.options&&Array.isArray(h.options)){const b=h.options.filter(v=>v.id&&v.label&&v.value);b.length>0?T(b):T([])}}catch(k){console.error("Failed to parse gesture options:",k),T([])}else T([])},[i]),f}function ke(i){return i.replace(/```json[\s\S]*?```/g,"").trim()}const ct=1800;function ut({content:i,onSelect:f,isInline:T=!1}){const x=it(i),[k,h]=o.useState(null),[b,v]=o.useState({}),z=o.useRef(0),u=o.useRef(0);o.useEffect(()=>{const E=F=>{var N;const _=(N=F.detail)==null?void 0:N.target;if(_&&_.hasAttribute("data-gesture-option")){const L=_.getAttribute("data-gesture-option");L&&L!==k&&(h(L),C(L))}else k&&(h(null),j())};return window.addEventListener("gesture-hover",E),()=>{window.removeEventListener("gesture-hover",E),j()}},[k]);const C=E=>{j(),z.current=Date.now();const F=()=>{const _=Date.now()-z.current,N=Math.min(_/ct*100,100);if(v(L=>({...L,[E]:N})),N>=100){const L=x.find(W=>W.id===E);L&&(f(L.value),j())}else u.current=requestAnimationFrame(F)};u.current=requestAnimationFrame(F)},j=()=>{u.current&&cancelAnimationFrame(u.current),v({})},c=E=>{h(E),C(E)},m=()=>{h(null),j()};if(x.length===0)return null;const R=T?"w-full mt-3":"w-full",$=T?"grid grid-cols-2 gap-2":"flex flex-col gap-2.5",Q=E=>T?`relative overflow-hidden rounded-lg font-medium text-xs border transition-all duration-200 text-center min-h-[40px] flex items-center justify-center px-3 py-2 ${E?"bg-blue-500/20 border-blue-500/50 text-white shadow-lg shadow-blue-500/10":"bg-slate-800/60 border-slate-700/60 text-slate-200 hover:bg-slate-800/80 hover:border-slate-700/80"}`:`relative overflow-hidden rounded-xl font-medium text-sm border transition-all duration-200 w-full text-left min-h-[52px] flex items-center px-4 py-3 ${E?"bg-blue-500/20 border-blue-500/50 text-white shadow-lg shadow-blue-500/10 scale-[1.02]":"bg-slate-800/60 border-slate-700/60 text-slate-200 hover:bg-slate-800/80 hover:border-slate-700/80"}`;return e.jsxs("div",{className:R,children:[!T&&e.jsxs("div",{className:"flex items-center gap-2 mb-3 px-1",children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider text-slate-400",children:"Quick Actions"}),e.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-slate-700/50 to-transparent"})]}),e.jsx("div",{className:$,children:x.map(E=>{const F=b[E.id]||0,_=k===E.id;return e.jsxs("button",{onClick:()=>f(E.value),onMouseEnter:()=>c(E.id),onMouseLeave:m,"data-gesture-option":E.id,className:Q(_),children:[_&&F>0&&e.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-gradient-to-r from-blue-400 to-blue-500 transition-all duration-75",style:{width:`${F}%`}}),e.jsx("span",{className:"relative z-10",children:E.label})]},E.id)})})]})}function dt({models:i,selectedModelId:f,onSelectModel:T,autoMode:x,setAutoMode:k,autoModeScope:h,setAutoModeScope:b,isGenerating:v}){const[z,u]=o.useState(null),[C,j]=o.useState(""),c=o.useRef(null),m=o.useRef(null),R=o.useMemo(()=>i.filter(n=>n.type==="self-hosted"),[i]),$=o.useMemo(()=>i.filter(n=>n.type==="github"),[i]),Q=o.useMemo(()=>i.filter(n=>n.type==="external"),[i]),E=o.useMemo(()=>R.filter(n=>!C||n.name.toLowerCase().includes(C.toLowerCase())),[R,C]),F=o.useMemo(()=>$.filter(n=>!C||n.name.toLowerCase().includes(C.toLowerCase())),[$,C]),_=o.useMemo(()=>Q.filter(n=>!C||n.name.toLowerCase().includes(C.toLowerCase())),[Q,C]),N=i.find(n=>n.id===f);o.useEffect(()=>{const n=U=>{c.current&&!c.current.contains(U.target)&&u(null)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]),o.useEffect(()=>{const n=U=>{U.key==="Escape"&&u(null)};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[]);const L=n=>{k(!0),b(n),u(null),j("")},W=(n,U)=>{U.stopPropagation(),z===n?(u(null),j("")):(u(n),j(""),setTimeout(()=>{var ne;return(ne=m.current)==null?void 0:ne.focus()},50))},G=n=>{k(!1),T(n),u(null),j("")},X=x&&h==="local",V=x&&h==="api",J=x&&h==="external",te=!x&&(N==null?void 0:N.type)==="self-hosted",K=!x&&(N==null?void 0:N.type)==="github",Y=!x&&(N==null?void 0:N.type)==="external",re=n=>n==="local"?X?"Self-Hosted Auto":te&&(N==null?void 0:N.name)||"Self-Hosted":n==="api"?V?"GitHub Auto":K&&(N==null?void 0:N.name)||"GitHub":J?"External Auto":Y&&(N==null?void 0:N.name)||"External";return e.jsxs("div",{className:"relative flex items-center gap-1 bg-slate-800/50 rounded-lg p-1 border border-slate-700/50 backdrop-blur-sm",ref:c,children:[e.jsxs("div",{className:"relative flex items-center",children:[e.jsxs("button",{onClick:()=>L("local"),disabled:v,className:`h-7 pl-3 pr-1 flex items-center gap-1.5 rounded-l-md transition-all active:scale-95 text-xs font-medium whitespace-nowrap ${X||te?"bg-emerald-500/20 text-emerald-300":"text-slate-400 hover:text-slate-300 hover:bg-slate-700/30"}`,children:[X?e.jsx(se,{size:12,className:"text-emerald-400"}):e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsx("span",{className:"max-w-[120px] truncate",children:re("local")})]}),e.jsx("button",{onClick:n=>W("local",n),disabled:v,className:`h-7 px-1 flex items-center rounded-r-md transition-all ${X||te?"bg-emerald-500/20 text-emerald-400":"text-slate-500 hover:text-slate-300 hover:bg-slate-700/30"}`,children:e.jsx(we,{size:12,className:`transition-transform ${z==="local"?"rotate-180":""}`})}),z==="local"&&R.length>0&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 w-56 bg-slate-800/95 backdrop-blur-md border border-slate-700 rounded-lg shadow-2xl z-[100] overflow-hidden animate-in fade-in slide-in-from-top-1 duration-150",children:[R.length>5&&e.jsx("div",{className:"px-2 py-2 border-b border-slate-700/50",children:e.jsxs("div",{className:"relative",children:[e.jsx(ie,{size:12,className:"absolute left-2 top-1/2 -translate-y-1/2 text-slate-500"}),e.jsx("input",{ref:m,type:"text",placeholder:"Search...",value:C,onChange:n=>j(n.target.value),className:"w-full pl-7 pr-2 py-1 text-xs bg-slate-700/50 border border-slate-600/50 rounded text-slate-200 placeholder-slate-500 focus:outline-none focus:border-emerald-500/50"})]})}),e.jsxs("button",{onClick:()=>L("local"),className:`w-full px-3 py-2 text-left text-xs font-medium transition-colors flex items-center justify-between ${X?"bg-emerald-500/20 text-emerald-300":"text-slate-300 hover:bg-slate-700/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{size:12,className:"text-emerald-400"}),e.jsx("span",{children:"Auto (Smart Fallback)"})]}),X&&e.jsx("span",{className:"text-emerald-400",children:"âœ“"})]}),e.jsx("div",{className:"border-t border-slate-700/50"}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:E.map(n=>e.jsxs("button",{onClick:()=>G(n.id),className:`w-full px-3 py-2 text-left text-xs font-medium transition-colors flex items-center justify-between ${!x&&f===n.id?"bg-emerald-500/20 text-slate-200":"text-slate-300 hover:bg-slate-700/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500/50"}),e.jsx("span",{children:n.name})]}),!x&&f===n.id&&e.jsx("span",{className:"text-emerald-400",children:"âœ“"})]},n.id))})]})]}),e.jsx("div",{className:"w-px h-5 bg-slate-600/50"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsxs("button",{onClick:()=>L("api"),disabled:v,className:`h-7 pl-3 pr-1 flex items-center gap-1.5 rounded-l-md transition-all active:scale-95 text-xs font-medium whitespace-nowrap ${V||K?"bg-blue-500/20 text-blue-300":"text-slate-400 hover:text-slate-300 hover:bg-slate-700/30"}`,children:[V?e.jsx(se,{size:12,className:"text-blue-400"}):e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{className:"max-w-[120px] truncate",children:re("api")})]}),e.jsx("button",{onClick:n=>W("api",n),disabled:v,className:`h-7 px-1 flex items-center rounded-r-md transition-all ${V||K?"bg-blue-500/20 text-blue-400":"text-slate-500 hover:text-slate-300 hover:bg-slate-700/30"}`,children:e.jsx(we,{size:12,className:`transition-transform ${z==="api"?"rotate-180":""}`})}),z==="api"&&$.length>0&&e.jsxs("div",{className:"absolute top-full right-0 mt-1 w-64 bg-slate-800/95 backdrop-blur-md border border-slate-700 rounded-lg shadow-2xl z-[100] overflow-hidden animate-in fade-in slide-in-from-top-1 duration-150",children:[$.length>5&&e.jsx("div",{className:"px-2 py-2 border-b border-slate-700/50",children:e.jsxs("div",{className:"relative",children:[e.jsx(ie,{size:12,className:"absolute left-2 top-1/2 -translate-y-1/2 text-slate-500"}),e.jsx("input",{ref:m,type:"text",placeholder:"Search models...",value:C,onChange:n=>j(n.target.value),className:"w-full pl-7 pr-2 py-1 text-xs bg-slate-700/50 border border-slate-600/50 rounded text-slate-200 placeholder-slate-500 focus:outline-none focus:border-blue-500/50"})]})}),e.jsxs("button",{onClick:()=>L("api"),className:`w-full px-3 py-2 text-left text-xs font-medium transition-colors flex items-center justify-between ${V?"bg-blue-500/20 text-blue-300":"text-slate-300 hover:bg-slate-700/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{size:12,className:"text-blue-400"}),e.jsx("span",{children:"Auto (Smart Fallback)"})]}),V&&e.jsx("span",{className:"text-blue-400",children:"âœ“"})]}),e.jsx("div",{className:"border-t border-slate-700/50"}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:F.map(n=>e.jsxs("button",{onClick:()=>G(n.id),className:`w-full px-3 py-2 text-left text-xs font-medium transition-colors flex items-center justify-between ${!x&&f===n.id?"bg-blue-500/20 text-slate-200":"text-slate-300 hover:bg-slate-700/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500/50"}),e.jsx("span",{children:n.name})]}),!x&&f===n.id&&e.jsx("span",{className:"text-blue-400",children:"âœ“"})]},n.id))})]})]}),e.jsx("div",{className:"w-px h-5 bg-slate-600/50"}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsxs("button",{onClick:()=>L("external"),disabled:v,className:`h-7 pl-3 pr-1 flex items-center gap-1.5 rounded-l-md transition-all active:scale-95 text-xs font-medium whitespace-nowrap ${J||Y?"bg-purple-500/20 text-purple-300":"text-slate-400 hover:text-slate-300 hover:bg-slate-700/30"}`,children:[J?e.jsx(se,{size:12,className:"text-purple-400"}):e.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),e.jsx("span",{className:"max-w-[120px] truncate",children:re("external")})]}),e.jsx("button",{onClick:n=>W("external",n),disabled:v,className:`h-7 px-1 flex items-center rounded-r-md transition-all ${J||Y?"bg-purple-500/20 text-purple-400":"text-slate-500 hover:text-slate-300 hover:bg-slate-700/30"}`,children:e.jsx(we,{size:12,className:`transition-transform ${z==="external"?"rotate-180":""}`})}),z==="external"&&Q.length>0&&e.jsxs("div",{className:"absolute top-full right-0 mt-1 w-64 bg-slate-800/95 backdrop-blur-md border border-slate-700 rounded-lg shadow-2xl z-[100] overflow-hidden animate-in fade-in slide-in-from-top-1 duration-150",children:[Q.length>5&&e.jsx("div",{className:"px-2 py-2 border-b border-slate-700/50",children:e.jsxs("div",{className:"relative",children:[e.jsx(ie,{size:12,className:"absolute left-2 top-1/2 -translate-y-1/2 text-slate-500"}),e.jsx("input",{ref:m,type:"text",placeholder:"Search models...",value:C,onChange:n=>j(n.target.value),className:"w-full pl-7 pr-2 py-1 text-xs bg-slate-700/50 border border-slate-600/50 rounded text-slate-200 placeholder-slate-500 focus:outline-none focus:border-purple-500/50"})]})}),e.jsxs("button",{onClick:()=>L("external"),className:`w-full px-3 py-2 text-left text-xs font-medium transition-colors flex items-center justify-between ${J?"bg-purple-500/20 text-purple-300":"text-slate-300 hover:bg-slate-700/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{size:12,className:"text-purple-400"}),e.jsx("span",{children:"Auto (Smart Fallback)"})]}),J&&e.jsx("span",{className:"text-purple-400",children:"âœ“"})]}),e.jsx("div",{className:"border-t border-slate-700/50"}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:_.map(n=>e.jsxs("button",{onClick:()=>G(n.id),className:`w-full px-3 py-2 text-left text-xs font-medium transition-colors flex items-center justify-between ${!x&&f===n.id?"bg-purple-500/20 text-slate-200":"text-slate-300 hover:bg-slate-700/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500/50"}),e.jsx("span",{children:n.name})]}),!x&&f===n.id&&e.jsx("span",{className:"text-purple-400",children:"âœ“"})]},n.id))})]})]})]})}const gt=o.forwardRef(({models:i,selectedModelId:f,onSelectModel:T,githubToken:x,openrouterKey:k,messages:h,setMessages:b,autoMode:v,setAutoMode:z,autoModeScope:u,setAutoModeScope:C,currentResponse:j,setCurrentResponse:c,isGenerating:m,setIsGenerating:R,onModelUsed:$,gesturesActive:Q=!1},E)=>{var Oe;const[F,_]=o.useState(!1),[N,L]=o.useState(null),[W,G]=o.useState(new Set),[X,V]=o.useState(null),[J,te]=o.useState(null),[K,Y]=o.useState(new Set),[re,n]=o.useState(""),[U,ne]=o.useState(null),ae=o.useRef(new Map);o.useRef(new Map);const Z=o.useRef(null),Ce=o.useRef(null),H=o.useRef(null),le=o.useRef(null),ce=o.useRef(new Map),ue=o.useRef(null),Re=o.useRef(null),de=tt(),Pe=((Oe=de==null?void 0:de.gestureState)==null?void 0:Oe.gesture)==="Middle_Finger",{sortModels:Ee,recordRateLimit:Le,recordSuccess:pe}=ot(),fe=o.useRef(!1),_e=t=>{if(!H.current)return t;const r=H.current.scrollHeight-H.current.clientHeight;return Math.max(0,Math.min(r,t))},He=()=>{if(!H.current)return!0;const{scrollTop:t,scrollHeight:r,clientHeight:l}=H.current;return r-t-l<100};o.useImperativeHandle(E,()=>({sendMessage:(t,r)=>{me(t,r)},setInput:t=>{le.current&&(le.current.value=t,le.current.focus())},stopGeneration:()=>{Ae()},scroll:t=>{if(H.current){fe.current=!0;const r=H.current.scrollTop,l=_e(r-t);H.current.scrollTop=l}}}));const{selectionRect:Be}=lt({containerRef:Ce,itemRefs:ce,setSelectedIndices:G});o.useEffect(()=>{H.current&&!fe.current&&(H.current.scrollTop=H.current.scrollHeight)},[h,j,m]),o.useEffect(()=>{const t=H.current;if(!t)return;const r=()=>{He()&&(fe.current=!1)};return t.addEventListener("scroll",r,{passive:!0}),()=>t.removeEventListener("scroll",r)},[]),o.useEffect(()=>{const t=r=>{var s;if(r.ctrlKey||r.metaKey||r.altKey)return;const l=r.target;l.tagName==="INPUT"||l.tagName==="TEXTAREA"||r.key.length===1&&((s=le.current)==null||s.focus())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),o.useEffect(()=>{const t=r=>{if((r.metaKey||r.ctrlKey)&&r.key==="a"){const l=r.target;if(l.tagName==="INPUT"||l.tagName==="TEXTAREA")return;r.preventDefault();const s=new Set(h.map((a,p)=>p));G(s);return}if(r.key==="Delete"||r.key==="Backspace"){if(W.size>0){const l=r.target;if(l.tagName==="INPUT"||l.tagName==="TEXTAREA")return;r.preventDefault(),Ye()}}else r.key==="Escape"&&G(new Set)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[W,h]);const xe=async(t,r)=>{var l,s,a;try{const p=await je({models:[t],messages:r.map(d=>({role:d.role,content:d.content})),max_tokens:2048,temperature:.7,github_token:x||null,openrouter_key:k||null},(l=Z.current)==null?void 0:l.signal);let g="";return await Ne(p,d=>{var y;if((y=Z.current)!=null&&y.signal.aborted)throw new DOMException("Aborted","AbortError");if(d.event==="error"||d.error){const w=typeof d.error=="string"?d.error:d.content||"Stream failed";throw(w.includes("429")||w.toLowerCase().includes("rate limit")||w.toLowerCase().includes("too many requests"))&&(Le(t),console.log(`[Auto Mode] Rate limit detected for ${t}, trying next model...`)),new Error(w)}else(d.event==="token"||d.content)&&d.content&&(g+=d.content,c(w=>w+d.content))}),pe(t),{success:!0,content:g}}catch(p){if(p.name==="AbortError")throw p;const g=((s=p.message)==null?void 0:s.includes("429"))||((a=p.message)==null?void 0:a.toLowerCase().includes("rate limit"));return g&&Le(t),{success:!1,content:p.message,isRateLimit:g}}},me=async(t,r=!1)=>{var s,a;if(!t.trim()||m||!v&&!f)return;console.log(`[Chat] Sending message. autoMode=${v}, autoModeScope=${u}, selectedModelId=${f}`);const l={role:"user",content:t};b(p=>[...p,l]),R(!0),c(""),Z.current=new AbortController;try{const p=r?{role:"system",content:`User is hands-free using gesture control. Build an interactive interface to guide them.

Available gesture inputs:
- ðŸ‘ (yes/approve/like)
- ðŸ‘Ž (no/disapprove/dislike)
- ðŸ‘‹ (hi/hello/greeting)
- "ok" (okay/continue)
- "thanks" (thank you)
- "stop" (stop/wait)
- Pointing finger (select UI buttons)

Choose interaction style:
- Simple binary: "Give ðŸ‘ to continue or ðŸ‘Ž to stop" (no JSON needed)
- Complex choices: Use JSON UI buttons (3+ options, or multi-word responses needed)

For JSON UI (when appropriate):
\`\`\`json
{
  "options": [
    {"id": "opt1", "label": "Option 1", "action": "message", "value": "option 1"},
    {"id": "opt2", "label": "Option 2", "action": "message", "value": "option 2"}
  ]
}
\`\`\`

Guidelines:
- Keep response concise (2-3 sentences)
- Use simple gestures for yes/no/continue (more efficient)
- Use JSON UI for 3+ options or complex choices
- Provide 2-4 options max in JSON
- User can point at buttons with index finger`}:null,g=t==="ðŸ–•"||t.includes("middle finger")?{role:"system",content:"The user is showing you their middle finger (gesture). This is a playful interaction. Respond with humorous, over-the-top anger, indignation, or witty comeback. Don't be actually offended, but play along with the 'angry robot' persona."}:null,d=[...h,l].map(w=>({role:w.role,content:w.content})),y=[...p?[p]:[],...g?[g]:[],...d];if(v){const w=i.filter(S=>u==="local"?S.type==="self-hosted":u==="api"?S.type==="github"||S.type==="external":!0),D=i.filter(S=>u==="local"?S.type==="github"||S.type==="external":u==="api"?S.type==="self-hosted":!1),O=Ee(w),A=Ee(D);let P=null,B=!1,M=0;console.log(`[Auto Mode] Starting with ${O.length} primary (${u}) models, ${A.length} fallback models`);for(const S of O){console.log(`[Auto Mode] Trying primary model: ${S.id}`),L(S.id),c("");const q=await xe(S.id,y);if(q.success){console.log(`[Auto Mode] Success with ${S.id}`),b(ge=>[...ge,{role:"assistant",content:q.content,modelName:S.name,modelId:S.id}]),c(""),L(null),$==null||$(S.id);return}console.log(`[Auto Mode] Failed with ${S.id}: ${(s=q.content)==null?void 0:s.substring(0,100)}`),q.isRateLimit&&M++,P=q.content}if(A.length>0){console.log(`[Auto Mode] All primary models failed, trying ${A.length} fallback models`),B=!0;for(const S of A){console.log(`[Auto Mode] Trying fallback model: ${S.id}`),L(S.id),c("");const q=await xe(S.id,y);if(q.success){console.log(`[Auto Mode] Success with fallback ${S.id}`),b(ge=>[...ge,{role:"assistant",content:q.content,modelName:S.name,modelId:S.id}]),c(""),L(null),$==null||$(S.id);return}console.log(`[Auto Mode] Fallback failed with ${S.id}: ${(a=q.content)==null?void 0:a.substring(0,100)}`),q.isRateLimit&&M++,P=q.content}}else console.log("[Auto Mode] No fallback models available");console.log(`[Auto Mode] All ${O.length+A.length} models failed (${M} rate limited)`);let ee;const De=O.length+A.length;M>0&&M>=De?ee=`â±ï¸ All ${De} models are currently rate limited. GitHub Models has strict free tier limits. Try again in a minute, or add your own GitHub token in Settings for higher quota.`:M>0?ee=`All models failed (${M} rate limited). Last error: ${P}`:B?ee=`All models failed to respond. Last error: ${P}`:ee=`All ${u} models failed to respond. Last error: ${P}`,b(S=>[...S,{role:"assistant",content:ee,error:!0}]),L(null)}else{if(!f)return;const w=i.find(O=>O.id===f),D=await xe(f,y);D.success?(b(O=>[...O,{role:"assistant",content:D.content,modelName:w==null?void 0:w.name,modelId:f}]),$==null||$(f)):b(O=>[...O,{role:"assistant",content:D.content,modelName:w==null?void 0:w.name,error:!0}])}c("")}catch(p){p.name!=="AbortError"&&b(g=>[...g,{role:"assistant",content:p.message,error:!0}])}finally{R(!1),L(null),Z.current=null}},Ae=()=>{Z.current&&(Z.current.abort(),R(!1),j&&(b(t=>[...t,{role:"assistant",content:j}]),c("")))},$e=async(t,r)=>{if(m||h[t].role!=="assistant")return;let s=t-1;for(;s>=0&&h[s].role!=="user";)s--;if(s<0)return;const a=i.find(g=>g.id===r);if(!a)return;const p=h.slice(0,t).map(g=>({role:g.role,content:g.content}));R(!0),V(t),L(r),b(g=>g.map((d,y)=>y===t?{...d,content:"",modelName:a.name,modelId:r,error:void 0}:d)),Z.current=new AbortController;try{const g=await je({models:[r],messages:p,max_tokens:4096,temperature:.7,github_token:x,openrouter_key:k},Z.current.signal);let d="";await Ne(g,y=>{var w;if((w=Z.current)!=null&&w.signal.aborted)throw new DOMException("Aborted","AbortError");if(y.event==="error"||y.error){const D=typeof y.error=="string"?y.error:y.content||"Stream failed";throw new Error(D)}else(y.event==="token"||y.content)&&y.content&&(d+=y.content,b(D=>D.map((O,A)=>A===t?{...O,content:d}:O)))}),pe(r),$==null||$(r)}catch(g){g.name!=="AbortError"&&b(d=>d.map((y,w)=>w===t?{...y,content:g.message,error:!0}:y))}finally{R(!1),V(null),L(null),Z.current=null}},ze=(t,r)=>{if(!t)return i[0]||null;const l=i.find(g=>g.id===t),s=(l==null?void 0:l.type)||"api",a=i.filter(g=>g.type===s),p=a.findIndex(g=>g.id===t);return p===-1?a[0]||null:r==="prev"?p>0?a[p-1]:a[a.length-1]:p<a.length-1?a[p+1]:a[0]},Me=(t,r)=>{r.stopPropagation(),J===t?(te(null),Y(new Set),n("")):(te(t),Y(new Set),n(""),setTimeout(()=>{var l;return(l=Re.current)==null?void 0:l.focus()},50))},he=o.useCallback(()=>{te(null),Y(new Set),n("")},[]),Xe=t=>{Y(r=>{const l=new Set(r);return l.has(t)?l.delete(t):l.add(t),l})},We=o.useCallback((t,r)=>{const l=ae.current.get(r);l&&(l.abort(),ae.current.delete(r)),b(s=>s.map((a,p)=>p===t&&a.alternateResponses?{...a,alternateResponses:a.alternateResponses.filter(g=>g.modelId!==r)}:a))},[b]),Je=o.useCallback(async(t,r=0)=>{var a;const l=h[t];if(!l)return;let s;r===0||!l.alternateResponses?s=l.content:s=((a=l.alternateResponses[r-1])==null?void 0:a.content)||l.content;try{await navigator.clipboard.writeText(s);const p=`${t}-${r}`;ne(p),setTimeout(()=>ne(null),2e3)}catch(p){console.error("Failed to copy:",p)}},[h]),Ke=async t=>{if(K.size===0||h[t].role!=="assistant")return;let l=t-1;for(;l>=0&&h[l].role!=="user";)l--;if(l<0)return;const s=h.slice(0,t).map(d=>({role:d.role,content:d.content})),a=Array.from(K),p=a.map(d=>{const y=i.find(w=>w.id===d);return{modelId:d,modelName:(y==null?void 0:y.name)||d,content:"",loading:!0}});b(d=>d.map((y,w)=>w===t?{...y,alternateResponses:[...y.alternateResponses||[],...p]}:y)),te(null),Y(new Set);const g=async d=>{if(!i.find(D=>D.id===d))return;const w=new AbortController;ae.current.set(d,w);try{const D=await je({models:[d],messages:s,max_tokens:4096,temperature:.7,github_token:x,openrouter_key:k},w.signal);let O="";await Ne(D,A=>{if(w.signal.aborted)throw new DOMException("Aborted","AbortError");if(A.event==="error"||A.error){const P=typeof A.error=="string"?A.error:A.content||"Stream failed";throw new Error(P)}else(A.event==="token"||A.content)&&A.content&&(O+=A.content,b(P=>P.map((B,M)=>M===t&&B.alternateResponses?{...B,alternateResponses:B.alternateResponses.map(ee=>ee.modelId===d?{...ee,content:O}:ee)}:B)))}),b(A=>A.map((P,B)=>B===t&&P.alternateResponses?{...P,alternateResponses:P.alternateResponses.map(M=>M.modelId===d?{...M,loading:!1}:M)}:P)),pe(d)}catch(D){D.name!=="AbortError"&&b(O=>O.map((A,P)=>P===t&&A.alternateResponses?{...A,alternateResponses:A.alternateResponses.map(B=>B.modelId===d?{...B,content:D.message,error:!0,loading:!1}:B)}:A))}finally{ae.current.delete(d)}};a.forEach(d=>g(d))},Te=(t,r)=>{b(l=>l.map((s,a)=>a===t?{...s,activeResponseIndex:r}:s))};o.useEffect(()=>{const t=l=>{ue.current&&!ue.current.contains(l.target)&&he()},r=l=>{l.key==="Escape"&&he()};return J!==null&&(document.addEventListener("mousedown",t),document.addEventListener("keydown",r)),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("keydown",r)}},[J,he]);const Ye=()=>{W.size!==0&&(b(t=>t.filter((r,l)=>!W.has(l))),G(new Set))},I=i.find(t=>t.id===f),be=v&&N?i.find(t=>t.id===N):I;return e.jsxs("div",{ref:Ce,className:"flex flex-col h-full relative isolate z-[10]",children:[e.jsx(rt,{rect:Be}),e.jsx("div",{ref:H,className:"flex-1 overflow-y-auto p-4 pb-32 chat-scroll relative z-[10] [mask-image:linear-gradient(to_bottom,transparent_0%,black_2rem,black_calc(100%-4rem),transparent_100%)]","data-no-arena-scroll":!0,onClick:t=>{(t.target===t.currentTarget||!t.target.closest("[data-message]"))&&G(new Set)},children:e.jsxs("div",{className:"mx-auto w-full min-h-full flex flex-col space-y-6",style:{maxWidth:"600px"},children:[h.length===0&&e.jsxs("div",{className:"flex-1 flex flex-col items-center text-slate-500 select-none pb-20 relative pt-[30vh]",children:[Pe?e.jsxs("div",{className:"mb-4 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-red-500 blur-xl opacity-50 rounded-full"}),e.jsx(ve,{size:72,className:"relative text-red-500"}),e.jsx("div",{className:"absolute -top-2 -right-2 text-3xl",children:"ðŸ’¢"})]}):e.jsx(ve,{size:72,className:"mb-4 opacity-50 transition-all duration-300"}),e.jsx("div",{className:"flex flex-col items-center gap-2 mb-4 sticky top-4 z-30",children:e.jsx(dt,{models:i,selectedModelId:f,onSelectModel:T,autoMode:v,setAutoMode:z,autoModeScope:u,setAutoModeScope:C,isGenerating:m})}),!x&&(!v&&(I==null?void 0:I.type)==="github"||(I==null?void 0:I.type)==="external"||v&&u==="api")&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-md bg-yellow-500/10 border border-yellow-500/20 text-yellow-200 text-xs",children:[e.jsx(ye,{size:11,className:"shrink-0 text-yellow-500"}),e.jsx("span",{children:"Add GitHub token in Settings for dedicated quota"})]})]}),h.map((t,r)=>{const l=t.role==="assistant"&&Q&&t.content.includes("```json");return e.jsxs("div",{ref:s=>{s?ce.current.set(r,s):ce.current.delete(r)},className:`flex ${t.role==="user"?"justify-end":l?"flex-col sm:flex-row justify-start items-start gap-4":"justify-start"}`,"data-message":r,onClick:s=>{(s.target===s.currentTarget||s.target.closest("[data-message]")===s.currentTarget)&&G(a=>{const p=new Set(a);return p.has(r)?p.delete(r):p.add(r),p})},children:[e.jsxs("div",{className:`group relative ${l?"w-full sm:flex-1 sm:max-w-[45%]":"max-w-[85%]"} rounded-2xl px-4 pt-3 pb-2 select-none transition-all cursor-pointer ${W.has(r)?"ring-2 ring-blue-500 bg-blue-500/10":""} ${t.role==="user"?"bg-blue-600/20 border border-blue-500/30 text-white rounded-tr-sm":X===r?"rounded-tl-sm":t.error?"bg-red-500/10 border border-red-500/30 text-red-200 rounded-tl-sm":"bg-slate-800/60 border border-slate-700/60 text-slate-200 rounded-tl-sm"}`,style:X===r?{background:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(251, 191, 36, 0.4)",boxShadow:"0 0 20px rgba(251, 191, 36, 0.15), inset 0 0 30px rgba(251, 191, 36, 0.03)"}:void 0,children:[e.jsxs("div",{className:`flex items-center gap-2 mb-1 text-[10px] font-bold uppercase tracking-wider ${t.role==="user"?"text-blue-300 flex-row-reverse":X===r?"text-amber-400/80":"text-slate-400"}`,children:[t.role==="user"?e.jsx(qe,{size:12}):X===r?e.jsx("div",{className:"relative flex items-center justify-center",style:{width:"14px",height:"14px"},children:e.jsxs("svg",{width:14,height:14,viewBox:"0 0 24 24",fill:"none",style:{filter:"drop-shadow(0 0 6px rgba(251, 191, 36, 0.55))",animation:"spin 0.6s linear infinite"},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"regenSpinnerGradient",gradientUnits:"userSpaceOnUse",x1:"3",y1:"12",x2:"12",y2:"3",children:[e.jsx("stop",{offset:"0%",stopColor:"#fbbf24",stopOpacity:"1"}),e.jsx("stop",{offset:"60%",stopColor:"#fbbf24",stopOpacity:"0.5"}),e.jsx("stop",{offset:"100%",stopColor:"#fbbf24",stopOpacity:"0"})]})}),e.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"url(#regenSpinnerGradient)",strokeWidth:"2.5",fill:"none",strokeLinecap:"round"})]})}):e.jsx(ve,{size:12}),t.role==="user"?"You":e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:s=>{s.stopPropagation();const a=ze(t.modelId,"prev");a&&!m&&$e(r,a.id)},disabled:m,className:"p-0.5 rounded hover:bg-slate-700/50 transition-colors disabled:opacity-30",title:"Try previous model",children:e.jsx(Qe,{size:10})}),e.jsx("span",{className:"px-1",children:t.modelName||"Assistant"}),e.jsx("button",{onClick:s=>{s.stopPropagation();const a=ze(t.modelId,"next");a&&!m&&$e(r,a.id)},disabled:m,className:"p-0.5 rounded hover:bg-slate-700/50 transition-colors disabled:opacity-30",title:"Try next model",children:e.jsx(Ge,{size:10})}),e.jsxs("div",{className:"relative ml-1",children:[e.jsx("button",{onClick:s=>Me(r,s),disabled:m,className:"p-0.5 rounded hover:bg-slate-700/50 transition-colors disabled:opacity-30",title:"Compare with other models",children:e.jsx(Ze,{size:10})}),J===r&&e.jsxs("div",{ref:ue,className:"absolute top-full left-0 mt-1 w-64 bg-slate-800/95 backdrop-blur-md border border-slate-700 rounded-lg shadow-2xl z-[100] overflow-hidden animate-in fade-in slide-in-from-top-1 duration-150",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"px-3 py-2 border-b border-slate-700/50",children:e.jsxs("div",{className:"relative",children:[e.jsx(ie,{size:12,className:"absolute left-2 top-1/2 -translate-y-1/2 text-slate-500"}),e.jsx("input",{ref:Re,type:"text",placeholder:"Search models...",value:re,onChange:s=>n(s.target.value),className:"w-full pl-7 pr-2 py-1.5 text-xs bg-slate-700/50 border border-slate-600/50 rounded text-slate-200 placeholder-slate-500 focus:outline-none focus:border-blue-500/50"})]})}),e.jsxs("div",{className:"flex gap-1 p-2 border-b border-slate-700/50",children:[e.jsx("button",{onClick:()=>{const s=i.filter(a=>a.type==="self-hosted"&&a.id!==t.modelId).map(a=>a.id);Y(new Set(s))},className:"flex-1 px-2 py-1 text-[10px] rounded bg-emerald-500/20 text-emerald-300 hover:bg-emerald-500/30 transition-colors",children:"All Self-Hosted"}),e.jsx("button",{onClick:()=>{const s=i.filter(a=>a.type==="github"||a.type==="external"&&a.id!==t.modelId).map(a=>a.id);Y(new Set(s))},className:"flex-1 px-2 py-1 text-[10px] rounded bg-blue-500/20 text-blue-300 hover:bg-blue-500/30 transition-colors",children:"All GitHub"})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:i.filter(s=>s.id!==t.modelId).filter(s=>!re||s.name.toLowerCase().includes(re.toLowerCase())||s.id.toLowerCase().includes(re.toLowerCase())).map(s=>e.jsxs("button",{onClick:()=>Xe(s.id),className:`w-full px-3 py-1.5 text-left text-xs flex items-center justify-between transition-colors ${K.has(s.id)?"bg-slate-700/50 text-white":"text-slate-300 hover:bg-slate-700/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s.type==="self-hosted"?"bg-emerald-500":"bg-blue-500"}`}),e.jsx("span",{children:s.name})]}),K.has(s.id)&&e.jsx(Fe,{size:12,className:"text-emerald-400"})]},s.id))}),K.size>0&&e.jsx("div",{className:"p-2 border-t border-slate-700/50",children:e.jsxs("button",{onClick:()=>Ke(r),className:"w-full px-3 py-1.5 text-xs font-medium rounded bg-blue-500/20 text-blue-300 hover:bg-blue-500/30 transition-colors",children:["Compare with ",K.size," model",K.size>1?"s":""]})})]})]})]}),t.error&&e.jsx(ye,{size:12,className:"text-red-400"})]}),t.alternateResponses&&t.alternateResponses.length>0&&e.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 mt-2 pt-2 pb-2 mb-1 border-t border-slate-700/30",children:[e.jsx("span",{className:"text-[9px] text-slate-500 uppercase tracking-wider mr-1",children:"Compare:"}),t.alternateResponses.map((s,a)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("button",{onClick:p=>{p.stopPropagation(),Te(r,a+1)},className:`px-2 py-0.5 text-[9px] rounded-full transition-colors flex items-center gap-1 ${s.loading?"bg-amber-500/20 text-amber-300 ring-1 ring-amber-500/40":s.error?"bg-red-500/20 text-red-300 ring-1 ring-red-500/40":(t.activeResponseIndex??0)===a+1?"bg-blue-500/30 text-blue-200 ring-1 ring-blue-500/50":"bg-slate-700/40 text-slate-400 hover:text-slate-200 hover:bg-slate-700/60"}`,children:[s.loading&&e.jsx(Ve,{size:8,className:"animate-spin text-amber-400"}),s.error&&e.jsx(ye,{size:8,className:"text-red-400"}),s.modelName]}),s.loading&&e.jsx("button",{onClick:p=>{p.stopPropagation(),We(r,s.modelId)},className:"ml-0.5 p-0.5 rounded-full hover:bg-red-500/20 text-slate-500 hover:text-red-400 transition-colors",title:"Cancel",children:e.jsx(Ue,{size:8})})]},s.modelId)),(t.activeResponseIndex??0)>0&&e.jsxs("button",{onClick:s=>{s.stopPropagation(),Te(r,0)},className:"px-2 py-0.5 text-[9px] rounded-full bg-slate-600/40 text-slate-300 hover:bg-slate-600/60 transition-colors",children:["â† Back to ",t.modelName]})]}),e.jsx("div",{className:"prose prose-invert prose-sm max-w-none mt-2",children:(()=>{const s=t.activeResponseIndex??0;if(s===0||!t.alternateResponses)return e.jsx(oe,{text:t.role==="user"?t.content:ke(t.content)});const a=t.alternateResponses[s-1];return a?e.jsx(oe,{text:ke(a.content)}):e.jsx(oe,{text:ke(t.content)})})()}),t.role==="assistant"&&t.content&&e.jsx("button",{onClick:s=>{s.stopPropagation(),Je(r,t.activeResponseIndex??0)},className:`absolute bottom-2 right-2 p-1.5 rounded-md transition-all z-10 ${U===`${r}-${t.activeResponseIndex??0}`?"bg-emerald-500/20 text-emerald-400":"opacity-0 group-hover:opacity-100 bg-slate-700/70 hover:bg-slate-600/70 text-slate-400"}`,title:U===`${r}-${t.activeResponseIndex??0}`?"Copied!":"Copy response",children:U===`${r}-${t.activeResponseIndex??0}`?e.jsx(Fe,{size:12}):e.jsx(Ie,{size:12})})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full sm:hidden h-px bg-gradient-to-r from-transparent via-blue-500/30 to-transparent my-3"}),e.jsxs("div",{className:"hidden sm:flex items-center self-stretch py-6",children:[e.jsx("div",{className:"h-full w-px bg-gradient-to-b from-transparent via-blue-500/30 to-transparent"}),e.jsx("div",{className:"w-3 h-px bg-blue-500/30"})]}),e.jsx("div",{className:"w-full sm:flex-1 sm:max-w-[40%]",children:e.jsx(ut,{content:t.content,onSelect:s=>me(s,!0),isInline:!1})})]})]},r)}),m&&X===null&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"max-w-[85%] rounded-2xl rounded-tl-sm px-4 pt-3 pb-0 text-slate-200 relative",style:{background:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(251, 191, 36, 0.4)",boxShadow:"0 0 20px rgba(251, 191, 36, 0.15), inset 0 0 30px rgba(251, 191, 36, 0.03)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 text-[10px] font-bold uppercase tracking-wider text-amber-400/80",children:[e.jsx("div",{className:"relative flex items-center justify-center",style:{width:"14px",height:"14px"},children:e.jsxs("svg",{width:14,height:14,viewBox:"0 0 24 24",fill:"none",style:{filter:"drop-shadow(0 0 6px rgba(251, 191, 36, 0.55))",animation:"spin 0.6s linear infinite"},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"chatSpinnerGradient",gradientUnits:"userSpaceOnUse",x1:"3",y1:"12",x2:"12",y2:"3",children:[e.jsx("stop",{offset:"0%",stopColor:"#fbbf24",stopOpacity:"1"}),e.jsx("stop",{offset:"60%",stopColor:"#fbbf24",stopOpacity:"0.5"}),e.jsx("stop",{offset:"100%",stopColor:"#fbbf24",stopOpacity:"0"})]})}),e.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"rgba(251, 191, 36, 0.15)",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M 12 3 A 9 9 0 1 1 3 12",stroke:"url(#chatSpinnerGradient)",strokeWidth:"2",strokeLinecap:"round",fill:"none"}),e.jsx("circle",{cx:"3",cy:"12",r:"1.4",fill:"#fbbf24"})]})}),(be==null?void 0:be.name)||"Assistant"]}),e.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:e.jsx(oe,{text:j})})]})})]})}),e.jsx(st,{inputRef:le,inputFocused:F,setInputFocused:_,onSendMessage:me,placeholder:v?"Message (Auto mode - will use auto-selected model)...":I?`Message ${I.name}...`:"Select a model from the dock to start chatting...",isGenerating:m,onStop:Ae,className:"fixed bottom-0 left-0 right-0 z-[100] pb-6 px-3 sm:px-4 flex justify-center items-end pointer-events-none transition-all duration-300",style:{paddingBottom:"calc(1.5rem + env(safe-area-inset-bottom))"}})]})});export{gt as default};
