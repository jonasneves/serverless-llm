{% extends "layout.html" %}

{% block title %}LLM Chat{% endblock %}
{% block subtitle %}Compare AI Models{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/chat.css?v={{ chat_css }}">
{% endblock %}

{% block extra_js %}
<script defer src="/static/chat.js?v={{ chat_js }}"></script>
{% endblock %}

{% block content %}
<div id="chatHistory" class="chat-history">
  <div class="welcome-card">
    <div class="welcome-title">Compare AI Model Responses</div>
    <div class="welcome-subtitle">
      Select one or multiple models to compare their responses side-by-side.
      Each response includes metrics like tokens and response time.
    </div>
    <div class="example-prompts">
      <div class="example-prompts-label">Try these examples:</div>
      <div class="example-list">
        <button class="example-item" data-prompt="How many times does the letter 'r' appear in the word 'irregularity'?">
          <span class="example-text">Count how many times 'r' appears in irregularity</span>
        </button>
        <button class="example-item" data-prompt="Which number is larger: 7.09 or 7.9?">
          <span class="example-text">Compare decimal numbers and identify the larger one</span>
        </button>
        <button class="example-item" data-prompt="Alice has 4 brothers and 5 sisters. How many sisters does Alice's brother have?">
          <span class="example-text">Solve logical reasoning puzzles about relationships</span>
        </button>
        <button class="example-item" data-prompt="A shipping company has 48 boxes and each pallet holds 6 boxes. How many pallets are needed? Do we need an extra pallet?">
          <span class="example-text">Calculate division problems and check edge cases</span>
        </button>
      </div>
    </div>
  </div>
</div>

<div class="typing-indicator" id="typingIndicator">
  <div class="dot"></div>
  <div class="dot"></div>
  <div class="dot"></div>
  <span style="font-size: 12px; color: var(--text-secondary); margin-left: 8px;">Generating...</span>
</div>

<div class="input-container">
  <div class="controls-row">
    <div class="model-selector" id="modelSelector">
      <!-- Model chips populated by JS -->
    </div>
    <div style="flex: 1;"></div>
    <div class="controls-secondary">
      <div class="control-group">
        <label>Temp:</label>
        <input type="range" id="tempSlider" min="0" max="1" step="0.1" value="0.7">
        <span id="tempValue">0.7</span>
      </div>
      <div class="control-group">
        <label>Tokens:</label>
        <input type="number" id="maxTokens" value="512" min="1" max="4096" style="width: 70px;">
      </div>
      <button id="clearBtn" class="clear-btn" type="button">Clear</button>
    </div>
  </div>

  <div class="input-wrapper">
    <textarea id="userInput" placeholder="Ask a question to compare model responses..." rows="1"></textarea>
    <button id="sendBtn" class="send-btn" disabled aria-label="Send message">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 4L12 20M12 4L6 10M12 4L18 10" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
      </svg>
    </button>
  </div>
</div>
{% endblock %}
