import{c as T,r as a,j as e,f as Te,s as _e}from"./index.js";import{F as pe}from"./FormattedContent.js";import{g as Oe,S as $e,Z as B,c as he,P as De}from"./main.js";import{e as Be}from"./GestureOptions.js";import{S as ge}from"./sparkles.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],be=T("bot",Me);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],X=T("chevron-down",Pe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],ye=T("cloud",He);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8",key:"18ogeb"}]],je=T("infinity",qe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],we=T("info",Fe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],ve=T("server",Ie);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Xe=T("user",Ke);function re(n,i){const L=Math.min(n.x,i.x),p=Math.min(n.y,i.y),E=Math.max(n.x,i.x),f=Math.max(n.y,i.y);return{left:L,top:p,right:E,bottom:f,width:E-L,height:f-p}}function Je(n,i){return!(n.right<i.left||n.left>i.right||n.bottom<i.top||n.top>i.bottom)}function Ue({containerRef:n,itemRefs:i,setSelectedIndices:L}){const[p,E]=a.useState(null),f=a.useRef(!1);a.useEffect(()=>{f.current=p!=null},[p]),a.useEffect(()=>{const w=l=>{if(l.button!==0||!n.current)return;const A=l.target;if(!A||A.closest('button, a, input, textarea, select, [role="button"]'))return;const r=n.current.getBoundingClientRect();if(!(l.clientX>=r.left&&l.clientX<=r.right&&l.clientY>=r.top&&l.clientY<=r.bottom))return;const g={x:l.clientX,y:l.clientY};l.preventDefault(),f.current=!0,E({origin:g,current:g,active:!1})};return window.addEventListener("mousedown",w,!0),()=>window.removeEventListener("mousedown",w,!0)},[n]),a.useEffect(()=>{if(!p||!n.current)return;const w=b=>b.preventDefault();document.addEventListener("selectstart",w);const l=b=>{const r={x:b.clientX,y:b.clientY};E(o=>{if(!o)return o;const g=re(o.origin,r),y=o.active||g.width>2||g.height>2;return{...o,current:r,active:y}})},A=b=>{f.current=!1;const r={x:b.clientX,y:b.clientY};E(o=>{if(!o)return null;const g=re(o.origin,r);if(o.active&&g.width>1&&g.height>1){const y=[];for(const[M,J]of i.current.entries()){const _=J.getBoundingClientRect();Je({left:g.left,right:g.right,top:g.top,bottom:g.bottom},{left:_.left,right:_.right,top:_.top,bottom:_.bottom})&&y.push(M)}L(new Set(y))}return null})};return window.addEventListener("mousemove",l),window.addEventListener("mouseup",A),()=>{window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",A),document.removeEventListener("selectstart",w)}},[p,n,i,L]);const u=a.useMemo(()=>{if(!p||!p.active||!n.current)return null;const w=n.current.getBoundingClientRect(),l=re(p.origin,p.current);return l.width<=0||l.height<=0?null:{left:l.left-w.left,top:l.top-w.top,width:l.width,height:l.height}},[p,n]),h=a.useCallback(()=>{E(null),f.current=!1},[]);return{selectionRect:u,isSelecting:p!=null,dragSelectionActiveRef:f,clearSelection:h}}const We=6e4;function Ye(){const n=a.useRef(new Map),i=a.useRef(null),L=u=>{const h=n.current.get(u);return h?Date.now()-h<We:!1};return{sortModels:u=>{const h=u.map(r=>({...r,priority:Oe(r.id,r.type||"local",r.priority),isRateLimited:L(r.id),isLastSuccessful:r.id===i.current})),w=h.filter(r=>!r.isRateLimited),l=h.filter(r=>r.isRateLimited),A=w.sort((r,o)=>r.isLastSuccessful!==o.isLastSuccessful?r.isLastSuccessful?-1:1:r.priority!==o.priority?r.priority-o.priority:r.type!==o.type?r.type==="local"?-1:1:r.id.localeCompare(o.id)),b=l.sort((r,o)=>r.priority!==o.priority?r.priority-o.priority:r.id.localeCompare(o.id));return[...A,...b]},recordRateLimit:u=>{n.current.set(u,Date.now())},recordSuccess:u=>{i.current=u,n.current.delete(u)},isRecentlyRateLimited:L,getLastSuccessfulModel:()=>i.current}}const tt=a.forwardRef(({models:n,selectedModelId:i,onSelectModel:L,githubToken:p,onOpenTopics:E,messages:f,setMessages:u,autoMode:h,setAutoMode:w,autoModeScope:l,setAutoModeScope:A,currentResponse:b,setCurrentResponse:r,isGenerating:o,setIsGenerating:g,onModelUsed:y,onGestureOptionsChange:M},J)=>{const[_,ne]=a.useState(!1),[le,F]=a.useState(!1),[ae,P]=a.useState(!1),[U,Ne]=a.useState(!0),[W,ke]=a.useState(!1),[ie,O]=a.useState(null),[H,$]=a.useState(new Set),[oe,I]=a.useState(!1),D=a.useRef(null),ce=a.useRef(null),v=a.useRef(null),q=a.useRef(null),Y=a.useRef(null),Z=a.useRef(null),V=a.useRef(new Map),{sortModels:de,recordRateLimit:ue,recordSuccess:Se}=Ye(),Q=a.useRef(!1),Le=t=>{if(!v.current)return t;const s=v.current.scrollHeight-v.current.clientHeight;return Math.max(0,Math.min(s,t))},Ee=()=>{if(!v.current)return!0;const{scrollTop:t,scrollHeight:s,clientHeight:c}=v.current;return s-t-c<100};a.useImperativeHandle(J,()=>({sendMessage:(t,s)=>{xe(t,s)},setInput:t=>{q.current&&(q.current.value=t,q.current.focus())},stopGeneration:()=>{fe()},scroll:t=>{if(v.current){Q.current=!0;const s=v.current.scrollTop,c=Le(s-t);v.current.scrollTop=c}}}));const{selectionRect:ze}=Ue({containerRef:ce,itemRefs:V,setSelectedIndices:$});a.useEffect(()=>{v.current&&!Q.current&&(v.current.scrollTop=v.current.scrollHeight)},[f,b,o]),a.useEffect(()=>{const t=v.current;if(!t)return;const s=()=>{Ee()&&(Q.current=!1)};return t.addEventListener("scroll",s,{passive:!0}),()=>t.removeEventListener("scroll",s)},[]),a.useEffect(()=>{const t=s=>{var m;if(s.ctrlKey||s.metaKey||s.altKey)return;const c=s.target;c.tagName==="INPUT"||c.tagName==="TEXTAREA"||s.key.length===1&&((m=q.current)==null||m.focus())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),a.useEffect(()=>{const t=s=>{if((s.metaKey||s.ctrlKey)&&s.key==="a"){const c=s.target;if(c.tagName==="INPUT"||c.tagName==="TEXTAREA")return;s.preventDefault();const m=new Set(f.map((k,S)=>S));$(m);return}if(s.key==="Delete"||s.key==="Backspace"){if(H.size>0){const c=s.target;if(c.tagName==="INPUT"||c.tagName==="TEXTAREA")return;s.preventDefault(),Ae()}}else s.key==="Escape"&&$(new Set)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[H,f]),a.useEffect(()=>{const t=s=>{Y.current&&!Y.current.contains(s.target)&&F(!1),Z.current&&!Z.current.contains(s.target)&&P(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),a.useEffect(()=>{if(M){const t=[...f].reverse().find(s=>s.role==="assistant"&&s.content.includes("```json"));M((t==null?void 0:t.content)||null)}},[f,M]);const G=async(t,s)=>{var c,m,k;try{const S=await Te({models:[t],messages:s.map(d=>({role:d.role,content:d.content})),max_tokens:2048,temperature:.7,github_token:p||null},(c=D.current)==null?void 0:c.signal);let C="";return await _e(S,d=>{var z;if((z=D.current)!=null&&z.signal.aborted)throw new DOMException("Aborted","AbortError");if((d.event==="token"||d.content)&&d.content)C+=d.content,r(j=>j+d.content);else if(d.event==="error"||d.error){const j=String(d.error||"Stream failed");throw(j.includes("429")||j.toLowerCase().includes("rate limit")||j.toLowerCase().includes("too many requests"))&&ue(t),new Error(j)}}),Se(t),{success:!0,content:C}}catch(S){if(S.name==="AbortError")throw S;const C=((m=S.message)==null?void 0:m.includes("429"))||((k=S.message)==null?void 0:k.toLowerCase().includes("rate limit"));return C&&ue(t),{success:!1,content:S.message,isRateLimit:C}}},xe=async(t,s=!1)=>{if(!t.trim()||o||!h&&!i)return;const c={role:"user",content:t};u(m=>[...m,c]),g(!0),r(""),D.current=new AbortController;try{let m="local";if(h)m=l==="api"?"api":"local";else if(i){const d=n.find(z=>z.id===i);m=(d==null?void 0:d.type)||"local"}const k=s?{role:"system",content:m==="api"?`User is hands-free using gesture control. Build an interactive interface to guide them.

Available gesture inputs:
- ðŸ‘ (yes/approve/like)
- ðŸ‘Ž (no/disapprove/dislike)
- ðŸ‘‹ (hi/hello/greeting)
- "ok" (okay/continue)
- "thanks" (thank you)
- "stop" (stop/wait)
- Pointing finger (select UI buttons)

Choose interaction style:
- Simple binary: "Give ðŸ‘ to continue or ðŸ‘Ž to stop" (no JSON needed)
- Complex choices: Use JSON UI buttons (3+ options, or multi-word responses needed)

For JSON UI (when appropriate):
\`\`\`json
{
  "options": [
    {"id": "opt1", "label": "Option 1", "action": "message", "value": "option 1"},
    {"id": "opt2", "label": "Option 2", "action": "message", "value": "option 2"}
  ]
}
\`\`\`

Guidelines:
- Keep response concise (2-3 sentences)
- Use simple gestures for yes/no/continue (more efficient)
- Use JSON UI for 3+ options or complex choices
- Provide 2-4 options max in JSON
- User can point at buttons with index finger`:`User is hands-free (limited input). TOTAL OUTPUT under 50 words (including any thinking). Minimize or skip thinking - just answer. End with: "Want [A] or [B]?" or "Say 'yes' for [next step]." Use single words/emojis for options.`}:null,S=[...f,c].map(d=>({role:d.role,content:d.content})),C=k?[k,...S]:S;if(h){const d=n.filter(x=>l==="local"?x.type==="local":l==="api"?x.type==="api":!0),z=n.filter(x=>l==="local"?x.type==="api":l==="api"?x.type==="local":!1),j=de(d),te=de(z);let K=null,me=!1;for(const x of j){O(x.id),r("");const R=await G(x.id,C);if(R.success){u(se=>[...se,{role:"assistant",content:R.content,modelName:x.name,modelId:x.id}]),r(""),O(null),y==null||y(x.id);return}K=R.content}if(te.length>0){me=!0;for(const x of te){O(x.id),r("");const R=await G(x.id,C);if(R.success){u(se=>[...se,{role:"assistant",content:R.content,modelName:x.name,modelId:x.id}]),r(""),O(null),y==null||y(x.id);return}K=R.content}}const Re=me?`All models failed to respond. Last error: ${K}`:`All ${l} models failed to respond. Last error: ${K}`;u(x=>[...x,{role:"assistant",content:Re,error:!0}]),O(null)}else{if(!i)return;const d=n.find(j=>j.id===i),z=await G(i,C);z.success?(u(j=>[...j,{role:"assistant",content:z.content,modelName:d==null?void 0:d.name,modelId:i}]),y==null||y(i)):u(j=>[...j,{role:"assistant",content:z.content,modelName:d==null?void 0:d.name,error:!0}])}r("")}catch(m){m.name!=="AbortError"&&u(k=>[...k,{role:"assistant",content:m.message,error:!0}])}finally{g(!1),O(null),D.current=null}},fe=()=>{D.current&&(D.current.abort(),g(!1),b&&(u(t=>[...t,{role:"assistant",content:b}]),r("")))},Ae=()=>{H.size!==0&&(u(t=>t.filter((s,c)=>!H.has(c))),$(new Set))},N=n.find(t=>t.id===i),ee=h&&ie?n.find(t=>t.id===ie):N,Ce={local:"Local",api:"API"};return e.jsxs("div",{ref:ce,className:"flex flex-col h-full relative isolate z-[10]",children:[e.jsx($e,{rect:ze}),e.jsx("div",{ref:v,className:"flex-1 overflow-y-auto p-4 pb-32 chat-scroll relative z-[10] [mask-image:linear-gradient(to_bottom,transparent_0%,black_2rem,black_calc(100%-4rem),transparent_100%)]","data-no-arena-scroll":!0,onClick:t=>{(t.target===t.currentTarget||!t.target.closest("[data-message]"))&&$(new Set)},children:e.jsxs("div",{className:"mx-auto w-full min-h-full flex flex-col space-y-6",style:{maxWidth:"600px"},children:[f.length===0&&e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-500 select-none pb-20 relative",children:[e.jsx(be,{size:48,className:"mb-4 opacity-50"}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("p",{className:"text-base opacity-50",children:"Chat with"}),h?e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("div",{className:"relative",ref:Y,children:[e.jsxs("button",{onClick:()=>F(!le),className:"h-7 px-2.5 flex items-center gap-1.5 rounded-md border bg-slate-700/40 hover:bg-slate-700/60 border-slate-600/40 transition-all active:scale-95 text-xs font-medium",children:[e.jsx(B,{size:12,className:"text-yellow-400"}),e.jsxs("span",{className:"text-slate-200/60",children:[l==="local"&&"Local Models (Auto)",l==="api"&&"API Models (Auto)"]}),e.jsx(X,{size:11,className:"text-slate-200/60 transition-transform"})]}),le&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 w-48 bg-slate-800 border border-slate-700 rounded-lg shadow-xl overflow-hidden z-50",children:[["local","api"].map(t=>e.jsxs("button",{onClick:()=>{A(t),F(!1)},className:`w-full px-3 py-2 text-left text-xs font-medium transition-colors ${l===t?"bg-yellow-500/20 text-yellow-300":"text-slate-300 hover:bg-slate-700/50"}`,children:[Ce[t],t==="local"&&e.jsx("span",{className:"text-[10px] text-slate-500 ml-1",children:"(no quota)"}),t==="api"&&e.jsx("span",{className:"text-[10px] text-slate-500 ml-1",children:"(cloud only)"})]},t)),e.jsx("div",{className:"border-t border-slate-700",children:e.jsx("button",{onClick:()=>{w(!1),F(!1)},className:"w-full px-3 py-2 text-left text-xs font-medium text-slate-400 hover:bg-slate-700/50 transition-colors",children:"Manual Mode"})})]})]}),e.jsxs("div",{className:"relative",onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),children:[e.jsx(we,{size:13,className:"text-slate-500/60 hover:text-slate-400/80 transition-colors cursor-help"}),oe&&e.jsxs("div",{className:"absolute left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-2 rounded-lg bg-slate-800 border border-slate-700 text-slate-300 text-xs z-50 shadow-xl w-48",children:[l==="local"&&e.jsxs("ul",{className:"space-y-1.5",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(B,{size:11,className:"shrink-0 text-emerald-400"}),e.jsx("span",{children:"Small language models"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(ve,{size:11,className:"shrink-0 text-slate-400"}),e.jsx("span",{children:"Hosted on our servers"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(je,{size:11,className:"shrink-0 text-blue-400"}),e.jsx("span",{children:"No quota limits"})]})]}),l==="api"&&e.jsxs("ul",{className:"space-y-1.5",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(ye,{size:11,className:"shrink-0 text-blue-400"}),e.jsx("span",{children:"Cloud-based models"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(ge,{size:11,className:"shrink-0 text-yellow-400"}),e.jsx("span",{children:"Free quota available"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(B,{size:11,className:"shrink-0 text-purple-400"}),e.jsx("span",{children:"More capable models"})]})]})]})]})]}):e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("div",{className:"relative",ref:Z,children:[e.jsxs("button",{onClick:()=>P(!ae),className:"h-7 px-2.5 flex items-center gap-1.5 rounded-md border bg-slate-700/40 hover:bg-slate-700/60 border-slate-600/40 transition-all active:scale-95 text-xs font-medium",disabled:o,children:[N&&e.jsx("div",{className:`w-2 h-2 rounded-full ${N.type==="local"?"bg-emerald-500":"bg-blue-500"}`}),e.jsx("span",{className:"text-slate-200/60",children:N?N.name:"Select a model"}),!o&&e.jsx(X,{size:11,className:"text-slate-200/60"})]}),ae&&!o&&e.jsx("div",{className:"absolute top-full left-0 mt-1 w-64 bg-slate-800 border border-slate-700 rounded-lg shadow-xl overflow-hidden z-50",children:n.length===0?e.jsx("div",{className:"px-3 py-4 text-xs text-slate-500 text-center",children:"No models available"}):e.jsxs(e.Fragment,{children:[n.filter(t=>t.type==="local").length>0&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>Ne(!U),className:"w-full px-3 py-2 flex items-center justify-between text-[10px] uppercase tracking-wider text-slate-400 font-semibold hover:bg-slate-700/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),e.jsx("span",{children:"Local Models"})]}),e.jsx(X,{size:12,className:`transition-transform ${U?"":"-rotate-90"}`})]}),U&&e.jsx("div",{children:n.filter(t=>t.type==="local").map(t=>e.jsx("button",{onClick:()=>{L(t.id),P(!1)},className:`w-full px-4 py-2 text-left text-xs font-medium transition-colors ${i===t.id?"bg-emerald-500/20 text-slate-200":"text-slate-300 hover:bg-slate-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500/40"}),e.jsx("span",{children:t.name})]}),i===t.id&&e.jsx("span",{className:"text-emerald-400",children:"âœ“"})]})},t.id))})]}),n.filter(t=>t.type==="api").length>0&&e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>ke(!W),className:"w-full px-3 py-2 flex items-center justify-between text-[10px] uppercase tracking-wider text-slate-400 font-semibold hover:bg-slate-700/30 transition-colors border-t border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{children:"API Models"})]}),e.jsx(X,{size:12,className:`transition-transform ${W?"":"-rotate-90"}`})]}),W&&e.jsx("div",{children:n.filter(t=>t.type==="api").map(t=>e.jsx("button",{onClick:()=>{L(t.id),P(!1)},className:`w-full px-4 py-2 text-left text-xs font-medium transition-colors ${i===t.id?"bg-blue-500/20 text-slate-200":"text-slate-300 hover:bg-slate-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500/40"}),e.jsx("span",{children:t.name})]}),i===t.id&&e.jsx("span",{className:"text-blue-400",children:"âœ“"})]})},t.id))})]}),e.jsx("div",{className:"border-t border-slate-700",children:e.jsxs("button",{onClick:()=>{w(!0),P(!1)},className:"w-full px-3 py-2 text-left text-xs font-medium text-yellow-400 hover:bg-slate-700/50 transition-colors flex items-center gap-2",children:[e.jsx(B,{size:12}),e.jsx("span",{children:"Enable Auto Mode"})]})})]})})]}),N&&e.jsxs("div",{className:"relative",onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),children:[e.jsx(we,{size:13,className:"text-slate-500/60 hover:text-slate-400/80 transition-colors cursor-help"}),oe&&e.jsxs("div",{className:"absolute left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-2 rounded-lg bg-slate-800 border border-slate-700 text-slate-300 text-xs z-50 shadow-xl w-48",children:[N.type==="local"&&e.jsxs("ul",{className:"space-y-1.5",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(B,{size:11,className:"shrink-0 text-emerald-400"}),e.jsx("span",{children:"Small language models"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(ve,{size:11,className:"shrink-0 text-slate-400"}),e.jsx("span",{children:"Hosted on our servers"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(je,{size:11,className:"shrink-0 text-blue-400"}),e.jsx("span",{children:"No quota limits"})]})]}),N.type==="api"&&e.jsxs("ul",{className:"space-y-1.5",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(ye,{size:11,className:"shrink-0 text-blue-400"}),e.jsx("span",{children:"Cloud-based models"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(ge,{size:11,className:"shrink-0 text-yellow-400"}),e.jsx("span",{children:"Free quota available"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(B,{size:11,className:"shrink-0 text-purple-400"}),e.jsx("span",{children:"More capable models"})]})]})]})]})]})]}),!p&&(!h&&(N==null?void 0:N.type)==="api"||h&&l==="api")&&e.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 mt-16 flex items-center gap-2 px-3 py-1.5 rounded-md bg-yellow-500/10 border border-yellow-500/20 text-yellow-200 text-xs whitespace-nowrap",children:[e.jsx(he,{size:11,className:"shrink-0 text-yellow-500"}),e.jsx("span",{children:"Add GitHub token in Settings for dedicated quota"})]})]}),f.map((t,s)=>e.jsx("div",{ref:c=>{c?V.current.set(s,c):V.current.delete(s)},className:`flex ${t.role==="user"?"justify-end":"justify-start"}`,"data-message":s,onClick:c=>{(c.target===c.currentTarget||c.target.closest("[data-message]")===c.currentTarget)&&$(m=>{const k=new Set(m);return k.has(s)?k.delete(s):k.add(s),k})},children:e.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 pt-3 pb-0 select-none transition-all cursor-pointer ${H.has(s)?"ring-2 ring-blue-500 bg-blue-500/10":""} ${t.role==="user"?"bg-blue-600/20 border border-blue-500/30 text-white rounded-tr-sm":t.error?"bg-red-500/10 border border-red-500/30 text-red-200 rounded-tl-sm":"bg-slate-800/60 border border-slate-700/60 text-slate-200 rounded-tl-sm"}`,children:[e.jsxs("div",{className:`flex items-center gap-2 mb-1 text-[10px] font-bold uppercase tracking-wider ${t.role==="user"?"text-blue-300 flex-row-reverse":"text-slate-400"}`,children:[t.role==="user"?e.jsx(Xe,{size:12}):e.jsx(be,{size:12}),t.role==="user"?"You":t.modelName||"Assistant",t.error&&e.jsx(he,{size:12,className:"text-red-400"})]}),e.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:e.jsx(pe,{text:t.role==="user"?t.content:Be(t.content)})})]})},s)),o&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"max-w-[85%] rounded-2xl rounded-tl-sm px-4 pt-3 pb-0 text-slate-200 relative",style:{background:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(251, 191, 36, 0.4)",boxShadow:"0 0 20px rgba(251, 191, 36, 0.15), inset 0 0 30px rgba(251, 191, 36, 0.03)"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 text-[10px] font-bold uppercase tracking-wider text-amber-400/80",children:[e.jsx("div",{className:"relative flex items-center justify-center",style:{width:"14px",height:"14px"},children:e.jsxs("svg",{width:14,height:14,viewBox:"0 0 24 24",fill:"none",style:{filter:"drop-shadow(0 0 6px rgba(251, 191, 36, 0.55))",animation:"spin 0.6s linear infinite"},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"chatSpinnerGradient",gradientUnits:"userSpaceOnUse",x1:"3",y1:"12",x2:"12",y2:"3",children:[e.jsx("stop",{offset:"0%",stopColor:"#fbbf24",stopOpacity:"1"}),e.jsx("stop",{offset:"60%",stopColor:"#fbbf24",stopOpacity:"0.5"}),e.jsx("stop",{offset:"100%",stopColor:"#fbbf24",stopOpacity:"0"})]})}),e.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"rgba(251, 191, 36, 0.15)",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M 12 3 A 9 9 0 1 1 3 12",stroke:"url(#chatSpinnerGradient)",strokeWidth:"2",strokeLinecap:"round",fill:"none"}),e.jsx("circle",{cx:"3",cy:"12",r:"1.4",fill:"#fbbf24"})]})}),(ee==null?void 0:ee.name)||"Assistant"]}),e.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:e.jsx(pe,{text:b})})]})})]})}),e.jsx(De,{inputRef:q,inputFocused:_,setInputFocused:ne,onSendMessage:xe,onOpenTopics:E,placeholder:h?"Message (Auto mode - will use auto-selected model)...":N?`Message ${N.name}...`:"Select a model from the dock to start chatting...",isGenerating:o,onStop:fe,className:"fixed bottom-0 left-0 right-[400px] xl:right-[480px] z-[100] pb-6 px-3 sm:px-4 flex justify-center items-end pointer-events-none transition-all duration-300",style:{paddingBottom:"calc(1.5rem + env(safe-area-inset-bottom))"}})]})});export{tt as default};
