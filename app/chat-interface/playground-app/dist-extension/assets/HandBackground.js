import{k as Hl,r as S,j as jr}from"./index.js";var sn=typeof self<"u"?self:{};function xt(){throw Error("Invalid UTF8")}function Io(e,r){return r=String.fromCharCode.apply(null,r),e==null?r:e+r}let ii,Qi;const jl=typeof TextDecoder<"u";let zl;const Wl=typeof TextEncoder<"u";function za(e){if(Wl)e=(zl||(zl=new TextEncoder)).encode(e);else{let t=0;const n=new Uint8Array(3*e.length);for(let i=0;i<e.length;i++){var r=e.charCodeAt(i);if(r<128)n[t++]=r;else{if(r<2048)n[t++]=r>>6|192;else{if(r>=55296&&r<=57343){if(r<=56319&&i<e.length){const o=e.charCodeAt(++i);if(o>=56320&&o<=57343){r=1024*(r-55296)+o-56320+65536,n[t++]=r>>18|240,n[t++]=r>>12&63|128,n[t++]=r>>6&63|128,n[t++]=63&r|128;continue}i--}r=65533}n[t++]=r>>12|224,n[t++]=r>>6&63|128}n[t++]=63&r|128}}e=t===n.length?n:n.subarray(0,t)}return e}var xs,pi;e:{for(var Oo=["CLOSURE_FLAGS"],es=sn,rs=0;rs<Oo.length;rs++)if((es=es[Oo[rs]])==null){pi=null;break e}pi=es}var Wn,No=pi&&pi[610401301];xs=No!=null&&No;const Uo=sn.navigator;function ds(e){return!!xs&&!!Wn&&Wn.brands.some(({brand:r})=>r&&r.indexOf(e)!=-1)}function ur(e){var r;return(r=sn.navigator)&&(r=r.userAgent)||(r=""),r.indexOf(e)!=-1}function at(){return!!xs&&!!Wn&&Wn.brands.length>0}function ts(){return at()?ds("Chromium"):(ur("Chrome")||ur("CriOS"))&&!(!at()&&ur("Edge"))||ur("Silk")}function _i(e){return _i[" "](e),e}Wn=Uo&&Uo.userAgentData||null,_i[" "]=function(){};var Xl=!at()&&(ur("Trident")||ur("MSIE"));!ur("Android")||ts(),ts(),ur("Safari")&&(ts()||!at()&&ur("Coast")||!at()&&ur("Opera")||!at()&&ur("Edge")||(at()?ds("Microsoft Edge"):ur("Edg/"))||at()&&ds("Opera"));var Wa={},Vn=null;function Kl(e){const r=e.length;let t=3*r/4;t%3?t=Math.floor(t):"=.".indexOf(e[r-1])!=-1&&(t="=.".indexOf(e[r-2])!=-1?t-2:t-1);const n=new Uint8Array(t);let i=0;return function(o,a){function u(c){for(;l<o.length;){const m=o.charAt(l++),k=Vn[m];if(k!=null)return k;if(!/^[\s\xa0]*$/.test(m))throw Error("Unknown base64 encoding at char: "+m)}return c}Xa();let l=0;for(;;){const c=u(-1),m=u(0),k=u(64),U=u(64);if(U===64&&c===-1)break;a(c<<2|m>>4),k!=64&&(a(m<<4&240|k>>2),U!=64&&a(k<<6&192|U))}}(e,function(o){n[i++]=o}),i!==t?n.subarray(0,i):n}function Xa(){if(!Vn){Vn={};var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),r=["+/=","+/","-_=","-_.","-_"];for(let t=0;t<5;t++){const n=e.concat(r[t].split(""));Wa[t]=n;for(let i=0;i<n.length;i++){const o=n[i];Vn[o]===void 0&&(Vn[o]=i)}}}}var Ka=typeof Uint8Array<"u",qa=!Xl&&typeof btoa=="function";function Go(e){if(!qa){var r;r===void 0&&(r=0),Xa(),r=Wa[r];var t=Array(Math.floor(e.length/3)),n=r[64]||"";let l=0,c=0;for(;l<e.length-2;l+=3){var i=e[l],o=e[l+1],a=e[l+2],u=r[i>>2];i=r[(3&i)<<4|o>>4],o=r[(15&o)<<2|a>>6],a=r[63&a],t[c++]=u+i+o+a}switch(u=0,a=n,e.length-l){case 2:a=r[(15&(u=e[l+1]))<<2]||n;case 1:e=e[l],t[c]=r[e>>2]+r[(3&e)<<4|u>>4]+a+n}return t.join("")}for(r="",t=0,n=e.length-10240;t<n;)r+=String.fromCharCode.apply(null,e.subarray(t,t+=10240));return r+=String.fromCharCode.apply(null,t?e.subarray(t):e),btoa(r)}const Vo=/[-_.]/g,ql={"-":"+",_:"/",".":"="};function Yl(e){return ql[e]||""}function Ya(e){if(!qa)return Kl(e);Vo.test(e)&&(e=e.replace(Vo,Yl)),e=atob(e);const r=new Uint8Array(e.length);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return r}function Ut(e){return Ka&&e!=null&&e instanceof Uint8Array}var on={};function Gt(){return $l||($l=new Kr(null,on))}function Ps(e){$a(on);var r=e.g;return(r=r==null||Ut(r)?r:typeof r=="string"?Ya(r):null)==null?r:e.g=r}var Kr=class{h(){return new Uint8Array(Ps(this)||0)}constructor(e,r){if($a(r),this.g=e,e!=null&&e.length===0)throw Error("ByteString should be constructed with non-empty values")}};let $l,Jl;function $a(e){if(e!==on)throw Error("illegal external caller")}function Ja(e,r){e.__closure__error__context__984382||(e.__closure__error__context__984382={}),e.__closure__error__context__984382.severity=r}function fs(e){return Ja(e=Error(e),"warning"),e}function Is(e){if(e!=null){var r=Jl??(Jl={}),t=r[e]||0;t>=5||(r[e]=t+1,Ja(e=Error(),"incident"),function(n){sn.setTimeout(()=>{throw n},0)}(e))}}var bi=typeof Symbol=="function"&&typeof Symbol()=="symbol";function mn(e,r,t=!1){return typeof Symbol=="function"&&typeof Symbol()=="symbol"?t&&Symbol.for&&e?Symbol.for(e):e!=null?Symbol(e):Symbol():r}var Zl=mn("jas",void 0,!0),Bo=mn(void 0,"0di"),Un=mn(void 0,"1oa"),an=mn(void 0,Symbol()),Ql=mn(void 0,"0actk"),Za=mn(void 0,"8utk");const A=bi?Zl:"Ea",Qa={Ea:{value:0,configurable:!0,writable:!0,enumerable:!1}},eu=Object.defineProperties;function wi(e,r){bi||A in e||eu(e,Qa),e[A]|=r}function pe(e,r){bi||A in e||eu(e,Qa),e[A]=r}function yn(e){return wi(e,34),e}function ec(e,r){pe(r,-15615&(0|e))}function gs(e,r){pe(r,-15581&(34|e))}function Ai(){return typeof BigInt=="function"}function je(e){return Array.prototype.slice.call(e)}var Os,Jn={};function Ei(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)&&e.constructor===Object}function Ns(e,r){if(e!=null){if(typeof e=="string")e=e?new Kr(e,on):Gt();else if(e.constructor!==Kr)if(Ut(e))e=e.length?new Kr(new Uint8Array(e),on):Gt();else{if(!r)throw Error();e=void 0}}return e}const Ho=[];function pt(e){if(2&e)throw Error()}pe(Ho,55),Os=Object.freeze(Ho);class jo{constructor(r,t,n){this.g=r,this.h=t,this.l=n}next(){const r=this.g.next();return r.done||(r.value=this.h.call(this.l,r.value)),r}[Symbol.iterator](){return this}}function Us(e){return an?e[an]:void 0}var rc=Object.freeze({});function Ti(e){return e.Na=!0,e}var tc=Ti(e=>typeof e=="number"),zo=Ti(e=>typeof e=="string"),nc=Ti(e=>typeof e=="boolean"),ki=typeof sn.BigInt=="function"&&typeof sn.BigInt(0)=="bigint";function lt(e){var r=e;if(zo(r)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(r))throw Error(String(r))}else if(tc(r)&&!Number.isSafeInteger(r))throw Error(String(r));return ki?BigInt(e):e=nc(e)?e?"1":"0":zo(e)?e.trim()||"0":String(e)}var ps=Ti(e=>ki?e>=sc&&e<=ac:e[0]==="-"?Wo(e,ic):Wo(e,oc));const ic=Number.MIN_SAFE_INTEGER.toString(),sc=ki?BigInt(Number.MIN_SAFE_INTEGER):void 0,oc=Number.MAX_SAFE_INTEGER.toString(),ac=ki?BigInt(Number.MAX_SAFE_INTEGER):void 0;function Wo(e,r){if(e.length>r.length)return!1;if(e.length<r.length||e===r)return!0;for(let t=0;t<e.length;t++){const n=e[t],i=r[t];if(n>i)return!1;if(n<i)return!0}}const uc=typeof Uint8Array.prototype.slice=="function";let ru,Y=0,he=0;function Xo(e){const r=e>>>0;Y=r,he=(e-r)/4294967296>>>0}function Vt(e){if(e<0){Xo(-e);const[r,t]=Hs(Y,he);Y=r>>>0,he=t>>>0}else Xo(e)}function Gs(e){const r=ru||(ru=new DataView(new ArrayBuffer(8)));r.setFloat32(0,+e,!0),he=0,Y=r.getUint32(0,!0)}function Vs(e,r){const t=4294967296*r+(e>>>0);return Number.isSafeInteger(t)?t:Xn(e,r)}function Bs(e,r){const t=2147483648&r;return t&&(r=~r>>>0,(e=1+~e>>>0)==0&&(r=r+1>>>0)),typeof(e=Vs(e,r))=="number"?t?-e:e:t?"-"+e:e}function Xn(e,r){if(e>>>=0,(r>>>=0)<=2097151)var t=""+(4294967296*r+e);else Ai()?t=""+(BigInt(r)<<BigInt(32)|BigInt(e)):(e=(16777215&e)+6777216*(t=16777215&(e>>>24|r<<8))+6710656*(r=r>>16&65535),t+=8147497*r,r*=2,e>=1e7&&(t+=e/1e7>>>0,e%=1e7),t>=1e7&&(r+=t/1e7>>>0,t%=1e7),t=r+Ko(t)+Ko(e));return t}function Ko(e){return e=String(e),"0000000".slice(e.length)+e}function tu(){var e=Y,r=he;if(2147483648&r)if(Ai())e=""+(BigInt(0|r)<<BigInt(32)|BigInt(e>>>0));else{const[t,n]=Hs(e,r);e="-"+Xn(t,n)}else e=Xn(e,r);return e}function Di(e){if(e.length<16)Vt(Number(e));else if(Ai())e=BigInt(e),Y=Number(e&BigInt(4294967295))>>>0,he=Number(e>>BigInt(32)&BigInt(4294967295));else{const r=+(e[0]==="-");he=Y=0;const t=e.length;for(let n=r,i=(t-r)%6+r;i<=t;n=i,i+=6){const o=Number(e.slice(n,i));he*=1e6,Y=1e6*Y+o,Y>=4294967296&&(he+=Math.trunc(Y/4294967296),he>>>=0,Y>>>=0)}if(r){const[n,i]=Hs(Y,he);Y=n,he=i}}}function Hs(e,r){return r=~r,e?e=1+~e:r+=1,[e,r]}const Kn=typeof BigInt=="function"?BigInt.asIntN:void 0,lc=typeof BigInt=="function"?BigInt.asUintN:void 0,ct=Number.isSafeInteger,Si=Number.isFinite,un=Math.trunc,cc=lt(0);function mt(e){return e==null||typeof e=="number"?e:e==="NaN"||e==="Infinity"||e==="-Infinity"?Number(e):void 0}function nu(e){return e==null||typeof e=="boolean"?e:typeof e=="number"?!!e:void 0}const hc=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function qn(e){switch(typeof e){case"bigint":return!0;case"number":return Si(e);case"string":return hc.test(e);default:return!1}}function Fn(e){if(e==null)return e;if(typeof e=="string"&&e)e=+e;else if(typeof e!="number")return;return Si(e)?0|e:void 0}function iu(e){if(e==null)return e;if(typeof e=="string"&&e)e=+e;else if(typeof e!="number")return;return Si(e)?e>>>0:void 0}function qo(e){if(e[0]==="-")return!1;const r=e.length;return r<20||r===20&&Number(e.substring(0,6))<184467}function su(e){const r=e.length;return e[0]==="-"?r<20||r===20&&Number(e.substring(0,7))>-922337:r<19||r===19&&Number(e.substring(0,6))<922337}function ou(e){return su(e)?e:(Di(e),tu())}function js(e){return e=un(e),ct(e)||(Vt(e),e=Bs(Y,he)),e}function au(e){var r=un(Number(e));return ct(r)?String(r):((r=e.indexOf("."))!==-1&&(e=e.substring(0,r)),ou(e))}function Yo(e){var r=un(Number(e));return ct(r)?lt(r):((r=e.indexOf("."))!==-1&&(e=e.substring(0,r)),Ai()?lt(Kn(64,BigInt(e))):lt(ou(e)))}function $o(e){if(ct(e))e=lt(js(e));else{if(e=un(e),ct(e))e=String(e);else{const r=String(e);su(r)?e=r:(Vt(e),e=tu())}e=lt(e)}return e}function ms(e){return e==null?e:typeof e=="bigint"?(ps(e)?e=Number(e):(e=Kn(64,e),e=ps(e)?Number(e):String(e)),e):qn(e)?typeof e=="number"?js(e):au(e):void 0}function dc(e){if(e==null)return e;var r=typeof e;if(r==="bigint")return String(lc(64,e));if(qn(e)){if(r==="string")return r=un(Number(e)),ct(r)&&r>=0?e=String(r):((r=e.indexOf("."))!==-1&&(e=e.substring(0,r)),qo(e)||(Di(e),e=Xn(Y,he))),e;if(r==="number")return(e=un(e))>=0&&ct(e)?e:function(t){if(t<0){Vt(t);var n=Xn(Y,he);return t=Number(n),ct(t)?t:n}return qo(n=String(t))?n:(Vt(t),Vs(Y,he))}(e)}}function uu(e){if(typeof e!="string")throw Error();return e}function Cn(e){if(e!=null&&typeof e!="string")throw Error();return e}function ln(e){return e==null||typeof e=="string"?e:void 0}function zs(e,r,t,n){if(e!=null&&typeof e=="object"&&e.W===Jn)return e;if(!Array.isArray(e))return t?2&n?((e=r[Bo])||(yn((e=new r).u),e=r[Bo]=e),r=e):r=new r:r=void 0,r;let i=t=0|e[A];return i===0&&(i|=32&n),i|=2&n,i!==t&&pe(e,i),new r(e)}function fc(e,r,t){if(r)e:{if(!qn(r=e))throw fs("int64");switch(typeof r){case"string":r=Yo(r);break e;case"bigint":r=lt(Kn(64,r));break e;default:r=$o(r)}}else e=typeof(r=e),r=r==null?r:e==="bigint"?lt(Kn(64,r)):qn(r)?e==="string"?Yo(r):$o(r):void 0;return(e=r)==null?t?cc:void 0:e}function gc(e){return e}const pc={};let mc=function(){try{return _i(new class extends Map{constructor(){super()}}),!1}catch{return!0}}();class ns{constructor(){this.g=new Map}get(r){return this.g.get(r)}set(r,t){return this.g.set(r,t),this.size=this.g.size,this}delete(r){return r=this.g.delete(r),this.size=this.g.size,r}clear(){this.g.clear(),this.size=this.g.size}has(r){return this.g.has(r)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(r,t){return this.g.forEach(r,t)}[Symbol.iterator](){return this.entries()}}const yc=mc?(Object.setPrototypeOf(ns.prototype,Map.prototype),Object.defineProperties(ns.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),ns):class extends Map{constructor(){super()}};function Jo(e){return e}function is(e){if(2&e.M)throw Error("Cannot mutate an immutable Map")}var Lr=class extends yc{constructor(e,r,t=Jo,n=Jo){super();let i=0|e[A];i|=64,pe(e,i),this.M=i,this.I=r,this.S=t,this.X=this.I?Fc:n;for(let o=0;o<e.length;o++){const a=e[o],u=t(a[0],!1,!0);let l=a[1];r?l===void 0&&(l=null):l=n(a[1],!1,!0,void 0,void 0,i),super.set(u,l)}}La(){var e=wc;if(this.size!==0)return Array.from(super.entries(),r=>(r[0]=e(r[0]),r[1]=e(r[1]),r))}da(e=Cc){const r=[],t=super.entries();for(var n;!(n=t.next()).done;)(n=n.value)[0]=e(n[0]),n[1]=e(n[1]),r.push(n);return r}clear(){is(this),super.clear()}delete(e){return is(this),super.delete(this.S(e,!0,!1))}entries(){if(this.I){var e=super.keys();e=new jo(e,vc,this)}else e=super.entries();return e}values(){if(this.I){var e=super.keys();e=new jo(e,Lr.prototype.get,this)}else e=super.values();return e}forEach(e,r){this.I?super.forEach((t,n,i)=>{e.call(r,i.get(n),n,i)}):super.forEach(e,r)}set(e,r){return is(this),(e=this.S(e,!0,!1))==null?this:r==null?(super.delete(e),this):super.set(e,this.X(r,!0,!0,this.I,!1,this.M))}Ja(e){const r=this.S(e[0],!1,!0);e=e[1],e=this.I?e===void 0?null:e:this.X(e,!1,!0,void 0,!1,this.M),super.set(r,e)}has(e){return super.has(this.S(e,!1,!1))}get(e){e=this.S(e,!1,!1);const r=super.get(e);if(r!==void 0){var t=this.I;return t?((t=this.X(r,!1,!0,t,this.pa,this.M))!==r&&super.set(e,t),t):r}}[Symbol.iterator](){return this.entries()}};function Fc(e,r,t,n,i,o){return e=zs(e,n,t,o),i&&(e=Ri(e)),e}function Cc(e){return e}function vc(e){return[e,this.get(e)]}let _c,lu,cu,bc;function Zo(){return _c||(_c=new Lr(yn([]),void 0,void 0,void 0,pc))}function ys(e,r,t,n,i){if(e!=null){if(Array.isArray(e)){const o=0|e[A];return e.length===0&&1&o?void 0:i&&2&o?e:Li(e,r,t,n!==void 0,i)}return r(e,n)}}function Li(e,r,t,n,i){const o=n||t?0|e[A]:0,a=n?!!(32&o):void 0;let u=0;const l=(n=je(e)).length;for(let ve=0;ve<l;ve++){var c=n[ve];if(ve===l-1&&Ei(c)){var m=r,k=t,U=a,Ee=i;let ir;for(let fr in c){const gr=ys(c[fr],m,k,U,Ee);gr!=null&&((ir??(ir={}))[fr]=gr)}c=ir}else c=ys(n[ve],r,t,a,i);n[ve]=c,c!=null&&(u=ve+1)}return u<l&&(n.length=u),t&&((e=Us(e))&&(n[an]=je(e)),t(o,n)),n}function wc(e){return ys(e,Ws,void 0,void 0,!1)}function Ws(e){switch(typeof e){case"number":return Number.isFinite(e)?e:""+e;case"bigint":return ps(e)?Number(e):""+e;case"boolean":return e?1:0;case"object":if(Ut(e))return Ut(e)&&Is(Za),Go(e);if(e.W===Jn)return hu(e);if(e instanceof Kr){const r=e.g;return r==null?"":typeof r=="string"?r:e.g=Go(r)}return e instanceof Lr?e.La():void 0}return e}function hu(e){var r=e.u;e=Li(r,Ws,void 0,void 0,!1);var t=0|r[A];if((r=e.length)&&!(512&t)){var n=e[r-1],i=!1;Ei(n)?(r--,i=!0):n=void 0;var o=r-(t=512&t?0:-1),a=(lu??gc)(o,t,e,n);if(n&&(e[r]=void 0),o<a&&n){for(var u in o=!0,n){const l=+u;l<=a?(e[i=l+t]=n[u],r=Math.max(i+1,r),i=!1,delete n[u]):o=!1}o&&(n=void 0)}for(o=r-1;r>0;o=r-1)if((u=e[o])==null)r--,i=!0;else{if(!((o-=t)>=a))break;(n??(n={}))[o]=u,r--,i=!0}i&&(e.length=r),n&&e.push(n)}return e}function ht(e,r,t){return e=du(e,r[0],r[1],t?1:2),r!==cu&&t&&wi(e,8192),e}function du(e,r,t,n){if(e==null){var i=96;t?(e=[t],i|=512):e=[],r&&(i=-16760833&i|(1023&r)<<14)}else{if(!Array.isArray(e))throw Error("narr");if(8192&(i=0|e[A])||!(64&i)||2&i||Is(Ql),1024&i)throw Error("farr");if(64&i)return e;if(n===1||n===2||(i|=64),t&&(i|=512,t!==e[0]))throw Error("mid");e:{var o=(t=e).length;if(o){var a=o-1;if(Ei(n=t[a])){if((a-=r=512&(i|=256)?0:-1)>=1024)throw Error("pvtlmt");for(var u in n)(o=+u)<a&&(t[o+r]=n[u],delete n[u]);i=-16760833&i|(1023&a)<<14;break e}}if(r){if((u=Math.max(r,o-(512&i?0:-1)))>1024)throw Error("spvt");i=-16760833&i|(1023&u)<<14}}}return pe(e,i),e}function Fs(e,r,t=gs){if(e!=null){if(Ka&&e instanceof Uint8Array)return r?e:new Uint8Array(e);if(Array.isArray(e)){var n=0|e[A];return 2&n?e:(r&&(r=n===0||!!(32&n)&&!(64&n||!(16&n))),r?(pe(e,34|n),4&n&&Object.freeze(e),e):Li(e,Fs,4&n?gs:t,!0,!0))}return e.W===Jn?e=2&(n=0|(t=e.u)[A])?e:new e.constructor(Mi(t,n,!0)):e instanceof Lr&&!(2&e.M)&&(t=yn(e.da(Fs)),e=new Lr(t,e.I,e.S,e.X)),e}}function Mi(e,r,t){const n=t||2&r?gs:ec,i=!!(32&r);return e=function(o,a,u){const l=je(o);var c=l.length;const m=256&a?l[c-1]:void 0;for(c+=m?-1:0,a=512&a?1:0;a<c;a++)l[a]=u(l[a]);if(m){a=l[a]={};for(const k in m)a[k]=u(m[k])}return(o=Us(o))&&(l[an]=je(o)),l}(e,r,o=>Fs(o,i,n)),wi(e,32|(t?2:0)),e}function Ri(e){const r=e.u,t=0|r[A];return 2&t?new e.constructor(Mi(r,t,!1)):e}function cn(e,r){return Zr(e=e.u,0|e[A],r)}function Zr(e,r,t){if(t===-1)return null;const n=t+(512&r?0:-1),i=e.length-1;return n>=i&&256&r?e[i][t]:n<=i?e[n]:void 0}function J(e,r,t){const n=e.u;let i=0|n[A];return pt(i),ue(n,i,r,t),e}function ue(e,r,t,n){const i=512&r?0:-1,o=t+i;var a=e.length-1;return o>=a&&256&r?(e[a][t]=n,r):o<=a?(e[o]=n,r):(n!==void 0&&(t>=(a=r>>14&1023||536870912)?n!=null&&(e[a+i]={[t]:n},pe(e,r|=256)):e[o]=n),r)}function ci(e,r){let t=0|(e=e.u)[A];const n=Zr(e,t,r),i=mt(n);return i!=null&&i!==n&&ue(e,t,r,i),i}function fu(e){let r=0|(e=e.u)[A];const t=Zr(e,r,1),n=Ns(t,!0);return n!=null&&n!==t&&ue(e,r,1,n),n}function It(){return rc===void 0?2:4}function Ot(e,r,t,n,i){const o=e.u,a=2&(e=0|o[A])?1:n;i=!!i;let u=0|(n=Xs(o,e,r))[A];if(!(4&u)){4&u&&(n=je(n),u=qr(u,e),e=ue(o,e,r,n));let l=0,c=0;for(;l<n.length;l++){const m=t(n[l]);m!=null&&(n[c++]=m)}c<l&&(n.length=c),u=Ks(u,e),t=-2049&(20|u),u=t&=-4097,pe(n,u),2&u&&Object.freeze(n)}return a===1||a===4&&32&u?Xr(u)||(i=u,u|=2,u!==i&&pe(n,u),Object.freeze(n)):(a===2&&Xr(u)&&(n=je(n),u=qr(u,e),u=dt(u,e,i),pe(n,u),e=ue(o,e,r,n)),Xr(u)||(r=u,u=dt(u,e,i),u!==r&&pe(n,u))),n}function Xs(e,r,t){return e=Zr(e,r,t),Array.isArray(e)?e:Os}function Ks(e,r){return e===0&&(e=qr(e,r)),1|e}function Xr(e){return!!(2&e)&&!!(4&e)||!!(1024&e)}function gu(e){e=je(e);for(let r=0;r<e.length;r++){const t=e[r]=je(e[r]);Array.isArray(t[1])&&(t[1]=yn(t[1]))}return e}function Cs(e,r,t,n){let i=0|(e=e.u)[A];pt(i),ue(e,i,r,(n==="0"?Number(t)===0:t===n)?void 0:t)}function vn(e,r,t,n){pt(r);let i=Xs(e,r,t);const o=i!==Os;if(64&r||!(8192&r)||!o){const a=o?0|i[A]:0;let u=a;(!o||2&u||Xr(u)||4&u&&!(32&u))&&(i=je(i),u=qr(u,r),r=ue(e,r,t,i)),u=-13&Ks(u,r),u=dt(n?-17&u:16|u,r,!0),u!==a&&pe(i,u)}return i}function ss(e,r){var t=tl;return Ys(qs(e=e.u),e,0|e[A],t)===r?r:-1}function qs(e){if(bi)return e[Un]??(e[Un]=new Map);if(Un in e)return e[Un];const r=new Map;return Object.defineProperty(e,Un,{value:r}),r}function pu(e,r,t,n){const i=qs(e),o=Ys(i,e,r,t);return o!==n&&(o&&(r=ue(e,r,o)),i.set(t,n)),r}function Ys(e,r,t,n){let i=e.get(n);if(i!=null)return i;i=0;for(let o=0;o<n.length;o++){const a=n[o];Zr(r,t,a)!=null&&(i!==0&&(t=ue(r,t,i)),i=a)}return e.set(n,i),i}function $s(e,r,t){let n=0|e[A];const i=Zr(e,n,t);let o;if(i!=null&&i.W===Jn)return(r=Ri(i))!==i&&ue(e,n,t,r),r.u;if(Array.isArray(i)){const a=0|i[A];o=2&a?ht(Mi(i,a,!1),r,!0):64&a?i:ht(o,r,!0)}else o=ht(void 0,r,!0);return o!==i&&ue(e,n,t,o),o}function mu(e,r,t){let n=0|(e=e.u)[A];const i=Zr(e,n,t);return(r=zs(i,r,!1,n))!==i&&r!=null&&ue(e,n,t,r),r}function N(e,r,t){if((r=mu(e,r,t))==null)return r;let n=0|(e=e.u)[A];if(!(2&n)){const i=Ri(r);i!==r&&ue(e,n,t,r=i)}return r}function yu(e,r,t,n,i,o,a){e=e.u;var u=!!(2&r);const l=u?1:i;o=!!o,a&&(a=!u);var c=0|(i=Xs(e,r,n))[A];if(!(u=!!(4&c))){var m=i,k=r;const U=!!(2&(c=Ks(c,r)));U&&(k|=2);let Ee=!U,ve=!0,ir=0,fr=0;for(;ir<m.length;ir++){const gr=zs(m[ir],t,!1,k);if(gr instanceof t){if(!U){const pr=!!(2&(0|gr.u[A]));Ee&&(Ee=!pr),ve&&(ve=pr)}m[fr++]=gr}}fr<ir&&(m.length=fr),c|=4,c=ve?16|c:-17&c,pe(m,c=Ee?8|c:-9&c),U&&Object.freeze(m)}if(a&&!(8&c||!i.length&&(l===1||l===4&&32&c))){for(Xr(c)&&(i=je(i),c=qr(c,r),r=ue(e,r,n,i)),t=i,a=c,m=0;m<t.length;m++)(c=t[m])!==(k=Ri(c))&&(t[m]=k);a|=8,pe(t,a=t.length?-17&a:16|a),c=a}return l===1||l===4&&32&c?Xr(c)||(r=c,(c|=!i.length||16&c&&(!u||32&c)?2:1024)!==r&&pe(i,c),Object.freeze(i)):(l===2&&Xr(c)&&(pe(i=je(i),c=dt(c=qr(c,r),r,o)),r=ue(e,r,n,i)),Xr(c)||(n=c,(c=dt(c,r,o))!==n&&pe(i,c))),i}function $r(e,r,t){const n=0|e.u[A];return yu(e,n,r,t,It(),!1,!(2&n))}function T(e,r,t,n){return n==null&&(n=void 0),J(e,t,n)}function Hn(e,r,t,n){n==null&&(n=void 0);e:{let i=0|(e=e.u)[A];if(pt(i),n==null){const o=qs(e);if(Ys(o,e,i,t)!==r)break e;o.set(t,0)}else i=pu(e,i,t,r);ue(e,i,r,n)}}function qr(e,r){return-1025&(e=32|(2&r?2|e:-3&e))}function dt(e,r,t){return 32&r&&t||(e&=-33),e}function xi(e,r,t){pt(0|e.u[A]),Ot(e,r,ln,2,!0).push(uu(t))}function mi(e,r,t,n){const i=0|e.u[A];pt(i),e=yu(e,i,t,r,2,!0),n=n??new t,e.push(n),e[A]=2&(0|n.u[A])?-9&e[A]:-17&e[A]}function lr(e,r){return Fn(cn(e,r))}function cr(e,r){return ln(cn(e,r))}function fe(e,r){return ci(e,r)??0}function Yn(e,r,t){if(t!=null&&typeof t!="boolean")throw e=typeof t,Error(`Expected boolean but got ${e!="object"?e:t?Array.isArray(t)?"array":e:"null"}: ${t}`);J(e,r,t)}function Mr(e,r,t){if(t!=null){if(typeof t!="number"||!Si(t))throw fs("int32");t|=0}J(e,r,t)}function b(e,r,t){if(t!=null&&typeof t!="number")throw Error(`Value of float/double field must be a number, found ${typeof t}: ${t}`);J(e,r,t)}function yi(e,r,t){{const a=e.u;let u=0|a[A];if(pt(u),t==null)ue(a,u,r);else{var n=e=0|t[A],i=Xr(e),o=i||Object.isFrozen(t);for(i||(e=0),o||(t=je(t),n=0,e=dt(e=qr(e,u),u,!0),o=!1),e|=21,i=0;i<t.length;i++){const l=t[i],c=uu(l);Object.is(l,c)||(o&&(t=je(t),n=0,e=dt(e=qr(e,u),u,!0),o=!1),t[i]=c)}e!==n&&(o&&(t=je(t),e=dt(e=qr(e,u),u,!0)),pe(t,e)),ue(a,u,r,t)}}}function Fu(e,r){return Error(`Invalid wire type: ${e} (at position ${r})`)}function Js(){return Error("Failed to read varint, encoding is invalid.")}function Cu(e,r){return Error(`Tried to read past the end of the data ${r} > ${e}`)}function Zs(e){if(typeof e=="string")return{buffer:Ya(e),O:!1};if(Array.isArray(e))return{buffer:new Uint8Array(e),O:!1};if(e.constructor===Uint8Array)return{buffer:e,O:!1};if(e.constructor===ArrayBuffer)return{buffer:new Uint8Array(e),O:!1};if(e.constructor===Kr)return{buffer:Ps(e)||new Uint8Array(0),O:!0};if(e instanceof Uint8Array)return{buffer:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),O:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Qs(e,r){let t,n=0,i=0,o=0;const a=e.h;let u=e.g;do t=a[u++],n|=(127&t)<<o,o+=7;while(o<32&&128&t);for(o>32&&(i|=(127&t)>>4),o=3;o<32&&128&t;o+=7)t=a[u++],i|=(127&t)<<o;if(Nt(e,u),t<128)return r(n>>>0,i>>>0);throw Js()}function eo(e){let r=0,t=e.g;const n=t+10,i=e.h;for(;t<n;){const o=i[t++];if(r|=o,(128&o)==0)return Nt(e,t),!!(127&r)}throw Js()}function ft(e){const r=e.h;let t=e.g,n=r[t++],i=127&n;if(128&n&&(n=r[t++],i|=(127&n)<<7,128&n&&(n=r[t++],i|=(127&n)<<14,128&n&&(n=r[t++],i|=(127&n)<<21,128&n&&(n=r[t++],i|=n<<28,128&n&&128&r[t++]&&128&r[t++]&&128&r[t++]&&128&r[t++]&&128&r[t++])))))throw Js();return Nt(e,t),i}function Jr(e){return ft(e)>>>0}function vs(e){var r=e.h;const t=e.g,n=r[t],i=r[t+1],o=r[t+2];return r=r[t+3],Nt(e,e.g+4),(n<<0|i<<8|o<<16|r<<24)>>>0}function _s(e){var r=vs(e);e=2*(r>>31)+1;const t=r>>>23&255;return r&=8388607,t==255?r?NaN:e*(1/0):t==0?1401298464324817e-60*e*r:e*Math.pow(2,t-150)*(r+8388608)}function Ac(e){return ft(e)}function os(e,r,{aa:t=!1}={}){e.aa=t,r&&(r=Zs(r),e.h=r.buffer,e.m=r.O,e.j=0,e.l=e.h.length,e.g=e.j)}function Nt(e,r){if(e.g=r,r>e.l)throw Cu(e.l,r)}function vu(e,r){if(r<0)throw Error(`Tried to read a negative byte length: ${r}`);const t=e.g,n=t+r;if(n>e.l)throw Cu(r,e.l-t);return e.g=n,t}function _u(e,r){if(r==0)return Gt();var t=vu(e,r);return e.aa&&e.m?t=e.h.subarray(t,t+r):(e=e.h,t=t===(r=t+r)?new Uint8Array(0):uc?e.slice(t,r):new Uint8Array(e.subarray(t,r))),t.length==0?Gt():new Kr(t,on)}Lr.prototype.toJSON=void 0;var Qo=[];function bu(e){var r=e.g;if(r.g==r.l)return!1;e.l=e.g.g;var t=Jr(e.g);if(r=t>>>3,!((t&=7)>=0&&t<=5))throw Fu(t,e.l);if(r<1)throw Error(`Invalid field number: ${r} (at position ${e.l})`);return e.m=r,e.h=t,!0}function hi(e){switch(e.h){case 0:e.h!=0?hi(e):eo(e.g);break;case 1:Nt(e=e.g,e.g+8);break;case 2:if(e.h!=2)hi(e);else{var r=Jr(e.g);Nt(e=e.g,e.g+r)}break;case 5:Nt(e=e.g,e.g+4);break;case 3:for(r=e.m;;){if(!bu(e))throw Error("Unmatched start-group tag: stream EOF");if(e.h==4){if(e.m!=r)throw Error("Unmatched end-group tag");break}hi(e)}break;default:throw Fu(e.h,e.l)}}function Zn(e,r,t){const n=e.g.l,i=Jr(e.g),o=e.g.g+i;let a=o-n;if(a<=0&&(e.g.l=o,t(r,e,void 0,void 0,void 0),a=o-e.g.g),a)throw Error(`Message parsing ended unexpectedly. Expected to read ${i} bytes, instead read ${i-a} bytes, either the data ended unexpectedly or the message misreported its own length`);return e.g.g=o,e.g.l=n,r}function ro(e){var r=Jr(e.g),t=vu(e=e.g,r);if(e=e.h,jl){var n,i=e;(n=Qi)||(n=Qi=new TextDecoder("utf-8",{fatal:!0})),r=t+r,i=t===0&&r===i.length?i:i.subarray(t,r);try{var o=n.decode(i)}catch(u){if(ii===void 0){try{n.decode(new Uint8Array([128]))}catch{}try{n.decode(new Uint8Array([97])),ii=!0}catch{ii=!1}}throw!ii&&(Qi=void 0),u}}else{r=(o=t)+r,t=[];let u,l=null;for(;o<r;){var a=e[o++];a<128?t.push(a):a<224?o>=r?xt():(u=e[o++],a<194||(192&u)!=128?(o--,xt()):t.push((31&a)<<6|63&u)):a<240?o>=r-1?xt():(u=e[o++],(192&u)!=128||a===224&&u<160||a===237&&u>=160||(192&(n=e[o++]))!=128?(o--,xt()):t.push((15&a)<<12|(63&u)<<6|63&n)):a<=244?o>=r-2?xt():(u=e[o++],(192&u)!=128||u-144+(a<<28)>>30||(192&(n=e[o++]))!=128||(192&(i=e[o++]))!=128?(o--,xt()):(a=(7&a)<<18|(63&u)<<12|(63&n)<<6|63&i,a-=65536,t.push(55296+(a>>10&1023),56320+(1023&a)))):xt(),t.length>=8192&&(l=Io(l,t),t.length=0)}o=Io(l,t)}return o}function wu(e){const r=Jr(e.g);return _u(e.g,r)}function Pi(e,r,t){var n=Jr(e.g);for(n=e.g.g+n;e.g.g<n;)t.push(r(e.g))}var si=[];function vr(e,r,t){r.g?r.m(e,r.g,r.h,t):r.m(e,r.h,t)}var _=class{constructor(e,r){this.u=du(e,r)}toJSON(){try{var e=hu(this)}finally{lu=void 0}return e}l(){var e=o1;return e.g?e.l(this,e.g,e.h):e.l(this,e.h,e.defaultValue)}clone(){const e=this.u;return new this.constructor(Mi(e,0|e[A],!1))}O(){return!!(2&(0|this.u[A]))}};function ea(e){return e?/^\d+$/.test(e)?(Di(e),new bs(Y,he)):null:Ec||(Ec=new bs(0,0))}_.prototype.W=Jn,_.prototype.toString=function(){return this.u.toString()};var bs=class{constructor(e,r){this.h=e>>>0,this.g=r>>>0}};let Ec;function ra(e){return e?/^-?\d+$/.test(e)?(Di(e),new ws(Y,he)):null:Tc||(Tc=new ws(0,0))}var ws=class{constructor(e,r){this.h=e>>>0,this.g=r>>>0}};let Tc;function rn(e,r,t){for(;t>0||r>127;)e.g.push(127&r|128),r=(r>>>7|t<<25)>>>0,t>>>=7;e.g.push(r)}function _n(e,r){for(;r>127;)e.g.push(127&r|128),r>>>=7;e.g.push(r)}function Ii(e,r){if(r>=0)_n(e,r);else{for(let t=0;t<9;t++)e.g.push(127&r|128),r>>=7;e.g.push(1)}}function $n(e,r){e.g.push(r>>>0&255),e.g.push(r>>>8&255),e.g.push(r>>>16&255),e.g.push(r>>>24&255)}function hn(e,r){r.length!==0&&(e.l.push(r),e.h+=r.length)}function rr(e,r,t){_n(e.g,8*r+t)}function to(e,r){return rr(e,r,2),r=e.g.end(),hn(e,r),r.push(e.h),r}function no(e,r){var t=r.pop();for(t=e.h+e.g.length()-t;t>127;)r.push(127&t|128),t>>>=7,e.h++;r.push(t),e.h++}function Oi(e,r,t){rr(e,r,2),_n(e.g,t.length),hn(e,e.g.end()),hn(e,t)}function Fi(e,r,t,n){t!=null&&(r=to(e,r),n(t,e),no(e,r))}function _r(){const e=class{constructor(){throw Error()}};return Object.setPrototypeOf(e,e.prototype),e}var io=_r(),Au=_r(),so=_r(),oo=_r(),Eu=_r(),Tu=_r(),ao=_r(),ku=_r(),Du=_r(),bn=class{constructor(e,r,t){this.g=e,this.h=r,e=io,this.l=!!e&&t===e||!1}};function Ni(e,r){return new bn(e,r,io)}function Su(e,r,t,n,i){Fi(e,t,xu(r,n),i)}const kc=Ni(function(e,r,t,n,i){return e.h===2&&(Zn(e,$s(r,n,t),i),!0)},Su),Dc=Ni(function(e,r,t,n,i){return e.h===2&&(Zn(e,$s(r,n,t),i),!0)},Su);var Ui=Symbol(),uo=Symbol(),ta=Symbol(),na=Symbol();let Lu,Mu;function Bt(e,r,t,n){var i=n[e];if(i)return i;(i={}).Ma=n,i.T=function(k){switch(typeof k){case"boolean":return cu||(cu=[0,void 0,!0]);case"number":return k>0?void 0:k===0?bc||(bc=[0,void 0]):[-k,void 0];case"string":return[0,k];case"object":return k}}(n[0]);var o=n[1];let a=1;o&&o.constructor===Object&&(i.ga=o,typeof(o=n[++a])=="function"&&(i.la=!0,Lu??(Lu=o),Mu??(Mu=n[a+1]),o=n[a+=2]));const u={};for(;o&&Array.isArray(o)&&o.length&&typeof o[0]=="number"&&o[0]>0;){for(var l=0;l<o.length;l++)u[o[l]]=o;o=n[++a]}for(l=1;o!==void 0;){let k;typeof o=="number"&&(l+=o,o=n[++a]);var c=void 0;if(o instanceof bn?k=o:(k=kc,a--),k==null?void 0:k.l){o=n[++a],c=n;var m=a;typeof o=="function"&&(o=o(),c[m]=o),c=o}for(m=l+1,typeof(o=n[++a])=="number"&&o<0&&(m-=o,o=n[++a]);l<m;l++){const U=u[l];c?t(i,l,k,c,U):r(i,l,k,U)}}return n[e]=i}function Ru(e){return Array.isArray(e)?e[0]instanceof bn?e:[Dc,e]:[e,void 0]}function xu(e,r){return e instanceof _?e.u:Array.isArray(e)?ht(e,r,!1):void 0}function lo(e,r,t,n){const i=t.g;e[r]=n?(o,a,u)=>i(o,a,u,n):i}function co(e,r,t,n,i){const o=t.g;let a,u;e[r]=(l,c,m)=>o(l,c,m,u||(u=Bt(uo,lo,co,n).T),a||(a=ho(n)),i)}function ho(e){let r=e[ta];if(r!=null)return r;const t=Bt(uo,lo,co,e);return r=t.la?(n,i)=>Lu(n,i,t):(n,i)=>{const o=0|n[A];for(;bu(i)&&i.h!=4;){var a=i.m,u=t[a];if(u==null){var l=t.ga;l&&(l=l[a])&&(l=Sc(l))!=null&&(u=t[a]=l)}u!=null&&u(i,n,a)||(a=(u=i).l,hi(u),u.fa?u=void 0:(l=u.g.g-a,u.g.g=a,u=_u(u.g,l)),a=n,u&&((l=a[an])?l.push(u):a[an]=[u]))}return 8192&o&&yn(n),!0},e[ta]=r}function Sc(e){const r=(e=Ru(e))[0].g;if(e=e[1]){const t=ho(e),n=Bt(uo,lo,co,e).T;return(i,o,a)=>r(i,o,a,n,t)}return r}function Gi(e,r,t){e[r]=t.h}function Vi(e,r,t,n){let i,o;const a=t.h;e[r]=(u,l,c)=>a(u,l,c,o||(o=Bt(Ui,Gi,Vi,n).T),i||(i=Pu(n)))}function Pu(e){let r=e[na];if(!r){const t=Bt(Ui,Gi,Vi,e);r=(n,i)=>Iu(n,i,t),e[na]=r}return r}function Iu(e,r,t){(function(n,i,o){const a=512&i?0:-1,u=n.length,l=u+((i=64&i?256&i:!!u&&Ei(n[u-1]))?-1:0);for(let c=0;c<l;c++)o(c-a,n[c]);if(i){n=n[u-1];for(const c in n)!isNaN(c)&&o(+c,n[c])}})(e,0|e[A]|(t.T[1]?512:0),(n,i)=>{if(i!=null){var o=function(a,u){var l=a[u];if(l)return l;if((l=a.ga)&&(l=l[u])){var c=(l=Ru(l))[0].h;if(l=l[1]){const m=Pu(l),k=Bt(Ui,Gi,Vi,l).T;l=a.la?Mu(k,m):(U,Ee,ve)=>c(U,Ee,ve,k,m)}else l=c;return a[u]=l}}(t,n);o&&o(r,i,n)}}),(e=Us(e))&&function(n,i){hn(n,n.g.end());for(let o=0;o<i.length;o++)hn(n,Ps(i[o])||new Uint8Array(0))}(r,e)}function wn(e,r){if(Array.isArray(r)){var t=0|r[A];if(4&t)return r;for(var n=0,i=0;n<r.length;n++){const o=e(r[n]);o!=null&&(r[i++]=o)}return i<n&&(r.length=i),pe(r,-6145&(5|t)),2&t&&Object.freeze(r),r}}function Oe(e,r,t){return new bn(e,r,t)}function An(e,r,t){return new bn(e,r,t)}function Ne(e,r,t){ue(e,0|e[A],r,t)}var Lc=Ni(function(e,r,t,n,i){return e.h===2&&(e=Zn(e,ht([void 0,void 0],n,!0),i),pt(n=0|r[A]),(i=Zr(r,n,t))instanceof Lr?2&i.M?((i=i.da()).push(e),ue(r,n,t,i)):i.Ja(e):Array.isArray(i)?(2&(0|i[A])&&ue(r,n,t,i=gu(i)),i.push(e)):ue(r,n,t,[e]),!0)},function(e,r,t,n,i){if(r instanceof Lr)r.forEach((o,a)=>{Fi(e,t,ht([a,o],n,!1),i)});else if(Array.isArray(r))for(let o=0;o<r.length;o++){const a=r[o];Array.isArray(a)&&Fi(e,t,ht(a,n,!1),i)}});function Ou(e,r,t){if(r=function(n){if(n==null)return n;const i=typeof n;if(i==="bigint")return String(Kn(64,n));if(qn(n)){if(i==="string")return au(n);if(i==="number")return js(n)}}(r),r!=null&&(typeof r=="string"&&ra(r),r!=null))switch(rr(e,t,0),typeof r){case"number":e=e.g,Vt(r),rn(e,Y,he);break;case"bigint":t=BigInt.asUintN(64,r),t=new ws(Number(t&BigInt(4294967295)),Number(t>>BigInt(32))),rn(e.g,t.h,t.g);break;default:t=ra(r),rn(e.g,t.h,t.g)}}function Nu(e,r,t){(r=Fn(r))!=null&&r!=null&&(rr(e,t,0),Ii(e.g,r))}function Uu(e,r,t){(r=nu(r))!=null&&(rr(e,t,0),e.g.g.push(r?1:0))}function Gu(e,r,t){(r=ln(r))!=null&&Oi(e,t,za(r))}function Vu(e,r,t,n,i){Fi(e,t,xu(r,n),i)}function Bu(e,r,t){r==null||typeof r=="string"||r instanceof Kr||(Ut(r)?Ut(r)&&Is(Za):r=void 0),r!=null&&Oi(e,t,Zs(r).buffer)}function Hu(e,r,t){return(e.h===5||e.h===2)&&(r=vn(r,0|r[A],t,!1),e.h==2?Pi(e,_s,r):r.push(_s(e.g)),!0)}var zr=Oe(function(e,r,t){if(e.h!==1)return!1;var n=e.g;e=vs(n);const i=vs(n);n=2*(i>>31)+1;const o=i>>>20&2047;return e=4294967296*(1048575&i)+e,Ne(r,t,o==2047?e?NaN:n*(1/0):o==0?5e-324*n*e:n*Math.pow(2,o-1075)*(e+4503599627370496)),!0},function(e,r,t){(r=mt(r))!=null&&(rr(e,t,1),e=e.g,(t=ru||(ru=new DataView(new ArrayBuffer(8)))).setFloat64(0,+r,!0),Y=t.getUint32(0,!0),he=t.getUint32(4,!0),$n(e,Y),$n(e,he))},_r()),me=Oe(function(e,r,t){return e.h===5&&(Ne(r,t,_s(e.g)),!0)},function(e,r,t){(r=mt(r))!=null&&(rr(e,t,5),e=e.g,Gs(r),$n(e,Y))},ao),Mc=An(Hu,function(e,r,t){if((r=wn(mt,r))!=null)for(let a=0;a<r.length;a++){var n=e,i=t,o=r[a];o!=null&&(rr(n,i,5),n=n.g,Gs(o),$n(n,Y))}},ao),fo=An(Hu,function(e,r,t){if((r=wn(mt,r))!=null&&r.length){rr(e,t,2),_n(e.g,4*r.length);for(let n=0;n<r.length;n++)t=e.g,Gs(r[n]),$n(t,Y)}},ao),gt=Oe(function(e,r,t){return e.h===0&&(Ne(r,t,Qs(e.g,Bs)),!0)},Ou,Tu),as=Oe(function(e,r,t){return e.h===0&&(Ne(r,t,(e=Qs(e.g,Bs))===0?void 0:e),!0)},Ou,Tu),Rc=Oe(function(e,r,t){return e.h===0&&(Ne(r,t,Qs(e.g,Vs)),!0)},function(e,r,t){if((r=dc(r))!=null&&(typeof r=="string"&&ea(r),r!=null))switch(rr(e,t,0),typeof r){case"number":e=e.g,Vt(r),rn(e,Y,he);break;case"bigint":t=BigInt.asUintN(64,r),t=new bs(Number(t&BigInt(4294967295)),Number(t>>BigInt(32))),rn(e.g,t.h,t.g);break;default:t=ea(r),rn(e.g,t.h,t.g)}},_r()),de=Oe(function(e,r,t){return e.h===0&&(Ne(r,t,ft(e.g)),!0)},Nu,oo),Bi=An(function(e,r,t){return(e.h===0||e.h===2)&&(r=vn(r,0|r[A],t,!1),e.h==2?Pi(e,ft,r):r.push(ft(e.g)),!0)},function(e,r,t){if((r=wn(Fn,r))!=null&&r.length){t=to(e,t);for(let n=0;n<r.length;n++)Ii(e.g,r[n]);no(e,t)}},oo),en=Oe(function(e,r,t){return e.h===0&&(Ne(r,t,(e=ft(e.g))===0?void 0:e),!0)},Nu,oo),ie=Oe(function(e,r,t){return e.h===0&&(Ne(r,t,eo(e.g)),!0)},Uu,Au),tn=Oe(function(e,r,t){return e.h===0&&(Ne(r,t,(e=eo(e.g))===!1?void 0:e),!0)},Uu,Au),Me=An(function(e,r,t){return e.h===2&&(e=ro(e),vn(r,0|r[A],t,!1).push(e),!0)},function(e,r,t){if((r=wn(ln,r))!=null)for(let a=0;a<r.length;a++){var n=e,i=t,o=r[a];o!=null&&Oi(n,i,za(o))}},so),ut=Oe(function(e,r,t){return e.h===2&&(Ne(r,t,(e=ro(e))===""?void 0:e),!0)},Gu,so),j=Oe(function(e,r,t){return e.h===2&&(Ne(r,t,ro(e)),!0)},Gu,so),Ce=function(e,r,t=io){return new bn(e,r,t)}(function(e,r,t,n,i){return e.h===2&&(n=ht(void 0,n,!0),vn(r,0|r[A],t,!0).push(n),Zn(e,n,i),!0)},function(e,r,t,n,i){if(Array.isArray(r))for(let o=0;o<r.length;o++)Vu(e,r[o],t,n,i)}),H=Ni(function(e,r,t,n,i,o){return e.h===2&&(pu(r,0|r[A],o,t),Zn(e,r=$s(r,n,t),i),!0)},Vu),ju=Oe(function(e,r,t){return e.h===2&&(Ne(r,t,wu(e)),!0)},Bu,ku),xc=An(function(e,r,t){return(e.h===0||e.h===2)&&(r=vn(r,0|r[A],t,!1),e.h==2?Pi(e,Jr,r):r.push(Jr(e.g)),!0)},function(e,r,t){if((r=wn(iu,r))!=null)for(let a=0;a<r.length;a++){var n=e,i=t,o=r[a];o!=null&&(rr(n,i,0),_n(n.g,o))}},Eu),Pc=Oe(function(e,r,t){return e.h===0&&(Ne(r,t,(e=Jr(e.g))===0?void 0:e),!0)},function(e,r,t){(r=iu(r))!=null&&r!=null&&(rr(e,t,0),_n(e.g,r))},Eu),Qe=Oe(function(e,r,t){return e.h===0&&(Ne(r,t,ft(e.g)),!0)},function(e,r,t){(r=Fn(r))!=null&&(r=parseInt(r,10),rr(e,t,0),Ii(e.g,r))},Du);class Ic{constructor(r,t){this.h=r,this.g=t,this.l=N,this.m=T,this.defaultValue=void 0}register(){_i(this)}}function br(e,r){return new Ic(e,r)}function yt(e,r){return(t,n)=>{if(si.length){const o=si.pop();o.o(n),os(o.g,t,n),t=o}else t=new class{constructor(o,a){if(Qo.length){const u=Qo.pop();os(u,o,a),o=u}else o=new class{constructor(u,l){this.h=null,this.m=!1,this.g=this.l=this.j=0,os(this,u,l)}clear(){this.h=null,this.m=!1,this.g=this.l=this.j=0,this.aa=!1}}(o,a);this.g=o,this.l=this.g.g,this.h=this.m=-1,this.o(a)}o({fa:o=!1}={}){this.fa=o}}(t,n);try{const o=new e,a=o.u;ho(r)(a,t);var i=o}finally{t.g.clear(),t.m=-1,t.h=-1,si.length<100&&si.push(t)}return i}}function Hi(e){return function(){const r=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const a=this.g;return this.g=[],a}}}};Iu(this.u,r,Bt(Ui,Gi,Vi,e)),hn(r,r.g.end());const t=new Uint8Array(r.h),n=r.l,i=n.length;let o=0;for(let a=0;a<i;a++){const u=n[a];t.set(u,o),o+=u.length}return r.l=[t],t}}var ia=class extends _{constructor(e){super(e)}},sa=[0,ut,Oe(function(e,r,t){return e.h===2&&(Ne(r,t,(e=wu(e))===Gt()?void 0:e),!0)},function(e,r,t){if(r!=null){if(r instanceof _){const n=r.Oa;return void(n&&(r=n(r),r!=null&&Oi(e,t,Zs(r).buffer)))}if(Array.isArray(r))return}Bu(e,r,t)},ku)];let us,oa=globalThis.trustedTypes;function aa(e){us===void 0&&(us=function(){let t=null;if(!oa)return t;try{const n=i=>i;t=oa.createPolicy("goog#html",{createHTML:n,createScript:n,createScriptURL:n})}catch{}return t}());var r=us;return new class{constructor(t){this.g=t}toString(){return this.g+""}}(r?r.createScriptURL(e):e)}function Oc(e,...r){if(r.length===0)return aa(e[0]);let t=e[0];for(let n=0;n<r.length;n++)t+=encodeURIComponent(r[n])+e[n+1];return aa(t)}var zu=[0,de,Qe,ie,-1,Bi,Qe,-1],Nc=class extends _{constructor(e){super(e)}},Wu=[0,ie,j,ie,Qe,-1,An(function(e,r,t){return(e.h===0||e.h===2)&&(r=vn(r,0|r[A],t,!1),e.h==2?Pi(e,Ac,r):r.push(ft(e.g)),!0)},function(e,r,t){if((r=wn(Fn,r))!=null&&r.length){t=to(e,t);for(let n=0;n<r.length;n++)Ii(e.g,r[n]);no(e,t)}},Du),j,-1,[0,ie,-1],Qe,ie,-1],Xu=[0,j,-2],ua=class extends _{constructor(e){super(e)}},Ku=[0],qu=[0,de,ie,1,ie,-3],er=class extends _{constructor(e){super(e,2)}},ye={};ye[336783863]=[0,j,ie,-1,de,[0,[1,2,3,4,5,6,7,8,9],H,Ku,H,Wu,H,Xu,H,qu,H,zu,H,[0,j,-2],H,[0,j,Qe],H,[0,Qe,j,-1],H,[0,Qe,-1]],[0,j],ie,[0,[1,3],[2,4],H,[0,Bi],-1,H,[0,Me],-1,Ce,[0,j,-1]],j];var la=[0,as,-1,tn,-3,as,Bi,ut,en,as,-1,tn,en,tn,-2,ut];function tr(e,r){Cs(e,2,Cn(r),"")}function Z(e,r){xi(e,3,r)}function P(e,r){xi(e,4,r)}var Ie=class extends _{constructor(e){super(e,500)}o(e){return T(this,0,7,e)}},jn=[-1,{}],ca=[0,j,1,jn],ha=[0,j,Me,jn];function nr(e,r){mi(e,1,Ie,r)}function re(e,r){xi(e,10,r)}function V(e,r){xi(e,15,r)}var We=class extends _{constructor(e){super(e,500)}o(e){return T(this,0,1001,e)}},Yu=[-500,Ce,[-500,ut,-1,Me,-3,[-2,ye,ie],Ce,sa,en,-1,ca,ha,Ce,[0,ut,tn],ut,la,en,Me,987,Me],4,Ce,[-500,j,-1,[-1,{}],998,j],Ce,[-500,j,Me,-1,[-2,{},ie],997,Me,-1],en,Ce,[-500,j,Me,jn,998,Me],Me,en,ca,ha,Ce,[0,ut,-1,jn],Me,-2,la,ut,-1,tn,[0,tn,Pc],978,jn,Ce,sa];We.prototype.g=Hi(Yu);var Uc=yt(We,Yu),Gc=class extends _{constructor(e){super(e)}},$u=class extends _{constructor(e){super(e)}g(){return $r(this,Gc,1)}},Ju=[0,Ce,[0,de,me,j,-1]],ji=yt($u,Ju),Vc=class extends _{constructor(e){super(e)}},Bc=class extends _{constructor(e){super(e)}},ls=class extends _{constructor(e){super(e)}h(){return N(this,Vc,2)}g(){return $r(this,Bc,5)}},Zu=yt(class extends _{constructor(e){super(e)}},[0,Me,Bi,fo,[0,Qe,[0,de,-3],[0,me,-3],[0,de,-1,[0,Ce,[0,de,-2]]],Ce,[0,me,-1,j,me]],j,-1,gt,Ce,[0,de,me],Me,gt]),Qu=class extends _{constructor(e){super(e)}},nn=yt(class extends _{constructor(e){super(e)}},[0,Ce,[0,me,-4]]),el=class extends _{constructor(e){super(e)}},Qn=yt(class extends _{constructor(e){super(e)}},[0,Ce,[0,me,-4]]),Hc=class extends _{constructor(e){super(e)}},jc=[0,de,-1,fo,Qe],rl=class extends _{constructor(e){super(e)}};rl.prototype.g=Hi([0,me,-4,gt]);var zc=class extends _{constructor(e){super(e)}},Wc=yt(class extends _{constructor(e){super(e)}},[0,Ce,[0,1,de,j,Ju],gt]),da=class extends _{constructor(e){super(e)}},Xc=class extends _{constructor(e){super(e)}ma(){const e=fu(this);return e??Gt()}},Kc=class extends _{constructor(e){super(e)}},tl=[1,2],qc=yt(class extends _{constructor(e){super(e)}},[0,Ce,[0,tl,H,[0,fo],H,[0,ju],de,j],gt]),go=class extends _{constructor(e){super(e)}},nl=[0,j,de,me,Me,-1],fa=class extends _{constructor(e){super(e)}},Yc=[0,ie,-1],ga=class extends _{constructor(e){super(e)}},di=[1,2,3,4,5],Ci=class extends _{constructor(e){super(e)}g(){return fu(this)!=null}h(){return cr(this,2)!=null}},se=class extends _{constructor(e){super(e)}g(){return nu(cn(this,2))??!1}},il=[0,ju,j,[0,de,gt,-1],[0,Rc,gt]],ge=[0,il,ie,[0,di,H,qu,H,Wu,H,zu,H,Ku,H,Xu],Qe],zi=class extends _{constructor(e){super(e)}},po=[0,ge,me,-1,de],$c=br(502141897,zi);ye[502141897]=po;var Jc=yt(class extends _{constructor(e){super(e)}},[0,[0,Qe,-1,Mc,xc],jc]),sl=class extends _{constructor(e){super(e)}},ol=class extends _{constructor(e){super(e)}},mo=[0,ge,me,[0,ge],ie],al=[0,ge,po,mo,me,[0,[0,il]]],Zc=br(508968150,ol);ye[508968150]=al,ye[508968149]=mo;var ul=class extends _{constructor(e){super(e)}},Qc=br(513916220,ul);ye[513916220]=[0,ge,al,de];var Zt=class extends _{constructor(e){super(e)}h(){return N(this,go,2)}g(){J(this,2)}},ll=[0,ge,nl];ye[478825465]=ll;var e1=class extends _{constructor(e){super(e)}},cl=class extends _{constructor(e){super(e)}},yo=class extends _{constructor(e){super(e)}},Fo=class extends _{constructor(e){super(e)}},hl=class extends _{constructor(e){super(e)}},pa=[0,ge,[0,ge],ll,-1],dl=[0,ge,me,de],Co=[0,ge,me],fl=[0,ge,dl,Co,me],r1=br(479097054,hl);ye[479097054]=[0,ge,fl,pa],ye[463370452]=pa,ye[464864288]=dl;var t1=br(462713202,Fo);ye[462713202]=fl,ye[474472470]=Co;var n1=class extends _{constructor(e){super(e)}},gl=class extends _{constructor(e){super(e)}},pl=class extends _{constructor(e){super(e)}},ml=class extends _{constructor(e){super(e)}},vo=[0,ge,me,-1,de],As=[0,ge,me,ie];ml.prototype.g=Hi([0,ge,Co,[0,ge],po,mo,vo,As]);var yl=class extends _{constructor(e){super(e)}},i1=br(456383383,yl);ye[456383383]=[0,ge,nl];var Fl=class extends _{constructor(e){super(e)}},s1=br(476348187,Fl);ye[476348187]=[0,ge,Yc];var Cl=class extends _{constructor(e){super(e)}},ma=class extends _{constructor(e){super(e)}},vl=[0,Qe,-1],o1=br(458105876,class extends _{constructor(e){super(e)}g(){var e=this.u;const r=0|e[A],t=2&r;return e=function(n,i,o){var a=ma;const u=2&i;let l=!1;if(o==null){if(u)return Zo();o=[]}else if(o.constructor===Lr){if(!(2&o.M)||u)return o;o=o.da()}else Array.isArray(o)?l=!!(2&(0|o[A])):o=[];if(u){if(!o.length)return Zo();l||(l=!0,yn(o))}else l&&(l=!1,o=gu(o));return l||(64&(0|o[A])?o[A]&=-33:32&i&&wi(o,32)),ue(n,i,2,a=new Lr(o,a,fc,void 0)),a}(e,r,Zr(e,r,2)),!t&&ma&&(e.pa=!0),e}});ye[458105876]=[0,vl,Lc,[!0,gt,[0,j,-1,Me]]];var _o=class extends _{constructor(e){super(e)}},_l=br(458105758,_o);ye[458105758]=[0,ge,j,vl];var bl=class extends _{constructor(e){super(e)}},a1=br(443442058,bl);ye[443442058]=[0,ge,j,de,me,Me,-1,ie,me],ye[514774813]=vo;var wl=class extends _{constructor(e){super(e)}},u1=br(516587230,wl);function Es(e,r){return r=r?r.clone():new go,e.displayNamesLocale!==void 0?J(r,1,Cn(e.displayNamesLocale)):e.displayNamesLocale===void 0&&J(r,1),e.maxResults!==void 0?Mr(r,2,e.maxResults):"maxResults"in e&&J(r,2),e.scoreThreshold!==void 0?b(r,3,e.scoreThreshold):"scoreThreshold"in e&&J(r,3),e.categoryAllowlist!==void 0?yi(r,4,e.categoryAllowlist):"categoryAllowlist"in e&&J(r,4),e.categoryDenylist!==void 0?yi(r,5,e.categoryDenylist):"categoryDenylist"in e&&J(r,5),r}function bo(e,r=-1,t=""){return{categories:e.map(n=>({index:lr(n,1)??0??-1,score:fe(n,2)??0,categoryName:cr(n,3)??""??"",displayName:cr(n,4)??""??""})),headIndex:r,headName:t}}function Al(e){var a,u;var r=Ot(e,3,mt,It()),t=Ot(e,2,Fn,It()),n=Ot(e,1,ln,It()),i=Ot(e,9,ln,It());const o={categories:[],keypoints:[]};for(let l=0;l<r.length;l++)o.categories.push({score:r[l],index:t[l]??-1,categoryName:n[l]??"",displayName:i[l]??""});if((r=(a=N(e,ls,4))==null?void 0:a.h())&&(o.boundingBox={originX:lr(r,1)??0,originY:lr(r,2)??0,width:lr(r,3)??0,height:lr(r,4)??0,angle:0}),(u=N(e,ls,4))==null?void 0:u.g().length)for(const l of N(e,ls,4).g())o.keypoints.push({x:ci(l,1)??0,y:ci(l,2)??0,score:ci(l,4)??0,label:cr(l,3)??""});return o}function Wi(e){const r=[];for(const t of $r(e,el,1))r.push({x:fe(t,1)??0,y:fe(t,2)??0,z:fe(t,3)??0,visibility:fe(t,4)??0});return r}function zn(e){const r=[];for(const t of $r(e,Qu,1))r.push({x:fe(t,1)??0,y:fe(t,2)??0,z:fe(t,3)??0,visibility:fe(t,4)??0});return r}function ya(e){return Array.from(e,r=>r>127?r-256:r)}function Fa(e,r){if(e.length!==r.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${e.length} vs. ${r.length}).`);let t=0,n=0,i=0;for(let o=0;o<e.length;o++)t+=e[o]*r[o],n+=e[o]*e[o],i+=r[o]*r[o];if(n<=0||i<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return t/Math.sqrt(n*i)}let oi;ye[516587230]=[0,ge,vo,As,me],ye[518928384]=As;const l1=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function El(){if(oi===void 0)try{await WebAssembly.instantiate(l1),oi=!0}catch{oi=!1}return oi}async function Gn(e,r=Oc``){const t=await El()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${r}/${e}_${t}.js`,wasmBinaryPath:`${r}/${e}_${t}.wasm`}}var Pt=class{};function Tl(){var e=navigator;return typeof OffscreenCanvas<"u"&&(!function(r=navigator){return(r=r.userAgent).includes("Safari")&&!r.includes("Chrome")}(e)||!!((e=e.userAgent.match(/Version\/([\d]+).*Safari/))&&e.length>=1&&Number(e[1])>=17))}async function Ca(e){if(typeof importScripts!="function"){const r=document.createElement("script");return r.src=e.toString(),r.crossOrigin="anonymous",new Promise((t,n)=>{r.addEventListener("load",()=>{t()},!1),r.addEventListener("error",i=>{n(i)},!1),document.body.appendChild(r)})}importScripts(e.toString())}function kl(e){return e.videoWidth!==void 0?[e.videoWidth,e.videoHeight]:e.naturalWidth!==void 0?[e.naturalWidth,e.naturalHeight]:e.displayWidth!==void 0?[e.displayWidth,e.displayHeight]:[e.width,e.height]}function w(e,r,t){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),t(r=e.i.stringToNewUTF8(r)),e.i._free(r)}function va(e,r,t){if(!e.i.canvas)throw Error("No OpenGL canvas configured.");if(t?e.i._bindTextureToStream(t):e.i._bindTextureToCanvas(),!(t=e.i.canvas.getContext("webgl2")||e.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");e.i.gpuOriginForWebTexturesIsBottomLeft&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),e.i.gpuOriginForWebTexturesIsBottomLeft&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1);const[n,i]=kl(r);return!e.l||n===e.i.canvas.width&&i===e.i.canvas.height||(e.i.canvas.width=n,e.i.canvas.height=i),[n,i]}function _a(e,r,t){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const n=new Uint32Array(r.length);for(let i=0;i<r.length;i++)n[i]=e.i.stringToNewUTF8(r[i]);r=e.i._malloc(4*n.length),e.i.HEAPU32.set(n,r>>2),t(r);for(const i of n)e.i._free(i);e.i._free(r)}function Tr(e,r,t){e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[r]=t}function ot(e,r,t){let n=[];e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[r]=(i,o,a)=>{o?(t(n,a),n=[]):n.push(i)}}Pt.forVisionTasks=function(e){return Gn("vision",e)},Pt.forTextTasks=function(e){return Gn("text",e)},Pt.forGenAiExperimentalTasks=function(e){return Gn("genai_experimental",e)},Pt.forGenAiTasks=function(e){return Gn("genai",e)},Pt.forAudioTasks=function(e){return Gn("audio",e)},Pt.isSimdSupported=function(){return El()};async function c1(e,r,t,n){return e=await(async(i,o,a,u,l)=>{if(o&&await Ca(o),!self.ModuleFactory||a&&(await Ca(a),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&l&&((o=self.Module).locateFile=l.locateFile,l.mainScriptUrlOrBlob&&(o.mainScriptUrlOrBlob=l.mainScriptUrlOrBlob)),l=await self.ModuleFactory(self.Module||l),self.ModuleFactory=self.Module=void 0,new i(l,u)})(e,t.wasmLoaderPath,t.assetLoaderPath,r,{locateFile:i=>i.endsWith(".wasm")?t.wasmBinaryPath.toString():t.assetBinaryPath&&i.endsWith(".data")?t.assetBinaryPath.toString():i}),await e.o(n),e}function cs(e,r){const t=N(e.baseOptions,Ci,1)||new Ci;typeof r=="string"?(J(t,2,Cn(r)),J(t,1)):r instanceof Uint8Array&&(J(t,1,Ns(r,!1)),J(t,2)),T(e.baseOptions,0,1,t)}function ba(e){try{const r=e.G.length;if(r===1)throw Error(e.G[0].message);if(r>1)throw Error("Encountered multiple errors: "+e.G.map(t=>t.message).join(", "))}finally{e.G=[]}}function F(e,r){e.B=Math.max(e.B,r)}function Xi(e,r){e.A=new Ie,tr(e.A,"PassThroughCalculator"),Z(e.A,"free_memory"),P(e.A,"free_memory_unused_out"),re(r,"free_memory"),nr(r,e.A)}function dn(e,r){Z(e.A,r),P(e.A,r+"_unused_out")}function Ki(e){e.g.addBoolToStream(!0,"free_memory",e.B)}var Ts=class{constructor(e){this.g=e,this.G=[],this.B=0,this.g.setAutoRenderToScreen(!1)}l(e,r=!0){var t,n,i,o,a,u;if(r){const l=e.baseOptions||{};if((t=e.baseOptions)!=null&&t.modelAssetBuffer&&((n=e.baseOptions)!=null&&n.modelAssetPath))throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!((i=N(this.baseOptions,Ci,1))!=null&&i.g()||(o=N(this.baseOptions,Ci,1))!=null&&o.h()||(a=e.baseOptions)!=null&&a.modelAssetBuffer||(u=e.baseOptions)!=null&&u.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if(function(c,m){let k=N(c.baseOptions,ga,3);if(!k){var U=k=new ga,Ee=new ua;Hn(U,4,di,Ee)}"delegate"in m&&(m.delegate==="GPU"?(m=k,U=new Nc,Hn(m,2,di,U)):(m=k,U=new ua,Hn(m,4,di,U))),T(c.baseOptions,0,3,k)}(this,l),l.modelAssetPath)return fetch(l.modelAssetPath.toString()).then(c=>{if(c.ok)return c.arrayBuffer();throw Error(`Failed to fetch model: ${l.modelAssetPath} (${c.status})`)}).then(c=>{try{this.g.i.FS_unlink("/model.dat")}catch{}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(c),!0,!1,!1),cs(this,"/model.dat"),this.m(),this.J()});if(l.modelAssetBuffer instanceof Uint8Array)cs(this,l.modelAssetBuffer);else if(l.modelAssetBuffer)return async function(c){const m=[];for(var k=0;;){const{done:U,value:Ee}=await c.read();if(U)break;m.push(Ee),k+=Ee.length}if(m.length===0)return new Uint8Array(0);if(m.length===1)return m[0];c=new Uint8Array(k),k=0;for(const U of m)c.set(U,k),k+=U.length;return c}(l.modelAssetBuffer).then(c=>{cs(this,c),this.m(),this.J()})}return this.m(),this.J(),Promise.resolve()}J(){}ca(){let e;if(this.g.ca(r=>{e=Uc(r)}),!e)throw Error("Failed to retrieve CalculatorGraphConfig");return e}setGraph(e,r){this.g.attachErrorListener((t,n)=>{this.G.push(Error(n))}),this.g.Ha(),this.g.setGraph(e,r),this.A=void 0,ba(this)}finishProcessing(){this.g.finishProcessing(),ba(this)}close(){this.A=void 0,this.g.closeGraph()}};function Yr(e,r){if(!e)throw Error(`Unable to obtain required WebGL resource: ${r}`);return e}Ts.prototype.close=Ts.prototype.close;class h1{constructor(r,t,n,i){this.g=r,this.h=t,this.m=n,this.l=i}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function wa(e,r,t){const n=e.g;if(t=Yr(n.createShader(t),"Failed to create WebGL shader"),n.shaderSource(t,r),n.compileShader(t),!n.getShaderParameter(t,n.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${n.getShaderInfoLog(t)}`);return n.attachShader(e.h,t),t}function Aa(e,r){const t=e.g,n=Yr(t.createVertexArray(),"Failed to create vertex array");t.bindVertexArray(n);const i=Yr(t.createBuffer(),"Failed to create buffer");t.bindBuffer(t.ARRAY_BUFFER,i),t.enableVertexAttribArray(e.P),t.vertexAttribPointer(e.P,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),t.STATIC_DRAW);const o=Yr(t.createBuffer(),"Failed to create buffer");return t.bindBuffer(t.ARRAY_BUFFER,o),t.enableVertexAttribArray(e.J),t.vertexAttribPointer(e.J,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindVertexArray(null),new h1(t,n,i,o)}function wo(e,r){if(e.g){if(r!==e.g)throw Error("Cannot change GL context once initialized")}else e.g=r}function Ao(e,r,t,n){return wo(e,r),e.h||(e.m(),e.C()),t?(e.s||(e.s=Aa(e,!0)),t=e.s):(e.v||(e.v=Aa(e,!1)),t=e.v),r.useProgram(e.h),t.bind(),e.l(),e=n(),t.g.bindVertexArray(null),e}function qi(e,r,t){return wo(e,r),e=Yr(r.createTexture(),"Failed to create texture"),r.bindTexture(r.TEXTURE_2D,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,t??r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t??r.LINEAR),r.bindTexture(r.TEXTURE_2D,null),e}function Yi(e,r,t){wo(e,r),e.A||(e.A=Yr(r.createFramebuffer(),"Failed to create framebuffe.")),r.bindFramebuffer(r.FRAMEBUFFER,e.A),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0)}function Eo(e){var r;(r=e.g)==null||r.bindFramebuffer(e.g.FRAMEBUFFER,null)}var To=class{G(){return`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `}m(){const e=this.g;if(this.h=Yr(e.createProgram(),"Failed to create WebGL program"),this.Z=wa(this,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,e.VERTEX_SHADER),this.Y=wa(this,this.G(),e.FRAGMENT_SHADER),e.linkProgram(this.h),!e.getProgramParameter(this.h,e.LINK_STATUS))throw Error(`Error during program linking: ${e.getProgramInfoLog(this.h)}`);this.P=e.getAttribLocation(this.h,"aVertex"),this.J=e.getAttribLocation(this.h,"aTex")}C(){}l(){}close(){if(this.h){const e=this.g;e.deleteProgram(this.h),e.deleteShader(this.Z),e.deleteShader(this.Y)}this.A&&this.g.deleteFramebuffer(this.A),this.v&&this.v.close(),this.s&&this.s.close()}};function Wr(e,r){switch(r){case 0:return e.g.find(t=>t instanceof Uint8Array);case 1:return e.g.find(t=>t instanceof Float32Array);case 2:return e.g.find(t=>typeof WebGLTexture<"u"&&t instanceof WebGLTexture);default:throw Error(`Type is not supported: ${r}`)}}function ks(e){var r=Wr(e,1);if(!r){if(r=Wr(e,0))r=new Float32Array(r).map(n=>n/255);else{r=new Float32Array(e.width*e.height);const n=fn(e);var t=ko(e);if(Yi(t,n,Dl(e)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"document"in self&&"ontouchend"in self.document){t=new Float32Array(e.width*e.height*4),n.readPixels(0,0,e.width,e.height,n.RGBA,n.FLOAT,t);for(let i=0,o=0;i<r.length;++i,o+=4)r[i]=t[o]}else n.readPixels(0,0,e.width,e.height,n.RED,n.FLOAT,r)}e.g.push(r)}return r}function Dl(e){let r=Wr(e,2);if(!r){const t=fn(e);r=Ll(e);const n=ks(e),i=Sl(e);t.texImage2D(t.TEXTURE_2D,0,i,e.width,e.height,0,t.RED,t.FLOAT,n),Ds(e)}return r}function fn(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=Yr(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function Sl(e){if(e=fn(e),!ai)if(e.getExtension("EXT_color_buffer_float")&&e.getExtension("OES_texture_float_linear")&&e.getExtension("EXT_float_blend"))ai=e.R32F;else{if(!e.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");ai=e.R16F}return ai}function ko(e){return e.l||(e.l=new To),e.l}function Ll(e){const r=fn(e);r.viewport(0,0,e.width,e.height),r.activeTexture(r.TEXTURE0);let t=Wr(e,2);return t||(t=qi(ko(e),r,e.m?r.LINEAR:r.NEAREST),e.g.push(t),e.j=!0),r.bindTexture(r.TEXTURE_2D,t),t}function Ds(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}var ai,we=class{constructor(e,r,t,n,i,o,a){this.g=e,this.m=r,this.j=t,this.canvas=n,this.l=i,this.width=o,this.height=a,this.j&&--Ea===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Da(){return!!Wr(this,0)}ja(){return!!Wr(this,1)}R(){return!!Wr(this,2)}ia(){return(r=Wr(e=this,0))||(r=ks(e),r=new Uint8Array(r.map(t=>255*t)),e.g.push(r)),r;var e,r}ha(){return ks(this)}N(){return Dl(this)}clone(){const e=[];for(const r of this.g){let t;if(r instanceof Uint8Array)t=new Uint8Array(r);else if(r instanceof Float32Array)t=new Float32Array(r);else{if(!(r instanceof WebGLTexture))throw Error(`Type is not supported: ${r}`);{const n=fn(this),i=ko(this);n.activeTexture(n.TEXTURE1),t=qi(i,n,this.m?n.LINEAR:n.NEAREST),n.bindTexture(n.TEXTURE_2D,t);const o=Sl(this);n.texImage2D(n.TEXTURE_2D,0,o,this.width,this.height,0,n.RED,n.FLOAT,null),n.bindTexture(n.TEXTURE_2D,null),Yi(i,n,t),Ao(i,n,!1,()=>{Ll(this),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLE_FAN,0,4),Ds(this)}),Eo(i),Ds(this)}}e.push(t)}return new we(e,this.m,this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&fn(this).deleteTexture(Wr(this,2)),Ea=-1}};we.prototype.close=we.prototype.close,we.prototype.clone=we.prototype.clone,we.prototype.getAsWebGLTexture=we.prototype.N,we.prototype.getAsFloat32Array=we.prototype.ha,we.prototype.getAsUint8Array=we.prototype.ia,we.prototype.hasWebGLTexture=we.prototype.R,we.prototype.hasFloat32Array=we.prototype.ja,we.prototype.hasUint8Array=we.prototype.Da;var Ea=250;function Sr(e,r){switch(r){case 0:return e.g.find(t=>t instanceof ImageData);case 1:return e.g.find(t=>typeof ImageBitmap<"u"&&t instanceof ImageBitmap);case 2:return e.g.find(t=>typeof WebGLTexture<"u"&&t instanceof WebGLTexture);default:throw Error(`Type is not supported: ${r}`)}}function Ml(e){var r=Sr(e,0);if(!r){r=gn(e);const t=$i(e),n=new Uint8Array(e.width*e.height*4);Yi(t,r,fi(e)),r.readPixels(0,0,e.width,e.height,r.RGBA,r.UNSIGNED_BYTE,n),Eo(t),r=new ImageData(new Uint8ClampedArray(n.buffer),e.width,e.height),e.g.push(r)}return r}function fi(e){let r=Sr(e,2);if(!r){const t=gn(e);r=gi(e);const n=Sr(e,1)||Ml(e);t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),Bn(e)}return r}function gn(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=Yr(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function $i(e){return e.l||(e.l=new To),e.l}function gi(e){const r=gn(e);r.viewport(0,0,e.width,e.height),r.activeTexture(r.TEXTURE0);let t=Sr(e,2);return t||(t=qi($i(e),r),e.g.push(t),e.m=!0),r.bindTexture(r.TEXTURE_2D,t),t}function Bn(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}function Ta(e){const r=gn(e);return Ao($i(e),r,!0,()=>function(t,n){const i=t.canvas;if(i.width===t.width&&i.height===t.height)return n();const o=i.width,a=i.height;return i.width=t.width,i.height=t.height,t=n(),i.width=o,i.height=a,t}(e,()=>{if(r.bindFramebuffer(r.FRAMEBUFFER,null),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.drawArrays(r.TRIANGLE_FAN,0,4),!(e.canvas instanceof OffscreenCanvas))throw Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return e.canvas.transferToImageBitmap()}))}var Ae=class{constructor(e,r,t,n,i,o,a){this.g=e,this.j=r,this.m=t,this.canvas=n,this.l=i,this.width=o,this.height=a,(this.j||this.m)&&--ka===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources.")}Ca(){return!!Sr(this,0)}ka(){return!!Sr(this,1)}R(){return!!Sr(this,2)}Aa(){return Ml(this)}za(){var e=Sr(this,1);return e||(fi(this),gi(this),e=Ta(this),Bn(this),this.g.push(e),this.j=!0),e}N(){return fi(this)}clone(){const e=[];for(const r of this.g){let t;if(r instanceof ImageData)t=new ImageData(r.data,this.width,this.height);else if(r instanceof WebGLTexture){const n=gn(this),i=$i(this);n.activeTexture(n.TEXTURE1),t=qi(i,n),n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.UNSIGNED_BYTE,null),n.bindTexture(n.TEXTURE_2D,null),Yi(i,n,t),Ao(i,n,!1,()=>{gi(this),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLE_FAN,0,4),Bn(this)}),Eo(i),Bn(this)}else{if(!(r instanceof ImageBitmap))throw Error(`Type is not supported: ${r}`);fi(this),gi(this),t=Ta(this),Bn(this)}e.push(t)}return new Ae(e,this.ka(),this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&Sr(this,1).close(),this.m&&gn(this).deleteTexture(Sr(this,2)),ka=-1}};Ae.prototype.close=Ae.prototype.close,Ae.prototype.clone=Ae.prototype.clone,Ae.prototype.getAsWebGLTexture=Ae.prototype.N,Ae.prototype.getAsImageBitmap=Ae.prototype.za,Ae.prototype.getAsImageData=Ae.prototype.Aa,Ae.prototype.hasWebGLTexture=Ae.prototype.R,Ae.prototype.hasImageBitmap=Ae.prototype.ka,Ae.prototype.hasImageData=Ae.prototype.Ca;var ka=250;function wr(...e){return e.map(([r,t])=>({start:r,end:t}))}const d1=function(e){return class extends e{Ha(){this.i._registerModelResourcesGraphService()}}}((Da=class{constructor(e,r){this.l=!0,this.i=e,this.g=null,this.h=0,this.m=typeof this.i._addIntToInputStream=="function",r!==void 0?this.i.canvas=r:Tl()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas"))}async initializeGraph(e){const r=await(await fetch(e)).arrayBuffer();e=!(e.endsWith(".pbtxt")||e.endsWith(".textproto")),this.setGraph(new Uint8Array(r),e)}setGraphFromString(e){this.setGraph(new TextEncoder().encode(e),!1)}setGraph(e,r){const t=e.length,n=this.i._malloc(t);this.i.HEAPU8.set(e,n),r?this.i._changeBinaryGraph(t,n):this.i._changeTextGraph(t,n),this.i._free(n)}configureAudio(e,r,t,n,i){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),w(this,n||"input_audio",o=>{w(this,i=i||"audio_header",a=>{this.i._configureAudio(o,a,e,r??0,t)})})}setAutoResizeCanvas(e){this.l=e}setAutoRenderToScreen(e){this.i._setAutoRenderToScreen(e)}setGpuBufferVerticalFlip(e){this.i.gpuOriginForWebTexturesIsBottomLeft=e}ca(e){Tr(this,"__graph_config__",r=>{e(r)}),w(this,"__graph_config__",r=>{this.i._getGraphConfig(r,void 0)}),delete this.i.simpleListeners.__graph_config__}attachErrorListener(e){this.i.errorListener=e}attachEmptyPacketListener(e,r){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[e]=r}addAudioToStream(e,r,t){this.addAudioToStreamWithShape(e,0,0,r,t)}addAudioToStreamWithShape(e,r,t,n,i){const o=4*e.length;this.h!==o&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(o),this.h=o),this.i.HEAPF32.set(e,this.g/4),w(this,n,a=>{this.i._addAudioToInputStream(this.g,r,t,a,i)})}addGpuBufferToStream(e,r,t){w(this,r,n=>{const[i,o]=va(this,e,n);this.i._addBoundTextureToStream(n,i,o,t)})}addBoolToStream(e,r,t){w(this,r,n=>{this.i._addBoolToInputStream(e,n,t)})}addDoubleToStream(e,r,t){w(this,r,n=>{this.i._addDoubleToInputStream(e,n,t)})}addFloatToStream(e,r,t){w(this,r,n=>{this.i._addFloatToInputStream(e,n,t)})}addIntToStream(e,r,t){w(this,r,n=>{this.i._addIntToInputStream(e,n,t)})}addUintToStream(e,r,t){w(this,r,n=>{this.i._addUintToInputStream(e,n,t)})}addStringToStream(e,r,t){w(this,r,n=>{w(this,e,i=>{this.i._addStringToInputStream(i,n,t)})})}addStringRecordToStream(e,r,t){w(this,r,n=>{_a(this,Object.keys(e),i=>{_a(this,Object.values(e),o=>{this.i._addFlatHashMapToInputStream(i,o,Object.keys(e).length,n,t)})})})}addProtoToStream(e,r,t,n){w(this,t,i=>{w(this,r,o=>{const a=this.i._malloc(e.length);this.i.HEAPU8.set(e,a),this.i._addProtoToInputStream(a,e.length,o,i,n),this.i._free(a)})})}addEmptyPacketToStream(e,r){w(this,e,t=>{this.i._addEmptyPacketToInputStream(t,r)})}addBoolVectorToStream(e,r,t){w(this,r,n=>{const i=this.i._allocateBoolVector(e.length);if(!i)throw Error("Unable to allocate new bool vector on heap.");for(const o of e)this.i._addBoolVectorEntry(i,o);this.i._addBoolVectorToInputStream(i,n,t)})}addDoubleVectorToStream(e,r,t){w(this,r,n=>{const i=this.i._allocateDoubleVector(e.length);if(!i)throw Error("Unable to allocate new double vector on heap.");for(const o of e)this.i._addDoubleVectorEntry(i,o);this.i._addDoubleVectorToInputStream(i,n,t)})}addFloatVectorToStream(e,r,t){w(this,r,n=>{const i=this.i._allocateFloatVector(e.length);if(!i)throw Error("Unable to allocate new float vector on heap.");for(const o of e)this.i._addFloatVectorEntry(i,o);this.i._addFloatVectorToInputStream(i,n,t)})}addIntVectorToStream(e,r,t){w(this,r,n=>{const i=this.i._allocateIntVector(e.length);if(!i)throw Error("Unable to allocate new int vector on heap.");for(const o of e)this.i._addIntVectorEntry(i,o);this.i._addIntVectorToInputStream(i,n,t)})}addUintVectorToStream(e,r,t){w(this,r,n=>{const i=this.i._allocateUintVector(e.length);if(!i)throw Error("Unable to allocate new unsigned int vector on heap.");for(const o of e)this.i._addUintVectorEntry(i,o);this.i._addUintVectorToInputStream(i,n,t)})}addStringVectorToStream(e,r,t){w(this,r,n=>{const i=this.i._allocateStringVector(e.length);if(!i)throw Error("Unable to allocate new string vector on heap.");for(const o of e)w(this,o,a=>{this.i._addStringVectorEntry(i,a)});this.i._addStringVectorToInputStream(i,n,t)})}addBoolToInputSidePacket(e,r){w(this,r,t=>{this.i._addBoolToInputSidePacket(e,t)})}addDoubleToInputSidePacket(e,r){w(this,r,t=>{this.i._addDoubleToInputSidePacket(e,t)})}addFloatToInputSidePacket(e,r){w(this,r,t=>{this.i._addFloatToInputSidePacket(e,t)})}addIntToInputSidePacket(e,r){w(this,r,t=>{this.i._addIntToInputSidePacket(e,t)})}addUintToInputSidePacket(e,r){w(this,r,t=>{this.i._addUintToInputSidePacket(e,t)})}addStringToInputSidePacket(e,r){w(this,r,t=>{w(this,e,n=>{this.i._addStringToInputSidePacket(n,t)})})}addProtoToInputSidePacket(e,r,t){w(this,t,n=>{w(this,r,i=>{const o=this.i._malloc(e.length);this.i.HEAPU8.set(e,o),this.i._addProtoToInputSidePacket(o,e.length,i,n),this.i._free(o)})})}addBoolVectorToInputSidePacket(e,r){w(this,r,t=>{const n=this.i._allocateBoolVector(e.length);if(!n)throw Error("Unable to allocate new bool vector on heap.");for(const i of e)this.i._addBoolVectorEntry(n,i);this.i._addBoolVectorToInputSidePacket(n,t)})}addDoubleVectorToInputSidePacket(e,r){w(this,r,t=>{const n=this.i._allocateDoubleVector(e.length);if(!n)throw Error("Unable to allocate new double vector on heap.");for(const i of e)this.i._addDoubleVectorEntry(n,i);this.i._addDoubleVectorToInputSidePacket(n,t)})}addFloatVectorToInputSidePacket(e,r){w(this,r,t=>{const n=this.i._allocateFloatVector(e.length);if(!n)throw Error("Unable to allocate new float vector on heap.");for(const i of e)this.i._addFloatVectorEntry(n,i);this.i._addFloatVectorToInputSidePacket(n,t)})}addIntVectorToInputSidePacket(e,r){w(this,r,t=>{const n=this.i._allocateIntVector(e.length);if(!n)throw Error("Unable to allocate new int vector on heap.");for(const i of e)this.i._addIntVectorEntry(n,i);this.i._addIntVectorToInputSidePacket(n,t)})}addUintVectorToInputSidePacket(e,r){w(this,r,t=>{const n=this.i._allocateUintVector(e.length);if(!n)throw Error("Unable to allocate new unsigned int vector on heap.");for(const i of e)this.i._addUintVectorEntry(n,i);this.i._addUintVectorToInputSidePacket(n,t)})}addStringVectorToInputSidePacket(e,r){w(this,r,t=>{const n=this.i._allocateStringVector(e.length);if(!n)throw Error("Unable to allocate new string vector on heap.");for(const i of e)w(this,i,o=>{this.i._addStringVectorEntry(n,o)});this.i._addStringVectorToInputSidePacket(n,t)})}attachBoolListener(e,r){Tr(this,e,r),w(this,e,t=>{this.i._attachBoolListener(t)})}attachBoolVectorListener(e,r){ot(this,e,r),w(this,e,t=>{this.i._attachBoolVectorListener(t)})}attachIntListener(e,r){Tr(this,e,r),w(this,e,t=>{this.i._attachIntListener(t)})}attachIntVectorListener(e,r){ot(this,e,r),w(this,e,t=>{this.i._attachIntVectorListener(t)})}attachUintListener(e,r){Tr(this,e,r),w(this,e,t=>{this.i._attachUintListener(t)})}attachUintVectorListener(e,r){ot(this,e,r),w(this,e,t=>{this.i._attachUintVectorListener(t)})}attachDoubleListener(e,r){Tr(this,e,r),w(this,e,t=>{this.i._attachDoubleListener(t)})}attachDoubleVectorListener(e,r){ot(this,e,r),w(this,e,t=>{this.i._attachDoubleVectorListener(t)})}attachFloatListener(e,r){Tr(this,e,r),w(this,e,t=>{this.i._attachFloatListener(t)})}attachFloatVectorListener(e,r){ot(this,e,r),w(this,e,t=>{this.i._attachFloatVectorListener(t)})}attachStringListener(e,r){Tr(this,e,r),w(this,e,t=>{this.i._attachStringListener(t)})}attachStringVectorListener(e,r){ot(this,e,r),w(this,e,t=>{this.i._attachStringVectorListener(t)})}attachProtoListener(e,r,t){Tr(this,e,r),w(this,e,n=>{this.i._attachProtoListener(n,t||!1)})}attachProtoVectorListener(e,r,t){ot(this,e,r),w(this,e,n=>{this.i._attachProtoVectorListener(n,t||!1)})}attachAudioListener(e,r,t){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),Tr(this,e,(n,i)=>{n=new Float32Array(n.buffer,n.byteOffset,n.length/4),r(n,i)}),w(this,e,n=>{this.i._attachAudioListener(n,t||!1)})}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends Da{get ea(){return this.i}oa(e,r,t){w(this,r,n=>{const[i,o]=va(this,e,n);this.ea._addBoundTextureAsImageToStream(n,i,o,t)})}V(e,r){Tr(this,e,r),w(this,e,t=>{this.ea._attachImageListener(t)})}ba(e,r){ot(this,e,r),w(this,e,t=>{this.ea._attachImageVectorListener(t)})}}));var Da,hr=class extends d1{};async function x(e,r,t){return async function(n,i,o,a){return c1(n,i,o,a)}(e,t.canvas??(Tl()?void 0:document.createElement("canvas")),r,t)}function Rl(e,r,t,n){if(e.U){const o=new rl;if(t!=null&&t.regionOfInterest){if(!e.na)throw Error("This task doesn't support region-of-interest.");var i=t.regionOfInterest;if(i.left>=i.right||i.top>=i.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(i.left<0||i.top<0||i.right>1||i.bottom>1)throw Error("Expected RectF values to be in [0,1].");b(o,1,(i.left+i.right)/2),b(o,2,(i.top+i.bottom)/2),b(o,4,i.right-i.left),b(o,3,i.bottom-i.top)}else b(o,1,.5),b(o,2,.5),b(o,4,1),b(o,3,1);if(t!=null&&t.rotationDegrees){if((t==null?void 0:t.rotationDegrees)%90!=0)throw Error("Expected rotation to be a multiple of 90.");if(b(o,5,-Math.PI*t.rotationDegrees/180),(t==null?void 0:t.rotationDegrees)%180!=0){const[a,u]=kl(r);t=fe(o,3)*u/a,i=fe(o,4)*a/u,b(o,4,t),b(o,3,i)}}e.g.addProtoToStream(o.g(),"mediapipe.NormalizedRect",e.U,n)}e.g.oa(r,e.Z,n??performance.now()),e.finishProcessing()}function dr(e,r,t){var n;if((n=e.baseOptions)!=null&&n.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");Rl(e,r,t,e.B+1)}function Rr(e,r,t,n){var i;if(!((i=e.baseOptions)!=null&&i.g()))throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");Rl(e,r,t,n)}function pn(e,r,t,n){var i=r.data;const o=r.width,a=o*(r=r.height);if((i instanceof Uint8Array||i instanceof Float32Array)&&i.length!==a)throw Error("Unsupported channel count: "+i.length/a);return e=new we([i],t,!1,e.g.i.canvas,e.P,o,r),n?e.clone():e}var ze=class extends Ts{constructor(e,r,t,n){super(e),this.g=e,this.Z=r,this.U=t,this.na=n,this.P=new To}l(e,r=!0){if("runningMode"in e&&Yn(this.baseOptions,2,!!e.runningMode&&e.runningMode!=="IMAGE"),e.canvas!==void 0&&this.g.i.canvas!==e.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(e,r)}close(){this.P.close(),super.close()}};ze.prototype.close=ze.prototype.close;var sr=class extends ze{constructor(e,r){super(new hr(e,r),"image_in","norm_rect_in",!1),this.j={detections:[]},T(e=this.h=new zi,0,1,r=new se),b(this.h,2,.5),b(this.h,3,.3)}get baseOptions(){return N(this.h,se,1)}set baseOptions(e){T(this.h,0,1,e)}o(e){return"minDetectionConfidence"in e&&b(this.h,2,e.minDetectionConfidence??.5),"minSuppressionThreshold"in e&&b(this.h,3,e.minSuppressionThreshold??.3),this.l(e)}D(e,r){return this.j={detections:[]},dr(this,e,r),this.j}F(e,r,t){return this.j={detections:[]},Rr(this,e,t,r),this.j}m(){var e=new We;re(e,"image_in"),re(e,"norm_rect_in"),V(e,"detections");const r=new er;vr(r,$c,this.h);const t=new Ie;tr(t,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),Z(t,"IMAGE:image_in"),Z(t,"NORM_RECT:norm_rect_in"),P(t,"DETECTIONS:detections"),t.o(r),nr(e,t),this.g.attachProtoVectorListener("detections",(n,i)=>{for(const o of n)n=Zu(o),this.j.detections.push(Al(n));F(this,i)}),this.g.attachEmptyPacketListener("detections",n=>{F(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};sr.prototype.detectForVideo=sr.prototype.F,sr.prototype.detect=sr.prototype.D,sr.prototype.setOptions=sr.prototype.o,sr.createFromModelPath=async function(e,r){return x(sr,e,{baseOptions:{modelAssetPath:r}})},sr.createFromModelBuffer=function(e,r){return x(sr,e,{baseOptions:{modelAssetBuffer:r}})},sr.createFromOptions=function(e,r){return x(sr,e,r)};var Do=wr([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),So=wr([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),Lo=wr([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),xl=wr([474,475],[475,476],[476,477],[477,474]),Mo=wr([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),Ro=wr([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),Pl=wr([469,470],[470,471],[471,472],[472,469]),xo=wr([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),Il=[...Do,...So,...Lo,...Mo,...Ro,...xo],Ol=wr([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function Sa(e){e.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var ce=class extends ze{constructor(e,r){super(new hr(e,r),"image_in","norm_rect",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,T(e=this.h=new ol,0,1,r=new se),this.v=new sl,T(this.h,0,3,this.v),this.s=new zi,T(this.h,0,2,this.s),Mr(this.s,4,1),b(this.s,2,.5),b(this.v,2,.5),b(this.h,4,.5)}get baseOptions(){return N(this.h,se,1)}set baseOptions(e){T(this.h,0,1,e)}o(e){return"numFaces"in e&&Mr(this.s,4,e.numFaces??1),"minFaceDetectionConfidence"in e&&b(this.s,2,e.minFaceDetectionConfidence??.5),"minTrackingConfidence"in e&&b(this.h,4,e.minTrackingConfidence??.5),"minFacePresenceConfidence"in e&&b(this.v,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in e&&(this.outputFacialTransformationMatrixes=!!e.outputFacialTransformationMatrixes),this.l(e)}D(e,r){return Sa(this),dr(this,e,r),this.j}F(e,r,t){return Sa(this),Rr(this,e,t,r),this.j}m(){var e=new We;re(e,"image_in"),re(e,"norm_rect"),V(e,"face_landmarks");const r=new er;vr(r,Zc,this.h);const t=new Ie;tr(t,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),Z(t,"IMAGE:image_in"),Z(t,"NORM_RECT:norm_rect"),P(t,"NORM_LANDMARKS:face_landmarks"),t.o(r),nr(e,t),this.g.attachProtoVectorListener("face_landmarks",(n,i)=>{for(const o of n)n=Qn(o),this.j.faceLandmarks.push(Wi(n));F(this,i)}),this.g.attachEmptyPacketListener("face_landmarks",n=>{F(this,n)}),this.outputFaceBlendshapes&&(V(e,"blendshapes"),P(t,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",(n,i)=>{if(this.outputFaceBlendshapes)for(const o of n)n=ji(o),this.j.faceBlendshapes.push(bo(n.g()??[]));F(this,i)}),this.g.attachEmptyPacketListener("blendshapes",n=>{F(this,n)})),this.outputFacialTransformationMatrixes&&(V(e,"face_geometry"),P(t,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",(n,i)=>{if(this.outputFacialTransformationMatrixes)for(const o of n)(n=N(Jc(o),Hc,2))&&this.j.facialTransformationMatrixes.push({rows:lr(n,1)??0??0,columns:lr(n,2)??0??0,data:Ot(n,3,mt,It()).slice()??[]});F(this,i)}),this.g.attachEmptyPacketListener("face_geometry",n=>{F(this,n)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};ce.prototype.detectForVideo=ce.prototype.F,ce.prototype.detect=ce.prototype.D,ce.prototype.setOptions=ce.prototype.o,ce.createFromModelPath=function(e,r){return x(ce,e,{baseOptions:{modelAssetPath:r}})},ce.createFromModelBuffer=function(e,r){return x(ce,e,{baseOptions:{modelAssetBuffer:r}})},ce.createFromOptions=function(e,r){return x(ce,e,r)},ce.FACE_LANDMARKS_LIPS=Do,ce.FACE_LANDMARKS_LEFT_EYE=So,ce.FACE_LANDMARKS_LEFT_EYEBROW=Lo,ce.FACE_LANDMARKS_LEFT_IRIS=xl,ce.FACE_LANDMARKS_RIGHT_EYE=Mo,ce.FACE_LANDMARKS_RIGHT_EYEBROW=Ro,ce.FACE_LANDMARKS_RIGHT_IRIS=Pl,ce.FACE_LANDMARKS_FACE_OVAL=xo,ce.FACE_LANDMARKS_CONTOURS=Il,ce.FACE_LANDMARKS_TESSELATION=Ol;var kr=class extends ze{constructor(e,r){super(new hr(e,r),"image_in","norm_rect",!0),T(e=this.j=new ul,0,1,r=new se)}get baseOptions(){return N(this.j,se,1)}set baseOptions(e){T(this.j,0,1,e)}o(e){return super.l(e)}Ka(e,r,t){const n=typeof r!="function"?r:{};if(this.h=typeof r=="function"?r:t,dr(this,e,n??{}),!this.h)return this.s}m(){var e=new We;re(e,"image_in"),re(e,"norm_rect"),V(e,"stylized_image");const r=new er;vr(r,Qc,this.j);const t=new Ie;tr(t,"mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),Z(t,"IMAGE:image_in"),Z(t,"NORM_RECT:norm_rect"),P(t,"STYLIZED_IMAGE:stylized_image"),t.o(r),nr(e,t),this.g.V("stylized_image",(n,i)=>{var o=!this.h,a=n.data,u=n.width;const l=u*(n=n.height);if(a instanceof Uint8Array)if(a.length===3*l){const c=new Uint8ClampedArray(4*l);for(let m=0;m<l;++m)c[4*m]=a[3*m],c[4*m+1]=a[3*m+1],c[4*m+2]=a[3*m+2],c[4*m+3]=255;a=new ImageData(c,u,n)}else{if(a.length!==4*l)throw Error("Unsupported channel count: "+a.length/l);a=new ImageData(new Uint8ClampedArray(a.buffer,a.byteOffset,a.length),u,n)}else if(!(a instanceof WebGLTexture))throw Error(`Unsupported format: ${a.constructor.name}`);u=new Ae([a],!1,!1,this.g.i.canvas,this.P,u,n),this.s=o=o?u.clone():u,this.h&&this.h(o),F(this,i)}),this.g.attachEmptyPacketListener("stylized_image",n=>{this.s=null,this.h&&this.h(null),F(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};kr.prototype.stylize=kr.prototype.Ka,kr.prototype.setOptions=kr.prototype.o,kr.createFromModelPath=function(e,r){return x(kr,e,{baseOptions:{modelAssetPath:r}})},kr.createFromModelBuffer=function(e,r){return x(kr,e,{baseOptions:{modelAssetBuffer:r}})},kr.createFromOptions=function(e,r){return x(kr,e,r)};var Po=wr([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function La(e){e.gestures=[],e.landmarks=[],e.worldLandmarks=[],e.handedness=[]}function Ma(e){return e.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:e.gestures,landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handedness:e.handedness,handednesses:e.handedness}}function Ra(e,r=!0){const t=[];for(const i of e){var n=ji(i);e=[];for(const o of n.g())n=r&&lr(o,1)!=null?lr(o,1)??0:-1,e.push({score:fe(o,2)??0,index:n,categoryName:cr(o,3)??""??"",displayName:cr(o,4)??""??""});t.push(e)}return t}var Be=class extends ze{constructor(e,r){super(new hr(e,r),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],T(e=this.j=new hl,0,1,r=new se),this.s=new Fo,T(this.j,0,2,this.s),this.C=new yo,T(this.s,0,3,this.C),this.v=new cl,T(this.s,0,2,this.v),this.h=new e1,T(this.j,0,3,this.h),b(this.v,2,.5),b(this.s,4,.5),b(this.C,2,.5)}get baseOptions(){return N(this.j,se,1)}set baseOptions(e){T(this.j,0,1,e)}o(e){var i,o,a,u;if(Mr(this.v,3,e.numHands??1),"minHandDetectionConfidence"in e&&b(this.v,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&b(this.s,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&b(this.C,2,e.minHandPresenceConfidence??.5),e.cannedGesturesClassifierOptions){var r=new Zt,t=r,n=Es(e.cannedGesturesClassifierOptions,(i=N(this.h,Zt,3))==null?void 0:i.h());T(t,0,2,n),T(this.h,0,3,r)}else e.cannedGesturesClassifierOptions===void 0&&((o=N(this.h,Zt,3))==null||o.g());return e.customGesturesClassifierOptions?(T(t=r=new Zt,0,2,n=Es(e.customGesturesClassifierOptions,(a=N(this.h,Zt,4))==null?void 0:a.h())),T(this.h,0,4,r)):e.customGesturesClassifierOptions===void 0&&((u=N(this.h,Zt,4))==null||u.g()),this.l(e)}Fa(e,r){return La(this),dr(this,e,r),Ma(this)}Ga(e,r,t){return La(this),Rr(this,e,t,r),Ma(this)}m(){var e=new We;re(e,"image_in"),re(e,"norm_rect"),V(e,"hand_gestures"),V(e,"hand_landmarks"),V(e,"world_hand_landmarks"),V(e,"handedness");const r=new er;vr(r,r1,this.j);const t=new Ie;tr(t,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),Z(t,"IMAGE:image_in"),Z(t,"NORM_RECT:norm_rect"),P(t,"HAND_GESTURES:hand_gestures"),P(t,"LANDMARKS:hand_landmarks"),P(t,"WORLD_LANDMARKS:world_hand_landmarks"),P(t,"HANDEDNESS:handedness"),t.o(r),nr(e,t),this.g.attachProtoVectorListener("hand_landmarks",(n,i)=>{for(const o of n){n=Qn(o);const a=[];for(const u of $r(n,el,1))a.push({x:fe(u,1)??0,y:fe(u,2)??0,z:fe(u,3)??0,visibility:fe(u,4)??0});this.landmarks.push(a)}F(this,i)}),this.g.attachEmptyPacketListener("hand_landmarks",n=>{F(this,n)}),this.g.attachProtoVectorListener("world_hand_landmarks",(n,i)=>{for(const o of n){n=nn(o);const a=[];for(const u of $r(n,Qu,1))a.push({x:fe(u,1)??0,y:fe(u,2)??0,z:fe(u,3)??0,visibility:fe(u,4)??0});this.worldLandmarks.push(a)}F(this,i)}),this.g.attachEmptyPacketListener("world_hand_landmarks",n=>{F(this,n)}),this.g.attachProtoVectorListener("hand_gestures",(n,i)=>{this.gestures.push(...Ra(n,!1)),F(this,i)}),this.g.attachEmptyPacketListener("hand_gestures",n=>{F(this,n)}),this.g.attachProtoVectorListener("handedness",(n,i)=>{this.handedness.push(...Ra(n)),F(this,i)}),this.g.attachEmptyPacketListener("handedness",n=>{F(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};function xa(e){return{landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handednesses:e.handedness,handedness:e.handedness}}Be.prototype.recognizeForVideo=Be.prototype.Ga,Be.prototype.recognize=Be.prototype.Fa,Be.prototype.setOptions=Be.prototype.o,Be.createFromModelPath=function(e,r){return x(Be,e,{baseOptions:{modelAssetPath:r}})},Be.createFromModelBuffer=function(e,r){return x(Be,e,{baseOptions:{modelAssetBuffer:r}})},Be.createFromOptions=function(e,r){return x(Be,e,r)},Be.HAND_CONNECTIONS=Po;var He=class extends ze{constructor(e,r){super(new hr(e,r),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],T(e=this.h=new Fo,0,1,r=new se),this.s=new yo,T(this.h,0,3,this.s),this.j=new cl,T(this.h,0,2,this.j),Mr(this.j,3,1),b(this.j,2,.5),b(this.s,2,.5),b(this.h,4,.5)}get baseOptions(){return N(this.h,se,1)}set baseOptions(e){T(this.h,0,1,e)}o(e){return"numHands"in e&&Mr(this.j,3,e.numHands??1),"minHandDetectionConfidence"in e&&b(this.j,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&b(this.h,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&b(this.s,2,e.minHandPresenceConfidence??.5),this.l(e)}D(e,r){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],dr(this,e,r),xa(this)}F(e,r,t){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Rr(this,e,t,r),xa(this)}m(){var e=new We;re(e,"image_in"),re(e,"norm_rect"),V(e,"hand_landmarks"),V(e,"world_hand_landmarks"),V(e,"handedness");const r=new er;vr(r,t1,this.h);const t=new Ie;tr(t,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),Z(t,"IMAGE:image_in"),Z(t,"NORM_RECT:norm_rect"),P(t,"LANDMARKS:hand_landmarks"),P(t,"WORLD_LANDMARKS:world_hand_landmarks"),P(t,"HANDEDNESS:handedness"),t.o(r),nr(e,t),this.g.attachProtoVectorListener("hand_landmarks",(n,i)=>{for(const o of n)n=Qn(o),this.landmarks.push(Wi(n));F(this,i)}),this.g.attachEmptyPacketListener("hand_landmarks",n=>{F(this,n)}),this.g.attachProtoVectorListener("world_hand_landmarks",(n,i)=>{for(const o of n)n=nn(o),this.worldLandmarks.push(zn(n));F(this,i)}),this.g.attachEmptyPacketListener("world_hand_landmarks",n=>{F(this,n)}),this.g.attachProtoVectorListener("handedness",(n,i)=>{var o=this.handedness,a=o.push;const u=[];for(const l of n){n=ji(l);const c=[];for(const m of n.g())c.push({score:fe(m,2)??0,index:lr(m,1)??0??-1,categoryName:cr(m,3)??""??"",displayName:cr(m,4)??""??""});u.push(c)}a.call(o,...u),F(this,i)}),this.g.attachEmptyPacketListener("handedness",n=>{F(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};He.prototype.detectForVideo=He.prototype.F,He.prototype.detect=He.prototype.D,He.prototype.setOptions=He.prototype.o,He.createFromModelPath=function(e,r){return x(He,e,{baseOptions:{modelAssetPath:r}})},He.createFromModelBuffer=function(e,r){return x(He,e,{baseOptions:{modelAssetBuffer:r}})},He.createFromOptions=function(e,r){return x(He,e,r)},He.HAND_CONNECTIONS=Po;var Nl=wr([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function Pa(e){e.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function Ia(e){try{if(!e.C)return e.h;e.C(e.h)}finally{Ki(e)}}function ui(e,r){e=Qn(e),r.push(Wi(e))}var ne=class extends ze{constructor(e,r){super(new hr(e,r),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,T(e=this.j=new ml,0,1,r=new se),this.K=new yo,T(this.j,0,2,this.K),this.Y=new n1,T(this.j,0,3,this.Y),this.s=new zi,T(this.j,0,4,this.s),this.H=new sl,T(this.j,0,5,this.H),this.v=new gl,T(this.j,0,6,this.v),this.L=new pl,T(this.j,0,7,this.L),b(this.s,2,.5),b(this.s,3,.3),b(this.H,2,.5),b(this.v,2,.5),b(this.v,3,.3),b(this.L,2,.5),b(this.K,2,.5)}get baseOptions(){return N(this.j,se,1)}set baseOptions(e){T(this.j,0,1,e)}o(e){return"minFaceDetectionConfidence"in e&&b(this.s,2,e.minFaceDetectionConfidence??.5),"minFaceSuppressionThreshold"in e&&b(this.s,3,e.minFaceSuppressionThreshold??.3),"minFacePresenceConfidence"in e&&b(this.H,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"minPoseDetectionConfidence"in e&&b(this.v,2,e.minPoseDetectionConfidence??.5),"minPoseSuppressionThreshold"in e&&b(this.v,3,e.minPoseSuppressionThreshold??.3),"minPosePresenceConfidence"in e&&b(this.L,2,e.minPosePresenceConfidence??.5),"outputPoseSegmentationMasks"in e&&(this.outputPoseSegmentationMasks=!!e.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in e&&b(this.K,2,e.minHandLandmarksConfidence??.5),this.l(e)}D(e,r,t){const n=typeof r!="function"?r:{};return this.C=typeof r=="function"?r:t,Pa(this),dr(this,e,n),Ia(this)}F(e,r,t,n){const i=typeof t!="function"?t:{};return this.C=typeof t=="function"?t:n,Pa(this),Rr(this,e,i,r),Ia(this)}m(){var e=new We;re(e,"input_frames_image"),V(e,"pose_landmarks"),V(e,"pose_world_landmarks"),V(e,"face_landmarks"),V(e,"left_hand_landmarks"),V(e,"left_hand_world_landmarks"),V(e,"right_hand_landmarks"),V(e,"right_hand_world_landmarks");const r=new er,t=new ia;Cs(t,1,Cn("type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),""),function(i,o){if(o!=null)if(Array.isArray(o))J(i,2,Li(o,Ws,void 0,void 0,!1));else{if(!(typeof o=="string"||o instanceof Kr||Ut(o)))throw Error("invalid value in Any.value field: "+o+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");Cs(i,2,Ns(o,!1),Gt())}}(t,this.j.g());const n=new Ie;tr(n,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),mi(n,8,ia,t),Z(n,"IMAGE:input_frames_image"),P(n,"POSE_LANDMARKS:pose_landmarks"),P(n,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),P(n,"FACE_LANDMARKS:face_landmarks"),P(n,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),P(n,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),P(n,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),P(n,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),n.o(r),nr(e,n),Xi(this,e),this.g.attachProtoListener("pose_landmarks",(i,o)=>{ui(i,this.h.poseLandmarks),F(this,o)}),this.g.attachEmptyPacketListener("pose_landmarks",i=>{F(this,i)}),this.g.attachProtoListener("pose_world_landmarks",(i,o)=>{var a=this.h.poseWorldLandmarks;i=nn(i),a.push(zn(i)),F(this,o)}),this.g.attachEmptyPacketListener("pose_world_landmarks",i=>{F(this,i)}),this.outputPoseSegmentationMasks&&(P(n,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),dn(this,"pose_segmentation_mask"),this.g.V("pose_segmentation_mask",(i,o)=>{this.h.poseSegmentationMasks=[pn(this,i,!0,!this.C)],F(this,o)}),this.g.attachEmptyPacketListener("pose_segmentation_mask",i=>{this.h.poseSegmentationMasks=[],F(this,i)})),this.g.attachProtoListener("face_landmarks",(i,o)=>{ui(i,this.h.faceLandmarks),F(this,o)}),this.g.attachEmptyPacketListener("face_landmarks",i=>{F(this,i)}),this.outputFaceBlendshapes&&(V(e,"extra_blendshapes"),P(n,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",(i,o)=>{var a=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(i=ji(i),a.push(bo(i.g()??[]))),F(this,o)}),this.g.attachEmptyPacketListener("extra_blendshapes",i=>{F(this,i)})),this.g.attachProtoListener("left_hand_landmarks",(i,o)=>{ui(i,this.h.leftHandLandmarks),F(this,o)}),this.g.attachEmptyPacketListener("left_hand_landmarks",i=>{F(this,i)}),this.g.attachProtoListener("left_hand_world_landmarks",(i,o)=>{var a=this.h.leftHandWorldLandmarks;i=nn(i),a.push(zn(i)),F(this,o)}),this.g.attachEmptyPacketListener("left_hand_world_landmarks",i=>{F(this,i)}),this.g.attachProtoListener("right_hand_landmarks",(i,o)=>{ui(i,this.h.rightHandLandmarks),F(this,o)}),this.g.attachEmptyPacketListener("right_hand_landmarks",i=>{F(this,i)}),this.g.attachProtoListener("right_hand_world_landmarks",(i,o)=>{var a=this.h.rightHandWorldLandmarks;i=nn(i),a.push(zn(i)),F(this,o)}),this.g.attachEmptyPacketListener("right_hand_world_landmarks",i=>{F(this,i)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};ne.prototype.detectForVideo=ne.prototype.F,ne.prototype.detect=ne.prototype.D,ne.prototype.setOptions=ne.prototype.o,ne.createFromModelPath=function(e,r){return x(ne,e,{baseOptions:{modelAssetPath:r}})},ne.createFromModelBuffer=function(e,r){return x(ne,e,{baseOptions:{modelAssetBuffer:r}})},ne.createFromOptions=function(e,r){return x(ne,e,r)},ne.HAND_CONNECTIONS=Po,ne.POSE_CONNECTIONS=Nl,ne.FACE_LANDMARKS_LIPS=Do,ne.FACE_LANDMARKS_LEFT_EYE=So,ne.FACE_LANDMARKS_LEFT_EYEBROW=Lo,ne.FACE_LANDMARKS_LEFT_IRIS=xl,ne.FACE_LANDMARKS_RIGHT_EYE=Mo,ne.FACE_LANDMARKS_RIGHT_EYEBROW=Ro,ne.FACE_LANDMARKS_RIGHT_IRIS=Pl,ne.FACE_LANDMARKS_FACE_OVAL=xo,ne.FACE_LANDMARKS_CONTOURS=Il,ne.FACE_LANDMARKS_TESSELATION=Ol;var or=class extends ze{constructor(e,r){super(new hr(e,r),"input_image","norm_rect",!0),this.j={classifications:[]},T(e=this.h=new yl,0,1,r=new se)}get baseOptions(){return N(this.h,se,1)}set baseOptions(e){T(this.h,0,1,e)}o(e){return T(this.h,0,2,Es(e,N(this.h,go,2))),this.l(e)}qa(e,r){return this.j={classifications:[]},dr(this,e,r),this.j}ra(e,r,t){return this.j={classifications:[]},Rr(this,e,t,r),this.j}m(){var e=new We;re(e,"input_image"),re(e,"norm_rect"),V(e,"classifications");const r=new er;vr(r,i1,this.h);const t=new Ie;tr(t,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),Z(t,"IMAGE:input_image"),Z(t,"NORM_RECT:norm_rect"),P(t,"CLASSIFICATIONS:classifications"),t.o(r),nr(e,t),this.g.attachProtoListener("classifications",(n,i)=>{this.j=function(o){const a={classifications:$r(o,zc,1).map(u=>{var l;return bo(((l=N(u,$u,4))==null?void 0:l.g())??[],lr(u,2)??0,cr(u,3)??"")})};return ms(cn(o,2))!=null&&(a.timestampMs=ms(cn(o,2))??0),a}(Wc(n)),F(this,i)}),this.g.attachEmptyPacketListener("classifications",n=>{F(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};or.prototype.classifyForVideo=or.prototype.ra,or.prototype.classify=or.prototype.qa,or.prototype.setOptions=or.prototype.o,or.createFromModelPath=function(e,r){return x(or,e,{baseOptions:{modelAssetPath:r}})},or.createFromModelBuffer=function(e,r){return x(or,e,{baseOptions:{modelAssetBuffer:r}})},or.createFromOptions=function(e,r){return x(or,e,r)};var Je=class extends ze{constructor(e,r){super(new hr(e,r),"image_in","norm_rect",!0),this.h=new Fl,this.embeddings={embeddings:[]},T(e=this.h,0,1,r=new se)}get baseOptions(){return N(this.h,se,1)}set baseOptions(e){T(this.h,0,1,e)}o(e){var r=this.h,t=N(this.h,fa,2);return t=t?t.clone():new fa,e.l2Normalize!==void 0?Yn(t,1,e.l2Normalize):"l2Normalize"in e&&J(t,1),e.quantize!==void 0?Yn(t,2,e.quantize):"quantize"in e&&J(t,2),T(r,0,2,t),this.l(e)}xa(e,r){return dr(this,e,r),this.embeddings}ya(e,r,t){return Rr(this,e,t,r),this.embeddings}m(){var e=new We;re(e,"image_in"),re(e,"norm_rect"),V(e,"embeddings_out");const r=new er;vr(r,s1,this.h);const t=new Ie;tr(t,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),Z(t,"IMAGE:image_in"),Z(t,"NORM_RECT:norm_rect"),P(t,"EMBEDDINGS:embeddings_out"),t.o(r),nr(e,t),this.g.attachProtoListener("embeddings_out",(n,i)=>{n=qc(n),this.embeddings=function(o){return{embeddings:$r(o,Kc,1).map(a=>{var l,c;const u={headIndex:lr(a,3)??0??-1,headName:cr(a,4)??""??""};if(mu(a,da,ss(a,1))!==void 0)a=Ot(a=N(a,da,ss(a,1)),1,mt,It()),u.floatEmbedding=a.slice();else{const m=new Uint8Array(0);u.quantizedEmbedding=((c=(l=N(a,Xc,ss(a,2)))==null?void 0:l.ma())==null?void 0:c.h())??m}return u}),timestampMs:ms(cn(o,2))??0}}(n),F(this,i)}),this.g.attachEmptyPacketListener("embeddings_out",n=>{F(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Je.cosineSimilarity=function(e,r){if(e.floatEmbedding&&r.floatEmbedding)e=Fa(e.floatEmbedding,r.floatEmbedding);else{if(!e.quantizedEmbedding||!r.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");e=Fa(ya(e.quantizedEmbedding),ya(r.quantizedEmbedding))}return e},Je.prototype.embedForVideo=Je.prototype.ya,Je.prototype.embed=Je.prototype.xa,Je.prototype.setOptions=Je.prototype.o,Je.createFromModelPath=function(e,r){return x(Je,e,{baseOptions:{modelAssetPath:r}})},Je.createFromModelBuffer=function(e,r){return x(Je,e,{baseOptions:{modelAssetBuffer:r}})},Je.createFromOptions=function(e,r){return x(Je,e,r)};var Ss=class{constructor(e,r,t){this.confidenceMasks=e,this.categoryMask=r,this.qualityScores=t}close(){var e,r;(e=this.confidenceMasks)==null||e.forEach(t=>{t.close()}),(r=this.categoryMask)==null||r.close()}};function Oa(e){e.categoryMask=void 0,e.confidenceMasks=void 0,e.qualityScores=void 0}function Na(e){try{const r=new Ss(e.confidenceMasks,e.categoryMask,e.qualityScores);if(!e.j)return r;e.j(r)}finally{Ki(e)}}Ss.prototype.close=Ss.prototype.close;var Ve=class extends ze{constructor(e,r){super(new hr(e,r),"image_in","norm_rect",!1),this.s=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new _o,this.v=new Cl,T(this.h,0,3,this.v),T(e=this.h,0,1,r=new se)}get baseOptions(){return N(this.h,se,1)}set baseOptions(e){T(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?J(this.h,2,Cn(e.displayNamesLocale)):"displayNamesLocale"in e&&J(this.h,2),"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}J(){(function(e){var t,n;const r=$r(e.ca(),Ie,1).filter(i=>(cr(i,1)??"").includes("mediapipe.tasks.TensorsToSegmentationCalculator"));if(e.s=[],r.length>1)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");r.length===1&&(((n=(t=N(r[0],er,7))==null?void 0:t.l())==null?void 0:n.g())??new Map).forEach((i,o)=>{e.s[Number(o)]=cr(i,1)??""})})(this)}segment(e,r,t){const n=typeof r!="function"?r:{};return this.j=typeof r=="function"?r:t,Oa(this),dr(this,e,n),Na(this)}Ia(e,r,t,n){const i=typeof t!="function"?t:{};return this.j=typeof t=="function"?t:n,Oa(this),Rr(this,e,i,r),Na(this)}Ba(){return this.s}m(){var e=new We;re(e,"image_in"),re(e,"norm_rect");const r=new er;vr(r,_l,this.h);const t=new Ie;tr(t,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),Z(t,"IMAGE:image_in"),Z(t,"NORM_RECT:norm_rect"),t.o(r),nr(e,t),Xi(this,e),this.outputConfidenceMasks&&(V(e,"confidence_masks"),P(t,"CONFIDENCE_MASKS:confidence_masks"),dn(this,"confidence_masks"),this.g.ba("confidence_masks",(n,i)=>{this.confidenceMasks=n.map(o=>pn(this,o,!0,!this.j)),F(this,i)}),this.g.attachEmptyPacketListener("confidence_masks",n=>{this.confidenceMasks=[],F(this,n)})),this.outputCategoryMask&&(V(e,"category_mask"),P(t,"CATEGORY_MASK:category_mask"),dn(this,"category_mask"),this.g.V("category_mask",(n,i)=>{this.categoryMask=pn(this,n,!1,!this.j),F(this,i)}),this.g.attachEmptyPacketListener("category_mask",n=>{this.categoryMask=void 0,F(this,n)})),V(e,"quality_scores"),P(t,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(n,i)=>{this.qualityScores=n,F(this,i)}),this.g.attachEmptyPacketListener("quality_scores",n=>{this.categoryMask=void 0,F(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ve.prototype.getLabels=Ve.prototype.Ba,Ve.prototype.segmentForVideo=Ve.prototype.Ia,Ve.prototype.segment=Ve.prototype.segment,Ve.prototype.setOptions=Ve.prototype.o,Ve.createFromModelPath=function(e,r){return x(Ve,e,{baseOptions:{modelAssetPath:r}})},Ve.createFromModelBuffer=function(e,r){return x(Ve,e,{baseOptions:{modelAssetBuffer:r}})},Ve.createFromOptions=function(e,r){return x(Ve,e,r)};var Ls=class{constructor(e,r,t){this.confidenceMasks=e,this.categoryMask=r,this.qualityScores=t}close(){var e,r;(e=this.confidenceMasks)==null||e.forEach(t=>{t.close()}),(r=this.categoryMask)==null||r.close()}};Ls.prototype.close=Ls.prototype.close;var f1=class extends _{constructor(e){super(e)}},Qt=[0,de,-2],vi=[0,zr,-3,ie,zr,-1],Ua=[0,vi],Ga=[0,vi,de,-1],hs=class extends _{constructor(e){super(e)}},Va=[0,zr,-1,ie],g1=class extends _{constructor(e){super(e)}},Ba=class extends _{constructor(e){super(e)}},Ms=[1,2,3,4,5,6,7,8,9,10,14,15],Ul=class extends _{constructor(e){super(e)}};Ul.prototype.g=Hi([0,Ce,[0,Ms,H,vi,H,[0,vi,Qt],H,Ua,H,[0,Ua,Qt],H,Va,H,[0,zr,-3,ie,Qe],H,[0,zr,-3,ie],H,[0,j,zr,-2,ie,de,ie,-1,2,zr,Qt],H,Ga,H,[0,Ga,Qt],zr,Qt,j,H,[0,zr,-3,ie,Qt,-1],H,[0,Ce,Va]],j,[0,j,de,-1,ie]]);var Dr=class extends ze{constructor(e,r){super(new hr(e,r),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new _o,this.s=new Cl,T(this.h,0,3,this.s),T(e=this.h,0,1,r=new se)}get baseOptions(){return N(this.h,se,1)}set baseOptions(e){T(this.h,0,1,e)}o(e){return"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}segment(e,r,t,n){const i=typeof t!="function"?t:{};this.j=typeof t=="function"?t:n,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,t=this.B+1,n=new Ul;const o=new Ba;var a=new f1;if(Mr(a,1,255),T(o,0,12,a),r.keypoint&&r.scribble)throw Error("Cannot provide both keypoint and scribble.");if(r.keypoint){var u=new hs;Yn(u,3,!0),b(u,1,r.keypoint.x),b(u,2,r.keypoint.y),Hn(o,5,Ms,u)}else{if(!r.scribble)throw Error("Must provide either a keypoint or a scribble.");for(u of(a=new g1,r.scribble))Yn(r=new hs,3,!0),b(r,1,u.x),b(r,2,u.y),mi(a,1,hs,r);Hn(o,15,Ms,a)}mi(n,1,Ba,o),this.g.addProtoToStream(n.g(),"drishti.RenderData","roi_in",t),dr(this,e,i);e:{try{const c=new Ls(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var l=c;break e}this.j(c)}finally{Ki(this)}l=void 0}return l}m(){var e=new We;re(e,"image_in"),re(e,"roi_in"),re(e,"norm_rect_in");const r=new er;vr(r,_l,this.h);const t=new Ie;tr(t,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),Z(t,"IMAGE:image_in"),Z(t,"ROI:roi_in"),Z(t,"NORM_RECT:norm_rect_in"),t.o(r),nr(e,t),Xi(this,e),this.outputConfidenceMasks&&(V(e,"confidence_masks"),P(t,"CONFIDENCE_MASKS:confidence_masks"),dn(this,"confidence_masks"),this.g.ba("confidence_masks",(n,i)=>{this.confidenceMasks=n.map(o=>pn(this,o,!0,!this.j)),F(this,i)}),this.g.attachEmptyPacketListener("confidence_masks",n=>{this.confidenceMasks=[],F(this,n)})),this.outputCategoryMask&&(V(e,"category_mask"),P(t,"CATEGORY_MASK:category_mask"),dn(this,"category_mask"),this.g.V("category_mask",(n,i)=>{this.categoryMask=pn(this,n,!1,!this.j),F(this,i)}),this.g.attachEmptyPacketListener("category_mask",n=>{this.categoryMask=void 0,F(this,n)})),V(e,"quality_scores"),P(t,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",(n,i)=>{this.qualityScores=n,F(this,i)}),this.g.attachEmptyPacketListener("quality_scores",n=>{this.categoryMask=void 0,F(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Dr.prototype.segment=Dr.prototype.segment,Dr.prototype.setOptions=Dr.prototype.o,Dr.createFromModelPath=function(e,r){return x(Dr,e,{baseOptions:{modelAssetPath:r}})},Dr.createFromModelBuffer=function(e,r){return x(Dr,e,{baseOptions:{modelAssetBuffer:r}})},Dr.createFromOptions=function(e,r){return x(Dr,e,r)};var ar=class extends ze{constructor(e,r){super(new hr(e,r),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},T(e=this.h=new bl,0,1,r=new se)}get baseOptions(){return N(this.h,se,1)}set baseOptions(e){T(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?J(this.h,2,Cn(e.displayNamesLocale)):"displayNamesLocale"in e&&J(this.h,2),e.maxResults!==void 0?Mr(this.h,3,e.maxResults):"maxResults"in e&&J(this.h,3),e.scoreThreshold!==void 0?b(this.h,4,e.scoreThreshold):"scoreThreshold"in e&&J(this.h,4),e.categoryAllowlist!==void 0?yi(this.h,5,e.categoryAllowlist):"categoryAllowlist"in e&&J(this.h,5),e.categoryDenylist!==void 0?yi(this.h,6,e.categoryDenylist):"categoryDenylist"in e&&J(this.h,6),this.l(e)}D(e,r){return this.j={detections:[]},dr(this,e,r),this.j}F(e,r,t){return this.j={detections:[]},Rr(this,e,t,r),this.j}m(){var e=new We;re(e,"input_frame_gpu"),re(e,"norm_rect"),V(e,"detections");const r=new er;vr(r,a1,this.h);const t=new Ie;tr(t,"mediapipe.tasks.vision.ObjectDetectorGraph"),Z(t,"IMAGE:input_frame_gpu"),Z(t,"NORM_RECT:norm_rect"),P(t,"DETECTIONS:detections"),t.o(r),nr(e,t),this.g.attachProtoVectorListener("detections",(n,i)=>{for(const o of n)n=Zu(o),this.j.detections.push(Al(n));F(this,i)}),this.g.attachEmptyPacketListener("detections",n=>{F(this,n)}),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};ar.prototype.detectForVideo=ar.prototype.F,ar.prototype.detect=ar.prototype.D,ar.prototype.setOptions=ar.prototype.o,ar.createFromModelPath=async function(e,r){return x(ar,e,{baseOptions:{modelAssetPath:r}})},ar.createFromModelBuffer=function(e,r){return x(ar,e,{baseOptions:{modelAssetBuffer:r}})},ar.createFromOptions=function(e,r){return x(ar,e,r)};var Rs=class{constructor(e,r,t){this.landmarks=e,this.worldLandmarks=r,this.segmentationMasks=t}close(){var e;(e=this.segmentationMasks)==null||e.forEach(r=>{r.close()})}};function Ha(e){e.landmarks=[],e.worldLandmarks=[],e.segmentationMasks=void 0}function ja(e){try{const r=new Rs(e.landmarks,e.worldLandmarks,e.segmentationMasks);if(!e.s)return r;e.s(r)}finally{Ki(e)}}Rs.prototype.close=Rs.prototype.close;var Ze=class extends ze{constructor(e,r){super(new hr(e,r),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,T(e=this.h=new wl,0,1,r=new se),this.v=new pl,T(this.h,0,3,this.v),this.j=new gl,T(this.h,0,2,this.j),Mr(this.j,4,1),b(this.j,2,.5),b(this.v,2,.5),b(this.h,4,.5)}get baseOptions(){return N(this.h,se,1)}set baseOptions(e){T(this.h,0,1,e)}o(e){return"numPoses"in e&&Mr(this.j,4,e.numPoses??1),"minPoseDetectionConfidence"in e&&b(this.j,2,e.minPoseDetectionConfidence??.5),"minTrackingConfidence"in e&&b(this.h,4,e.minTrackingConfidence??.5),"minPosePresenceConfidence"in e&&b(this.v,2,e.minPosePresenceConfidence??.5),"outputSegmentationMasks"in e&&(this.outputSegmentationMasks=e.outputSegmentationMasks??!1),this.l(e)}D(e,r,t){const n=typeof r!="function"?r:{};return this.s=typeof r=="function"?r:t,Ha(this),dr(this,e,n),ja(this)}F(e,r,t,n){const i=typeof t!="function"?t:{};return this.s=typeof t=="function"?t:n,Ha(this),Rr(this,e,i,r),ja(this)}m(){var e=new We;re(e,"image_in"),re(e,"norm_rect"),V(e,"normalized_landmarks"),V(e,"world_landmarks"),V(e,"segmentation_masks");const r=new er;vr(r,u1,this.h);const t=new Ie;tr(t,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),Z(t,"IMAGE:image_in"),Z(t,"NORM_RECT:norm_rect"),P(t,"NORM_LANDMARKS:normalized_landmarks"),P(t,"WORLD_LANDMARKS:world_landmarks"),t.o(r),nr(e,t),Xi(this,e),this.g.attachProtoVectorListener("normalized_landmarks",(n,i)=>{this.landmarks=[];for(const o of n)n=Qn(o),this.landmarks.push(Wi(n));F(this,i)}),this.g.attachEmptyPacketListener("normalized_landmarks",n=>{this.landmarks=[],F(this,n)}),this.g.attachProtoVectorListener("world_landmarks",(n,i)=>{this.worldLandmarks=[];for(const o of n)n=nn(o),this.worldLandmarks.push(zn(n));F(this,i)}),this.g.attachEmptyPacketListener("world_landmarks",n=>{this.worldLandmarks=[],F(this,n)}),this.outputSegmentationMasks&&(P(t,"SEGMENTATION_MASK:segmentation_masks"),dn(this,"segmentation_masks"),this.g.ba("segmentation_masks",(n,i)=>{this.segmentationMasks=n.map(o=>pn(this,o,!0,!this.s)),F(this,i)}),this.g.attachEmptyPacketListener("segmentation_masks",n=>{this.segmentationMasks=[],F(this,n)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ze.prototype.detectForVideo=Ze.prototype.F,Ze.prototype.detect=Ze.prototype.D,Ze.prototype.setOptions=Ze.prototype.o,Ze.createFromModelPath=function(e,r){return x(Ze,e,{baseOptions:{modelAssetPath:r}})},Ze.createFromModelBuffer=function(e,r){return x(Ze,e,{baseOptions:{modelAssetBuffer:r}})},Ze.createFromOptions=function(e,r){return x(Ze,e,r)},Ze.POSE_CONNECTIONS=Nl;var Gl={exports:{}};(function(e,r){(function(t,n){e.exports=n()})(typeof self<"u"?self:Hl,function(){return function(t){var n={};function i(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=n,i.d=function(o,a,u){i.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:u})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,a){if(1&a&&(o=i(o)),8&a||4&a&&typeof o=="object"&&o&&o.__esModule)return o;var u=Object.create(null);if(i.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:o}),2&a&&typeof o!="string")for(var l in o)i.d(u,l,(function(c){return o[c]}).bind(null,l));return u},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="",i(i.s=0)}([function(t,n,i){i.r(n);var o={};function a(d){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(d)}i.r(o),i.d(o,"VictoryGesture",function(){return In}),i.d(o,"ThumbsUpGesture",function(){return Br});var u={Thumb:0,Index:1,Middle:2,Ring:3,Pinky:4,all:[0,1,2,3,4],nameMapping:{0:"Thumb",1:"Index",2:"Middle",3:"Ring",4:"Pinky"},pointsMapping:{0:[[0,1],[1,2],[2,3],[3,4]],1:[[0,5],[5,6],[6,7],[7,8]],2:[[0,9],[9,10],[10,11],[11,12]],3:[[0,13],[13,14],[14,15],[15,16]],4:[[0,17],[17,18],[18,19],[19,20]]},getName:function(d){return a(this.nameMapping[d])!==void 0&&this.nameMapping[d]},getPoints:function(d){return a(this.pointsMapping[d])!==void 0&&this.pointsMapping[d]}},l={NoCurl:0,HalfCurl:1,FullCurl:2,nameMapping:{0:"No Curl",1:"Half Curl",2:"Full Curl"},getName:function(d){return a(this.nameMapping[d])!==void 0&&this.nameMapping[d]}},c={VerticalUp:0,VerticalDown:1,HorizontalLeft:2,HorizontalRight:3,DiagonalUpRight:4,DiagonalUpLeft:5,DiagonalDownRight:6,DiagonalDownLeft:7,nameMapping:{0:"Vertical Up",1:"Vertical Down",2:"Horizontal Left",3:"Horizontal Right",4:"Diagonal Up Right",5:"Diagonal Up Left",6:"Diagonal Down Right",7:"Diagonal Down Left"},getName:function(d){return a(this.nameMapping[d])!==void 0&&this.nameMapping[d]}};function m(d,p){var f=typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(!f){if(Array.isArray(d)||(f=function(g,I){if(g){if(typeof g=="string")return k(g,I);var R=Object.prototype.toString.call(g).slice(8,-1);if(R==="Object"&&g.constructor&&(R=g.constructor.name),R==="Map"||R==="Set")return Array.from(g);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return k(g,I)}}(d))||p){f&&(d=f);var h=0,y=function(){};return{s:y,n:function(){return h>=d.length?{done:!0}:{done:!1,value:d[h++]}},e:function(g){throw g},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v,E=!0,D=!1;return{s:function(){f=f.call(d)},n:function(){var g=f.next();return E=g.done,g},e:function(g){D=!0,v=g},f:function(){try{E||f.return==null||f.return()}finally{if(D)throw v}}}}function k(d,p){(p==null||p>d.length)&&(p=d.length);for(var f=0,h=new Array(p);f<p;f++)h[f]=d[f];return h}function U(d,p){var f=Object.keys(d);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(d);p&&(h=h.filter(function(y){return Object.getOwnPropertyDescriptor(d,y).enumerable})),f.push.apply(f,h)}return f}function Ee(d){for(var p=1;p<arguments.length;p++){var f=arguments[p]!=null?arguments[p]:{};p%2?U(Object(f),!0).forEach(function(h){ve(d,h,f[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(f)):U(Object(f)).forEach(function(h){Object.defineProperty(d,h,Object.getOwnPropertyDescriptor(f,h))})}return d}function ve(d,p,f){return p in d?Object.defineProperty(d,p,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[p]=f,d}function ir(d,p){for(var f=0;f<p.length;f++){var h=p[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(d,h.key,h)}}var fr=function(){function d(h){(function(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this.options=Ee(Ee({},{HALF_CURL_START_LIMIT:60,NO_CURL_START_LIMIT:130,DISTANCE_VOTE_POWER:1.1,SINGLE_ANGLE_VOTE_POWER:.9,TOTAL_ANGLE_VOTE_POWER:1.6}),h)}var p,f;return p=d,(f=[{key:"estimate",value:function(h){var y,v=[],E=[],D=m(u.all);try{for(D.s();!(y=D.n()).done;){var g,I=y.value,R=u.getPoints(I),G=[],Q=[],W=m(R);try{for(W.s();!(g=W.n()).done;){var Te=g.value,oe=h[Te[0]],ke=h[Te[1]],be=this.getSlopes(oe,ke),De=be[0],Re=be[1];G.push(De),Q.push(Re)}}catch(Ye){W.e(Ye)}finally{W.f()}v.push(G),E.push(Q)}}catch(Ye){D.e(Ye)}finally{D.f()}var Hr,Xe=[],Se=[],Le=m(u.all);try{for(Le.s();!(Hr=Le.n()).done;){var Ke=Hr.value,yr=Ke==u.Thumb?1:0,Fr=u.getPoints(Ke),qe=h[Fr[yr][0]],kt=h[Fr[yr+1][1]],Dt=h[Fr[3][1]],it=this.estimateFingerCurl(qe,kt,Dt),St=this.calculateFingerDirection(qe,kt,Dt,v[Ke].slice(yr));Xe[Ke]=it,Se[Ke]=St}}catch(Ye){Le.e(Ye)}finally{Le.f()}return{curls:Xe,directions:Se}}},{key:"getSlopes",value:function(h,y){var v=this.calculateSlope(h[0],h[1],y[0],y[1]);return h.length==2?v:[v,this.calculateSlope(h[1],h[2],y[1],y[2])]}},{key:"angleOrientationAt",value:function(h){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,v=0,E=0,D=0;return h>=75&&h<=105?v=1*y:h>=25&&h<=155?E=1*y:D=1*y,[v,E,D]}},{key:"estimateFingerCurl",value:function(h,y,v){var E=h[0]-y[0],D=h[0]-v[0],g=y[0]-v[0],I=h[1]-y[1],R=h[1]-v[1],G=y[1]-v[1],Q=h[2]-y[2],W=h[2]-v[2],Te=y[2]-v[2],oe=Math.sqrt(E*E+I*I+Q*Q),ke=Math.sqrt(D*D+R*R+W*W),be=Math.sqrt(g*g+G*G+Te*Te),De=(be*be+oe*oe-ke*ke)/(2*be*oe);De>1?De=1:De<-1&&(De=-1);var Re=Math.acos(De);return(Re=57.2958*Re%180)>this.options.NO_CURL_START_LIMIT?l.NoCurl:Re>this.options.HALF_CURL_START_LIMIT?l.HalfCurl:l.FullCurl}},{key:"estimateHorizontalDirection",value:function(h,y,v,E){return E==Math.abs(h)?h>0?c.HorizontalLeft:c.HorizontalRight:E==Math.abs(y)?y>0?c.HorizontalLeft:c.HorizontalRight:v>0?c.HorizontalLeft:c.HorizontalRight}},{key:"estimateVerticalDirection",value:function(h,y,v,E){return E==Math.abs(h)?h<0?c.VerticalDown:c.VerticalUp:E==Math.abs(y)?y<0?c.VerticalDown:c.VerticalUp:v<0?c.VerticalDown:c.VerticalUp}},{key:"estimateDiagonalDirection",value:function(h,y,v,E,D,g,I,R){var G=this.estimateVerticalDirection(h,y,v,E),Q=this.estimateHorizontalDirection(D,g,I,R);return G==c.VerticalUp?Q==c.HorizontalLeft?c.DiagonalUpLeft:c.DiagonalUpRight:Q==c.HorizontalLeft?c.DiagonalDownLeft:c.DiagonalDownRight}},{key:"calculateFingerDirection",value:function(h,y,v,E){var D=h[0]-y[0],g=h[0]-v[0],I=y[0]-v[0],R=h[1]-y[1],G=h[1]-v[1],Q=y[1]-v[1],W=Math.max(Math.abs(D),Math.abs(g),Math.abs(I)),Te=Math.max(Math.abs(R),Math.abs(G),Math.abs(Q)),oe=0,ke=0,be=0,De=Te/(W+1e-5);De>1.5?oe+=this.options.DISTANCE_VOTE_POWER:De>.66?ke+=this.options.DISTANCE_VOTE_POWER:be+=this.options.DISTANCE_VOTE_POWER;var Re=Math.sqrt(D*D+R*R),Hr=Math.sqrt(g*g+G*G),Xe=Math.sqrt(I*I+Q*Q),Se=Math.max(Re,Hr,Xe),Le=h[0],Ke=h[1],yr=v[0],Fr=v[1];Se==Re?(yr=v[0],Fr=v[1]):Se==Xe&&(Le=y[0],Ke=y[1]);var qe=[Le,Ke],kt=[yr,Fr],Dt=this.getSlopes(qe,kt),it=this.angleOrientationAt(Dt,this.options.TOTAL_ANGLE_VOTE_POWER);oe+=it[0],ke+=it[1],be+=it[2];var St,Ye=m(E);try{for(Ye.s();!(St=Ye.n()).done;){var Cr=St.value,L=this.angleOrientationAt(Cr,this.options.SINGLE_ANGLE_VOTE_POWER);oe+=L[0],ke+=L[1],be+=L[2]}}catch(M){Ye.e(M)}finally{Ye.f()}return oe==Math.max(oe,ke,be)?this.estimateVerticalDirection(G,R,Q,Te):be==Math.max(ke,be)?this.estimateHorizontalDirection(g,D,I,W):this.estimateDiagonalDirection(G,R,Q,Te,g,D,I,W)}},{key:"calculateSlope",value:function(h,y,v,E){var D=(y-E)/(h-v),g=180*Math.atan(D)/Math.PI;return g<=0?g=-g:g>0&&(g=180-g),g}}])&&ir(p.prototype,f),d}();function gr(d,p){var f=typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(!f){if(Array.isArray(d)||(f=function(g,I){if(g){if(typeof g=="string")return pr(g,I);var R=Object.prototype.toString.call(g).slice(8,-1);if(R==="Object"&&g.constructor&&(R=g.constructor.name),R==="Map"||R==="Set")return Array.from(g);if(R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return pr(g,I)}}(d))||p){f&&(d=f);var h=0,y=function(){};return{s:y,n:function(){return h>=d.length?{done:!0}:{done:!1,value:d[h++]}},e:function(g){throw g},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v,E=!0,D=!1;return{s:function(){f=f.call(d)},n:function(){var g=f.next();return E=g.done,g},e:function(g){D=!0,v=g},f:function(){try{E||f.return==null||f.return()}finally{if(D)throw v}}}}function pr(d,p){(p==null||p>d.length)&&(p=d.length);for(var f=0,h=new Array(p);f<p;f++)h[f]=d[f];return h}function Rn(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")}function xn(d,p){for(var f=0;f<p.length;f++){var h=p[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(d,h.key,h)}}var Pn=function(){function d(h){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Rn(this,d),this.estimator=new fr(y),this.gestures=h}var p,f;return p=d,(f=[{key:"estimate",value:function(h,y){var v,E=[],D=this.estimator.estimate(h),g=[],I=gr(u.all);try{for(I.s();!(v=I.n()).done;){var R=v.value;g.push([u.getName(R),l.getName(D.curls[R]),c.getName(D.directions[R])])}}catch(oe){I.e(oe)}finally{I.f()}var G,Q=gr(this.gestures);try{for(Q.s();!(G=Q.n()).done;){var W=G.value,Te=W.matchAgainst(D.curls,D.directions);Te>=y&&E.push({name:W.name,score:Te})}}catch(oe){Q.e(oe)}finally{Q.f()}return{poseData:g,gestures:E}}}])&&xn(p.prototype,f),d}();function nt(d,p){return function(f){if(Array.isArray(f))return f}(d)||function(f,h){var y=f==null?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(y!=null){var v,E,D=[],g=!0,I=!1;try{for(y=y.call(f);!(g=(v=y.next()).done)&&(D.push(v.value),!h||D.length!==h);g=!0);}catch(R){I=!0,E=R}finally{try{g||y.return==null||y.return()}finally{if(I)throw E}}return D}}(d,p)||_e(d,p)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ei(d,p){var f=typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(!f){if(Array.isArray(d)||(f=_e(d))||p){f&&(d=f);var h=0,y=function(){};return{s:y,n:function(){return h>=d.length?{done:!0}:{done:!1,value:d[h++]}},e:function(g){throw g},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v,E=!0,D=!1;return{s:function(){f=f.call(d)},n:function(){var g=f.next();return E=g.done,g},e:function(g){D=!0,v=g},f:function(){try{E||f.return==null||f.return()}finally{if(D)throw v}}}}function _e(d,p){if(d){if(typeof d=="string")return Kt(d,p);var f=Object.prototype.toString.call(d).slice(8,-1);return f==="Object"&&d.constructor&&(f=d.constructor.name),f==="Map"||f==="Set"?Array.from(d):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?Kt(d,p):void 0}}function Kt(d,p){(p==null||p>d.length)&&(p=d.length);for(var f=0,h=new Array(p);f<p;f++)h[f]=d[f];return h}function Ji(d,p){for(var f=0;f<p.length;f++){var h=p[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(d,h.key,h)}}var mr=function(){function d(h){(function(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this.name=h,this.curls={},this.directions={}}var p,f;return p=d,(f=[{key:"addCurl",value:function(h,y){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;this.curls[h]===void 0&&(this.curls[h]=[]),this.curls[h].push([y,v])}},{key:"addDirection",value:function(h,y){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;this.directions[h]===void 0&&(this.directions[h]=[]),this.directions[h].push([y,v])}},{key:"matchAgainst",value:function(h,y){var v=0,E=0;for(var D in h){var g=h[D],I=this.curls[D];if(I!==void 0){E++;var R,G=!1,Q=0,W=ei(I);try{for(W.s();!(R=W.n()).done;){var Te=nt(R.value,2),oe=Te[0],ke=Te[1];if(g==oe){v+=ke,Q=Math.max(Q,ke),G=!0;break}}}catch(qe){W.e(qe)}finally{W.f()}G||(v-=Q)}}for(var be in y){var De=y[be],Re=this.directions[be];if(Re!==void 0){E++;var Hr,Xe=!1,Se=0,Le=ei(Re);try{for(Le.s();!(Hr=Le.n()).done;){var Ke=nt(Hr.value,2),yr=Ke[0],Fr=Ke[1];if(De==yr){v+=Fr,Se=Math.max(Se,Fr),Xe=!0;break}}}catch(qe){Le.e(qe)}finally{Le.f()}Xe||(v-=Se)}}return v/E*10}}])&&Ji(p.prototype,f),d}(),te=new mr("victory");te.addDirection(u.Thumb,c.VerticalUp,1),te.addDirection(u.Thumb,c.DiagonalUpLeft,1),te.addDirection(u.Thumb,c.DiagonalUpRight,1),te.addCurl(u.Index,l.NoCurl,1),te.addDirection(u.Index,c.VerticalUp,1),te.addDirection(u.Index,c.DiagonalUpLeft,1),te.addDirection(u.Index,c.DiagonalUpRight,1),te.addDirection(u.Index,c.HorizontalLeft,1),te.addDirection(u.Index,c.HorizontalRight,1),te.addCurl(u.Middle,l.NoCurl,1),te.addDirection(u.Middle,c.VerticalUp,1),te.addDirection(u.Middle,c.DiagonalUpLeft,1),te.addDirection(u.Middle,c.DiagonalUpRight,1),te.addDirection(u.Middle,c.HorizontalLeft,1),te.addDirection(u.Middle,c.HorizontalRight,1),te.addCurl(u.Ring,l.FullCurl,1),te.addCurl(u.Ring,l.HalfCurl,.9),te.addCurl(u.Pinky,l.FullCurl,1),te.addCurl(u.Pinky,l.HalfCurl,.9);var In=te,Ue=new mr("thumbs_up");Ue.addCurl(u.Thumb,l.NoCurl,1),Ue.addDirection(u.Thumb,c.VerticalUp,1),Ue.addDirection(u.Thumb,c.DiagonalUpLeft,.9),Ue.addDirection(u.Thumb,c.DiagonalUpRight,.9);for(var Tt=0,On=[u.Index,u.Middle,u.Ring,u.Pinky];Tt<On.length;Tt++){var qt=On[Tt];Ue.addCurl(qt,l.FullCurl,1),Ue.addCurl(qt,l.HalfCurl,.9)}Ue.addDirection(u.Index,c.DiagonalUpLeft,1),Ue.addDirection(u.Index,c.HorizontalLeft,1),Ue.addDirection(u.Index,c.HorizontalRight,1),Ue.addDirection(u.Index,c.DiagonalUpRight,1);var Br=Ue;n.default={GestureEstimator:Pn,GestureDescription:mr,Finger:u,FingerCurl:l,FingerDirection:c,Gestures:o}}]).default})})(Gl);var s=Gl.exports;const Ft=new s.GestureDescription("A");Ft.addCurl(s.Finger.Thumb,s.FingerCurl.NoCurl,1);Ft.addDirection(s.Finger.Thumb,s.FingerDirection.VerticalUp,.75);Ft.addCurl(s.Finger.Index,s.FingerCurl.FullCurl,1);Ft.addCurl(s.Finger.Middle,s.FingerCurl.FullCurl,1);Ft.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);Ft.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);const xr=new s.GestureDescription("B");Ft.addCurl(s.Finger.Index,s.FingerCurl.NoCurl,1);xr.addCurl(s.Finger.Index,s.FingerCurl.NoCurl,1);xr.addDirection(s.Finger.Index,s.FingerDirection.VerticalUp,.75);xr.addCurl(s.Finger.Middle,s.FingerCurl.NoCurl,1);xr.addDirection(s.Finger.Middle,s.FingerDirection.VerticalUp,.75);xr.addCurl(s.Finger.Ring,s.FingerCurl.NoCurl,1);xr.addDirection(s.Finger.Ring,s.FingerDirection.VerticalUp,.75);xr.addCurl(s.Finger.Pinky,s.FingerCurl.NoCurl,1);xr.addDirection(s.Finger.Pinky,s.FingerDirection.VerticalUp,.75);xr.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,1);const Ht=new s.GestureDescription("C");Ht.addCurl(s.Finger.Thumb,s.FingerCurl.NoCurl,1);Ht.addDirection(s.Finger.Thumb,s.FingerDirection.DiagonalUpRight,.75);Ht.addCurl(s.Finger.Index,s.FingerCurl.HalfCurl,1);Ht.addCurl(s.Finger.Middle,s.FingerCurl.HalfCurl,1);Ht.addCurl(s.Finger.Ring,s.FingerCurl.HalfCurl,1);Ht.addCurl(s.Finger.Pinky,s.FingerCurl.HalfCurl,1);const jt=new s.GestureDescription("D");jt.addCurl(s.Finger.Index,s.FingerCurl.NoCurl,1);jt.addDirection(s.Finger.Index,s.FingerDirection.VerticalUp,.75);jt.addCurl(s.Finger.Middle,s.FingerCurl.FullCurl,1);jt.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);jt.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);jt.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,.75);const En=new s.GestureDescription("E");En.addCurl(s.Finger.Index,s.FingerCurl.FullCurl,1);En.addCurl(s.Finger.Middle,s.FingerCurl.FullCurl,1);En.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);En.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);En.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,1);const Qr=new s.GestureDescription("F");Qr.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,.8);Qr.addCurl(s.Finger.Index,s.FingerCurl.FullCurl,1);Qr.addCurl(s.Finger.Middle,s.FingerCurl.NoCurl,1);Qr.addDirection(s.Finger.Middle,s.FingerDirection.VerticalUp,.75);Qr.addCurl(s.Finger.Ring,s.FingerCurl.NoCurl,1);Qr.addDirection(s.Finger.Ring,s.FingerDirection.VerticalUp,.75);Qr.addCurl(s.Finger.Pinky,s.FingerCurl.NoCurl,1);Qr.addDirection(s.Finger.Pinky,s.FingerDirection.VerticalUp,.75);const Pr=new s.GestureDescription("G");Pr.addCurl(s.Finger.Index,s.FingerCurl.NoCurl,1);Pr.addDirection(s.Finger.Index,s.FingerDirection.HorizontalLeft,.75);Pr.addDirection(s.Finger.Index,s.FingerDirection.HorizontalRight,.75);Pr.addCurl(s.Finger.Thumb,s.FingerCurl.NoCurl,1);Pr.addDirection(s.Finger.Thumb,s.FingerDirection.HorizontalLeft,.5);Pr.addDirection(s.Finger.Thumb,s.FingerDirection.HorizontalRight,.5);Pr.addCurl(s.Finger.Middle,s.FingerCurl.FullCurl,1);Pr.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);Pr.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);const Ir=new s.GestureDescription("H");Ir.addCurl(s.Finger.Index,s.FingerCurl.NoCurl,1);Ir.addDirection(s.Finger.Index,s.FingerDirection.HorizontalLeft,.75);Ir.addDirection(s.Finger.Index,s.FingerDirection.HorizontalRight,.75);Ir.addCurl(s.Finger.Middle,s.FingerCurl.NoCurl,1);Ir.addDirection(s.Finger.Middle,s.FingerDirection.HorizontalLeft,.75);Ir.addDirection(s.Finger.Middle,s.FingerDirection.HorizontalRight,.75);Ir.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);Ir.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);Ir.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,.75);const zt=new s.GestureDescription("I");zt.addCurl(s.Finger.Pinky,s.FingerCurl.NoCurl,1);zt.addDirection(s.Finger.Pinky,s.FingerDirection.VerticalUp,.75);zt.addCurl(s.Finger.Index,s.FingerCurl.FullCurl,1);zt.addCurl(s.Finger.Middle,s.FingerCurl.FullCurl,1);zt.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);zt.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,.75);const Ct=new s.GestureDescription("J");Ct.addCurl(s.Finger.Pinky,s.FingerCurl.NoCurl,1);Ct.addDirection(s.Finger.Pinky,s.FingerDirection.DiagonalUpRight,.5);Ct.addDirection(s.Finger.Pinky,s.FingerDirection.DiagonalUpLeft,.5);Ct.addCurl(s.Finger.Index,s.FingerCurl.FullCurl,1);Ct.addCurl(s.Finger.Middle,s.FingerCurl.FullCurl,1);Ct.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);Ct.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,.75);const vt=new s.GestureDescription("K");vt.addCurl(s.Finger.Index,s.FingerCurl.NoCurl,1);vt.addDirection(s.Finger.Index,s.FingerDirection.VerticalUp,.75);vt.addCurl(s.Finger.Middle,s.FingerCurl.NoCurl,1);vt.addDirection(s.Finger.Middle,s.FingerDirection.VerticalUp,.75);vt.addCurl(s.Finger.Thumb,s.FingerCurl.NoCurl,.75);vt.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);vt.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);const et=new s.GestureDescription("L");et.addCurl(s.Finger.Index,s.FingerCurl.NoCurl,1);et.addDirection(s.Finger.Index,s.FingerDirection.VerticalUp,.75);et.addCurl(s.Finger.Thumb,s.FingerCurl.NoCurl,1);et.addDirection(s.Finger.Thumb,s.FingerDirection.HorizontalLeft,.5);et.addDirection(s.Finger.Thumb,s.FingerDirection.HorizontalRight,.5);et.addCurl(s.Finger.Middle,s.FingerCurl.FullCurl,1);et.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);et.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);const Tn=new s.GestureDescription("M");Tn.addCurl(s.Finger.Index,s.FingerCurl.FullCurl,1);Tn.addCurl(s.Finger.Middle,s.FingerCurl.FullCurl,1);Tn.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);Tn.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);Tn.addCurl(s.Finger.Thumb,s.FingerCurl.FullCurl,1);const kn=new s.GestureDescription("N");kn.addCurl(s.Finger.Index,s.FingerCurl.FullCurl,1);kn.addCurl(s.Finger.Middle,s.FingerCurl.FullCurl,1);kn.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);kn.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);kn.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,.75);const Dn=new s.GestureDescription("O");Dn.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,1);Dn.addCurl(s.Finger.Index,s.FingerCurl.HalfCurl,1);Dn.addCurl(s.Finger.Middle,s.FingerCurl.HalfCurl,1);Dn.addCurl(s.Finger.Ring,s.FingerCurl.HalfCurl,1);Dn.addCurl(s.Finger.Pinky,s.FingerCurl.HalfCurl,1);const rt=new s.GestureDescription("P");rt.addCurl(s.Finger.Index,s.FingerCurl.NoCurl,1);rt.addDirection(s.Finger.Index,s.FingerDirection.DiagonalDownLeft,.5);rt.addDirection(s.Finger.Index,s.FingerDirection.DiagonalDownRight,.5);rt.addCurl(s.Finger.Middle,s.FingerCurl.NoCurl,1);rt.addDirection(s.Finger.Middle,s.FingerDirection.VerticalDown,.5);rt.addCurl(s.Finger.Thumb,s.FingerCurl.NoCurl,.75);rt.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);rt.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);const _t=new s.GestureDescription("Q");_t.addCurl(s.Finger.Index,s.FingerCurl.NoCurl,1);_t.addDirection(s.Finger.Index,s.FingerDirection.VerticalDown,.75);_t.addCurl(s.Finger.Thumb,s.FingerCurl.NoCurl,1);_t.addDirection(s.Finger.Thumb,s.FingerDirection.VerticalDown,.5);_t.addCurl(s.Finger.Middle,s.FingerCurl.FullCurl,1);_t.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);_t.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);const bt=new s.GestureDescription("R");bt.addCurl(s.Finger.Index,s.FingerCurl.NoCurl,1);bt.addDirection(s.Finger.Index,s.FingerDirection.VerticalUp,.75);bt.addCurl(s.Finger.Middle,s.FingerCurl.NoCurl,1);bt.addDirection(s.Finger.Middle,s.FingerDirection.VerticalUp,.75);bt.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);bt.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);bt.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,.75);const Sn=new s.GestureDescription("S");Sn.addCurl(s.Finger.Index,s.FingerCurl.FullCurl,1);Sn.addCurl(s.Finger.Middle,s.FingerCurl.FullCurl,1);Sn.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);Sn.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);Sn.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,1);const Ln=new s.GestureDescription("T");Ln.addCurl(s.Finger.Index,s.FingerCurl.FullCurl,1);Ln.addCurl(s.Finger.Middle,s.FingerCurl.FullCurl,1);Ln.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);Ln.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);Ln.addCurl(s.Finger.Thumb,s.FingerCurl.NoCurl,.75);const wt=new s.GestureDescription("U");wt.addCurl(s.Finger.Index,s.FingerCurl.NoCurl,1);wt.addDirection(s.Finger.Index,s.FingerDirection.VerticalUp,.75);wt.addCurl(s.Finger.Middle,s.FingerCurl.NoCurl,1);wt.addDirection(s.Finger.Middle,s.FingerDirection.VerticalUp,.75);wt.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);wt.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);wt.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,.75);const Or=new s.GestureDescription("V");Or.addCurl(s.Finger.Index,s.FingerCurl.NoCurl,1);Or.addDirection(s.Finger.Index,s.FingerDirection.DiagonalUpLeft,.5);Or.addDirection(s.Finger.Index,s.FingerDirection.VerticalUp,.5);Or.addCurl(s.Finger.Middle,s.FingerCurl.NoCurl,1);Or.addDirection(s.Finger.Middle,s.FingerDirection.DiagonalUpRight,.5);Or.addDirection(s.Finger.Middle,s.FingerDirection.VerticalUp,.5);Or.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);Or.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);Or.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,.75);const tt=new s.GestureDescription("W");tt.addCurl(s.Finger.Index,s.FingerCurl.NoCurl,1);tt.addDirection(s.Finger.Index,s.FingerDirection.VerticalUp,.75);tt.addCurl(s.Finger.Middle,s.FingerCurl.NoCurl,1);tt.addDirection(s.Finger.Middle,s.FingerDirection.VerticalUp,.75);tt.addCurl(s.Finger.Ring,s.FingerCurl.NoCurl,1);tt.addDirection(s.Finger.Ring,s.FingerDirection.VerticalUp,.75);tt.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);tt.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,.75);const Wt=new s.GestureDescription("X");Wt.addCurl(s.Finger.Index,s.FingerCurl.HalfCurl,1);Wt.addDirection(s.Finger.Index,s.FingerDirection.VerticalUp,.5);Wt.addCurl(s.Finger.Middle,s.FingerCurl.FullCurl,1);Wt.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);Wt.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);Wt.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,.75);const Nr=new s.GestureDescription("Y");Nr.addCurl(s.Finger.Thumb,s.FingerCurl.NoCurl,1);Nr.addDirection(s.Finger.Thumb,s.FingerDirection.DiagonalUpLeft,.5);Nr.addDirection(s.Finger.Thumb,s.FingerDirection.DiagonalUpRight,.5);Nr.addCurl(s.Finger.Pinky,s.FingerCurl.NoCurl,1);Nr.addDirection(s.Finger.Pinky,s.FingerDirection.VerticalUp,.5);Nr.addDirection(s.Finger.Pinky,s.FingerDirection.DiagonalUpRight,.5);Nr.addCurl(s.Finger.Index,s.FingerCurl.FullCurl,1);Nr.addCurl(s.Finger.Middle,s.FingerCurl.FullCurl,1);Nr.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);const At=new s.GestureDescription("Z");At.addCurl(s.Finger.Index,s.FingerCurl.NoCurl,1);At.addDirection(s.Finger.Index,s.FingerDirection.DiagonalUpRight,.5);At.addDirection(s.Finger.Index,s.FingerDirection.DiagonalUpLeft,.5);At.addCurl(s.Finger.Middle,s.FingerCurl.FullCurl,1);At.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);At.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);At.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,.75);const Xt=new s.GestureDescription("SEND");Xt.addCurl(s.Finger.Thumb,s.FingerCurl.NoCurl,1);Xt.addDirection(s.Finger.Thumb,s.FingerDirection.VerticalUp,.9);Xt.addCurl(s.Finger.Index,s.FingerCurl.FullCurl,1);Xt.addCurl(s.Finger.Middle,s.FingerCurl.FullCurl,1);Xt.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);Xt.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);const Ur=new s.GestureDescription("CLEAR");Ur.addCurl(s.Finger.Thumb,s.FingerCurl.NoCurl,.8);Ur.addCurl(s.Finger.Index,s.FingerCurl.NoCurl,1);Ur.addDirection(s.Finger.Index,s.FingerDirection.VerticalUp,.7);Ur.addCurl(s.Finger.Middle,s.FingerCurl.NoCurl,1);Ur.addDirection(s.Finger.Middle,s.FingerDirection.VerticalUp,.7);Ur.addCurl(s.Finger.Ring,s.FingerCurl.NoCurl,1);Ur.addDirection(s.Finger.Ring,s.FingerDirection.VerticalUp,.7);Ur.addCurl(s.Finger.Pinky,s.FingerCurl.NoCurl,1);Ur.addDirection(s.Finger.Pinky,s.FingerDirection.VerticalUp,.7);const Gr=new s.GestureDescription("SPACE");Gr.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,.8);Gr.addCurl(s.Finger.Index,s.FingerCurl.NoCurl,1);Gr.addDirection(s.Finger.Index,s.FingerDirection.HorizontalRight,.5);Gr.addDirection(s.Finger.Index,s.FingerDirection.HorizontalLeft,.5);Gr.addCurl(s.Finger.Middle,s.FingerCurl.NoCurl,1);Gr.addDirection(s.Finger.Middle,s.FingerDirection.HorizontalRight,.5);Gr.addDirection(s.Finger.Middle,s.FingerDirection.HorizontalLeft,.5);Gr.addCurl(s.Finger.Ring,s.FingerCurl.NoCurl,1);Gr.addCurl(s.Finger.Pinky,s.FingerCurl.NoCurl,1);const Mn=new s.GestureDescription("BACKSPACE");Mn.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,1);Mn.addCurl(s.Finger.Index,s.FingerCurl.HalfCurl,1);Mn.addCurl(s.Finger.Middle,s.FingerCurl.FullCurl,1);Mn.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);Mn.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);const Et=new s.GestureDescription("PREV_MODE");Et.addCurl(s.Finger.Index,s.FingerCurl.NoCurl,1);Et.addDirection(s.Finger.Index,s.FingerDirection.VerticalUp,.75);Et.addCurl(s.Finger.Middle,s.FingerCurl.NoCurl,1);Et.addDirection(s.Finger.Middle,s.FingerDirection.VerticalUp,.75);Et.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);Et.addCurl(s.Finger.Pinky,s.FingerCurl.FullCurl,1);Et.addCurl(s.Finger.Thumb,s.FingerCurl.HalfCurl,.75);const Vr=new s.GestureDescription("NEXT_MODE");Vr.addCurl(s.Finger.Thumb,s.FingerCurl.NoCurl,1);Vr.addDirection(s.Finger.Thumb,s.FingerDirection.DiagonalUpLeft,.5);Vr.addDirection(s.Finger.Thumb,s.FingerDirection.DiagonalUpRight,.5);Vr.addCurl(s.Finger.Index,s.FingerCurl.NoCurl,1);Vr.addDirection(s.Finger.Index,s.FingerDirection.VerticalUp,.75);Vr.addCurl(s.Finger.Middle,s.FingerCurl.FullCurl,1);Vr.addCurl(s.Finger.Ring,s.FingerCurl.FullCurl,1);Vr.addCurl(s.Finger.Pinky,s.FingerCurl.NoCurl,1);Vr.addDirection(s.Finger.Pinky,s.FingerDirection.VerticalUp,.75);const p1=[Ft,xr,Ht,jt,En,Qr,Pr,Ir,zt,Ct,vt,et,Tn,kn,Dn,rt,_t,bt,Sn,Ln,wt,Or,tt,Wt,Nr,At],m1=[Xt,Ur,Gr,Mn,Et,Vr],y1=[...p1,...m1],li=e=>["SEND","CLEAR","SPACE","BACKSPACE","PREV_MODE","NEXT_MODE"].includes(e),F1={twoFingerTapWindow:500,twoFingerTapCooldown:400,twoFingerMinFrames:4,minPointingTime:100,dwellTime:1200,cursorSmoothing:.5},C1={Thumb_Up:{action:"message",message:""},Thumb_Down:{action:"message",message:""},Open_Palm:{action:"message",message:""},Victory:{action:"message",message:"ok"},ILoveYou:{action:"message",message:"thanks"},Closed_Fist:{action:"message",message:"stop"},Pointing_Up:{action:"point"}};function _1({onStopGeneration:e,onSendMessage:r,onScroll:t,onPinch:n,onHover:i,onModeChange:o,onGestureModeToggle:a,onGestureState:u,onASLResult:l,onError:c,config:m=F1,onDebugInfo:k,onLandmarkData:U,onPerformance:Ee,mode:ve="navigation",appContext:ir="chat",gestureActiveArea:fr}){const gr=S.useRef(e),pr=S.useRef(r),Rn=S.useRef(t),xn=S.useRef(n),Pn=S.useRef(i),nt=S.useRef(o),ei=S.useRef(a),_e=S.useRef(u),Kt=S.useRef(l),Ji=S.useRef(k),mr=S.useRef(U),te=S.useRef(Ee),In=S.useRef(m),Ue=S.useRef(ve),Tt=S.useRef(ir),On=S.useRef(fr);gr.current=e,pr.current=r,Rn.current=t,xn.current=n,Pn.current=i,nt.current=o,ei.current=a,_e.current=u,Kt.current=l,Ji.current=k,mr.current=U,te.current=Ee,In.current=m,Ue.current=ve,Tt.current=ir,On.current=fr;const qt=S.useRef(c);qt.current=c;const Br=S.useRef({frames:0,lastTime:performance.now(),fps:0}),d=S.useRef({baseInterval:16,currentInterval:16,lastFrameTime:0,gestureActivityCount:0,activityThreshold:500,lastActivityTime:0}),p=S.useRef(null),f=S.useRef(null),h=S.useRef(null),[y,v]=S.useState(!1),E=S.useRef(),D=S.useRef(null),g=S.useRef(null),I=S.useRef(null),R=S.useRef(null),G=S.useRef(null),Q=S.useRef(null),W=S.useRef({visible:!1,x:0,y:0,isClicking:!1}),Te=S.useRef({x:0,y:0}),oe=S.useRef(0),ke=1500,be=15,De=S.useRef(new Map),Re=S.useRef(new Map),Hr=S.useRef([]),Xe=S.useRef(null),Se=S.useRef(0),Le=S.useRef(0),Ke=800,yr=12,Fr=S.useCallback(L=>{const M=["Victory","ILoveYou","Fist","Open_Palm"],$=["Thumb_Up","Thumb_Down","Pointing_Up"];return M.includes(L)?15:$.includes(L)?5:be},[]),qe=S.useCallback((L,M)=>{if(["PREV_MODE","NEXT_MODE"].includes(L))return!0;switch(M){case"chat":return!0;case"compare":return!L.startsWith("ASL");case"council":case"roundtable":case"personality":return!0;default:return!0}},[]),kt=S.useCallback((L,M)=>{const $=On.current;if(!$)return!0;const C=1-L;return C>=$.minX&&C<=$.maxX&&M>=$.minY&&M<=$.maxY},[]),Dt=S.useCallback(L=>(Re.current.has(L)||Re.current.set(L,{isScrolling:!1,lastScrollY:null,scrollVelocity:0,lastOpenTime:0,waveXPositions:[],waveDirectionChanges:0,lastWaveDirection:null,waveStartTime:0,dwellStartTime:0,dwellPosition:null,wasPointingOnly:!1,pointingOnlyStartTime:0,twoFingerFrames:0,clickLocked:!1}),Re.current.get(L)),[]),it=S.useCallback(L=>(De.current.has(L)||De.current.set(L,{candidate:"NEUTRAL",frames:0}),De.current.get(L)),[]);S.useEffect(()=>{let L=null,M=null;return(async()=>{var C;try{const B=typeof chrome<"u"&&!!((C=chrome.runtime)!=null&&C.id),O=B?"/mediapipe":"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.0/wasm",Ar=B?"/mediapipe/gesture_recognizer.task":"https://storage.googleapis.com/mediapipe-models/gesture_recognizer/gesture_recognizer/float16/1/gesture_recognizer.task",K=B?"/mediapipe/hand_landmarker.task":"https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task",ee=await Pt.forVisionTasks(O);L=await Be.createFromOptions(ee,{baseOptions:{modelAssetPath:Ar,delegate:"GPU"},runningMode:"VIDEO",numHands:2}),g.current=L,M=await He.createFromOptions(ee,{baseOptions:{modelAssetPath:K,delegate:"GPU"},runningMode:"VIDEO",numHands:2}),D.current=M,R.current=new s.GestureEstimator(y1),v(!0)}catch(B){console.error("Error initializing gesture recognition:",B)}})(),()=>{g.current&&g.current.close(),D.current&&D.current.close()}},[]);const St=S.useCallback((L,M,$)=>{var z;const C=Dt($),B=it($),O=Tt.current;if(!L.gestures||L.gestures.length===0)return C.isScrolling=!1,C.lastScrollY=null,W.current.visible&&G.current&&(G.current.style.opacity="0",W.current.visible=!1),null;const Ar=(z=L.gestures[$])==null?void 0:z[0],K=L.landmarks[$];if(!Ar||!K)return null;const ee=Ar.categoryName;if(!qe(ee,O))return null;const Fe=C1[ee];if(ee==="Pointing_Up"&&K){const $e=K[8],X={x:1-$e.x,y:$e.y};Pn.current&&Pn.current(X.x,X.y);const Er=window.innerWidth,Ge=window.innerHeight,Lt=X.x*Er,le=X.y*Ge,st=In.current.cursorSmoothing,xe=Te.current;W.current.visible?(xe.x+=(Lt-xe.x)*st,xe.y+=(le-xe.y)*st):(xe.x=Lt,xe.y=le),G.current&&(G.current.style.transform=`translate(${xe.x}px, ${xe.y}px)`,G.current.style.opacity="1",G.current.style.borderColor="rgba(148, 163, 184, 0.7)",G.current.style.boxShadow="0 0 8px rgba(148, 163, 184, 0.3)"),W.current={visible:!0,x:xe.x,y:xe.y,isClicking:!1};const Mt=In.current.dwellTime,ri=.05;if(C.dwellPosition===null)C.dwellStartTime=M,C.dwellPosition=X;else if(Math.sqrt(Math.pow(X.x-C.dwellPosition.x,2)+Math.pow(X.y-C.dwellPosition.y,2))>ri)C.dwellStartTime=M,C.dwellPosition=X;else{const Nn=M-C.dwellStartTime;if(Nn>=Mt&&xn.current)return xn.current(X.x,X.y),oe.current=M,C.dwellStartTime=0,C.dwellPosition=null,_e.current&&_e.current({gesture:"DWELL_CLICK",progress:1,triggered:!0}),"DWELL_CLICK";if(_e.current){const ti=Math.min(1,Nn/Mt);_e.current({gesture:"POINTING",progress:ti,triggered:!1})}}return"POINTING"}else C.dwellStartTime=0,C.dwellPosition=null,W.current.visible&&G.current&&(G.current.style.opacity="0",W.current.visible=!1);if(ee==="Closed_Fist"&&K){const X=K[0].y;if(!C.isScrolling)C.isScrolling=!0,C.lastScrollY=X,C.scrollVelocity=0;else if(C.lastScrollY!==null){const Er=X-C.lastScrollY,Ge=(C.scrollVelocity||0)*.6+Er*.4;C.scrollVelocity=Ge,Math.abs(Ge)>.006&&Rn.current?(Rn.current(Ge*1800),C.lastScrollY=X):Math.abs(Er)>.02&&(C.lastScrollY=X)}return"FIST"}else C.isScrolling=!1,C.lastScrollY=null,C.scrollVelocity=0;if(ee==="Open_Palm"&&K){C.lastOpenTime=M;const X=K[0].x;if(C.waveStartTime===0||M-C.waveStartTime>2e3)C.waveXPositions=[X],C.waveDirectionChanges=0,C.lastWaveDirection=null,C.waveStartTime=M;else{const Er=C.waveXPositions[C.waveXPositions.length-1],Ge=X-Er;if(Math.abs(Ge)>.03){C.waveXPositions.push(X);const le=Ge>0?"right":"left";if(C.lastWaveDirection&&le!==C.lastWaveDirection&&C.waveDirectionChanges++,C.lastWaveDirection=le,C.waveDirectionChanges>=3&&M-oe.current>ke){const st=document.activeElement,xe=st instanceof HTMLInputElement||st instanceof HTMLTextAreaElement,Mt=K[0].y;if(pr.current&&!xe&&kt(X,Mt))return pr.current("Hi"),oe.current=M,C.waveDirectionChanges=0,C.waveStartTime=0,C.lastWaveDirection=null,C.waveXPositions=[],"WAVE"}}}}if((Fe==null?void 0:Fe.action)==="message"&&Fe.message){B.candidate===ee?B.frames++:(B.candidate=ee,B.frames=1);const $e=Fr(ee);if(B.frames>=$e&&M-oe.current>ke){const X=document.activeElement,Er=X instanceof HTMLInputElement||X instanceof HTMLTextAreaElement,Ge=K[0];if(pr.current&&!Er&&kt(Ge.x,Ge.y))return pr.current(Fe.message),oe.current=M,B.frames=0,_e.current&&_e.current({gesture:ee,progress:1,triggered:!0}),ee}if(_e.current){const X=Math.min(1,B.frames/$e);_e.current({gesture:ee,progress:X,triggered:!1})}}return ee},[Dt,it,qe]),Ye=S.useCallback((L,M)=>{if(!R.current||!L)return null;const $=L.map(B=>[B.x,B.y,B.z]),C=R.current.estimate($,7.5);if(C.gestures.length>0){const B=C.gestures.sort((Fe,z)=>z.score-Fe.score),O=B[0],Ar=Tt.current;if(!qe(O.name,Ar))return _e.current&&_e.current({gesture:li(O.name)?`ACTION: ${O.name}`:`ASL: ${O.name}`,progress:0,triggered:!1}),null;const K=Le.current!==0&&M-Le.current<Ke&&!li(O.name)&&O.name===Xe.current;K||(O.name===Xe.current?Se.current++:(Xe.current=O.name,Se.current=1));const ee={letter:O.name,confidence:O.score/10,allGestures:B};if(Kt.current&&Kt.current(ee),_e.current){const Fe=Math.min(1,Se.current/yr),z=Se.current>=yr&&!K;z&&(Le.current=M,Se.current=0,li(O.name)?O.name==="PREV_MODE"&&nt.current?nt.current("prev"):O.name==="NEXT_MODE"&&nt.current&&nt.current("next"):Hr.current.push(O.name));const $e=li(O.name)?`ACTION: ${O.name}`:`ASL: ${O.name}`;_e.current({gesture:$e,progress:Fe,triggered:z})}return O.name}return Xe.current=null,Se.current=0,_e.current&&_e.current({gesture:null,progress:0,triggered:!1}),null},[qe]),Cr=S.useCallback(()=>{var st,xe,Mt,ri,Zi,Nn,ti;const L=p.current,M=f.current,$=Ue.current;if(!L||!M){E.current=requestAnimationFrame(Cr);return}if($==="navigation"&&!g.current){E.current=requestAnimationFrame(Cr);return}if($==="asl"&&!D.current){E.current=requestAnimationFrame(Cr);return}if(L.videoWidth===0||L.videoHeight===0){E.current=requestAnimationFrame(Cr);return}const C=window.innerWidth,B=window.innerHeight;(M.width!==C||M.height!==B)&&(M.width=C,M.height=B);const O=M.getContext("2d");if(!O){E.current=requestAnimationFrame(Cr);return}const Ar=performance.now(),K=d.current;if(Ar-K.lastFrameTime<K.currentInterval){E.current=requestAnimationFrame(Cr);return}K.lastFrameTime=Ar;const ee=Ar;let Fe=[],z=null,$e=!1;if($==="navigation"&&g.current){const Pe=g.current.recognizeForVideo(L,ee);Pe.landmarks&&(Fe=Pe.landmarks.map(q=>q.map(ae=>({x:ae.x,y:ae.y,z:ae.z}))));for(let q=0;q<(((st=Pe.landmarks)==null?void 0:st.length)||0);q++){const ae=St(Pe,ee,q);ae&&(z=ae,$e=!0)}if(mr.current&&Fe[0]){const q=(ri=(Mt=(xe=Pe.handednesses)==null?void 0:xe[0])==null?void 0:Mt[0])==null?void 0:ri.categoryName;mr.current({landmarks:Fe[0],handedness:q??null})}}else if($==="asl"&&D.current){const Pe=D.current.detectForVideo(L,ee);if(Pe.landmarks){if(Fe=Pe.landmarks.map(q=>q.map(ae=>({x:ae.x,y:ae.y,z:ae.z}))),Fe[0]){const q=Ye(Fe[0],ee);q&&(z=q,$e=!0)}if(mr.current){const q=(ti=(Nn=(Zi=Pe.handednesses)==null?void 0:Zi[0])==null?void 0:Nn[0])==null?void 0:ti.categoryName;mr.current({landmarks:Fe[0],handedness:q??null})}}}const X=performance.now();$e?(K.currentInterval=Math.max(10,K.baseInterval*.7),K.lastActivityTime=X,K.gestureActivityCount++):X-K.lastActivityTime>1e3?K.currentInterval=Math.min(50,K.currentInterval*1.05):K.currentInterval=Math.min(33,K.baseInterval*2);const Er=Math.round(performance.now()-ee);Br.current.frames++;const Ge=ee-Br.current.lastTime;Ge>=1e3&&(Br.current.fps=Math.round(Br.current.frames*1e3/Ge),Br.current.frames=0,Br.current.lastTime=ee,te.current&&te.current({fps:Br.current.fps,detectionTime:Er}));const Lt=h.current,le=Lt==null?void 0:Lt.getContext("2d");if(O.clearRect(0,0,C,B),le&&le.clearRect(0,0,C,B),Fe.length>0)for(const Pe of Fe){let q=$==="asl"?"#10b981":"#3b82f6",ae=$==="asl"?"#6ee7b7":"#60a5fa";z&&($==="asl"?z.startsWith("ASL:")?(q="#10b981",ae="#6ee7b7"):z.startsWith("ACTION:")?(q="#8b5cf6",ae="#c4b5fd"):(q="#10b981",ae="#6ee7b7"):z==="Pointing_Up"||z==="POINTING"?(q="#06b6d4",ae="#67e8f9"):z==="Thumb_Up"||z==="THUMBS_UP"?(q="#22c55e",ae="#86efac"):z==="Thumb_Down"||z==="THUMBS_DOWN"?(q="#f97316",ae="#fdba74"):z==="Closed_Fist"||z==="FIST"?(q="#a855f7",ae="#d8b4fe"):z==="Open_Palm"||z==="WAVE"?(q="#f59e0b",ae="#fcd34d"):(q="#3b82f6",ae="#60a5fa"));const Vl=[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20],[5,9],[9,13],[13,17]];for(const[Yt,ni]of Vl){const $t=Pe[Yt],Jt=Pe[ni],Rt=O.createLinearGradient($t.x*C,$t.y*B,Jt.x*C,Jt.y*B);Rt.addColorStop(0,q),Rt.addColorStop(1,ae),O.beginPath(),O.moveTo($t.x*C,$t.y*B),O.lineTo(Jt.x*C,Jt.y*B),O.strokeStyle=Rt,O.lineWidth=z?3:2,O.shadowColor=q,O.shadowBlur=z?10:8,O.stroke()}if(le){for(let Yt=0;Yt<Pe.length;Yt++){const ni=Pe[Yt],$t=ni.x*C,Jt=ni.y*B,Rt=[4,8,12,16,20].includes(Yt),Bl=Rt?z?5:4:z?3:2;le.beginPath(),le.arc($t,Jt,Bl,0,2*Math.PI),Rt?(le.fillStyle="#ffffff",le.shadowColor=ae,le.shadowBlur=z?20:15):(le.fillStyle="#1e293b",le.strokeStyle=ae,le.lineWidth=1.5,le.shadowColor=q,le.shadowBlur=z?8:5),le.fill(),Rt||le.stroke()}le.shadowBlur=0}}else W.current.visible&&G.current&&(G.current.style.opacity="0",W.current.visible=!1),mr.current&&mr.current({landmarks:null,handedness:null});E.current=requestAnimationFrame(Cr)},[St,Ye]);return S.useEffect(()=>(y&&p.current&&(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then(L=>{I.current=L,p.current&&(p.current.srcObject=L,p.current.play(),p.current.addEventListener("loadeddata",()=>{const M=window.innerWidth,$=window.innerHeight;f.current&&(f.current.width=M,f.current.height=$),h.current&&(h.current.width=M,h.current.height=$),E.current&&cancelAnimationFrame(E.current),E.current=requestAnimationFrame(Cr)}))}).catch(L=>{console.error("Error accessing webcam:",L);let M="Could not access camera";L.name==="NotFoundError"||L.name==="DevicesNotFoundError"?M="No camera found. Please connect a webcam to use gesture control.":L.name==="NotAllowedError"||L.name==="PermissionDeniedError"?M="Camera access denied. Please allow camera access in your browser settings.":(L.name==="NotReadableError"||L.name==="TrackStartError")&&(M="Camera is in use by another application."),qt.current&&qt.current(M)}):console.warn("navigator.mediaDevices is undefined. Camera access requires HTTPS or localhost.")),()=>{E.current&&cancelAnimationFrame(E.current)}),[y,Cr]),S.useEffect(()=>()=>{E.current&&(cancelAnimationFrame(E.current),E.current=void 0),I.current&&(I.current.getTracks().forEach(L=>{L.stop()}),I.current=null),p.current&&(p.current.srcObject=null),g.current&&(g.current.close(),g.current=null),D.current&&(D.current.close(),D.current=null),h.current&&(h.current.width=0,h.current.height=0)},[]),jr.jsxs(jr.Fragment,{children:[jr.jsxs("div",{className:"fixed inset-0 z-[1] pointer-events-none overflow-hidden scale-x-[-1]",children:[jr.jsx("video",{ref:p,className:"hidden",playsInline:!0,muted:!0,autoPlay:!0}),jr.jsx("canvas",{ref:f,className:"absolute inset-0 w-full h-full opacity-50 mix-blend-screen"})]}),jr.jsx("div",{className:"fixed inset-0 z-[1] pointer-events-none overflow-hidden scale-x-[-1]",children:jr.jsx("canvas",{ref:h,className:"absolute inset-0 w-full h-full opacity-50 mix-blend-screen"})}),ve==="navigation"&&jr.jsx("div",{ref:G,className:"fixed pointer-events-none z-[9999]",style:{top:0,left:0,width:28,height:28,marginLeft:-14,marginTop:-14,borderRadius:"50%",border:"2px solid rgba(148, 163, 184, 0.7)",opacity:0,boxShadow:"0 0 8px rgba(148, 163, 184, 0.3)",willChange:"transform, opacity"},children:jr.jsx("div",{ref:Q,className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full",style:{width:6,height:6,backgroundColor:"rgba(255, 255, 255, 0.9)"}})})]})}export{_1 as default};
