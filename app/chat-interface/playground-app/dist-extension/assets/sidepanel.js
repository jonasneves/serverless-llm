import{c as j,r as n,j as e,R as H,i as ee,k as xe,n as Ce,S as Se,Z as Be,g as Me,h as Ee}from"./index.js";import{P as ve,C as V,S as Ae,A as ce,a as Le}from"./settings.js";import{C as ue,a as De}from"./cloud.js";import{M as pe}from"./message-square.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],X=j("circle-alert",$e);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],J=j("circle-check-big",Pe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],be=j("circle-x",Re);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fe=j("clock",Te);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],He=j("database",Ue);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],he=j("external-link",qe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Oe=j("eye-off",Ie);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Fe=j("eye",ze);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ge=j("globe",Ge);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],ye=j("rocket",We);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],we=j("rotate-cw",Ve);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],te=j("wifi-off",Ke),ie="jonasneves",de="serverless-llm",je=[{name:"Chat",path:"chat-interface.yml"},{name:"Build Images",path:"build-push-images.yml"}];function me(i){return i.trim().replace(/\/+$/,"")}function Qe(i){try{return new URL(i).host}catch{return i}}const ke=({githubToken:i,chatApiBaseUrl:d,modelsBaseDomain:t,showOnlyBackend:m=!1,onBackendStatusChange:k,onActiveDeploymentsChange:q})=>{const[I,se]=n.useState(new Map),[le,ae]=n.useState(new Map),[p,S]=n.useState(!0),[b,B]=n.useState(null),[v,y]=n.useState(null),[g,_]=n.useState("checking"),[M,Y]=n.useState("unknown"),[K,Q]=n.useState(null),[O,L]=n.useState(!1),[D,f]=n.useState(null),[Z,u]=n.useState(null),[C,z]=n.useState(null),F=n.useRef(!1),E=n.useRef(new Map),$={Authorization:`Bearer ${i}`,Accept:"application/vnd.github.v3+json","X-GitHub-Api-Version":"2022-11-28"},G=n.useCallback(async()=>{_("checking");try{const l=me(d)||"http://localhost:8080",r=await fetch(`${l}/health`,{method:"GET",mode:"cors",credentials:"omit",signal:AbortSignal.timeout(5e3)});_(r.ok?"ok":"down")}catch(l){console.log("Health check failed:",l),_("down")}},[d]),N=()=>{var l;return typeof chrome<"u"&&!!((l=chrome.runtime)!=null&&l.sendMessage)},W=async l=>N()?await new Promise(r=>{try{chrome.runtime.sendMessage({type:"native_backend",payload:l},a=>{var h;const x=(h=chrome.runtime.lastError)==null?void 0:h.message;r(x?{ok:!1,error:x}:a)})}catch(a){r({ok:!1,error:(a==null?void 0:a.message)||String(a)})}}):{ok:!1,error:"Native messaging unavailable"},P=n.useCallback(async()=>{const l=me(d)||"http://localhost:8080",r=await W({action:"status",chatApiBaseUrl:l});if(r!=null&&r.ok){const a=r.status==="running"?"running":"stopped",x=r.mode??null;Y(a),Q(r.pid??null),z(x),u(null),k==null||k({process:a,mode:x});return}u((r==null?void 0:r.error)||null),Y("unknown"),Q(null),z(null),k==null||k({process:"unknown",mode:null})},[d,k]),oe=async()=>{if(L(!0),f(null),u(null),!(d.includes("localhost")||d.includes("127.0.0.1"))){u("Backend start only works with local chat API (localhost:8080)"),L(!1);return}const a=await W({action:"start",mode:t?"dev-remote":"dev-interface-local"});!(a!=null&&a.ok)&&(a!=null&&a.logTail)&&f(a.logTail),!(a!=null&&a.ok)&&(a!=null&&a.error)&&u(a.error),await P(),await G(),L(!1)},w=async()=>{L(!0),f(null),u(null),await W({action:"stop"}),await P(),await G(),L(!1)},s=async()=>{const l=await W({action:"logs"});l!=null&&l.ok&&f(l.logTail||null),!(l!=null&&l.ok)&&(l!=null&&l.error)&&u(l.error)},o=n.useCallback(async()=>{if(!i){B("GitHub token required"),S(!1);return}try{const l=await fetch(`https://api.github.com/repos/${ie}/${de}/actions/workflows`,{headers:$,signal:AbortSignal.timeout(8e3)});if(!l.ok)throw new Error(`GitHub API error: ${l.status}`);const r=await l.json(),a=new Map;for(const x of r.workflows){const h=je.find(T=>x.path.endsWith(T.path));h&&a.set(h.name,{id:x.id,name:h.name,path:x.path})}return E.current=a,se(a),a}catch(l){return B(l.message),null}},[i]),c=n.useCallback(async l=>{const r=l||E.current;if(r.size===0)return;const a=new Map;if(await Promise.all(Array.from(r.entries()).map(async([x,h])=>{try{const T=await fetch(`https://api.github.com/repos/${ie}/${de}/actions/workflows/${h.id}/runs?per_page=1`,{headers:$,signal:AbortSignal.timeout(8e3)});if(T.ok){const re=await T.json();if(re.workflow_runs&&re.workflow_runs.length>0){const U=re.workflow_runs[0];a.set(x,{id:U.id,name:U.name,status:U.status,conclusion:U.conclusion,created_at:U.created_at,updated_at:U.updated_at,html_url:U.html_url})}else a.set(x,null)}}catch{a.set(x,null)}})),ae(a),S(!1),q){const x=Array.from(a.values()).filter(h=>h&&(h.status==="in_progress"||h.status==="queued")).length;q(x)}},[i,q]),A=async l=>{const r=E.current.get(l)||I.get(l);if(!(!r||!i)){y(l);try{const a=await fetch(`https://api.github.com/repos/${ie}/${de}/actions/workflows/${r.id}/dispatches`,{method:"POST",headers:{...$,"Content-Type":"application/json"},body:JSON.stringify({ref:"main",...l==="Build Images"&&{inputs:{models:"chat-interface"}}}),signal:AbortSignal.timeout(8e3)});if(!a.ok&&a.status!==204)throw new Error(`Failed to trigger: ${a.status}`);setTimeout(()=>{c(),y(null)},2e3)}catch(a){console.error("Failed to trigger workflow:",a),y(null)}}},R=n.useCallback(async()=>{if(!F.current){F.current=!0,S(!0),B(null);try{const l=await o();l&&await c(l),await Promise.all([G(),P()])}finally{F.current=!1,S(!1)}}},[o,c,G,P]);n.useEffect(()=>{R();const l=setInterval(R,3e4);return()=>clearInterval(l)},[i,d]);const ne=l=>l?l.status==="in_progress"||l.status==="queued"?e.jsx(H,{className:"w-4 h-4 text-yellow-400 animate-spin"}):l.conclusion==="success"?e.jsx(J,{className:"w-4 h-4 text-green-500"}):l.conclusion==="failure"?e.jsx(be,{className:"w-4 h-4 text-red-500"}):e.jsx(fe,{className:"w-4 h-4 text-gray-400"}):e.jsx(fe,{className:"w-4 h-4 text-gray-400"}),_e=l=>{const r=new Date(l),x=new Date().getTime()-r.getTime(),h=Math.floor(x/6e4);if(h<1)return"just now";if(h<60)return`${h}m ago`;const T=Math.floor(h/60);return T<24?`${T}h ago`:r.toLocaleDateString()};return i?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/50 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[g==="ok"&&e.jsx(J,{className:"w-4 h-4 text-green-500"}),g==="down"&&e.jsx(be,{className:"w-4 h-4 text-red-500"}),g==="checking"&&e.jsx(H,{className:"w-4 h-4 text-gray-400 animate-spin"}),e.jsx("span",{className:"text-sm text-slate-300",children:"Backend"})]}),e.jsx("span",{className:"text-xs text-slate-500 truncate",children:Qe(me(d)||"http://localhost:8080")})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsx("div",{className:"text-xs text-slate-500",children:M==="running"&&K?e.jsxs("span",{children:["Process: running (pid ",K,")",C&&e.jsxs("span",{className:"text-slate-600",children:[" | ",C]})]}):`Process: ${M}`}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:s,className:"text-xs text-slate-400 hover:text-white transition-colors",disabled:O,children:"Logs"}),M!=="running"?e.jsx("button",{onClick:oe,disabled:O||!(d.includes("localhost")||d.includes("127.0.0.1")),className:`px-2 py-1 text-xs rounded transition-colors ${d.includes("localhost")||d.includes("127.0.0.1")?"bg-emerald-600/20 text-emerald-400 hover:bg-emerald-600/30":"bg-slate-700/50 text-slate-500 cursor-not-allowed"}`,title:d.includes("localhost")||d.includes("127.0.0.1")?t?"Start with remote models":"Start with local models":"Backend start only available for localhost",children:t?"Start (remote)":"Start (local)"}):e.jsx("button",{onClick:w,disabled:O,className:"px-2 py-1 text-xs rounded bg-red-600/20 text-red-400 hover:bg-red-600/30 transition-colors",children:"Stop"})]})]}),D&&e.jsx("pre",{className:"mt-2 max-h-40 overflow-auto text-[10px] leading-snug bg-slate-950/40 border border-slate-700/40 rounded p-2 text-slate-300 whitespace-pre-wrap",children:D}),Z&&e.jsxs("div",{className:"mt-2 text-[11px] text-amber-300/90",children:["Native host: ",Z]}),m&&M==="stopped"&&!O&&e.jsxs("div",{className:"mt-3 p-4 text-center bg-slate-900/50 rounded border border-slate-700/30",children:[e.jsx(te,{className:"w-8 h-8 mx-auto mb-2 text-slate-600"}),e.jsx("p",{className:"text-sm text-slate-400 mb-1",children:"Backend is stopped"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Click Start to launch the local chat server"})]})]}),!m&&b&&e.jsx("div",{className:"p-3 rounded-lg bg-red-900/20 border border-red-700/50 text-red-400 text-xs",children:b}),!m&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-sm font-medium text-slate-300 flex items-center gap-2",children:[e.jsx(ye,{className:"w-4 h-4"}),"Deployments"]}),e.jsxs("button",{onClick:R,disabled:p,className:"text-xs text-slate-400 hover:text-white transition-colors flex items-center gap-1",children:[e.jsx(H,{className:`w-3 h-3 ${p?"animate-spin":""}`}),"Refresh"]})]}),e.jsx("div",{className:"space-y-2",children:je.map(l=>{const r=le.get(l.name),a=v===l.name;return e.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/50 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[ne(r??null),e.jsx("span",{className:"text-sm font-medium text-slate-200",children:l.name})]}),r&&e.jsx("a",{href:r.html_url,target:"_blank",rel:"noopener noreferrer",className:"text-slate-400 hover:text-white transition-colors",title:"View on GitHub",children:e.jsx(he,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-500",children:r?_e(r.updated_at):"No runs"}),e.jsxs("button",{onClick:()=>A(l.name),disabled:a||p,className:`flex items-center gap-1 px-2 py-1 text-xs rounded transition-colors ${a?"bg-slate-700 text-slate-400":"bg-blue-600/20 text-blue-400 hover:bg-blue-600/30"}`,children:[a?e.jsx(H,{className:"w-3 h-3 animate-spin"}):e.jsx(ve,{className:"w-3 h-3"}),a?"Triggering...":"Deploy"]})]})]},l.name)})}),e.jsxs("div",{className:"pt-3 border-t border-slate-700/50",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>A("Chat"),disabled:v==="Chat"||p,className:"px-3 py-2 text-xs bg-emerald-600/20 text-emerald-400 hover:bg-emerald-600/30 rounded transition-colors",children:"ðŸš€ Redeploy Chat"}),e.jsx("button",{onClick:()=>A("Build Images"),disabled:v==="Build Images"||p,className:"px-3 py-2 text-xs bg-purple-600/20 text-purple-400 hover:bg-purple-600/30 rounded transition-colors",children:"ðŸ”¨ Rebuild Images"})]})]})]})]}):e.jsxs("div",{className:"p-4 text-center text-slate-400",children:[e.jsx(X,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Configure GitHub token in Settings to use deployments"})]})},Ne={githubToken:"",profile:"local_all",chatApiBaseUrl:"http://localhost:8080",modelsBaseDomain:"",modelsUseHttps:!1};function Ze(i,d){const t={};for(const m of ee)t[m.key]=xe(m.key,m.localPort,i,d);return t}const Xe=()=>{const[i,d]=n.useState([]),[t,m]=n.useState(Ne),[k,q]=n.useState(!1),[I,se]=n.useState(!1),[le,ae]=n.useState(new Date),[p,S]=n.useState("backend"),[b,B]=n.useState({process:"unknown",mode:null}),[v,y]=n.useState(!1),[g,_]=n.useState(!1),[M,Y]=n.useState([]),[K,Q]=n.useState(0),[O,L]=n.useState(!1),D=n.useCallback(s=>ee.map(o=>({key:o.key,name:o.name,endpoint:xe(o.key,o.localPort,s.modelsBaseDomain,s.modelsUseHttps),status:"checking"})),[]),f=n.useCallback(async s=>{ae(new Date);const o=await Promise.all(s.map(async c=>{try{const A=await fetch(`${c.endpoint}/health`,{method:"GET",signal:AbortSignal.timeout(3e3)});return{...c,status:A.ok?"ok":"down"}}catch{return{...c,status:"down"}}}));d(o)},[]),Z=async s=>{if(!(()=>{var c;return typeof chrome<"u"&&!!((c=chrome.runtime)!=null&&c.sendMessage)})())return{ok:!1,error:"Native messaging unavailable"};try{return await new Promise((A,R)=>{chrome.runtime.sendMessage({type:"NATIVE_MESSAGE",payload:s},ne=>{chrome.runtime.lastError?R(new Error(chrome.runtime.lastError.message)):A(ne)})})}catch(c){return{ok:!1,error:c.message||"Request failed"}}},u=(s,o)=>{Y(c=>[{action:s,time:new Date,status:o},...c.slice(0,9)])},C=async()=>{if(_(!0),u("Starting backend","pending"),!(t.chatApiBaseUrl.includes("localhost")||t.chatApiBaseUrl.includes("127.0.0.1"))){u("Backend start failed (requires local chat)","error"),_(!1);return}const o=t.modelsBaseDomain?"dev-remote":"dev-interface-local",c=await Z({action:"start",mode:o});c!=null&&c.ok?(u(`Backend started (${o})`,"success"),B({process:"running",mode:o})):u("Backend start failed","error"),_(!1)},z=async()=>{_(!0),u("Stopping backend","pending"),await Z({action:"stop"}),u("Backend stopped","success"),B({process:"stopped",mode:null}),_(!1)},F=async()=>{await z(),await new Promise(s=>setTimeout(s,1e3)),await C()};n.useEffect(()=>{chrome.storage.local.get(["envConfig"],s=>{const o=Ce(s.envConfig||Ne);m(o),L(!0);const c=D(o);d(c),p==="services"&&setTimeout(()=>f(c),500)})},[D,f]),n.useEffect(()=>{if(p!=="services")return;const s=setInterval(()=>{d(o=>(o.length>0&&f(o),o))},1e4);return()=>clearInterval(s)},[p,f]);const E=()=>{const s=Ze(t.modelsBaseDomain,t.modelsUseHttps),o={...t,qwenEndpoint:s.qwen,phiEndpoint:s.phi,llamaEndpoint:s.llama,mistralEndpoint:s.mistral,gemmaEndpoint:s.gemma,r1qwenEndpoint:s.r1qwen,rnjEndpoint:s.rnj};chrome.storage.local.set({envConfig:o},()=>{const c=D(t);d(c),p==="services"&&f(c)})},$=()=>{chrome.tabs.create({url:chrome.runtime.getURL("index.html")})},G=s=>s==="ok"?e.jsx(J,{className:"w-4 h-4 text-green-500"}):s==="down"?e.jsx(X,{className:"w-4 h-4 text-red-500"}):e.jsx(H,{className:"w-4 h-4 text-gray-400 animate-spin"}),N=i.filter(s=>s.status==="ok").length,W=!!t.modelsBaseDomain,P=s=>s==="remote_all"?"Production (Cloud)":s==="local_chat_remote_models"?"Development (Local+Cloud)":s==="local_all"?"Offline (Fully Local)":"Custom",oe=s=>s==="remote_all"?"text-emerald-400":s==="local_chat_remote_models"?"text-blue-400":s==="local_all"?"text-amber-400":"text-slate-400",w=s=>{if(s==="remote_all"){m({...t,profile:s,chatApiBaseUrl:"https://chat.neevs.io",modelsBaseDomain:"neevs.io",modelsUseHttps:!0}),E();return}if(s==="local_chat_remote_models"){m({...t,profile:s,chatApiBaseUrl:"http://localhost:8080",modelsBaseDomain:"neevs.io",modelsUseHttps:!0}),E();return}if(s==="local_all"){m({...t,profile:s,chatApiBaseUrl:"http://localhost:8080",modelsBaseDomain:"",modelsUseHttps:!1}),E();return}m({...t,profile:"custom"})};return n.useEffect(()=>{const s=o=>{if(o.ctrlKey||o.metaKey)if(o.key==="p"){o.preventDefault();const c=["remote_all","local_chat_remote_models","local_all"],R=(c.indexOf(t.profile)+1)%c.length;w(c[R])}else o.key==="o"?(o.preventDefault(),t.profile==="remote_all"?window.open("https://chat.neevs.io","_blank"):t.profile==="local_chat_remote_models"||t.profile==="local_all"?window.open("http://localhost:8080","_blank"):$()):o.key==="b"&&(o.preventDefault(),(t.chatApiBaseUrl.includes("localhost")||t.chatApiBaseUrl.includes("127.0.0.1"))&&!g&&(b.process==="running"?z():C()))};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[t.profile,t.chatApiBaseUrl,b.process,g]),n.useEffect(()=>{const s=o=>{const c=o.target;v&&!c.closest(".relative")&&y(!1)};if(v)return document.addEventListener("click",s),()=>document.removeEventListener("click",s)},[v]),e.jsxs("div",{className:"p-3 min-h-screen font-sans bg-slate-950 text-slate-100",children:[e.jsxs("div",{className:"mb-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[e.jsx("div",{className:`w-1.5 h-8 rounded-full ${t.profile==="remote_all"?"bg-blue-500":t.profile==="local_chat_remote_models"?"bg-emerald-500":"bg-amber-500"}`}),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("h1",{className:"text-sm font-medium text-white truncate",children:P(t.profile)}),e.jsx("span",{title:"Shortcuts: âŒ˜/Ctrl+P cycle profiles â€¢ âŒ˜/Ctrl+O open chat â€¢ âŒ˜/Ctrl+B toggle backend",children:e.jsx(V,{className:"w-3 h-3 text-slate-500 cursor-help flex-shrink-0"})})]})})]}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex",children:[e.jsxs("button",{onClick:()=>{t.profile==="remote_all"?window.open("https://chat.neevs.io","_blank"):t.profile==="local_chat_remote_models"||t.profile==="local_all"?window.open("http://localhost:8080","_blank"):$()},className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 rounded-l font-medium transition-colors text-xs text-white",title:t.profile==="remote_all"?"Open chat.neevs.io (Ctrl+O)":t.profile==="local_chat_remote_models"||t.profile==="local_all"?"Open localhost:8080 (Ctrl+O)":"Open extension chat (Ctrl+O)",children:[t.profile==="remote_all"?e.jsx(ue,{className:"w-3 h-3"}):t.profile==="local_chat_remote_models"||t.profile==="local_all"?e.jsx(he,{className:"w-3 h-3"}):e.jsx(pe,{className:"w-3 h-3"}),"Chat"]}),e.jsx("button",{onClick:()=>y(!v),className:"px-1.5 py-1.5 bg-blue-600 hover:bg-blue-700 rounded-r border-l border-blue-700 transition-colors text-white",title:"More options",children:e.jsx(De,{className:"w-3 h-3"})})]}),v&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-slate-800 border border-slate-700 rounded-lg shadow-lg z-10",children:[e.jsxs("button",{onClick:()=>{$(),y(!1)},className:"w-full px-4 py-2 text-left text-sm text-slate-200 hover:bg-slate-700 rounded-t-lg flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{children:"Extension Dashboard"})]}),(t.chatApiBaseUrl.includes("localhost")||t.chatApiBaseUrl.includes("127.0.0.1")||t.chatApiBaseUrl.includes("0.0.0.0"))&&e.jsxs("button",{onClick:()=>{window.open("http://localhost:8080","_blank"),y(!1)},className:"w-full px-4 py-2 text-left text-sm text-slate-200 hover:bg-slate-700 flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),e.jsx("span",{children:"Local Web (localhost:8080)"})]}),t.profile==="remote_all"&&e.jsxs("button",{onClick:()=>{window.open("https://chat.neevs.io","_blank"),y(!1)},className:"w-full px-4 py-2 text-left text-sm text-slate-200 hover:bg-slate-700 rounded-b-lg flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4"}),e.jsx("span",{children:"Remote Web (chat.neevs.io)"})]})]})]}),e.jsx("button",{onClick:()=>q(!k),className:"p-1.5 hover:bg-slate-800 rounded transition-colors text-slate-400 hover:text-white",title:"Settings",children:e.jsx(Ae,{className:"w-3.5 h-3.5"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-800/30 rounded border border-slate-700/30 text-[11px]",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("button",{onClick:()=>w("local_chat_remote_models"),className:`px-2 py-0.5 rounded transition-colors ${t.profile==="local_chat_remote_models"?"bg-emerald-600 text-white":"bg-slate-700/50 text-slate-400 hover:bg-slate-700"}`,title:"Development: Local chat server + cloud models. Best for testing code changes. (âŒ˜/Ctrl+P to cycle)",children:"Dev"}),e.jsx("button",{onClick:()=>w("remote_all"),className:`px-2 py-0.5 rounded transition-colors ${t.profile==="remote_all"?"bg-blue-600 text-white":"bg-slate-700/50 text-slate-400 hover:bg-slate-700"}`,title:"Production: Everything runs in the cloud. No local setup required. (âŒ˜/Ctrl+P to cycle)",children:"Prod"}),e.jsx("button",{onClick:()=>w("local_all"),className:`px-2 py-0.5 rounded transition-colors ${t.profile==="local_all"?"bg-amber-600 text-white":"bg-slate-700/50 text-slate-400 hover:bg-slate-700"}`,title:"Offline: Fully local. Requires running model servers. (âŒ˜/Ctrl+P to cycle)",children:"Local"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${b.process==="running"?"bg-green-500":b.process==="stopped"?"bg-red-500":"bg-slate-500"}`}),e.jsxs("span",{className:"text-slate-300",children:[b.process,b.mode&&e.jsxs("span",{className:"text-slate-500",children:[" (",b.mode,")"]})]}),e.jsx("div",{className:"flex gap-0.5 ml-1",children:b.process==="stopped"?e.jsx("button",{onClick:C,disabled:g||!(t.chatApiBaseUrl.includes("localhost")||t.chatApiBaseUrl.includes("127.0.0.1")),className:"p-0.5 rounded bg-green-600/20 text-green-400 hover:bg-green-600/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:t.chatApiBaseUrl.includes("localhost")?"Start backend":"Backend start requires local chat",children:e.jsx(ve,{className:"w-2.5 h-2.5"})}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:z,disabled:g,className:"p-0.5 rounded bg-red-600/20 text-red-400 hover:bg-red-600/30 transition-colors disabled:opacity-50",title:"Stop backend",children:e.jsx(Se,{className:"w-2.5 h-2.5"})}),e.jsx("button",{onClick:F,disabled:g,className:"p-0.5 rounded bg-blue-600/20 text-blue-400 hover:bg-blue-600/30 transition-colors disabled:opacity-50",title:"Restart backend",children:e.jsx(we,{className:"w-2.5 h-2.5"})})]})})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[N===i.length?e.jsx(J,{className:"w-3 h-3 text-green-500"}):N>0?e.jsx(X,{className:"w-3 h-3 text-amber-500"}):e.jsx(te,{className:"w-3 h-3 text-red-500"}),e.jsxs("span",{className:"text-slate-300",children:[N,"/",i.length]})]})]})]}),O&&!t.githubToken&&e.jsxs("div",{className:"p-2 bg-amber-950/30 border border-amber-900/40 rounded flex items-center gap-2 text-amber-400/90 text-[11px]",children:[e.jsx(X,{className:"w-3 h-3 flex-shrink-0"}),e.jsxs("span",{className:"flex-1",children:["GitHub token required for deployments.",e.jsx("button",{onClick:()=>q(!0),className:"ml-2 underline hover:text-amber-200",children:"Configure â†’"})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex gap-1.5",children:[e.jsxs("button",{onClick:async()=>{t.profile!=="local_chat_remote_models"?(w("local_chat_remote_models"),setTimeout(()=>C(),500)):b.process!=="running"&&C()},disabled:g,className:"flex items-center gap-1 px-2 py-1 text-[11px] rounded bg-emerald-600/15 text-emerald-400 hover:bg-emerald-600/25 transition-colors disabled:opacity-50 flex-1",title:"Switch to dev mode and start backend. Best for local development with cloud models.",children:[e.jsx(Be,{className:"w-3 h-3"}),"Quick Dev"]}),e.jsxs("button",{onClick:F,disabled:g||b.process!=="running",className:"flex items-center gap-1 px-2 py-1 text-[11px] rounded bg-blue-600/15 text-blue-400 hover:bg-blue-600/25 transition-colors disabled:opacity-50 flex-1",title:"Stop and restart the backend server. Use after code changes. (âŒ˜/Ctrl+B toggles)",children:[e.jsx(we,{className:"w-3 h-3"}),"Restart"]})]}),e.jsxs("div",{className:"flex gap-1.5",children:[e.jsxs("button",{onClick:()=>{w("local_all"),b.process!=="running"&&setTimeout(()=>C(),500)},disabled:g,className:"flex items-center gap-1 px-2 py-1 text-[11px] rounded bg-amber-600/15 text-amber-400 hover:bg-amber-600/25 transition-colors disabled:opacity-50 flex-1",title:"Switch to fully offline mode with local models. Requires model servers running.",children:[e.jsx(te,{className:"w-3 h-3"}),"Test Local"]}),e.jsxs("button",{onClick:()=>{const s=D(t);d(s),f(s),u("Refreshed all services","pending")},className:"flex items-center gap-1 px-2 py-1 text-[11px] rounded bg-slate-700/30 text-slate-300 hover:bg-slate-700/50 transition-colors flex-1",title:"Check health of all model endpoints",children:[e.jsx(H,{className:"w-3 h-3"}),"Refresh All"]})]})]}),M.length>0&&e.jsxs("details",{className:"p-2 bg-slate-800/20 border border-slate-700/30 rounded text-[11px]",children:[e.jsxs("summary",{className:"cursor-pointer font-medium text-slate-400 flex items-center gap-1.5",children:[e.jsx(ce,{className:"w-3 h-3"}),"Activity (",M.length,")"]}),e.jsx("div",{className:"mt-2 space-y-1 max-h-32 overflow-y-auto",children:M.map((s,o)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 flex-1",children:[s.status==="success"?e.jsx(J,{className:"w-2.5 h-2.5 text-green-500 flex-shrink-0"}):s.status==="error"?e.jsx(X,{className:"w-2.5 h-2.5 text-red-500 flex-shrink-0"}):e.jsx(H,{className:"w-2.5 h-2.5 text-blue-500 animate-spin flex-shrink-0"}),e.jsx("span",{className:"text-slate-300 truncate",children:s.action})]}),e.jsx("span",{className:"text-slate-500 text-[9px] flex-shrink-0 ml-2",children:new Date(s.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},o))})]})]}),k?e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2 flex items-center gap-2",children:["Environment Profile",e.jsx("span",{title:"Choose how chat and model services connect. Production uses cloud servers, Development runs chat locally with cloud models, Offline runs everything locally.",children:e.jsx(V,{className:"w-3 h-3 text-slate-500 cursor-help"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[e.jsxs("button",{onClick:()=>w("remote_all"),className:`p-3 rounded-lg border-2 transition-all text-left ${t.profile==="remote_all"?"border-blue-500 bg-blue-500/10":"border-slate-700 bg-slate-800/50 hover:border-slate-600"}`,title:"Everything runs in the cloud. Zero setup required. Best for everyday use.",children:[e.jsx("div",{className:"text-xs font-medium text-white mb-1",children:"Production"}),e.jsx("div",{className:"text-[10px] text-slate-300",children:"Chat: Cloud"}),e.jsx("div",{className:"text-[10px] text-slate-300",children:"Models: Cloud"}),e.jsx("div",{className:"text-[10px] text-blue-400 mt-1",children:"No setup"})]}),e.jsxs("button",{onClick:()=>w("local_chat_remote_models"),className:`p-3 rounded-lg border-2 transition-all text-left ${t.profile==="local_chat_remote_models"?"border-emerald-500 bg-emerald-500/10":"border-slate-700 bg-slate-800/50 hover:border-slate-600"}`,title:"Run chat server locally for development, but use cloud models. Click 'Start' in Backend tab to launch.",children:[e.jsx("div",{className:"text-xs font-medium text-white mb-1",children:"Development"}),e.jsx("div",{className:"text-[10px] text-slate-300",children:"Chat: Local"}),e.jsx("div",{className:"text-[10px] text-slate-300",children:"Models: Cloud"}),e.jsx("div",{className:"text-[10px] text-emerald-400 mt-1",children:"Click Start"})]}),e.jsxs("button",{onClick:()=>w("local_all"),className:`p-3 rounded-lg border-2 transition-all text-left ${t.profile==="local_all"?"border-amber-500 bg-amber-500/10":"border-slate-700 bg-slate-800/50 hover:border-slate-600"}`,title:"Fully offline mode. Requires running model inference servers locally (make dev-interface-local).",children:[e.jsx("div",{className:"text-xs font-medium text-white mb-1",children:"Offline"}),e.jsx("div",{className:"text-[10px] text-slate-300",children:"Chat: Local"}),e.jsx("div",{className:"text-[10px] text-slate-300",children:"Models: Local"}),e.jsx("div",{className:"text-[10px] text-amber-400 mt-1",children:"Requires models"})]})]}),e.jsx("button",{onClick:()=>m({...t,profile:"custom"}),className:`w-full px-3 py-2 rounded border text-xs transition-colors ${t.profile==="custom"?"border-blue-500 bg-blue-500/10 text-blue-400":"border-slate-700 bg-slate-800/50 text-slate-400 hover:border-slate-600"}`,children:"Custom Configuration"})]}),e.jsxs("div",{className:"pt-3 border-t border-slate-700",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-1 flex items-center gap-2",children:["Chat API Base URL",e.jsx("span",{title:"The URL where the chat backend server runs. Use localhost:8080 for local development.",children:e.jsx(V,{className:"w-3 h-3 text-slate-500 cursor-help"})})]}),e.jsx("input",{type:"text",value:t.chatApiBaseUrl,onChange:s=>m({...t,profile:"custom",chatApiBaseUrl:s.target.value}),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded text-sm text-slate-200 placeholder-slate-500 focus:outline-none focus:border-blue-500",placeholder:"http://localhost:8080"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Used by the main app streaming API and the Deploy tab health check."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-1 flex items-center gap-2",children:["GitHub Token",e.jsx("span",{title:"Personal Access Token with 'repo' and 'workflow' scopes. Required for GitHub Models API and triggering deployments.",children:e.jsx(V,{className:"w-3 h-3 text-slate-500 cursor-help"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:I?"text":"password",value:t.githubToken,onChange:s=>m({...t,githubToken:s.target.value}),className:"w-full px-3 py-2 pr-10 bg-slate-800 border border-slate-700 rounded text-sm text-slate-200 placeholder-slate-500 focus:outline-none focus:border-blue-500",placeholder:"github_pat_..."}),e.jsx("button",{type:"button",onClick:()=>se(!I),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-slate-400 hover:text-slate-200 transition-colors",title:I?"Hide token":"Show token",children:I?e.jsx(Oe,{className:"w-4 h-4"}):e.jsx(Fe,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Required for API models & deployments."," ",e.jsx("a",{href:"https://github.com/settings/tokens/new?description=Serverless+LLM+Extension&scopes=repo,workflow&default_expires_at=none",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:"Create token â†’"})]})]}),e.jsxs("div",{className:"pt-3 border-t border-slate-700",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-1 flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4"}),"Models Base Domain",e.jsx("span",{title:"Base domain for model inference endpoints. Endpoints are constructed as https://[model].domain. Leave empty for localhost.",children:e.jsx(V,{className:"w-3 h-3 text-slate-500 cursor-help"})})]}),e.jsx("input",{type:"text",value:t.modelsBaseDomain,onChange:s=>m({...t,profile:"custom",modelsBaseDomain:s.target.value.trim()}),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded text-sm text-slate-200 placeholder-slate-500 focus:outline-none focus:border-blue-500",placeholder:"neevs.io"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:t.modelsBaseDomain?`Endpoints: ${t.modelsUseHttps?"https":"http"}://[service].${t.modelsBaseDomain}`:"Leave empty for localhost (default ports)"})]}),t.modelsBaseDomain&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"modelsUseHttps",checked:t.modelsUseHttps,onChange:s=>m({...t,profile:"custom",modelsUseHttps:s.target.checked}),className:"w-4 h-4 rounded bg-slate-800 border-slate-700"}),e.jsx("label",{htmlFor:"modelsUseHttps",className:"text-sm text-slate-400",children:"Use HTTPS"})]}),t.modelsBaseDomain&&e.jsxs("div",{className:"p-3 bg-slate-800/50 rounded border border-slate-700/50",children:[e.jsx("p",{className:"text-xs font-medium text-slate-400 mb-2",children:"Endpoint Preview"}),e.jsxs("div",{className:"space-y-1 text-xs text-slate-500 font-mono",children:[ee.slice(0,3).map(s=>e.jsx("div",{children:xe(s.key,s.localPort,t.modelsBaseDomain,t.modelsUseHttps)},s.key)),e.jsxs("div",{className:"text-slate-600",children:["...and ",ee.length-3," more"]})]})]}),e.jsx("button",{onClick:E,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded font-medium transition-colors text-sm",children:"Save Configuration"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-slate-800/50 border border-slate-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${oe(t.profile).replace("text-","bg-")}`}),e.jsx("span",{className:"text-sm font-medium text-slate-300",children:P(t.profile)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[e.jsx("span",{className:"truncate max-w-[100px]",children:t.chatApiBaseUrl.includes("localhost")?"localhost":new URL(t.chatApiBaseUrl).host}),e.jsx(Le,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate max-w-[100px]",children:t.modelsBaseDomain||"localhost"})]})]})}),e.jsxs("div",{className:"flex border-b border-slate-700 mb-4",children:[e.jsxs("button",{onClick:()=>S("backend"),className:`flex items-center gap-1.5 px-3 py-2 text-sm border-b-2 transition-colors ${p==="backend"?"border-blue-500 text-blue-400":"border-transparent text-slate-400 hover:text-white"}`,title:"Manage local backend server for development",children:[e.jsx(He,{className:"w-3.5 h-3.5"}),"Backend",b.process==="running"&&e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"})]}),e.jsxs("button",{onClick:()=>S("deployments"),className:`flex items-center gap-1.5 px-3 py-2 text-sm border-b-2 transition-colors ${p==="deployments"?"border-blue-500 text-blue-400":"border-transparent text-slate-400 hover:text-white"}`,title:"Trigger GitHub Actions to deploy chat interface or build model images",children:[e.jsx(ye,{className:"w-3.5 h-3.5"}),"Deploy",K>0&&e.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-[10px] rounded bg-blue-600/30 text-blue-300",children:K})]}),e.jsxs("button",{onClick:()=>{S("services"),f(i)},className:`flex items-center gap-1.5 px-3 py-2 text-sm border-b-2 transition-colors ${p==="services"?"border-blue-500 text-blue-400":"border-transparent text-slate-400 hover:text-white"}`,title:"Check health status of all model inference endpoints",children:[e.jsx(ce,{className:"w-3.5 h-3.5"}),"Services",i.length>0&&e.jsxs("span",{className:`ml-1 px-1.5 py-0.5 text-[10px] rounded ${N===i.length?"bg-green-600/30 text-green-300":N>0?"bg-amber-600/30 text-amber-300":"bg-red-600/30 text-red-300"}`,children:[N,"/",i.length]})]})]}),p==="backend"?e.jsx(ke,{githubToken:t.githubToken,chatApiBaseUrl:t.chatApiBaseUrl,modelsBaseDomain:t.modelsBaseDomain,showOnlyBackend:!0,onBackendStatusChange:B,onActiveDeploymentsChange:Q}):p==="deployments"?e.jsx(ke,{githubToken:t.githubToken,chatApiBaseUrl:t.chatApiBaseUrl,modelsBaseDomain:t.modelsBaseDomain,showOnlyBackend:!1,onBackendStatusChange:B,onActiveDeploymentsChange:Q}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-slate-800/50 border border-slate-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-300",children:W?t.modelsBaseDomain:"localhost"})]}),e.jsxs("div",{className:"text-xs text-slate-500",children:[N,"/",i.length," online"]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-sm font-medium text-slate-300 flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),"Service Health",e.jsx("span",{title:"Model inference endpoints health status",children:e.jsx(V,{className:"w-3 h-3 text-slate-500 cursor-help"})})]}),e.jsx("button",{onClick:()=>f(i),className:"text-xs text-slate-400 hover:text-white transition-colors",children:"Refresh"})]}),N===0&&i.every(s=>s.status==="down")&&e.jsxs("div",{className:"mb-4 p-4 text-center bg-slate-900/50 rounded-lg border border-slate-700/30",children:[e.jsx(te,{className:"w-8 h-8 mx-auto mb-2 text-slate-600"}),e.jsx("p",{className:"text-sm text-slate-400 mb-1",children:"All services offline"}),e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:t.modelsBaseDomain?`Cannot reach ${t.modelsBaseDomain}`:"Local model servers are not running"}),!t.modelsBaseDomain&&e.jsx("button",{onClick:()=>{w("local_chat_remote_models"),u("Switched to cloud models","success")},className:"px-3 py-1.5 text-xs bg-blue-600/20 text-blue-400 hover:bg-blue-600/30 rounded transition-colors",children:"Switch to Cloud Models"})]}),e.jsx("div",{className:"space-y-2",children:i.map(s=>e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-slate-800 rounded",title:`Endpoint: ${s.endpoint}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[G(s.status),e.jsx("span",{className:"text-sm",children:s.name})]}),e.jsx("span",{className:"text-xs text-slate-500 truncate max-w-[120px]",title:s.endpoint,children:s.endpoint.replace("https://","").replace("http://","")})]},s.key))}),e.jsxs("div",{className:"mt-3 text-xs text-slate-500",children:["Last check: ",le.toLocaleTimeString()]})]})]})]})]})};Me.createRoot(document.getElementById("sidepanel-root")).render(e.jsx(Ee.StrictMode,{children:e.jsx(Xe,{})}));
