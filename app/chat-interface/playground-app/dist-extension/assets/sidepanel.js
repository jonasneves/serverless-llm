import{c as d,r as o,S as h,i as u,j as e,R as D,g as H,h as T}from"./index.js";import{S as _}from"./server.js";import{S as L,A}from"./settings.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],M=d("circle-alert",R);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],P=d("circle-check-big",I);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],q=d("eye-off",$);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],G=d("eye",F);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],g=d("globe",U),f={githubToken:"",baseDomain:"",useHttps:!0};function z(c,i){const s={};for(const l of h)s[l.key]=u(l.key,l.localPort,c,i);return s}const B=()=>{const[c,i]=o.useState([]),[s,l]=o.useState(f),[b,j]=o.useState(!1),[m,y]=o.useState(!1),[N,k]=o.useState(new Date),p=o.useCallback(t=>h.map(a=>({key:a.key,name:a.name,endpoint:u(a.key,a.localPort,t.baseDomain,t.useHttps),status:"checking"})),[]),r=o.useCallback(async t=>{k(new Date);const a=await Promise.all(t.map(async n=>{try{const x=await fetch(`${n.endpoint}/health`,{method:"GET",signal:AbortSignal.timeout(3e3)});return{...n,status:x.ok?"ok":"down"}}catch{return{...n,status:"down"}}}));i(a)},[]);o.useEffect(()=>{chrome.storage.local.get(["envConfig"],a=>{const n=a.envConfig||f;l(n);const x=p(n);i(x),setTimeout(()=>r(x),500)});const t=setInterval(()=>{i(a=>(a.length>0&&r(a),a))},1e4);return()=>clearInterval(t)},[p,r]);const v=()=>{const t=z(s.baseDomain,s.useHttps),a={...s,qwenEndpoint:t.qwen,phiEndpoint:t.phi,llamaEndpoint:t.llama,mistralEndpoint:t.mistral,gemmaEndpoint:t.gemma,r1qwenEndpoint:t.r1qwen,rnjEndpoint:t.rnj};chrome.storage.local.set({envConfig:a},()=>{const n=p(s);i(n),r(n)})},w=()=>{chrome.tabs.create({url:chrome.runtime.getURL("index.html")})},C=t=>t==="ok"?e.jsx(P,{className:"w-4 h-4 text-green-500"}):t==="down"?e.jsx(M,{className:"w-4 h-4 text-red-500"}):e.jsx(D,{className:"w-4 h-4 text-gray-400 animate-spin"}),S=c.filter(t=>t.status==="ok").length,E=!!s.baseDomain;return e.jsxs("div",{className:"p-4 bg-slate-900 text-white min-h-screen font-sans",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h1",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5"}),"Server Controls"]}),e.jsx("button",{onClick:()=>j(!b),className:"p-2 hover:bg-slate-800 rounded transition-colors",title:"Settings",children:e.jsx(L,{className:"w-4 h-4"})})]}),b?e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"GitHub Models Token"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m?"text":"password",value:s.githubToken,onChange:t=>l({...s,githubToken:t.target.value}),className:"w-full px-3 py-2 pr-10 bg-slate-800 border border-slate-700 rounded text-sm focus:outline-none focus:border-blue-500",placeholder:"ghp_..."}),e.jsx("button",{type:"button",onClick:()=>y(!m),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-slate-400 hover:text-slate-200 transition-colors",title:m?"Hide token":"Show token",children:m?e.jsx(q,{className:"w-4 h-4"}):e.jsx(G,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Required for API models & orchestration"})]}),e.jsxs("div",{className:"pt-3 border-t border-slate-700",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-1 flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),"Base Domain"]}),e.jsx("input",{type:"text",value:s.baseDomain,onChange:t=>l({...s,baseDomain:t.target.value.trim()}),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded text-sm focus:outline-none focus:border-blue-500",placeholder:"neevs.io"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:s.baseDomain?`Endpoints: ${s.useHttps?"https":"http"}://[service].${s.baseDomain}`:"Leave empty for localhost (default ports)"})]}),s.baseDomain&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"useHttps",checked:s.useHttps,onChange:t=>l({...s,useHttps:t.target.checked}),className:"w-4 h-4 rounded bg-slate-800 border-slate-700"}),e.jsx("label",{htmlFor:"useHttps",className:"text-sm text-slate-400",children:"Use HTTPS"})]}),s.baseDomain&&e.jsxs("div",{className:"p-3 bg-slate-800/50 rounded border border-slate-700/50",children:[e.jsx("p",{className:"text-xs font-medium text-slate-400 mb-2",children:"Endpoint Preview"}),e.jsxs("div",{className:"space-y-1 text-xs text-slate-500 font-mono",children:[h.slice(0,3).map(t=>e.jsx("div",{children:u(t.key,t.localPort,s.baseDomain,s.useHttps)},t.key)),e.jsxs("div",{className:"text-slate-600",children:["...and ",h.length-3," more"]})]})]}),e.jsx("button",{onClick:v,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded font-medium transition-colors text-sm",children:"Save Configuration"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-slate-800/50 border border-slate-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-300",children:E?s.baseDomain:"localhost"})]}),e.jsxs("div",{className:"text-xs text-slate-500",children:[S,"/",c.length," online"]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-sm font-medium text-slate-300 flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),"Service Health"]}),e.jsx("button",{onClick:()=>r(c),className:"text-xs text-slate-400 hover:text-white transition-colors",children:"Refresh"})]}),e.jsx("div",{className:"space-y-2",children:c.map(t=>e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-slate-800 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[C(t.status),e.jsx("span",{className:"text-sm",children:t.name})]}),e.jsx("span",{className:"text-xs text-slate-500 truncate max-w-[120px]",title:t.endpoint,children:t.endpoint.replace("https://","").replace("http://","")})]},t.key))}),e.jsxs("div",{className:"mt-3 text-xs text-slate-500",children:["Last check: ",N.toLocaleTimeString()]})]}),e.jsx("div",{className:"space-y-2",children:e.jsx("button",{onClick:w,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded font-medium transition-colors",children:"Open Full App"})})]})]})};H.createRoot(document.getElementById("sidepanel-root")).render(e.jsx(T.StrictMode,{children:e.jsx(B,{})}));
