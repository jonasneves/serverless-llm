const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ResponseInspector.js","assets/index.js","assets/index.css","assets/FormattedContent.js","assets/SettingsModal.js","assets/TopicsDrawer.js","assets/sparkles.js","assets/x.js","assets/DiscussionTranscript.js","assets/message-square.js","assets/rotate-ccw.js","assets/GestureControl.js","assets/settings.js","assets/HandBackground.js","assets/ChatView.js","assets/GestureOptions.js","assets/cloud.js","assets/GesturePanel.js"])))=>i.map(i=>d[i]);
var Qn=Object.defineProperty;var Zn=(t,o,s)=>o in t?Qn(t,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[o]=s;var cn=(t,o,s)=>Zn(t,typeof o!="symbol"?o+"":o,s);import{j as e,c as mn,S as Jn,r as n,f as es,s as xt,a as ts,b as ns,d as ss,e as rs,Z as os,R as is,u as as,g as ls,h as cs}from"./index.js";const us="modulepreload",ds=function(t){return"/"+t},un={},ze=function(o,s,h){let x=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const S=document.querySelector("meta[property=csp-nonce]"),g=(S==null?void 0:S.nonce)||(S==null?void 0:S.getAttribute("nonce"));x=Promise.allSettled(s.map(m=>{if(m=ds(m),m in un)return;un[m]=!0;const w=m.endsWith(".css"),c=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${c}`))return;const p=document.createElement("link");if(p.rel=w?"stylesheet":us,w||(p.as="script"),p.crossOrigin="",p.href=m,g&&p.setAttribute("nonce",g),document.head.appendChild(p),w)return new Promise((T,P)=>{p.addEventListener("load",T),p.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${m}`)))})}))}function u(S){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=S,window.dispatchEvent(g),!g.defaultPrevented)throw S}return x.then(S=>{for(const g of S||[])g.status==="rejected"&&u(g.reason);return o().catch(u)})},ps={local:{color:"#10b981"},api:{color:"#3b82f6"}},fs={"llama-3.3-70b":1,"llama-4-scout-17b-16e-instruct":2,qwen:3,phi:4,mistral:5,gemma:6},hs={"gpt-4o":1,"gpt-4.1":2,"gpt-5":3,"gpt-5-mini":4,"gpt-5-nano":5,"llama-3.3-70b":6,"llama-4-scout-17b-16e-instruct":7,"deepseek-v3-0324":8,"mistral-large":9,"command-r-plus":10},ms=50,xs=100;function xr(t,o,s){if(s!==void 0)return s;const h=o==="local"?fs:hs,x=o==="local"?ms:xs;for(const[u,S]of Object.entries(h))if(t.toLowerCase().includes(u.toLowerCase()))return S;return x}const gt=[{id:"eu-ai-act-enforcement",label:"EU AI Act Enforcement Wave",prompt:"The EU AI Act enters enforcement; high-risk systems must prove data provenance, evals, and risk controls. Outline compliance gaps for a frontier model API and tradeoffs between speed and alignment.",category:"Policy",modes:["council","roundtable"],tags:["governance","compliance"]},{id:"export-controls-blackwell",label:"Export Controls Tighten",prompt:"U.S. export rules tighten again on AI accelerators; Blackwell-class parts face new caps and cloud checks. Map the impact on training roadmaps, costs, and on-device strategies.",category:"Infra",modes:["compare","roundtable"],tags:["chips","supply-chain"]},{id:"weights-leak",label:"Major Weights Leak",prompt:"A commercial frontier model checkpoint leaks. Assess risks (misuse, impersonation, jailbreak diffusion), legal exposure, and whether open red-team releases mitigate or worsen safety.",category:"Security",modes:["council","roundtable"],tags:["safety","open-weights"]},{id:"on-device-llm-race",label:"On-Device LLM Race",prompt:"Phone OEMs ship 3nm NPUs and 20B-parameter on-device assistants. What actually moves the needle for UX, privacy, and cost vs. cloud? Where do hybrid (edge + cloud) designs win?",category:"Infra",modes:["compare","roundtable"],tags:["edge","latency"]},{id:"signed-app-prompt-injection",label:"Signed App Prompt Injection",prompt:"A popular signed desktop app shipped with hardcoded system prompts; attackers use supply chain updates to exfiltrate data. How should vendors audit, sandbox, and attest LLM apps?",category:"Security",modes:["compare","council"],tags:["supply-chain","prompt-injection"]},{id:"eval-standardization",label:"Safety Eval Standard",prompt:"NIST-style safety eval suites gain traction (jailbreak, autonomy, bio). How should vendors report scores, and what gaps remain for frontier vs. small models?",category:"Policy",modes:["compare","roundtable"],tags:["evaluation","safety"]},{id:"licensing-standoff",label:"Publisher Licensing Standoff",prompt:"Major news publishers pause AI licensing talks and sue over training. What remedies (revenue share, opt-out registries, model removal) are realistic, and how do they ripple to open models?",category:"Data",modes:["council","roundtable"],tags:["licensing","copyright"]},{id:"sbom-for-llms",label:"SBOM for LLM Pipelines",prompt:"Regulators push SBOMs and signed artifacts for AI stacks. Draft what should appear in an LLM pipeline SBOM (data, weights, evals, guardrails) and how to verify it at runtime.",category:"Security",modes:["compare","council"],tags:["sbom","supply-chain"]},{id:"data-poisoning-campaign",label:"Data Poisoning Campaign",prompt:"Researchers find coordinated data poisoning in popular open corpora. How should model hosts detect and mitigate poisoning post-hoc, and what retraining tradeoffs are acceptable?",category:"Security",modes:["compare","roundtable"],tags:["data","poisoning"]},{id:"copyright-settlement",label:"Copyright Settlement Sets Precedent",prompt:"A major copyright suit settles with dataset disclosure and per-output watermarking. Predict how this precedent affects future training sets and open-weight releases.",category:"Policy",modes:["roundtable"],tags:["copyright","watermarking"]}],gr={council:["Tabs or spaces? Give your verdict in under 50 words.","Rock, paper, scissorsâ€”which is objectively the best opening move?","In one sentence: should AI be allowed to write its own code?"],roundtable:["Write a two-sentence horror story where the second sentence recontextualizes the first.","Complete this thought: 'AI will never be able to...'","Pitch a startup in one sentence. No buzzwords allowed."],personality:["Coffee or tea? Defend your choice.","Hot take: pineapple on pizza.","What's the most overrated thing everyone pretends to like?"],compare:[],chat:[]};gt.filter(t=>t.category==="Policy"||t.category==="Data"),gt.filter(t=>t.category==="Infra"),gt.filter(t=>t.category==="Security");const Ot=gt,br="/api/trending-topics",vr=[{id:"ai-safety-governance",title:"New AI safety governance draft targets frontier model transparency",summary:"Draft policy proposes reporting training data provenance, evals for autonomous behavior, and emergency off-switch requirements.",source:"PolicyWire",tags:["AI","governance"],publishedAt:"2025-01-05"},{id:"chips-3nm",title:"3nm edge devices clear FCC for on-device LLM acceleration",summary:"Vendors claim 2Ã— energy efficiency for 70B-parameter quantized models on consumer hardware.",source:"SemiDaily",tags:["hardware","ai"],publishedAt:"2025-01-04"},{id:"open-weights",title:"Open-weights contest rewards best safety-tuned small models",summary:"Competition encourages transparent training recipes and evals instead of closed checkpoints.",source:"MLHub",tags:["open-source","models"],publishedAt:"2025-01-03"},{id:"security-supply-chain",title:"Software supply chain bill moves forward with SBOM enforcement",summary:"Requires signed artifacts, provenance attestations, and runtime monitoring for critical infra.",source:"CyberBrief",tags:["security","devsecops"],publishedAt:"2025-01-02"},{id:"creator-tools",title:"Creator tooling boom: multimodal editing in the browser",summary:"WebGPU-first editors ship video, audio, and 3D pipelines without native installs.",source:"CreatorBeat",tags:["media","webgpu"],publishedAt:"2025-01-01"}],qe=["dots-mesh","dots","dots-fade","grid","mesh","animated-mesh","none"],rt="#0f172a",dn={compare:rt,council:rt,roundtable:rt,chat:rt,personality:rt},ot={maxTokens:1024,temperature:.7},de={cardWidth:256,cardHeight:200,gapX:24,gapY:24,baseRadius:160,minRadius:120,radiusPerModel:15,scrollClamp:200};function gs({showDock:t,availableModels:o,allSelectedByType:s,totalModelsByType:h,handleDragStart:x,handleModelToggle:u,handleAddGroup:S,dockRef:g}){const m=[{type:"local",title:"Local Models",accentColor:"emerald"},{type:"api",title:"API Models",accentColor:"blue"}];return e.jsxs("div",{ref:g,"data-no-arena-scroll":!0,"data-no-background":!0,className:"dock-scroll model-dock-panel fixed left-3 top-20 bottom-20 w-[min(75vw,320px)] sm:left-6 sm:top-24 sm:bottom-24 sm:w-72 rounded-2xl flex flex-col z-[60] transition-all duration-300 overflow-hidden",style:{transform:t?"translateX(0)":"translateX(-150%)",opacity:t?1:0,pointerEvents:t?"auto":"none"},children:[e.jsxs("div",{className:"px-5 py-4 border-b border-slate-700/50",children:[e.jsx("h2",{className:"text-sm font-semibold text-slate-200",children:"Available Models"}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-0.5",children:"Click to add to arena"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-5",children:m.map(w=>{const c=o.filter(H=>H.type===w.type),p=s[w.type],T=h[w.type]>0,P={emerald:{button:"text-emerald-400 hover:text-emerald-300 hover:bg-emerald-500/10",dot:"bg-emerald-500",border:"hover:border-emerald-500/40"},blue:{button:"text-blue-400 hover:text-blue-300 hover:bg-blue-500/10",dot:"bg-blue-500",border:"hover:border-blue-500/40"}}[w.accentColor];return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${P.dot} ${w.type==="local"?"glow-dot-emerald":"glow-dot-blue"}`}),e.jsx("h3",{className:"text-[11px] font-semibold text-slate-300 uppercase tracking-wide",children:w.title}),e.jsxs("span",{className:"text-[10px] text-slate-500",children:["(",c.length,")"]})]}),e.jsx("button",{onClick:()=>S(w.type),className:`text-[10px] font-medium px-2 py-1.5 sm:py-0.5 rounded transition-all active:scale-95 ${P.button} ${T?"":"opacity-40 cursor-not-allowed"}`,disabled:!T,children:p?"âˆ’ Remove All":"+ Add All"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[c.map(H=>e.jsxs("div",{draggable:!0,onDragStart:Q=>x(Q,H.id),onClick:()=>u(H.id),className:`group flex items-center gap-3 px-3 py-3 sm:py-2 rounded-lg cursor-grab active:cursor-grabbing hover:bg-white/5 transition-all border border-transparent active:scale-95 ${P.border}`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${P.dot} opacity-60 group-hover:opacity-100 transition-opacity`}),e.jsx("span",{className:"text-xs font-medium text-slate-400 group-hover:text-slate-200 transition-colors",children:H.name})]},H.id)),c.length===0&&e.jsx("div",{className:"text-[10px] text-slate-600 italic px-3 py-2",children:"All models are in the arena"})]})]},w.type)})}),e.jsx("div",{className:"px-5 py-3 border-t border-slate-700/50 bg-slate-900/30",children:e.jsxs("p",{className:"text-[10px] text-slate-500 text-center",children:["Press ",e.jsx("kbd",{className:"px-1 py-0.5 rounded bg-slate-800 text-slate-400 font-mono text-[9px]",children:"M"})," to toggle this panel"]})})]})}/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],vs=mn("arrow-up",bs);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ws=mn("triangle-alert",ys);function ks({inputRef:t,inputFocused:o,setInputFocused:s,onSendMessage:h,onOpenTopics:x,className:u,style:S,placeholder:g,isGenerating:m,onStop:w}){return e.jsx("div",{className:u??"fixed bottom-0 right-0 left-0 z-[100] pb-6 px-3 sm:px-4 flex justify-center items-end pointer-events-none transition-all duration-300",style:S??{paddingBottom:"calc(1.5rem + env(safe-area-inset-bottom))"},children:e.jsxs("div",{className:"w-full pointer-events-auto",style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx("button",{onClick:x,onMouseDown:c=>c.currentTarget.blur(),className:"shrink-0 w-8 h-8 rounded-lg border border-slate-700/60 bg-slate-900/70 text-slate-400 hover:text-white hover:border-blue-400/60 hover:bg-blue-500/10 transition-colors active:scale-95 flex items-center justify-center focus:outline-none focus-visible:outline-none",title:"Search topics",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("div",{className:"relative overflow-hidden h-6 w-full backdrop-blur-md bg-slate-900/40 rounded-lg border border-white/5 ticker-mask",children:e.jsx("div",{className:"absolute whitespace-nowrap animate-ticker flex gap-2 items-center text-[11px] text-slate-300 font-medium h-full px-4",children:[...Ot,...Ot,...Ot].map((c,p)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{t.current&&(t.current.value=c.prompt,t.current.focus())},onMouseDown:T=>T.currentTarget.blur(),className:"hover:text-blue-400 transition-colors cursor-pointer px-2 py-1 sm:px-1 sm:py-0.5 rounded hover:bg-white/5 active:scale-95 focus:outline-none focus-visible:outline-none",children:c.label}),e.jsx("span",{className:"text-slate-600",children:"â€¢"})]},p))})})]}),e.jsxs("div",{className:`rounded-xl p-2.5 transition-all duration-300 flex items-center gap-2 border border-slate-700/40 header-shell ${o?"prompt-panel-focused":""}`,children:[e.jsx("input",{ref:t,type:"text",placeholder:g||"Ask a question to compare model responses...",className:"w-full bg-transparent text-slate-200 placeholder-slate-500 outline-none text-base sm:text-sm px-2.5 py-2.5",onFocus:()=>s(!0),onBlur:()=>s(!1),onKeyDown:c=>{var p;if(c.key==="Enter"&&!c.shiftKey){if(c.preventDefault(),m)return;(p=t.current)!=null&&p.value&&(h(t.current.value),t.current.value="")}},disabled:m}),e.jsx("button",{onClick:()=>{var c;m?w==null||w():(c=t.current)!=null&&c.value&&(h(t.current.value),t.current.value="")},onMouseDown:c=>c.currentTarget.blur(),className:`min-w-[44px] min-h-[44px] sm:min-w-[36px] sm:min-h-[36px] p-2 rounded-lg transition-colors active:scale-95 flex items-center justify-center focus:outline-none focus-visible:outline-none ${m?"text-red-400 hover:text-red-300 hover:bg-red-500/10":"text-slate-400 hover:text-white hover:bg-white/10"}`,"aria-label":m?"Stop generation":"Send message",children:m?e.jsx(Jn,{className:"w-5 h-5 sm:w-4 sm:h-4 fill-current"}):e.jsx(vs,{className:"w-5 h-5 sm:w-4 sm:h-4",strokeWidth:2.5})})]})]})})}const Ke=[{value:"chat",label:"Chat"},{value:"compare",label:"Compare"},{value:"council",label:"Council"},{value:"roundtable",label:"Roundtable"},{value:"personality",label:"Personalities"}];function js({mode:t,setMode:o,setHoveredCard:s,clearSelection:h,showDock:x,setShowDock:u,onOpenSettings:S,gestureButtonSlot:g,bgCyclerSlot:m,hasRightPanel:w=!0}){const[c,p]=n.useState(!1),T=n.useRef(null),P=Ke.findIndex(i=>i.value===t),H=P===-1?0:P,Q=Ke[H].label;n.useEffect(()=>{function i(B){T.current&&!T.current.contains(B.target)&&p(!1)}return c&&document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[c]);const Y=i=>{o(i),s(null),h(),p(!1)};return e.jsxs("div",{className:`fixed top-0 left-0 flex items-center justify-between mb-2 px-3 sm:px-6 pt-4 sm:pt-6 z-50 pointer-events-none transition-all duration-300 ${w?"right-[400px] xl:right-[480px]":"right-0"}`,children:[e.jsx("div",{className:"absolute inset-0 pointer-events-auto",style:{height:"100%",zIndex:-1}}),e.jsx("div",{className:"flex items-center gap-2 w-auto pointer-events-auto z-20",children:g}),e.jsx("div",{className:"hidden md:block absolute left-1/2 -translate-x-1/2 pointer-events-auto z-20",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex items-center p-1.5 rounded-xl border border-slate-700/40 header-shell",children:[e.jsx("button",{onClick:()=>u(!x),className:"px-2 sm:px-3 flex items-center justify-center text-slate-400 hover:text-white transition-colors",title:"Toggle Model Dock",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsx("div",{className:"w-px h-5 bg-slate-700/50 mx-0.5 sm:mx-1"}),e.jsxs("div",{className:"relative flex p-1 rounded-lg bg-black/20 mode-track",role:"radiogroup","aria-label":"Mode selection","data-gesture-mode-track":"true",children:[e.jsx("div",{className:"absolute top-1 bottom-1 rounded-md transition-all duration-300 ease-out mode-slider",style:{width:`calc((100% - 8px) / ${Ke.length})`,left:`calc(4px + (100% - 8px) * ${H} / ${Ke.length})`}}),Ke.map(i=>e.jsx("button",{tabIndex:-1,onClick:()=>Y(i.value),role:"radio","aria-checked":t===i.value,className:`relative z-10 py-2 sm:py-1.5 px-3 text-[11px] sm:text-xs font-medium transition-colors duration-200 min-h-[44px] sm:min-h-0 active:scale-95 focus:outline-none focus-visible:outline-none flex-1 flex items-center justify-center text-center ${t===i.value?"text-white":"text-slate-400 hover:text-slate-200"}`,children:i.label},i.value))]})]})})}),e.jsx("div",{className:"flex md:hidden flex-1 justify-center pointer-events-auto relative z-20",children:e.jsxs("div",{className:"relative",ref:T,children:[e.jsxs("button",{onClick:()=>p(!c),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-slate-800/90 border border-slate-700/50 text-slate-200 font-medium text-sm backdrop-blur-md shadow-lg active:scale-95 transition-all",children:[e.jsx("span",{className:"font-bold text-slate-400 hidden xs:inline",children:"Arena"}),e.jsx("span",{className:"font-bold hidden xs:inline text-slate-600",children:"/"}),e.jsx("span",{children:Q}),e.jsx("svg",{className:`w-4 h-4 text-slate-400 transition-transform duration-200 ${c?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c&&e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 w-48 py-1 rounded-xl bg-slate-800 border border-slate-700 shadow-2xl overflow-hidden flex flex-col animate-in fade-in zoom-in-95 duration-100 origin-top",children:Ke.map(i=>e.jsxs("button",{onClick:()=>Y(i.value),className:`px-4 py-3 text-sm text-left w-full transition-colors flex items-center justify-between ${t===i.value?"bg-blue-500/10 text-blue-400":"text-slate-300 hover:bg-slate-700/50"}`,children:[i.label,t===i.value&&e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},i.value))})]})}),e.jsxs("div",{className:"flex items-center gap-2 w-auto justify-end pointer-events-auto z-20",children:[e.jsx("div",{children:m}),e.jsx("button",{onClick:S,className:"min-w-[42px] min-h-[42px] w-[42px] h-[42px] rounded-full bg-slate-800/50 flex items-center justify-center border border-slate-700/50 hover:border-slate-600 transition-colors active:scale-95 focus:outline-none focus-visible:outline-none",title:"Settings",children:e.jsxs("svg",{className:"w-5 h-5 sm:w-4 sm:h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]})}const Ss=t=>{if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return null}},Ms=(t,o)=>{if(t===null)return o;try{return JSON.parse(t)}catch{return o}};function Qe(t,o,s={}){const h=s.serialize??Ss,x=s.deserialize??Ms,[u,S]=n.useState(()=>{if(typeof window>"u")return o;try{const g=window.localStorage.getItem(t);return x(g,o)}catch{return o}});return n.useEffect(()=>{if(!(typeof window>"u"))try{const g=h(u);g===null?window.localStorage.removeItem(t):window.localStorage.setItem(t,g)}catch{}},[t,h,u]),[u,S]}const Cs=800,Es=3e3,Ns=8;function Ts(){const[t,o]=n.useState([]),[s,h]=n.useState(!0),[x,u]=n.useState(null),[S,g]=n.useState(0),[m,w]=Qe("playground_selected_models",null),c=n.useRef(m!==null),[p,T]=Qe("playground_chat_model",null),P=n.useRef(p!==null),H=n.useMemo(()=>m??[],[m]),Q=n.useCallback(N=>{w(F=>typeof N=="function"?N(F??[]):N)},[w]),[Y,i]=n.useState(""),B=n.useRef(0),Z=n.useRef(null),J=n.useCallback(async(N,F,O=!1)=>{Z.current&&(clearTimeout(Z.current),Z.current=null),h(!0),O&&(u("Refreshing..."),g(0));const je=se=>{var me,Ne;const E=se.models.map(te=>{const ae=te.type==="api"?"api":"local",be=ps[ae];return{id:te.id,name:be.name||te.name||te.id,color:be.color,type:ae,response:"Ready to generate...",priority:te.priority,context_length:te.context_length}});if(o(E),h(!1),u(null),g(0),c.current||(w(E.filter(te=>te.type==="local").map(te=>te.id)),c.current=!0),!P.current){const te=E.find(ae=>ae.type==="api");T((te==null?void 0:te.id)||((me=E[0])==null?void 0:me.id)||null),P.current=!0}const oe=E.find(te=>te.type==="api"),ie=((Ne=E[0])==null?void 0:Ne.id)||"";i((oe==null?void 0:oe.id)||ie)};try{const se=await fetch("/api/models");if(N!==B.current)return;if(!se.ok)throw new Error(`HTTP ${se.status}`);const E=await se.json();if(N!==B.current)return;if(!E.models||E.models.length===0)throw new Error("No models available yet");je(E)}catch(se){if(N!==B.current)return;console.warn("Backend fetch failed:",se);try{console.log("Trying static models.json...");const oe=await fetch("/models.json");if(oe.ok){const ie=await oe.json();if(ie.models&&ie.models.length>0){console.log(`Loaded ${ie.models.length} models from static file`),je(ie);return}}}catch(oe){console.warn("Static models.json not available:",oe)}const E=F+1;if(g(E),E<Ns){const oe=Math.min(Cs*Math.pow(1.4,F),Es);u("Connecting to backend..."),Z.current=setTimeout(()=>{J(N,E)},oe)}else h(!1),u("Could not load models")}},[w,T]),X=n.useCallback(()=>{B.current+=1,J(B.current,0,!0)},[J]);n.useEffect(()=>(B.current+=1,J(B.current,0),()=>{B.current+=1,Z.current&&clearTimeout(Z.current)}),[J]);const ee=n.useMemo(()=>t.filter(N=>!H.includes(N.id)),[t,H]),{totalModelsByType:V,allSelectedByType:re}=n.useMemo(()=>{const N={local:t.filter(O=>O.type==="local").length,api:t.filter(O=>O.type==="api").length},F={local:t.filter(O=>O.type==="local"&&H.includes(O.id)).length,api:t.filter(O=>O.type==="api"&&H.includes(O.id)).length};return{totalModelsByType:N,allSelectedByType:{local:N.local>0&&F.local===N.local,api:N.api>0&&F.api===N.api}}},[t,H]),he=n.useCallback(N=>{var F;return((F=t.find(O=>O.id===N))==null?void 0:F.name)||N},[t]);return{modelsData:t,setModelsData:o,selected:H,setSelected:Q,chatModelId:p,setChatModelId:T,moderator:Y,setModerator:i,availableModels:ee,totalModelsByType:V,allSelectedByType:re,modelIdToName:he,isLoading:s,loadError:x,retryCount:S,retryNow:X}}function _s(){const[t,o]=n.useState([]),s=n.useRef([]),h=n.useCallback(g=>{if(!g.length)return;const m=[...s.current,...g];s.current=m,o(m)},[]),x=n.useCallback(()=>{s.current=[],o([])},[]),u=n.useCallback(g=>g.map(m=>`${m.role==="user"?"User":"Assistant"}: ${m.content}`).join(`

`),[]),S=n.useCallback((g,m)=>{if(m==="compare")return g;const w=g.filter(p=>p.role==="user"),c=[...g].reverse().find(p=>p.role==="assistant"&&(p.kind==="council_synthesis"||p.kind==="roundtable_synthesis")&&p.content.trim().length>0);return c?[...w,c]:w},[]);return{history:t,historyRef:s,pushHistoryEntries:h,clearHistory:x,historyToText:u,buildCarryoverHistory:S}}function Is(t){const o=n.useRef({}),s=n.useRef(null),h=n.useCallback(()=>{s.current=null;const m=o.current;o.current={},Object.keys(m).length&&t(c=>c.map(p=>{const T=m[p.id];return T?{...p,response:(p.response||"")+T.answer,thinking:(p.thinking||"")+T.thinking}:p}))},[t]),x=n.useCallback(()=>{s.current==null&&(s.current=requestAnimationFrame(h))},[h]),u=n.useCallback((m,w,c)=>{if(!w&&!c)return;const p=o.current[m]||{answer:"",thinking:""};p.answer+=w,p.thinking+=c,o.current[m]=p,x()},[x]),S=n.useCallback(m=>{o.current[m]&&delete o.current[m]},[]),g=n.useCallback(()=>{o.current={},s.current!=null&&(cancelAnimationFrame(s.current),s.current=null)},[]);return{pendingStreamRef:o,flushStreamRafRef:s,enqueueStreamDelta:u,clearPendingStreamForModel:S,resetPendingStream:g}}function Rs(t){const{mode:o,moderator:s,selected:h,selectedCardIds:x,githubToken:u,isGenerating:S,summarizeSessionResponses:g,setLastQuery:m,setHoveredCard:w,setPhaseLabel:c,setModeratorSynthesis:p,setCouncilAggregateRankings:T,setCouncilAnonymousReviews:P,setDiscussionTurnsByModel:H,resetFailedModels:Q,markModelFailed:Y,failedModelsRef:i,currentDiscussionTurnRef:B,sessionModelIdsRef:Z,abortControllerRef:J,thinkingStateRef:X,conversationHistoryRef:ee,pushHistoryEntries:V,historyToText:re,buildCarryoverHistory:he,setModelsData:N,modelIdToName:F,setExecutionTimes:O,setIsGenerating:je,setIsSynthesizing:se,setSpeaking:E,enqueueStreamDelta:oe,clearPendingStreamForModel:ie,resetPendingStream:me}=t;return{sendMessage:async(te,ae,be,Me)=>{if(!te.trim()||h.length===0&&!be||!be&&S)return;const Te=(Me==null?void 0:Me.skipHistory)??!1,ce={role:"user",content:te},Xe=Te?ee.current:[...ee.current,ce];Te||V([ce]);const Ze=he(Xe,o),Re=re(Ze);m(te);const Le=Re?`${Re}

Continue the conversation above and respond to the latest user request.`:te;let a;if(be)a=be;else{const C=Array.from(x).filter($=>h.includes($)&&(o==="compare"||$!==s));a=C.length>0?C:h.slice()}Z.current=a;const pe={},fe=(C,$,_)=>{if(!$)return;const z=_!=null&&_.label?`${_.label}: ${$}`:$;pe[C]=_!=null&&_.replace?z:pe[C]?`${pe[C]}

${z}`:z},ve=new AbortController;J.current=ve,je(!0),se(!1),w(null),c(null),p(""),T(null),P([]),H({}),Q(),B.current=null,me(),N(C=>C.map($=>a.includes($.id)||$.id===s?ae&&ae[$.id]?{...$,response:ae[$.id],thinking:void 0,error:void 0}:{...$,response:"",thinking:void 0,error:void 0}:$)),O(C=>{const $={...C},_=performance.now();return a.forEach(z=>{$[z]={startTime:_}}),s&&!$[s]&&($[s]={startTime:_}),$});const xe=new Set(a);s&&xe.add(s),xe.forEach(C=>{X.current[C]={inThink:!1,carry:""}});const ue=new Set,ge=C=>C?C.replace(/_/g," ").replace(/\b\w/g,$=>$.toUpperCase()):"",Ae=C=>typeof C=="number"&&Number.isFinite(C)?`${Math.round(C*100)}%`:"â€”",Ge=C=>{if(!C)return"";const $=C.domain_weights||{},_=C.model_expertise_scores||{},z=Object.entries($).sort((v,L)=>(L[1]??0)-(v[1]??0)).map(([v,L])=>`${ge(v)} ${Ae(L)}`).join(", "),A=(a.length>0?a:Object.keys(_)).filter(Boolean).map(v=>`${F(v)} ${Ae(_[v])}`).join(", "),R=C.discussion_lead?F(C.discussion_lead):"â€”",b=C.expected_turns??2,f=(C.reasoning||"").trim(),k=[`ORCHESTRATOR â€¢ ${s?F(s):"Roundtable"}`];return z&&k.push(`Domains: ${z}`),k.push(`Lead: ${R}`),A&&k.push(`Participants: ${A}`),k.push(`Planned rounds: ${b}`),f&&(k.push(""),k.push(f)),k.join(`
`).trim()},Se=(C,$)=>{const _=C==null?void 0:C.trim();!_||Te||V([{role:"assistant",content:_,kind:$}])},_e=(C,$)=>{const _=X.current[C]||{inThink:!1,carry:""};let z=_.carry+$;_.carry="";const I=z.lastIndexOf("<");if(I!==-1&&z.length-I<8){const f=z.slice(I);("<think>".startsWith(f)||"</think>".startsWith(f))&&(_.carry=f,z=z.slice(0,I))}let A="",R="",b=0;for(;b<z.length;)if(_.inThink){const f=z.indexOf("</think>",b);if(f===-1){A+=z.slice(b);break}A+=z.slice(b,f),_.inThink=!1,b=f+8}else{const f=z.indexOf("<think>",b);if(f===-1){R+=z.slice(b);break}R+=z.slice(b,f),_.inThink=!0,b=f+7}X.current[C]=_,R&&fe(C,R),(A||R)&&oe(C,R,A)},$e=C=>{const $=C.toLowerCase();return $.includes("rate limit")||$.includes("waiting")?'<svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; vertical-align: text-bottom; margin-right: 6px;"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/><path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>'+C:$.includes("error")||$.includes("failed")?'<svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; vertical-align: text-bottom; margin-right: 6px;"><path d="M12 2L2 20h20L12 2z" stroke="currentColor" stroke-width="2" fill="none" stroke-linejoin="round"/><path d="M12 9v4M12 17h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>'+C:C};try{if(o==="compare"){E(new Set(a));const I=await es({models:a,messages:Xe.map(A=>({role:A.role,content:A.content})),max_tokens:ot.maxTokens,temperature:ot.temperature,github_token:u||null},ve.signal);if(await xt(I,A=>{if(A.event==="info"&&A.content){const R=String(A.content),b=$e(R);c(b),A.model_id&&N(f=>f.map(k=>k.id===A.model_id?{...k,statusMessage:b}:k))}if(A.event==="token"&&A.model_id){const R=A.model_id,b=performance.now();ue.has(R)||(ue.add(R),O(f=>({...f,[R]:{...f[R],firstTokenTime:b}})),N(f=>f.map(k=>k.id===R?{...k,statusMessage:void 0}:k))),_e(R,String(A.content??""))}if(A.event==="done"&&A.model_id){const R=performance.now(),b=A.model_id;O(f=>({...f,[b]:{...f[b],endTime:R}})),E(f=>{const k=new Set(f);return k.delete(b),k})}}),!Te){const A=g(pe,a);A&&V([{role:"assistant",content:A,kind:"compare_summary"}])}return}if(o==="council"){const I=a;if(I.length<2){const v="Select at least 2 participants for Council mode.";p(v),s&&N(L=>L.map(d=>d.id===s?{...d,response:v}:d)),c("Error");return}E(new Set(I));const A=be&&I.length>0?I[0]:s||(I.length>0?I[0]:null),R=await ts({query:Le,participants:I,chairman_model:A,max_tokens:ot.maxTokens,github_token:u||null,completed_responses:ae||null},ve.signal);let b="",f=0,k=0;if(await xt(R,v=>{const L=v.event;if(L==="stage1_start"&&c("Stage 1 Â· Responses"),L==="model_start"&&v.model_id){const d=v.model_id;E(W=>{const G=new Set(W);return G.add(d),G})}if(L==="model_chunk"&&v.model_id){const d=v.model_id,W=performance.now();ue.has(d)||(ue.add(d),O(G=>({...G,[d]:{...G[d],firstTokenTime:W}}))),_e(d,String(v.chunk??""))}if(L==="model_response"&&v.model_id){const d=v.model_id,W=performance.now();O(K=>({...K,[d]:{...K[d],endTime:W}})),E(K=>{const ne=new Set(K);return ne.delete(d),ne});const G=String(v.response??"");fe(d,G,{replace:!0}),ae&&ae[d]||(N(K=>K.map(ne=>ne.id===d?{...ne,response:G}:ne)),Se(`${F(d)}:
${G}`,"council_turn"))}if(L==="model_error"&&v.model_id){const d=v.model_id,W=performance.now();O(K=>({...K,[d]:{...K[d],endTime:W}})),E(K=>{const ne=new Set(K);return ne.delete(d),ne});const G=String(v.error??"Error generating response.");ie(d),N(K=>K.map(ne=>ne.id===d?{...ne,response:G,error:G}:ne)),Y(d),fe(d,G,{replace:!0})}if(L==="stage2_start"){const d=I.filter(W=>!i.current.has(W));f=d.length,k=0,P([]),c(`Stage 2 Â· Anonymous Review (0/${f})`),p(`Anonymous reviews in progress (0/${f})â€¦`),E(new Set(d))}if(L==="ranking_response"&&v.model_id){const d=v.model_id;E(G=>{const K=new Set(G);return K.delete(d),K}),k+=1,c(`Stage 2 Â· Anonymous Review (${k}/${f||I.length})`),p(`Anonymous reviews in progress (${k}/${f||I.length})â€¦`);const W=String(v.ranking??"");if(W.trim()){const G=String(v.model_name??d);P(K=>[...K,{reviewer_model_id:d,reviewer_model_name:G,text:W.trim()}])}}if(L==="ranking_error"&&v.model_id){const d=v.model_id;E(K=>{const ne=new Set(K);return ne.delete(d),ne}),Y(d),k+=1,c(`Stage 2 Â· Anonymous Review (${k}/${f||I.length})`),p(`Anonymous reviews in progress (${k}/${f||I.length})â€¦`);const W=String(v.error??"Ranking error."),G=String(v.model_name??d);P(K=>[...K,{reviewer_model_id:d,reviewer_model_name:G,text:W,error:!0}])}if(L==="stage2_complete"){const d=v.aggregate_rankings;if(d){T(d);const W=d.map((G,K)=>`${K+1}. ${G.model_name} (avg: ${G.average_rank}, votes: ${G.votes_count})`).join(`
`);Se(`Anonymous Rankings:
${W}`,"council_ranking")}}if(L==="chairman_quip"){const d=String(v.quip??"");p(d),A&&Se(`${F(A)}: ${d}`,"council_chairman")}if(L==="stage3_start"&&(c("Stage 3 Â· Synthesis"),se(!0),p(""),s&&E(new Set([s]))),L==="stage3_complete"||L==="stage3_error"){const d=String(v.response??v.error??"Synthesis error.");p(d),b=d,s&&(ie(s),N(W=>W.map(G=>G.id===s?{...G,response:d}:G)),fe(s,d,{replace:!0})),se(!1)}if(L==="council_complete"){c(null),se(!1),E(new Set);const d=v.aggregate_rankings;d&&T(d)}if(L==="error"){const d=String(v.error??v.message??"Council error.");p(d),s&&(ie(s),N(W=>W.map(G=>G.id===s?{...G,response:d}:G))),c("Error")}}),!Te){const v=b.trim();v&&V([{role:"assistant",content:v,kind:"council_synthesis"}])}return}if(o==="personality"){const I=a;E(new Set(I));const A=await ns({query:Le,participants:I,max_tokens:512,github_token:u||null},ve.signal);await xt(A,R=>{const b=R.event;if(b==="personality_start"&&c("Generating Personas"),b==="model_start"&&R.model_id){const f=R.model_id;E(k=>{const v=new Set(k);return v.add(f),v})}if(b==="model_chunk"&&R.model_id){const f=R.model_id,k=performance.now();ue.has(f)||(ue.add(f),O(L=>({...L,[f]:{...L[f],firstTokenTime:k}})));const v=R.persona_info;v&&N(L=>L.map(d=>d.id===f?{...d,personaEmoji:v.persona_emoji||d.personaEmoji,personaName:v.persona_name||d.personaName,personaTrait:v.persona_trait||d.personaTrait}:d)),_e(f,String(R.chunk??""))}if(b==="model_response"&&R.model_id){const f=R.model_id,k=performance.now();O(le=>({...le,[f]:{...le[f],endTime:k}})),E(le=>{const De=new Set(le);return De.delete(f),De});const v=String(R.response??""),L=String(R.persona_emoji??"ðŸŽ­"),d=String(R.persona_name??"Persona"),W=String(R.persona_trait??"");fe(f,v,{replace:!0}),N(le=>le.map(De=>De.id===f?{...De,response:v,personaEmoji:L,personaName:d,personaTrait:W}:De));const G=v.split(`
`),K=G[0]||"",Be=K.includes("-")&&(K.includes("**")||/^[^\w\s]/.test(K))?G.slice(1).join(`
`).trim():v,Fe=`${L} **${d}** (${F(f)})${W?` - ${W}`:""}

${Be}`;Se(Fe,"personality_response")}if(b==="model_error"&&R.model_id){const f=R.model_id,k=performance.now();O(L=>({...L,[f]:{...L[f],endTime:k}})),E(L=>{const d=new Set(L);return d.delete(f),d});const v=String(R.error??"Error generating persona.");ie(f),N(L=>L.map(d=>d.id===f?{...d,response:v,error:v}:d)),Y(f)}if(b==="personality_complete"&&(c(null),E(new Set)),b==="error"){const f=String(R.error??"Personality mode error.");c("Error"),p(f)}});return}const C=a;if(C.length<2){const I="Select at least 2 participants for Roundtable mode.";p(I),s&&N(A=>A.map(R=>R.id===s?{...R,response:I}:R)),c("Error");return}s&&E(new Set([s]));const $=await ss({query:Le,max_tokens:ot.maxTokens,temperature:ot.temperature,orchestrator_model:s||null,github_token:u||null,participants:C,turns:2},ve.signal);let _=0,z="";if(await xt($,I=>{var R;const A=I.event;if(A==="analysis_start"&&(c("Analyzing Query"),s&&E(new Set([s]))),A==="analysis_complete"){c("Orchestrating"),E(new Set);let b="Analysis complete.";if(I.analysis){const f=I.analysis,k=Ge(f);k&&(b=k)}p(b),s&&N(f=>f.map(k=>k.id===s?{...k,response:b}:k)),Se(b,"roundtable_analysis")}if(A==="turn_start"){const b=I.turn_number;typeof b=="number"&&(_=b),c(`Round ${_+1}`);const f=I.model_id;f&&E(new Set([f]))}if(A==="turn_chunk"&&I.model_id){const b=I.model_id,f=performance.now();ue.has(b)||(ue.add(b),O(k=>({...k,[b]:{...k[b],firstTokenTime:f}}))),((R=B.current)==null?void 0:R.modelId)!==b&&(B.current={modelId:b,turnNumber:_}),_e(b,String(I.chunk??""))}if(A==="turn_complete"){const b=I.turn,f=b==null?void 0:b.model_id;if(!f)return;const k=performance.now();O(d=>({...d,[f]:{...d[f],endTime:k}}));const v=String((b==null?void 0:b.response)??"");H(d=>{const W=d[f]||[];return{...d,[f]:[...W,{turn_number:_,response:v}]}}),N(d=>d.map(W=>W.id===f?{...W,response:v}:W)),E(d=>{const W=new Set(d);return W.delete(f),W}),fe(f,v,{label:`Round ${_+1}`});const L=F(f);Se(`${L} Â· Round ${_+1}
${v}`,"roundtable_turn")}if(A==="turn_error"&&I.model_id){const b=I.model_id,f=performance.now();O(v=>({...v,[b]:{...v[b],endTime:f}}));const k=String(I.error??"Error generating response.");ie(b),N(v=>v.map(L=>L.id===b?{...L,response:k,error:k}:L)),E(v=>{const L=new Set(v);return L.delete(b),L}),Y(b),fe(b,k,{replace:!0}),Se(`${F(b)} Â· Round ${_+1}
${k}`,"roundtable_turn")}if(A==="synthesis_start"&&(c("Synthesis"),se(!0),s&&E(new Set([s]))),A==="discussion_complete"){const b=String(I.final_response??"");p(b),z=b,s&&(ie(s),N(f=>f.map(k=>k.id===s?{...k,response:b}:k)),fe(s,b,{replace:!0})),c(null),se(!1),E(new Set)}if(A==="error"){const b=String(I.error??I.message??"Discussion error.");p(b),s&&(ie(s),N(f=>f.map(k=>k.id===s?{...k,response:b}:k))),c("Error"),se(!1),E(new Set)}}),!Te){const I=z.trim();I&&V([{role:"assistant",content:I,kind:"roundtable_synthesis"}])}}catch(C){if(C.name==="AbortError")return;if(console.error("Chat error:",C),J.current===ve){const $=C.message||String(C);p(`Session Error: ${$}`),c("Error"),me(),N(_=>_.map(z=>a.includes(z.id)&&!z.response?{...z,response:"Error generating response."}:z)),a.forEach(_=>Y(_))}}finally{if(J.current===ve){const C=performance.now();O($=>{const _={...$};return Z.current.forEach(z=>{_[z]&&!_[z].endTime&&(_[z]={..._[z],endTime:C})}),_}),je(!1),se(!1),c($=>$==="Error"?$:null),E(new Set)}}}}}function zt(t,o){const s=Math.min(t.x,o.x),h=Math.min(t.y,o.y),x=Math.max(t.x,o.x),u=Math.max(t.y,o.y);return{left:s,top:h,right:x,bottom:u,width:x-s,height:u-h}}function Ls({rootContainerRef:t,visualizationAreaRef:o,arenaOffsetYRef:s,arenaTargetYRef:h,wheelRafRef:x,selectedModels:u,cardRefs:S,selectedCardIds:g,setSelectedCardIds:m,setActiveInspectorId:w,suppressClickRef:c}){const[p,T]=n.useState(null),P=n.useRef(!1);n.useEffect(()=>{P.current=p!=null},[p]),n.useEffect(()=>{const Y=i=>{if(i.button!==0||!t.current)return;const B=i.target;if(!B)return;const Z=B.closest("[data-card]"),J=B.closest('button, a, input, textarea, select, [role="button"]'),X=B.closest("[draggable]"),ee=B.closest("[data-no-arena-scroll]");if(Z||J||X||ee||!t.current.contains(B))return;h.current=s.current,x.current!=null&&(cancelAnimationFrame(x.current),x.current=null);const V=t.current.getBoundingClientRect(),re={x:i.clientX-V.left,y:i.clientY-V.top};i.preventDefault(),P.current=!0,c.current.card=!1,c.current.background=!1,T({origin:re,current:re,active:!1})};return window.addEventListener("mousedown",Y,!0),()=>window.removeEventListener("mousedown",Y,!0)},[s,h,x,t,o,c]),n.useEffect(()=>{if(!p||!t.current)return;const Y=Z=>Z.preventDefault();document.addEventListener("selectstart",Y);const i=Z=>{const J=t.current.getBoundingClientRect(),X={x:Z.clientX-J.left,y:Z.clientY-J.top};T(ee=>{if(!ee)return ee;const V=zt(ee.origin,X),re=ee.active||V.width>4||V.height>4;return{...ee,current:X,active:re}})},B=Z=>{P.current=!1;const J=t.current.getBoundingClientRect(),X={x:Z.clientX-J.left,y:Z.clientY-J.top},ee=Z.target,V=!!(ee&&ee.closest("[data-card]"));T(re=>{if(!re)return null;const he=zt(re.origin,X);if(re.active&&he.width>0&&he.height>0){const N=[],F=t.current.getBoundingClientRect(),O={left:F.left+he.left,right:F.left+he.right,top:F.top+he.top,bottom:F.top+he.bottom};for(const je of u){const se=S.current.get(je.id);if(!se)continue;const E=se.getBoundingClientRect();!(E.right<O.left||E.left>O.right||E.bottom<O.top||E.top>O.bottom)&&N.push(je.id)}m(new Set(N)),V?c.current.card=!0:N.length>0&&(c.current.background=!0)}return null})};return window.addEventListener("mousemove",i),window.addEventListener("mouseup",B),()=>{window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",B),document.removeEventListener("selectstart",Y)}},[p,t,o,u,S,g,m,w,c]);const H=n.useMemo(()=>{if(!p||!p.active)return null;const Y=zt(p.origin,p.current);return Y.width<=0||Y.height<=0?null:{left:Y.left,top:Y.top,width:Y.width,height:Y.height}},[p]),Q=n.useCallback(()=>{T(null),P.current=!1},[]);return{selectionRect:H,isSelecting:p!=null,dragSelectionActiveRef:P,clearSelection:Q}}function As({visualizationAreaRef:t,cardRefs:o,selected:s,setSelected:h,mode:x,gridCols:u,getCirclePosition:S}){const[g,m]=n.useState(null),w=n.useCallback((c,p)=>{if(c.button!==0||c.target.closest('button, a, input, textarea, select, [role="button"]'))return;c.preventDefault();const P=o.current.get(p);if(!P||!t.current)return;const H=P.getBoundingClientRect(),Q=t.current.getBoundingClientRect(),Y=H.left+H.width/2,i=H.top+H.height/2;m({activeId:p,currX:c.clientX,currY:c.clientY,offsetX:Y-c.clientX,offsetY:i-c.clientY,containerLeft:Q.left,containerTop:Q.top,containerWidth:Q.width,containerHeight:Q.height,cardHeight:H.height}),c.target.setPointerCapture(c.pointerId)},[t]);return n.useEffect(()=>{if(!g)return;const c=T=>{if(m(i=>i?{...i,currX:T.clientX,currY:T.clientY}:null),!t.current)return;const P=t.current.getBoundingClientRect(),H=s.indexOf(g.activeId);let Q=1/0,Y=-1;if(x==="compare"){const i=T.clientX-(P.left+P.width/2),B=T.clientY-P.top,Z=(de.cardWidth+de.gapX)*u-de.gapX;s.forEach((J,X)=>{const ee=Math.floor(X/u),re=X%u*(de.cardWidth+de.gapX)-Z/2+de.cardWidth/2,he=ee*(de.cardHeight+de.gapY),N=re,F=he+de.cardHeight/2,O=(i-N)**2+(B-F)**2;O<Q&&(Q=O,Y=X)})}else{const i=T.clientX-(P.left+P.width/2),B=T.clientY-(P.top+P.height/2),Z=Math.max(de.baseRadius,de.minRadius+s.length*de.radiusPerModel);s.forEach((J,X)=>{const ee=S(X,s.length,x,Z),V=(i-ee.x)**2+(B-ee.y)**2;V<Q&&(Q=V,Y=X)})}if(Y!==-1&&Y!==H){const i=[...s],[B]=i.splice(H,1);i.splice(Y,0,B),h(i)}},p=()=>m(null);return window.addEventListener("pointermove",c),window.addEventListener("pointerup",p),()=>{window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",p)}},[g,t,o,s,h,x,u,S]),{dragState:g,handlePointerDown:w}}const $s={selectedCardIds:new Set,activeInspectorId:null};function Ps(){const[t,o]=n.useReducer(Ds,$s),s=n.useCallback(u=>{o({type:"setSelected",update:u})},[]),h=n.useCallback(u=>{o({type:"setActive",update:u})},[]),x=n.useCallback(()=>{o({type:"clearSelection"})},[]);return{selectedCardIds:t.selectedCardIds,setSelectedCardIds:s,activeInspectorId:t.activeInspectorId,setActiveInspectorId:h,clearInspectorSelection:x}}function Ds(t,o){switch(o.type){case"setSelected":{const s=Os(t.selectedCardIds,o.update),h=!Bs(t.selectedCardIds,s),x=pn(t.activeInspectorId,s);return!h&&x===t.activeInspectorId?t:{...t,selectedCardIds:h?s:t.selectedCardIds,activeInspectorId:x}}case"setActive":{const s=zs(t.activeInspectorId,o.update),h=s&&t.selectedCardIds.has(s)?s:pn(s,t.selectedCardIds);return h===t.activeInspectorId?t:{...t,activeInspectorId:h}}case"clearSelection":return t.selectedCardIds.size===0&&t.activeInspectorId==null?t:{...t,selectedCardIds:new Set,activeInspectorId:null};default:return t}}function Os(t,o){const s=typeof o=="function"?o(t):o;return new Set(s)}function zs(t,o){return typeof o=="function"?o(t):o}function pn(t,o){return o.size===0?null:t&&o.has(t)?t:null}function Bs(t,o){if(t===o)return!0;if(t.size!==o.size)return!1;for(const s of t)if(!o.has(s))return!1;return!0}const Ie=(t,o)=>!t||!t.startsWith("#")?t:t.length===7||t.length===4?`${t}${o}`:t,Ws={idle:"Ready",responding:"Responding",done:"Done",waiting:"Waiting",error:"Error"};function Bt({state:t,color:o,size:s=16,label:h,className:x=""}){const u={width:`${s}px`,height:`${s}px`},S=h??Ws[t],g=Math.max(2,Math.round(s*.14)),m=Math.max(12,s-2),w="#fbbf24",c=Ie(o,"cc"),p=()=>{switch(t){case"responding":return e.jsx("div",{className:"relative flex items-center justify-center",style:u,children:e.jsxs("svg",{width:m,height:m,viewBox:"0 0 24 24",fill:"none",className:"",style:{filter:`drop-shadow(0 0 6px ${Ie(w,"55")})`,animation:"spin 0.6s linear infinite"},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"spinnerGradient",gradientUnits:"userSpaceOnUse",x1:"3",y1:"12",x2:"12",y2:"3",children:[e.jsx("stop",{offset:"0%",stopColor:w,stopOpacity:"1"}),e.jsx("stop",{offset:"60%",stopColor:w,stopOpacity:"0.5"}),e.jsx("stop",{offset:"100%",stopColor:w,stopOpacity:"0"})]})}),e.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:Ie(w,"15"),strokeWidth:g,fill:"none"}),e.jsx("path",{d:"M 12 3 A 9 9 0 1 1 3 12",stroke:"url(#spinnerGradient)",strokeWidth:g,strokeLinecap:"round",fill:"none"}),e.jsx("circle",{cx:"3",cy:"12",r:g*.7,fill:w})]})});case"done":return e.jsx("div",{className:"flex items-center justify-center rounded-full",style:{...u,background:Ie(o,"14"),border:`1px solid ${Ie(o,"99")}`},children:e.jsx("svg",{width:m,height:m,viewBox:"0 0 24 24",fill:"none",children:e.jsx("polyline",{points:"5 13 10 18 19 7",stroke:o,strokeWidth:g,strokeLinecap:"round",strokeLinejoin:"round"})})});case"error":const T="#ef4444";return e.jsx("div",{className:"flex items-center justify-center rounded-full",style:{...u,background:Ie(T,"14"),border:`1px solid ${Ie(T,"99")}`},children:e.jsx("svg",{width:m,height:m,viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M6 6L18 18M6 18L18 6",stroke:T,strokeWidth:g,strokeLinecap:"round",strokeLinejoin:"round"})})});case"waiting":return e.jsxs("div",{className:"relative flex items-center justify-center",style:u,children:[e.jsx("div",{className:"absolute inset-0 rounded-full",style:{border:`1px solid ${Ie(c,"99")}`}}),e.jsx("svg",{width:m,height:m,viewBox:"0 0 24 24",fill:"none",style:{animation:"spin 5s linear infinite"},children:e.jsx("circle",{cx:"12",cy:"12",r:"8.5",stroke:Ie(c,"44"),strokeWidth:g-1,strokeDasharray:"6 10",strokeLinecap:"round"})}),e.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{background:Ie(c,"aa"),animation:"pulse 1.5s ease-in-out infinite"}})]});default:return e.jsxs("div",{className:"relative flex items-center justify-center",style:u,children:[e.jsx("div",{className:"absolute inset-0 rounded-full",style:{border:"1px solid rgba(71, 85, 105, 0.5)"}}),e.jsx("div",{className:"w-2 h-2 rounded-full",style:{background:"rgba(148, 163, 184, 0.6)",animation:"pulse 2.4s ease-in-out infinite"}})]})}};return e.jsx("div",{className:`inline-flex items-center justify-center ${x}`,title:S,children:p()})}function fn({times:t}){const o=(t==null?void 0:t.startTime)!=null,s=(t==null?void 0:t.endTime)!=null,h=(t==null?void 0:t.firstTokenTime)!=null,x=o&&s?((t.endTime-t.startTime)/1e3).toFixed(2):null,u=o&&h?((t.firstTokenTime-t.startTime)/1e3).toFixed(2):null;return e.jsxs("div",{className:"text-[10px] text-slate-500",children:[e.jsx("span",{className:"text-slate-400",children:"TIME"})," ",x?`${x}s`:o&&!s?"...":"â€”",u&&e.jsxs("span",{className:"ml-2 text-slate-600",children:["TTFT ",u,"s"]})]})}const Wt=({text:t,speed:o=5})=>{const[s,h]=n.useState(""),x=n.useRef(0),u=n.useRef(null);return n.useEffect(()=>{!t.startsWith(s)&&s!==""&&(h(""),x.current=0)},[t]),n.useEffect(()=>{u.current!=null&&(clearTimeout(u.current),u.current=null);const S=t.length;if(x.current>=S)return;const g=()=>{const m=x.current,w=S-m;if(w<=0)return;const c=w>120?12:w>40?4:w>10?2:1,p=Math.min(S,m+c);x.current=p,h(t.slice(0,p));const P=S-p>5?0:o;u.current=window.setTimeout(g,P)};return u.current=window.setTimeout(g,o),()=>{u.current!=null&&(clearTimeout(u.current),u.current=null)}},[t,o]),e.jsx("span",{children:s})},bt=256,xn=200,Ve=96;function Hs(t){const{mode:o,selectedModels:s,gridCols:h,speaking:x,selectedCardIds:u,setSelectedCardIds:S,setActiveInspectorId:g,executionTimes:m,failedModels:w,cardRefs:c,handlePointerDown:p,dragState:T,setContextMenu:P,suppressClickRef:H,getTailSnippet:Q,hoveredCard:Y,setHoveredCard:i,layoutRadius:B,getCirclePosition:Z,moderatorModel:J,moderatorId:X,orchestratorTransform:ee,orchestratorStatus:V,orchestratorPhaseLabel:re,moderatorSynthesis:he,isSynthesizing:N,isGenerating:F,phaseLabel:O,linesTransitioning:je,lastSelectedCardRef:se,orchestratorAutoMode:E,orchestratorAutoScope:oe,showOrchestratorMenu:ie,setShowOrchestratorMenu:me,setOrchestratorAutoMode:Ne,setOrchestratorAutoScope:te,orchestratorMenuRef:ae,availableModels:be,setModerator:Me,councilWinnerId:Te}=t,ce=o!=="compare",Xe=o==="council"?B-64:0,Ze=V==="responding"?"Responding":V==="waiting"?"Waiting":V==="done"?"Done":"Ready",[Re,Le]=n.useState(null);return n.useEffect(()=>{if(!ie)return;const a=pe=>{ae.current&&!ae.current.contains(pe.target)&&(me(!1),Le(null))};return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[ie,ae,me]),e.jsxs(e.Fragment,{children:[s.map((a,pe)=>{var Fe;const fe=Z(pe,s.length,o,B),ve=Ys(pe,h),xe=x.has(a.id),ue=u.has(a.id),ge=w.has(a.id),Ae=!xe&&!ge&&!!((Fe=m[a.id])!=null&&Fe.endTime)&&a.response.trim().length>0,Ge=!xe&&!Ae&&!ge&&F&&o==="roundtable",Se=ge?"error":xe?"responding":Ae?"done":Ge?"waiting":"idle",_e=ge?"Error":xe?"Responding":Ae?"Done":Ge?"Waiting":"Ready",$e="#fbbf24",C="#ef4444",$=a.type==="local"?"#10b981":"#3b82f6",_=ge?C:$,z=xe&&!ge,I="rgba(30, 41, 59, 0.85)",A=ge?`linear-gradient(135deg, ${C}14, ${I})`:z?`linear-gradient(135deg, ${$e}14, ${I})`:I,R=ge?`1px solid ${C}99`:z?`1px solid ${$e}99`:ue?`1px solid ${$}d0`:"1px solid rgba(71, 85, 105, 0.5)",b=ge?`0 0 24px ${C}33, inset 0 1px 1px rgba(255,255,255,0.1)`:z?`0 0 24px ${$e}33, inset 0 1px 1px rgba(255,255,255,0.1)`:ue?`0 0 20px ${$}30, inset 0 1px 1px rgba(255,255,255,0.1)`:"0 4px 20px rgba(0,0,0,0.3), inset 0 1px 1px rgba(255,255,255,0.05)",f=Xs({mode:o,gridX:ve.gridX,gridY:ve.gridY,circleX:fe.x,circleY:fe.y,dragState:T,modelId:a.id}),k=Y===a.id,v=ce?Ve:bt,L=ce?Ve:xn,d=Math.max(800,B*2+600),W=d/2,G=W,K=W,ne=W+(0-fe.x),Be=W+(Xe-fe.y);return e.jsxs("div",{ref:le=>{le?c.current.set(a.id,le):c.current.delete(a.id)},onPointerDown:le=>p(le,a.id),className:"absolute",onContextMenu:le=>{le.preventDefault(),le.stopPropagation(),P({x:le.clientX,y:le.clientY,modelId:a.id})},style:{transform:f,zIndex:ce?k?300:ue?40:xe?15:5:ue?20:xe?10:1,left:"50%",top:ce?"50%":"0",transition:(T==null?void 0:T.activeId)===a.id?"none":"transform 300ms cubic-bezier(0.2, 0, 0.2, 1)"},children:[ce&&xe&&!ge&&!je&&e.jsxs("svg",{className:"absolute pointer-events-none",style:{width:`${d}px`,height:`${d}px`,top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:-1},viewBox:`0 0 ${d} ${d}`,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`grad-${a.id}`,gradientUnits:"userSpaceOnUse",x1:G,y1:K,x2:ne,y2:Be,children:[e.jsx("stop",{offset:"0%",stopColor:$e,stopOpacity:"0.45"}),e.jsx("stop",{offset:"100%",stopColor:$e,stopOpacity:"0.12"})]})}),e.jsx("line",{x1:G,y1:K,x2:ne,y2:Be,stroke:`url(#grad-${a.id})`,strokeWidth:"2",strokeDasharray:"6,4",strokeLinecap:"round",className:"animate-flow arena-link"})]}),e.jsxs("div",{"data-card":!0,onClick:le=>Gs({e:le,modelId:a.id,suppressClickRef:H,setSelectedCardIds:S,selectedModels:s,lastSelectedCardRef:se}),onDoubleClick:le=>Fs({e:le,modelId:a.id,setActiveInspectorId:g}),onMouseEnter:()=>ce&&i(a.id),onMouseLeave:()=>ce&&i(null),className:`relative cursor-grab active:cursor-grabbing card-hover ${ce?"rounded-full":""} ${ue?"card-selected":""} ${xe?"card-speaking":""}`,style:{background:A,backdropFilter:ce?void 0:"blur(8px)",WebkitBackdropFilter:ce?void 0:"blur(8px)",border:R,boxShadow:b,transform:ue||z?"scale(1.05)":"scale(1)",width:`${v}px`,height:`${L}px`,borderRadius:ce?"50%":"12px",transition:"transform 180ms ease-out, box-shadow 180ms ease-out, border-color 180ms ease-out, width 0.7s cubic-bezier(0.4, 0, 0.2, 1), height 0.7s cubic-bezier(0.4, 0, 0.2, 1), border-radius 0.7s cubic-bezier(0.4, 0, 0.2, 1)"},children:[!ce&&e.jsxs("div",{style:Vs,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[e.jsx(Bt,{state:Se,color:_,size:16,label:_e}),e.jsx("span",{className:"text-xs font-semibold text-slate-200 truncate",children:a.name})]}),e.jsx("div",{className:"flex items-center gap-1.5 shrink-0",children:e.jsx("span",{className:`text-[9px] uppercase tracking-wider px-1.5 py-0.5 rounded ${a.type==="local"?"bg-emerald-500/10 text-emerald-300 border border-emerald-500/30":"bg-blue-500/10 text-blue-300 border border-blue-500/30"}`,children:a.type==="local"?"Local":"API"})})]}),e.jsx("p",{className:"text-xs text-slate-400 leading-relaxed line-clamp-3 flex-1",children:Us({model:a,isSpeaking:xe,thinkingFallback:e.jsx("span",{className:"text-slate-500 italic",children:"Thinkingâ€¦"}),getTailSnippet:Q})}),e.jsx("div",{className:"flex items-center gap-4 mt-3 pt-3 border-t border-slate-700/50",children:e.jsx(fn,{times:m[a.id]})})]}),ce&&e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-center",style:{transition:"opacity 0.3s ease-out"},children:[e.jsx("div",{className:"absolute inset-[3px] rounded-full border border-white/5",style:{boxShadow:`inset 0 0 20px ${_}15`}}),e.jsx("div",{className:"absolute inset-[-6px] rounded-full opacity-60",style:{background:`radial-gradient(circle, ${_}22 0%, transparent 65%)`,filter:"blur(10px)"}}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center gap-1.5 px-3",children:[e.jsx("div",{className:"text-[7px] tracking-[0.32em] text-slate-400 uppercase",children:_e}),e.jsx("div",{className:"text-[10px] font-semibold text-slate-100 leading-tight",children:a.name}),e.jsx(Bt,{state:Se,color:_,size:12})]})]})]}),o==="personality"&&ce&&a.personaEmoji&&e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 flex items-center justify-center pointer-events-none select-none",style:{bottom:"-12px",fontSize:"20px",zIndex:100,transition:"transform 180ms ease-out",transform:xe?"scale(1.15)":"scale(1)",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.5)) drop-shadow(0 0 8px rgba(0,0,0,0.3))"},title:a.personaName?`${a.personaName} - ${a.personaTrait}`:"Persona",children:a.personaEmoji}),o==="council"&&ce&&Te===a.id&&!F&&!N&&e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 flex items-center justify-center pointer-events-none select-none",style:{bottom:"-12px",fontSize:"20px",zIndex:100,filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.5)) drop-shadow(0 0 12px rgba(251, 191, 36, 0.4))",animation:"pulse 2s ease-in-out infinite"},title:"Top Ranked Response",children:"ðŸ†"}),ce&&Y===a.id&&e.jsxs("div",{"data-card":!0,onClick:le=>le.stopPropagation(),className:"absolute w-64 max-w-[calc(100vw-2rem)] p-4 rounded-xl transition-all duration-300 z-[220]",style:{top:fe.y>0?"auto":"100%",bottom:fe.y>0?"100%":"auto",left:"50%",transform:"translateX(-50%)",marginTop:fe.y>0?0:"12px",marginBottom:fe.y>0?"12px":0,background:"rgba(15, 23, 42, 0.95)",backdropFilter:"blur(16px)",border:`1px solid ${_}40`,boxShadow:`0 20px 40px rgba(0,0,0,0.5), 0 0 20px ${_}15`},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{background:_}}),e.jsx("span",{className:"text-xs font-semibold text-slate-300",children:a.name})]}),o==="personality"&&a.personaEmoji&&a.personaName&&e.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b border-slate-700/50",children:[e.jsx("span",{className:"text-base",children:a.personaEmoji}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs font-semibold text-blue-400",children:a.personaName}),a.personaTrait&&e.jsx("div",{className:"text-[10px] text-slate-500",children:a.personaTrait})]})]}),e.jsx("p",{className:"text-xs text-slate-400 leading-relaxed whitespace-pre-wrap",children:qs({model:a,isSpeaking:xe,getTailSnippet:Q})}),e.jsx("div",{className:"flex items-center gap-4 mt-3 pt-2 border-t border-slate-700/50",children:e.jsx(fn,{times:m[a.id]})})]})]},a.id)}),o!=="compare"&&J&&e.jsxs("div",{"data-card":!0,className:"absolute z-20 transition-all duration-700 ease-out cursor-pointer",style:{opacity:1,transform:ee,left:"50%",top:o==="council"?`calc(50% + ${B}px - 64px)`:"50%"},onClick:a=>{a.stopPropagation(),X&&(S(new Set([X])),se.current=X)},onDoubleClick:a=>{a.stopPropagation(),X&&g(X)},onContextMenu:a=>{a.preventDefault(),a.stopPropagation(),ie?(me(!1),Le(null)):(Le({x:a.clientX,y:a.clientY}),me(!0))},onMouseEnter:()=>i("moderator"),onMouseLeave:()=>i(null),children:[e.jsx("div",{className:"relative flex items-center justify-center",style:{width:`${Ve}px`,height:`${Ve}px`},children:(()=>{const a=V==="responding",pe=a?"#fbbf24":J.color;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 rounded-full animate-pulse",style:{background:`radial-gradient(circle, ${pe}20 0%, transparent 70%)`,transform:"scale(2.2)",filter:"blur(18px)"}}),e.jsxs("div",{className:"relative rounded-full flex items-center justify-center transition-all duration-300",style:{width:`${Ve}px`,height:`${Ve}px`,background:a?"linear-gradient(135deg, rgba(251, 191, 36, 0.08), rgba(15, 23, 42, 0.9))":"rgba(15, 23, 42, 0.9)",backdropFilter:"blur(16px)",border:`2px solid ${pe}${a?"99":"60"}`,boxShadow:`0 0 36px ${pe}${a?"40":"28"}, inset 0 1px 1px rgba(255,255,255,0.1)`},children:[e.jsx("div",{className:"absolute inset-[-4px] rounded-full",style:{background:`conic-gradient(from 0deg, transparent, ${pe}60, transparent)`,animation:"spin 4s linear infinite"}}),e.jsx("div",{className:"absolute inset-[2px] rounded-full",style:{background:"rgba(15, 23, 42, 0.96)"}}),e.jsxs("div",{className:"relative text-center z-10 flex flex-col items-center gap-1.5 px-3",children:[e.jsx("div",{className:"text-[7px] tracking-[0.32em] text-slate-400 uppercase",children:Ze}),e.jsx("div",{className:"text-[10px] font-semibold text-slate-100 leading-tight",children:J.name}),e.jsx(Bt,{state:V,color:pe,size:12})]})]})]})})()}),e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 flex flex-col items-center gap-1 w-max max-w-[200px]",style:{top:"calc(100% + 12px)"},children:e.jsx("span",{className:"text-[10px] text-slate-500",children:re})}),Y==="moderator"&&!ie&&(()=>{const a=V==="responding",pe=a?"#fbbf24":J.color;return e.jsxs("div",{"data-card":!0,onClick:fe=>fe.stopPropagation(),className:"absolute bottom-full mb-4 left-1/2 -translate-x-1/2 w-80 max-w-[calc(100vw-2rem)] p-4 rounded-xl z-[200] transition-all duration-300",style:{background:"rgba(15, 23, 42, 0.95)",backdropFilter:"blur(16px)",border:`1px solid ${pe}40`,boxShadow:`0 20px 40px rgba(0,0,0,0.5), 0 0 30px ${pe}20`},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider",children:"Orchestrator"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Â·"}),e.jsx("span",{className:"text-xs font-medium text-slate-300",children:J.name}),a&&e.jsx("span",{className:"text-[9px] uppercase tracking-wider px-1.5 py-0.5 rounded bg-yellow-500/20 text-yellow-300 border border-yellow-500/30",children:"Working"})]}),e.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:Ks({moderatorSynthesis:he,isSynthesizing:N,moderatorId:X,speaking:x,phaseLabel:O,isGenerating:F,getTailSnippet:Q})})]})})(),ie&&Re&&rs.createPortal(e.jsx("div",{ref:ae,className:"w-64 bg-slate-800 border border-slate-700 rounded-lg shadow-xl overflow-hidden",style:{position:"fixed",top:`${Re.y}px`,left:`${Re.x}px`,transform:"translateY(-50%)",zIndex:9999},onClick:a=>a.stopPropagation(),children:E?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-3 py-2 text-[10px] uppercase tracking-wider text-slate-500 font-semibold border-b border-slate-700/50",children:["Auto Mode: ",oe.toUpperCase()]}),["all","local","api"].map(a=>e.jsxs("button",{onClick:()=>{te(a),me(!1)},className:`w-full px-3 py-2 text-left text-xs font-medium transition-colors ${oe===a?"bg-yellow-500/20 text-yellow-300":"text-slate-300 hover:bg-slate-700/50"}`,children:[a==="all"&&"All",a==="local"&&"Local",a==="api"&&"API",e.jsxs("span",{className:"text-[10px] text-slate-500 ml-1",children:[a==="all"&&"(local â†’ API)",a==="local"&&"(no quota)",a==="api"&&"(cloud only)"]})]},a)),e.jsx("div",{className:"border-t border-slate-700",children:e.jsx("button",{onClick:()=>{Ne(!1),me(!1)},className:"w-full px-3 py-2 text-left text-xs font-medium text-slate-400 hover:bg-slate-700/50 transition-colors",children:"Manual Mode"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 py-2 text-[10px] uppercase tracking-wider text-slate-500 font-semibold border-b border-slate-700/50",children:"Select Orchestrator"}),be.filter(a=>a.type==="api").length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 py-1.5 text-[9px] uppercase tracking-wider text-slate-600 font-semibold",children:"API Models"}),be.filter(a=>a.type==="api").map(a=>e.jsx("button",{onClick:()=>{Me(a.id),me(!1)},className:`w-full px-4 py-2 text-left text-xs font-medium transition-colors ${X===a.id?"bg-blue-500/20 text-blue-300":"text-slate-300 hover:bg-slate-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:a.name}),X===a.id&&e.jsx("span",{className:"text-blue-400",children:"âœ“"})]})},a.id))]}),be.filter(a=>a.type==="local").length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 py-1.5 text-[9px] uppercase tracking-wider text-slate-600 font-semibold border-t border-slate-700/50 mt-1",children:"Local Models"}),be.filter(a=>a.type==="local").map(a=>e.jsx("button",{onClick:()=>{Me(a.id),me(!1)},className:`w-full px-4 py-2 text-left text-xs font-medium transition-colors ${X===a.id?"bg-blue-500/20 text-blue-300":"text-slate-300 hover:bg-slate-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:a.name}),X===a.id&&e.jsx("span",{className:"text-blue-400",children:"âœ“"})]})},a.id))]}),e.jsx("div",{className:"border-t border-slate-700",children:e.jsxs("button",{onClick:()=>{Ne(!0),me(!1)},className:"w-full px-3 py-2 text-left text-xs font-medium text-yellow-400 hover:bg-slate-700/50 transition-colors flex items-center gap-2",children:[e.jsx(os,{size:12}),e.jsx("span",{children:"Enable Auto Mode"})]})})]})}),document.body)]}),o!=="compare"&&e.jsxs("svg",{className:"absolute pointer-events-none transition-opacity duration-700",style:{width:"1000px",height:"1000px",opacity:.2},children:[e.jsx("circle",{cx:"500",cy:"500",r:B,fill:"none",stroke:"url(#circleGrad)",strokeWidth:"1",strokeDasharray:"8,4"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"circleGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),e.jsx("stop",{offset:"50%",stopColor:"#8b5cf6"}),e.jsx("stop",{offset:"100%",stopColor:"#3b82f6"})]})})]})]})}function Ys(t,o){const s=Math.floor(t/o),h=t%o,x=(bt+de.gapX)*o-de.gapX,u=s*(xn+de.gapY);return{gridX:h*(bt+de.gapX)-x/2+bt/2,gridY:u}}function Xs({mode:t,gridX:o,gridY:s,circleX:h,circleY:x,dragState:u,modelId:S}){if((u==null?void 0:u.activeId)===S){const g=u.currX+u.offsetX,m=u.currY+u.offsetY;if(t==="compare"){const p=g-(u.containerLeft+u.containerWidth/2),T=m-u.containerTop-u.cardHeight/2;return`translate(calc(-50% + ${p}px), ${T}px)`}const w=g-(u.containerLeft+u.containerWidth/2),c=m-(u.containerTop+u.containerHeight/2);return`translate(calc(-50% + ${w}px), calc(-50% + ${c}px))`}return t==="compare"?`translate(calc(-50% + ${o}px), ${s}px)`:`translate(calc(-50% + ${h}px), calc(-50% + ${x}px))`}function Gs({e:t,modelId:o,suppressClickRef:s,setSelectedCardIds:h,selectedModels:x,lastSelectedCardRef:u}){if(t.stopPropagation(),s.current.card){s.current.card=!1;return}const S=t.shiftKey,g=t.metaKey||t.ctrlKey;if(S&&u.current){const m=x.findIndex(c=>c.id===u.current),w=x.findIndex(c=>c.id===o);if(m!==-1&&w!==-1){const c=Math.min(m,w),p=Math.max(m,w),T=x.slice(c,p+1).map(P=>P.id);h(P=>{const H=new Set(P);return T.forEach(Q=>H.add(Q)),H})}}else g?(h(m=>{const w=new Set(m);return w.has(o)?w.delete(o):w.add(o),w}),u.current=o):(h(new Set([o])),u.current=o)}function Fs({e:t,modelId:o,setActiveInspectorId:s}){t.stopPropagation(),s(o)}function Us({model:t,isSpeaking:o,thinkingFallback:s,getTailSnippet:h}){return t.statusMessage?t.statusMessage.startsWith("<svg")?e.jsx("span",{dangerouslySetInnerHTML:{__html:t.statusMessage}}):t.statusMessage:o?t.response.trim().length>0?t.response.startsWith("<svg")?e.jsx("span",{dangerouslySetInnerHTML:{__html:t.response}}):e.jsx(Wt,{text:t.response,speed:20}):t.thinking&&t.thinking.trim().length>0?e.jsxs("span",{children:[e.jsx("span",{className:"text-slate-500 italic",children:"Thinkingâ€¦ "}),h(t.thinking.trim(),220)]}):s:t.response.startsWith("<svg")?e.jsx("span",{dangerouslySetInnerHTML:{__html:t.response}}):t.response}function qs({model:t,isSpeaking:o,getTailSnippet:s,maxChars:h=220}){return t.statusMessage?t.statusMessage.startsWith("<svg")?e.jsx("span",{dangerouslySetInnerHTML:{__html:t.statusMessage}}):t.statusMessage:o?t.response.trim().length>0?t.response.startsWith("<svg")?e.jsx("span",{dangerouslySetInnerHTML:{__html:t.response}}):e.jsx(Wt,{text:t.response,speed:20}):t.thinking&&t.thinking.trim().length>0?e.jsxs("span",{children:[e.jsx("span",{className:"text-slate-500 italic",children:"Thinkingâ€¦ "}),s(t.thinking.trim(),280)]}):e.jsx("span",{className:"text-slate-500 italic",children:"Thinkingâ€¦"}):t.response?t.response.startsWith("<svg")?e.jsx("span",{dangerouslySetInnerHTML:{__html:t.response}}):s(t.response,h):e.jsx("span",{className:"text-slate-500 italic",children:"No response yet."})}function Ks({moderatorSynthesis:t,isSynthesizing:o,moderatorId:s,speaking:h,phaseLabel:x,isGenerating:u,getTailSnippet:S}){return t?o&&s&&h.has(s)?e.jsx(Wt,{text:t,speed:20}):S(t):o?e.jsx("span",{className:"text-slate-500 italic",children:"Synthesizing responses..."}):u?x&&x.startsWith("<svg")?e.jsx("span",{className:"text-slate-500 italic",dangerouslySetInnerHTML:{__html:x}}):e.jsx("span",{className:"text-slate-500 italic",children:x==="Stage 1 Â· Responses"?"Waiting for model responses...":x||"Orchestrating..."}):e.jsx("span",{className:"text-slate-500 italic",children:"Send a prompt to see the synthesis."})}const Vs={padding:"16px",height:"100%",display:"flex",flexDirection:"column",isolation:"isolate",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",opacity:1,transition:"opacity 0.3s ease-out"};function Qs({rect:t}){return t?e.jsx("div",{className:"absolute pointer-events-none z-40",style:{left:t.left,top:t.top,width:t.width,height:t.height,border:"2px solid rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)"}}):null}const Zs={twoFingerTapWindow:500,twoFingerTapCooldown:400,twoFingerMinFrames:4,minPointingTime:100,dwellTime:1200,cursorSmoothing:.5},gn=n.createContext(null);function Js({children:t}){const[o,s]=n.useState(!1),[h,x]=n.useState("navigation"),[u,S]=n.useState("chat"),[g,m]=n.useState(Zs),[w,c]=n.useState(!1),p=n.useRef({}),T=n.useCallback(N=>{p.current=N},[]),[P,H]=n.useState({gesture:null,progress:0,triggered:!1}),[Q,Y]=n.useState(null),[i,B]=n.useState(void 0),[Z,J]=n.useState(void 0),[X,ee]=n.useState(void 0),[V,re]=n.useState(null),he={isActive:o,setIsActive:s,gestureMode:h,setGestureMode:x,appContext:u,setAppContext:S,gestureConfig:g,setGestureConfig:m,mouseSimulation:w,setMouseSimulation:c,callbacks:p,setCallbacks:T,gestureState:P,setGestureState:H,aslResult:Q,setASLResult:Y,debugInfo:i,setDebugInfo:B,landmarkData:Z,setLandmarkData:J,performanceMetrics:X,setPerformanceMetrics:ee,cameraError:V,setCameraError:re};return e.jsx(gn.Provider,{value:he,children:t})}function er(){const t=n.useContext(gn);if(!t)throw new Error("useGesture must be used within a GestureProvider");return t}class tr extends n.Component{constructor(s){super(s);cn(this,"handleRetry",()=>{var s,h;this.setState({hasError:!1,error:null}),(h=(s=this.props).onRetry)==null||h.call(s)});this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,h){console.error("ErrorBoundary caught an error:",s,h)}render(){var s;return this.state.hasError?this.props.fallback?this.props.fallback:e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-white/70 gap-4 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-400",children:[e.jsx(ws,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:"Something went wrong"})]}),e.jsx("p",{className:"text-xs text-white/40 text-center max-w-xs",children:((s=this.state.error)==null?void 0:s.message)||"Failed to load component"}),e.jsxs("button",{onClick:this.handleRetry,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white/80 bg-slate-700/50 hover:bg-slate-600/50 rounded-lg transition-all active:scale-95 border border-slate-600/50",children:[e.jsx(is,{size:14}),"Try Again"]})]}):this.props.children}}const nr=n.lazy(()=>ze(()=>import("./ResponseInspector.js"),__vite__mapDeps([0,1,2,3]))),sr=n.lazy(()=>ze(()=>import("./SettingsModal.js"),__vite__mapDeps([4,1,2]))),rr=n.lazy(()=>ze(()=>import("./TopicsDrawer.js"),__vite__mapDeps([5,1,2,6,7]))),hn=n.lazy(()=>ze(()=>import("./DiscussionTranscript.js"),__vite__mapDeps([8,1,2,3,9,10]))),or=n.lazy(()=>ze(()=>import("./GestureControl.js"),__vite__mapDeps([11,1,2,12,7,10]))),ir=n.lazy(()=>ze(()=>import("./HandBackground.js"),__vite__mapDeps([13,1,2]))),ar=n.lazy(()=>ze(()=>import("./ChatView.js"),__vite__mapDeps([14,1,2,3,15,16,6])).then(t=>({default:t.default}))),lr=n.lazy(()=>ze(()=>import("./GesturePanel.js"),__vite__mapDeps([17,1,2,15]))),cr='button, input, textarea, select, a, [role="button"], [data-no-background], [data-card]';function ur(){var an;const t=er();as();const{modelsData:o,setModelsData:s,selected:h,setSelected:x,chatModelId:u,setChatModelId:S,moderator:g,setModerator:m,availableModels:w,totalModelsByType:c,allSelectedByType:p,modelIdToName:T,isLoading:P,loadError:H,retryCount:Q,retryNow:Y}=Ts(),[i,B]=Qe("playground_mode","chat",{serialize:r=>r,deserialize:(r,l)=>["chat","compare","council","roundtable","personality"].includes(r)?r:l}),[Z,J]=n.useState(!1),X=n.useRef(null),[ee,V]=n.useState(null),[re,he]=n.useState(!1),[N,F]=n.useState(!1),[O,je]=n.useState(2),se=n.useRef(0),E=n.useRef(0),oe=n.useRef(null),[ie,me]=n.useState(!1),[Ne,te]=n.useState(!1),[ae,be]=Qe("github_models_token","",{serialize:r=>r||null,deserialize:(r,l)=>r??l}),[Me,Te]=n.useState("right"),[ce,Xe]=Qe("show_council_reviewer_names",!1,{serialize:r=>String(r),deserialize:r=>r==="true"}),[Ze,Re]=n.useState({}),Le=n.useRef(null),a=n.useRef(null),[pe,fe]=n.useState(""),[ve,xe]=n.useState(null),ue=n.useRef(null),ge=n.useCallback(r=>{ue.current&&clearTimeout(ue.current),xe(r),ue.current=window.setTimeout(()=>{xe(null),ue.current=null},5e3)},[]),Ae=n.useCallback(r=>{if(i==="chat"||ae)return!0;const l=o.find(y=>y.id===r);return!l||l.type!=="api"},[i,ae,o]),Ge=n.useCallback(()=>!!(i==="chat"||ae),[i,ae]),[Se,_e]=n.useState([]),[$e,C]=n.useState(!0),[$,_]=n.useState("api"),[z,I]=n.useState(""),[A,R]=n.useState(!1),[b,f]=n.useState(null),{history:k,historyRef:v,pushHistoryEntries:L,clearHistory:d,historyToText:W,buildCarryoverHistory:G}=_s(),K=(r,l)=>{const y=new Set,j=l.filter(Boolean).filter((D,U,q)=>q.indexOf(D)===U),M=[];return j.forEach(D=>{const U=r[D];U&&U.trim()&&(M.push({id:D,text:U.trim()}),y.add(D))}),Object.entries(r).forEach(([D,U])=>{y.has(D)||!U||!U.trim()||M.push({id:D,text:U.trim()})}),M.length?M.map(({id:D,text:U})=>`${T(D)}:
${U}`).join(`

`):null},ne=h.map(r=>o.find(l=>l.id===r)).filter(r=>!!r&&(i==="compare"||r.id!==g)),Be=(r,l,y,j)=>{if(y==="council"){const ht=250+r*220/(l-1)-90,mt=ht*Math.PI/180;return{x:Math.cos(mt)*j,y:Math.sin(mt)*j,angle:ht}}const M=r*360/l-90,D=Math.cos(M*Math.PI/180)*j,U=Math.sin(M*Math.PI/180)*j;return{x:D,y:U,angle:M}},Fe=(r,l)=>{V(l),r.dataTransfer.effectAllowed="move"},le=r=>{r.preventDefault(),he(!0)},De=()=>{he(!1)},bn=r=>{if(r.preventDefault(),he(!1),ee){if(i==="chat")S(ee);else if(!h.includes(ee)){if(!Ae(ee)){ge("Add your GitHub token in Settings for API model access with dedicated quota"),V(null);return}x(l=>[...l,ee])}V(null)}},vt=r=>{if(i==="chat"){S(u===r?null:r);return}if(h.includes(r))if(Ye&&kt.current.includes(r)&&pe){a.current&&a.current.abort();const y=kt.current.filter(M=>M!==r),j={};if(o.forEach(M=>{y.includes(M.id)&&M.response&&!M.error&&(j[M.id]=M.response)}),x(M=>M.filter(D=>D!==r)),Ce.has(r)&&it(M=>{const D=new Set(M);return D.delete(r),D}),i==="council"&&y.length<2){nt(!1),ut(!1),Ct("Council requires at least 2 participants."),_t("Error");return}Lt(pe,j,y,{skipHistory:!0})}else x(y=>y.filter(j=>j!==r));else{if(!Ae(r)){ge("Add your GitHub token in Settings for API model access with dedicated quota");return}x(l=>[...l,r])}},vn=r=>{const l=o.filter(M=>M.type===r).map(M=>M.id);if(l.length>0&&l.every(M=>h.includes(M))){x(M=>M.filter(D=>!l.includes(D)));return}if(r==="api"&&!Ge()){ge("Add your GitHub token in Settings for API model access with dedicated quota");return}const j=w.filter(M=>M.type===r).map(M=>M.id);j.length>0&&x(M=>[...M,...j])},[yn,Ue]=n.useState(null),[yt,Ht]=n.useState(new Set),[wn,Yt]=n.useState(!1),{selectedCardIds:Ce,setSelectedCardIds:it,activeInspectorId:We,setActiveInspectorId:Je,clearInspectorSelection:He}=Ps(),[at,kn]=n.useState(null),wt=n.useMemo(()=>{if(i==="compare")return 0;const r=Math.max(de.baseRadius,de.minRadius+ne.length*de.radiusPerModel);if(!at)return r;const y=Math.min(at.width,at.height)/2-140;return Math.max(r,y)},[i,ne.length,at]);n.useEffect(()=>{const r=()=>{if(!ye.current)return;const{clientWidth:y,clientHeight:j}=ye.current;let M=Math.floor(y/(de.cardWidth+de.gapX));M=Math.max(1,M),je(M),kn({width:y,height:j})},l=new ResizeObserver(y=>{for(let j of y)j.target===ye.current&&r()});return ye.current&&(l.observe(ye.current),r()),()=>{ye.current&&l.unobserve(ye.current)}},[i,We,Me]);const Pe=n.useRef(null),ye=n.useRef(null),Ee=n.useRef(null),Xt=n.useRef(null),lt=n.useRef(new Map),jn=n.useRef(null),et=n.useRef({card:!1,background:!1}),Sn=n.useRef({}),kt=n.useRef([]),{enqueueStreamDelta:Mn,clearPendingStreamForModel:Cn,resetPendingStream:jt}=Is(s),{selectionRect:En,isSelecting:St,dragSelectionActiveRef:Gt}=Ls({rootContainerRef:Xt,visualizationAreaRef:ye,arenaOffsetYRef:se,arenaTargetYRef:E,wheelRafRef:oe,selectedModels:ne,cardRefs:lt,selectedCardIds:Ce,setSelectedCardIds:it,setActiveInspectorId:Je,suppressClickRef:et}),Nn=r=>{i==="chat"&&Ee.current?Ee.current.setInput(r):Pe.current&&(Pe.current.value=r,Pe.current.focus(),Yt(!0)),te(!1)},{dragState:Tn,handlePointerDown:_n}=As({visualizationAreaRef:ye,cardRefs:lt,selected:h,setSelected:x,mode:i,gridCols:O,getCirclePosition:Be});n.useEffect(()=>()=>jt(),[jt]);const[we,Oe]=n.useState(null);n.useEffect(()=>{const r="arena-selecting",l=document.body;return St?l.classList.add(r):l.classList.remove(r),()=>{l.classList.remove(r)}},[St]);const ct=n.useCallback(r=>r?!r.closest(cr):!1,[]),In=n.useCallback(r=>{if(ct(r.target)){if(et.current.background){et.current.background=!1;return}Ue(null),He(),et.current.background=!1}},[ct,He]),Rn=n.useCallback(r=>{ct(r.target)&&(r.preventDefault(),Oe({x:r.clientX,y:r.clientY,type:"background"}))},[ct]),Ft=n.useCallback(()=>{J(!0),X.current&&clearTimeout(X.current),X.current=window.setTimeout(()=>{J(!1),X.current=null},350)},[]),tt=n.useCallback(r=>{r!==i&&(Ft(),nt(!1),B(r))},[i,Ft]);n.useEffect(()=>()=>{ue.current&&clearTimeout(ue.current)},[]),n.useEffect(()=>()=>{X.current&&clearTimeout(X.current)},[]),n.useEffect(()=>{const r=()=>Oe(null);return window.addEventListener("click",r),()=>window.removeEventListener("click",r)},[]);const[Ye,nt]=n.useState(!1),[st,ut]=n.useState(!1),[Mt,Ct]=n.useState(""),Ln=n.useCallback(()=>{d(),nt(!1),ut(!1),Ct(""),_t(null),qt(null),Kt([]),Vt({}),s(r=>r.map(l=>({...l,response:"Ready to generate...",thinking:void 0,error:void 0}))),Re({}),Ht(new Set)},[d,s]),[An,$n]=n.useState(!0),[Pn,Dn]=n.useState("api"),[Et,Nt]=n.useState(!1),Tt=n.useRef(null);n.useEffect(()=>{const r=y=>{Tt.current&&!Tt.current.contains(y.target)&&Nt(!1)},l=y=>{y.key==="Escape"&&Nt(!1)};return Et&&(document.addEventListener("mousedown",r),document.addEventListener("keydown",l)),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("keydown",l)}},[Et]);const[Ut,_t]=n.useState(null),[dt,qt]=n.useState(null),[On,Kt]=n.useState([]),[zn,Vt]=n.useState({}),[Bn,Qt]=n.useState(new Set),It=n.useRef(new Set),Wn=n.useRef(null),Zt=n.useRef({}),Jt=n.useRef(i),[Rt,en]=n.useState(null),Hn=()=>{const r=new Set;It.current=r,Qt(r)},Yn=r=>{Qt(l=>{if(l.has(r))return l;const y=new Set(l);return y.add(r),It.current=y,y})},{sendMessage:Lt}=Rs({mode:i,moderator:g,selected:h,selectedCardIds:Ce,githubToken:ae,isGenerating:Ye,summarizeSessionResponses:K,setLastQuery:fe,setHoveredCard:Ue,setPhaseLabel:_t,setModeratorSynthesis:Ct,setCouncilAggregateRankings:qt,setCouncilAnonymousReviews:Kt,setDiscussionTurnsByModel:Vt,resetFailedModels:Hn,markModelFailed:Yn,failedModelsRef:It,currentDiscussionTurnRef:Wn,sessionModelIdsRef:kt,abortControllerRef:a,thinkingStateRef:Sn,conversationHistoryRef:v,pushHistoryEntries:L,historyToText:W,buildCarryoverHistory:G,setModelsData:s,modelIdToName:T,setExecutionTimes:Re,setIsGenerating:nt,setIsSynthesizing:ut,setSpeaking:Ht,enqueueStreamDelta:Mn,clearPendingStreamForModel:Cn,resetPendingStream:jt});n.useEffect(()=>{const r=l=>{if(l.key==="Escape"){const j=document.activeElement;if(j&&j!==document.body&&j.blur(),ie){me(!1);return}if(Ne){te(!1);return}if(we){Oe(null);return}if(We||Ce.size>0){He(),Ue(null);return}if(N){F(!1);return}Ue(null);return}if((l.metaKey||l.ctrlKey)&&(l.key==="a"||l.key==="A")){const j=l.target;if(j.tagName==="INPUT"||j.tagName==="TEXTAREA"||i==="chat")return;l.preventDefault(),h.length>0&&it(new Set(h));return}const y=l.target;if(!(y.tagName==="INPUT"||y.tagName==="TEXTAREA")){if(l.key==="ArrowRight"||l.key==="ArrowLeft"){l.preventDefault();const j=["chat","compare","council","roundtable","personality"],M=j.indexOf(i);if(M!==-1){const D=l.key==="ArrowRight"?1:-1,U=(M+D+j.length)%j.length;tt(j[U])}return}if(l.key==="m"||l.key==="M"){l.preventDefault(),F(!N);return}if((l.key==="Delete"||l.key==="Backspace")&&Ce.size>0){l.preventDefault(),x(j=>j.filter(M=>!Ce.has(M))),He();return}if(l.key==="Enter"&&Ce.size>=1){l.preventDefault();const j=Array.from(Ce)[0];Je(j);return}l.key.length===1&&!l.ctrlKey&&!l.metaKey&&!l.altKey&&Pe.current&&Pe.current.focus()}};return window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}},[N,ie,Ne,we,We,Ce,i,tt,He]);const pt=n.useRef(!1),At=n.useRef(0),tn=r=>{const l=ye.current;l&&l.style.setProperty("--arena-offset-y",`${r}px`)},$t=r=>Math.max(-200,Math.min(de.scrollClamp,r)),nn=()=>{const r=se.current,l=E.current,y=l-r;if(Math.abs(y)<.5){se.current=l,tn(l),oe.current=null;return}const j=r+y*.35;se.current=j,tn(j),oe.current=requestAnimationFrame(nn)},Pt=()=>{oe.current==null&&(oe.current=requestAnimationFrame(nn))};n.useEffect(()=>{const r=D=>{if(Gt.current)return;const U=D.target;if(U&&U.closest("input, textarea, [data-no-arena-scroll]"))return;D.preventDefault();const q=D.deltaY*.9,ke=E.current-q;E.current=$t(ke),Pt()},l=D=>D?!!D.closest('input, textarea, [data-no-arena-scroll], [data-card], button, a, select, [role="button"]'):!1,y=D=>{if(D.touches.length!==1)return;const U=D.target;l(U)||(pt.current=!0,At.current=D.touches[0].clientY)},j=D=>{if(Gt.current||!pt.current||D.touches.length!==1)return;const U=D.target;if(l(U)){pt.current=!1;return}const q=D.touches[0].clientY,ke=q-At.current;At.current=q,D.preventDefault(),E.current=$t(E.current+ke),Pt()},M=()=>{pt.current=!1};return window.addEventListener("touchstart",y,{passive:!0}),window.addEventListener("touchmove",j,{passive:!1}),window.addEventListener("touchend",M),window.addEventListener("touchcancel",M),window.addEventListener("wheel",r,{passive:!1}),()=>{window.removeEventListener("touchstart",y),window.removeEventListener("touchmove",j),window.removeEventListener("touchend",M),window.removeEventListener("touchcancel",M),window.removeEventListener("wheel",r),oe.current!=null&&cancelAnimationFrame(oe.current)}},[]);const[ft,Xn]=Qe("playground-bg-style","dots",{serialize:r=>r,deserialize:(r,l)=>r&&qe.includes(r)?r:l}),sn=r=>{const l=qe.indexOf(ft),y=r==="next"?(l+1)%qe.length:(l-1+qe.length)%qe.length;Xn(qe[y])},Gn=o.find(r=>r.id===g),rn=o.filter(r=>Ce.has(r.id)),Fn=st?"responding":Ye?"waiting":Mt?"done":"idle",Un=st?"Synthesizing...":Ye?"Observing":Mt?"Complete":"Ready",qn=`${Rt?`translate(-50%, -50%) translate(${Rt.x}px, ${Rt.y}px)`:"translate(-50%, -50%)"} scale(1)`;n.useLayoutEffect(()=>{if(i!=="compare")return;const r={};ne.forEach(l=>{const y=lt.current.get(l.id);y&&(r[l.id]=y.getBoundingClientRect())}),Zt.current=r},[i,ne.length,ne.map(r=>r.id).join(",")]),n.useEffect(()=>{if(Jt.current==="compare"&&i!=="compare"&&g&&ye.current){const l=Zt.current[g],y=ye.current.getBoundingClientRect();if(l&&y.width>0&&y.height>0){const j=y.left+y.width/2,M=i==="council"?wt-64:0,D=y.top+(y.height*.5+M),U=l.left+l.width/2-j,q=l.top+l.height/2-D;(Math.abs(U)>1||Math.abs(q)>1)&&(en({x:U,y:q}),requestAnimationFrame(()=>en(null)))}}Jt.current=i},[i,g,wt]);const Kn=ft==="none"?"":`bg-${ft}`,Vn=(r,l=280)=>r?r.length<=l?r:`â€¦${r.slice(r.length-l)}`:"",on=()=>{a.current&&(a.current.abort(),nt(!1),ut(!1))};return e.jsxs("div",{ref:Xt,className:`fixed inset-0 overflow-hidden text-white ${Kn}`,style:{backgroundColor:dn[i],transition:"background-color 1s ease",...ft==="none"?{background:dn[i]}:{},...St?{userSelect:"none",WebkitUserSelect:"none"}:{}},onClick:In,onContextMenu:Rn,children:[t.isActive&&!t.mouseSimulation&&e.jsx(n.Suspense,{fallback:null,children:e.jsx(ir,{onStopGeneration:t.callbacks.current.onStopGeneration,onSendMessage:t.callbacks.current.onSendMessage,onScroll:t.callbacks.current.onScroll,onPinch:t.callbacks.current.onPinch,onHover:t.callbacks.current.onHover,onModeChange:t.callbacks.current.onModeChange,config:t.gestureConfig,mode:t.gestureMode,appContext:t.appContext,onGestureModeToggle:()=>t.setGestureMode(t.gestureMode==="navigation"?"asl":"navigation"),gestureActiveArea:{minX:.7,maxX:1,minY:0,maxY:1},onGestureState:t.setGestureState,onASLResult:t.setASLResult,onError:t.setCameraError,onDebugInfo:t.setDebugInfo,onLandmarkData:t.setLandmarkData,onPerformance:t.setPerformanceMetrics})}),P&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-slate-900/95 backdrop-blur-sm",children:e.jsxs("div",{className:"flex flex-col items-center gap-5 text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 border-2 border-slate-700 border-t-blue-500 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-0 w-12 h-12 border-2 border-transparent border-b-emerald-500/50 rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"text-white/80 text-sm font-medium",children:H||"Connecting to models..."}),Q>0&&e.jsxs("p",{className:"text-white/40 text-xs tabular-nums",children:["Attempt ",Q," of 8"]})]}),e.jsxs("button",{onClick:Y,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white/70 hover:text-white bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-lg transition-all active:scale-95",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Now"]})]})}),e.jsx(js,{mode:i,setMode:tt,setHoveredCard:Ue,clearSelection:He,showDock:N,setShowDock:F,onOpenSettings:()=>me(!0),hasRightPanel:!0,gestureButtonSlot:e.jsx(n.Suspense,{fallback:null,children:e.jsx(or,{inHeader:!0,appContext:i,onStopGeneration:()=>{if(i==="chat"&&Ee.current){Ee.current.stopGeneration();return}on()},onSendMessage:r=>{if(i==="chat"&&Ee.current){Ee.current.sendMessage(r,!0);return}const l=i==="compare"||i==="council"||i==="roundtable"||i==="personality"?h:[];l.length>0&&Lt(r,{},l)},onScroll:r=>{if(i==="chat"&&Ee.current){Ee.current.scroll(r);return}E.current=$t(E.current+r),Pt()},onHover:(r,l)=>{const y=r*window.innerWidth,j=l*window.innerHeight,M=document.elementFromPoint(y,j);if(M){const D=M.closest("[data-gesture-mode-track]");if(D){const ke=D.getBoundingClientRect(),ln=y-ke.left,ht=ke.width,mt=Math.floor(ln/ht*5),Dt=["chat","compare","council","roundtable","personality"][Math.max(0,Math.min(4,mt))];Dt&&Dt!==i&&tt(Dt);return}const U=document.querySelector('[data-gesture-hovered="true"]'),q=M.closest('button, a, [role="button"], [data-clickable], .cursor-pointer, [onclick]')||M;q!==U?(U&&(U.removeAttribute("data-gesture-hovered"),U.dispatchEvent(new PointerEvent("pointerleave",{bubbles:!1,cancelable:!0})),U.dispatchEvent(new MouseEvent("mouseleave",{bubbles:!1,cancelable:!0})),U.dispatchEvent(new MouseEvent("mouseout",{bubbles:!0,cancelable:!0}))),q.setAttribute("data-gesture-hovered","true"),q.dispatchEvent(new PointerEvent("pointerenter",{bubbles:!1,cancelable:!0,clientX:y,clientY:j})),q.dispatchEvent(new PointerEvent("pointermove",{bubbles:!0,cancelable:!0,clientX:y,clientY:j})),q.dispatchEvent(new MouseEvent("mouseenter",{bubbles:!1,cancelable:!0,clientX:y,clientY:j})),q.dispatchEvent(new MouseEvent("mouseover",{bubbles:!0,cancelable:!0,clientX:y,clientY:j}))):q===U&&(q.dispatchEvent(new PointerEvent("pointermove",{bubbles:!0,cancelable:!0,clientX:y,clientY:j})),q.dispatchEvent(new MouseEvent("mousemove",{bubbles:!0,cancelable:!0,clientX:y,clientY:j})))}},onPinch:(r,l)=>{const y=r*window.innerWidth,j=l*window.innerHeight,M=document.elementFromPoint(y,j);if(M){const D=ke=>{ke.dispatchEvent(new PointerEvent("pointerdown",{bubbles:!0,cancelable:!0,clientX:y,clientY:j,pointerId:1,pointerType:"touch",isPrimary:!0})),ke.dispatchEvent(new PointerEvent("pointerup",{bubbles:!0,cancelable:!0,clientX:y,clientY:j,pointerId:1,pointerType:"touch",isPrimary:!0})),ke.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,clientX:y,clientY:j})),ke.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0,cancelable:!0,clientX:y,clientY:j})),ke.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,clientX:y,clientY:j}))},U=M.closest('button, a, [role="button"], [data-clickable], .cursor-pointer, [onclick]');D(U||M);const q=document.createElement("div");q.style.position="fixed",q.style.left=`${y}px`,q.style.top=`${j}px`,q.style.width="20px",q.style.height="20px",q.style.background="rgba(236, 72, 153, 0.5)",q.style.borderRadius="50%",q.style.transform="translate(-50%, -50%)",q.style.pointerEvents="none",q.style.zIndex="9999",document.body.appendChild(q),q.animate([{transform:"translate(-50%, -50%) scale(1)",opacity:1},{transform:"translate(-50%, -50%) scale(4)",opacity:0}],{duration:400}).onfinish=()=>q.remove()}},onModeChange:r=>{const l=["chat","compare","council","roundtable","personality"],y=l.indexOf(i);let j;r==="next"?j=(y+1)%l.length:j=(y-1+l.length)%l.length,tt(l[j])}})}),bgCyclerSlot:e.jsxs("div",{className:"flex items-center rounded-md bg-slate-800/50 backdrop-blur-md border border-slate-700/50 shadow-lg",children:[e.jsx("button",{onClick:()=>sn("prev"),className:"w-7 h-7 flex items-center justify-center text-slate-400 hover:text-slate-200 transition-colors active:scale-95 focus:outline-none focus-visible:outline-none border-r border-slate-700/50",title:"Previous background",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:()=>sn("next"),className:"w-7 h-7 flex items-center justify-center text-slate-400 hover:text-slate-200 transition-colors active:scale-95 focus:outline-none focus-visible:outline-none",title:"Next background",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})}),e.jsxs("div",{style:{paddingLeft:We&&i==="compare"&&Me==="left"?"28rem":"1.5rem",paddingRight:We&&i==="compare"&&Me==="right"?"28rem":"0"},children:[N&&e.jsx("div",{className:"fixed inset-0 z-[55] bg-black/10 backdrop-blur-[1px] transition-opacity duration-300",onClick:()=>F(!1)}),e.jsx(gs,{showDock:N,availableModels:w,allSelectedByType:p,totalModelsByType:c,handleDragStart:Fe,handleModelToggle:vt,handleAddGroup:vn,dockRef:Le}),i==="chat"&&e.jsxs("div",{className:"flex h-screen w-full relative z-[10]",children:[e.jsx("div",{className:`flex-1 relative ${t.isActive?"":"px-2 sm:px-6"} pt-20 pb-6`,children:e.jsx(tr,{children:e.jsx(n.Suspense,{fallback:e.jsxs("div",{className:"flex items-center justify-center h-full text-white/50 gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/20 border-t-white/60 rounded-full animate-spin"}),"Loading..."]}),children:e.jsx(ar,{ref:Ee,models:o,selectedModelId:u,onSelectModel:S,githubToken:ae,onOpenTopics:()=>te(!0),messages:Se,setMessages:_e,autoMode:$e,setAutoMode:C,autoModeScope:$,setAutoModeScope:_,currentResponse:z,setCurrentResponse:I,isGenerating:A,setIsGenerating:R,onModelUsed:S,onGestureOptionsChange:f})})})}),t.isActive?e.jsx(n.Suspense,{fallback:null,children:e.jsx(lr,{content:b,onSelect:r=>{var l;(l=Ee.current)==null||l.sendMessage(r,!0)}})}):e.jsx("div",{className:"transcript-panel w-[400px] xl:w-[480px] flex flex-col border-l border-white/5 bg-slate-900/20 backdrop-blur-sm z-40 relative h-full",children:e.jsx(n.Suspense,{fallback:null,children:e.jsx(hn,{history:[],models:o,mode:i,onSelectPrompt:r=>{var l;(l=Ee.current)==null||l.setInput(r)},onNewSession:()=>_e([]),className:"pt-24 pb-6 mask-fade-top"})})})]}),i!=="chat"&&e.jsxs("div",{className:"flex h-screen w-full relative",children:[e.jsx("div",{className:"relative flex-1 transition-all duration-300 flex flex-col pt-24",children:e.jsx("div",{ref:ye,onDragOver:le,onDragLeave:De,onDrop:bn,className:"relative w-full h-full z-10 transition-all duration-300",style:{position:"relative",display:"flex",alignItems:i==="compare"?"flex-start":"center",justifyContent:"center","--arena-offset-y":`${se.current}px`,transform:i==="council"||i==="roundtable"||i==="personality"?`translateY(calc(var(--arena-offset-y) - 50px)) scale(${re?1.02:1})`:`translateY(var(--arena-offset-y)) scale(${re?1.02:1})`,willChange:"transform",border:re?"2px dashed rgba(59, 130, 246, 0.4)":"2px dashed transparent",borderRadius:re?"24px":"0px",transition:"transform 0s linear",...i==="compare"?{minHeight:"300px",paddingBottom:"120px"}:i==="council"||i==="roundtable"||i==="personality"?{height:"100%",minHeight:"100%",overflow:"hidden"}:{height:"100%",minHeight:"100%",overflow:"hidden"},...re?{background:"rgba(59, 130, 246, 0.05)"}:{}},children:e.jsx(Hs,{mode:i,selectedModels:ne,gridCols:O,speaking:yt,selectedCardIds:Ce,setSelectedCardIds:it,setActiveInspectorId:Je,executionTimes:Ze,failedModels:Bn,cardRefs:lt,handlePointerDown:_n,dragState:Tn,handleModelToggle:vt,setContextMenu:Oe,suppressClickRef:et,getTailSnippet:Vn,hoveredCard:yn,setHoveredCard:Ue,layoutRadius:wt,getCirclePosition:Be,moderatorModel:Gn,moderatorId:g,orchestratorTransform:qn,orchestratorStatus:Fn,orchestratorPhaseLabel:Un,moderatorSynthesis:Mt,isSynthesizing:st,isGenerating:Ye,phaseLabel:Ut,linesTransitioning:Z,lastSelectedCardRef:jn,orchestratorAutoMode:An,orchestratorAutoScope:Pn,showOrchestratorMenu:Et,setShowOrchestratorMenu:Nt,setOrchestratorAutoMode:$n,setOrchestratorAutoScope:Dn,orchestratorMenuRef:Tt,availableModels:w,setModerator:m,councilWinnerId:(an=dt==null?void 0:dt[0])==null?void 0:an.model_id})})}),e.jsx("div",{className:"transcript-panel w-[400px] xl:w-[480px] flex flex-col border-l border-white/5 bg-slate-900/20 backdrop-blur-sm z-40 relative h-full",children:e.jsx(n.Suspense,{fallback:null,children:e.jsx(hn,{history:k,models:o,mode:i,onSelectPrompt:r=>{Pe.current&&(Pe.current.value=r,Pe.current.focus())},onNewSession:Ln,className:"pt-24 pb-6 mask-fade-top",phaseLabel:Ut,isGenerating:Ye,isSynthesizing:st,speakingCount:yt.size,totalParticipants:ne.length})})})]})]}),e.jsx(Qs,{rect:En}),We&&rn.length>0&&e.jsx(n.Suspense,{fallback:null,children:e.jsx(nr,{models:rn,activeId:We,onSelect:Je,onClose:He,speaking:yt,mode:i,moderatorId:g,councilAggregateRankings:dt,councilAnonymousReviews:On,showCouncilReviewerNames:ce,discussionTurnsByModel:zn,position:Me,onTogglePosition:()=>Te(r=>r==="left"?"right":"left")})}),ve&&e.jsx("div",{className:"fixed bottom-20 left-1/2 -translate-x-1/2 z-[200] animate-in slide-in-from-bottom-4 fade-in duration-300",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-xl bg-amber-500/10 border border-amber-500/30 backdrop-blur-md shadow-xl",children:[e.jsx("svg",{className:"w-5 h-5 text-amber-400 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("span",{className:"text-sm text-amber-100",children:ve}),e.jsx("button",{onClick:()=>{xe(null),me(!0)},className:"ml-2 px-3 py-1 text-xs font-medium text-amber-900 bg-amber-400 hover:bg-amber-300 rounded-md transition-colors",children:"Open Settings"}),e.jsx("button",{onClick:()=>xe(null),className:"ml-1 p-1 text-amber-400/60 hover:text-amber-400 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx(n.Suspense,{fallback:null,children:e.jsx(sr,{open:ie,onClose:()=>me(!1),token:ae,setToken:be,showCouncilReviewerNames:ce,setShowCouncilReviewerNames:Xe})}),e.jsx(n.Suspense,{fallback:null,children:e.jsx(rr,{open:Ne,onClose:()=>te(!1),onSelectPrompt:Nn})}),(i==="compare"||i==="council"||i==="roundtable"||i==="personality")&&e.jsx(ks,{inputRef:Pe,inputFocused:wn,setInputFocused:Yt,onSendMessage:Lt,onOpenTopics:()=>te(!0),isGenerating:Ye||st,onStop:on,placeholder:i==="compare"?void 0:i==="personality"?"Ask the personas...":"Steer the discussion...",className:"fixed bottom-0 left-0 right-[400px] xl:right-[480px] z-[100] pb-6 px-3 sm:px-4 flex justify-center items-end pointer-events-none transition-all duration-300",style:{paddingBottom:"calc(1.5rem + env(safe-area-inset-bottom))"}}),we&&e.jsx("div",{className:"fixed bg-slate-800 border border-slate-700 rounded-lg shadow-xl py-1 z-[200] min-w-[160px]",style:{top:we.y,left:we.x},onClick:r=>r.stopPropagation(),children:we.type==="background"?e.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-slate-200 hover:bg-slate-700 transition-colors flex items-center gap-2",onClick:()=>{F(!0),Oe(null)},children:[e.jsx("svg",{className:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Model"]}):we.modelId?e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-slate-200 hover:bg-slate-700 transition-colors flex items-center gap-2",onClick:()=>{Je(we.modelId),Oe(null)},children:[e.jsx("svg",{className:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Open"]}),i!=="compare"&&we.modelId!==g&&e.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-slate-200 hover:bg-slate-700 transition-colors flex items-center gap-2",onClick:()=>{m(we.modelId),Oe(null)},children:[e.jsx("svg",{className:"w-4 h-4 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),"Set as Orchestrator"]}),e.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-slate-700 transition-colors flex items-center gap-2",onClick:()=>{const r=we.modelId===g;if(vt(we.modelId),r&&i!=="compare"){const l=h.filter(y=>y!==we.modelId);l.length>0?m(l[0]):m("")}Oe(null)},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Remove"]})]}):null})]})}function dr(){return e.jsx(Js,{children:e.jsx(ur,{})})}ls.createRoot(document.getElementById("root")).render(e.jsx(cs.StrictMode,{children:e.jsx(dr,{})}));export{gt as C,gr as M,ks as P,Qs as S,Wt as T,vr as a,br as b,ws as c,xr as g,er as u};
